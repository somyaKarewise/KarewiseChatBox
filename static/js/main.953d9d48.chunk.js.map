{"version":3,"sources":["Register.js","Login.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/util/enums.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatIncomingCall/controller.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/resources/theme.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatAvatar/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatAvatar/resources/1px.png","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatAvatar/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatBackdrop/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatBackdrop/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatBadgeCount/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatBadgeCount/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatUserPresence/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatUserPresence/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/resources/localization/translator.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatToastNotification/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatToastNotification/resources/close-circle-filled.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatToastNotification/resources/checkmark-filled.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatToastNotification/resources/warning-filled.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatToastNotification/resources/info-filled.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatToastNotification/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatConfirmDialog/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatConfirmDialog/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/util/UIKitSettings.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/util/FeatureRestriction/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/util/CometChatContext.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/util/Storage.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatCallScreen/strings.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatCallScreen/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatCallScreen/resources/reduce-size.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatCallScreen/resources/increase-size.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatCallScreen/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/util/SoundManager.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatIncomingCall/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatIncomingCall/resources/incoming-call.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatIncomingCall/resources/incoming-video-call.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatIncomingCall/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatOutgoingCall/controller.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatOutgoingCall/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatOutgoingCall/resources/end-call.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatOutgoingCall/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatIncomingDirectCall/controller.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatIncomingDirectCall/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatIncomingDirectCall/resources/incoming-video-call.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatIncomingDirectCall/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/util/common.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Calls/CometChatOutgoingDirectCall/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Chats/CometChatConversationList/controller.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/util/CometChatEvent.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Chats/CometChatConversationList/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Chats/CometChatConversationList/resources/back.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Chats/CometChatConversationList/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Chats/CometChatConversationListActions/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Chats/CometChatConversationListActions/resources/progress.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Chats/CometChatConversationListActions/resources/delete.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Chats/CometChatConversationListActions/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Chats/CometChatConversationListItem/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Chats/CometChatConversationListItem/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatSmartReplyPreview/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatSmartReplyPreview/resources/close.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatSmartReplyPreview/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatStickerKeyboard/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatStickerKeyboard/resources/close.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatStickerKeyboard/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatMessageReactions/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatMessageReactions/resources/reactions.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatMessageReactions/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatCreatePoll/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatCreatePoll/resources/creating.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatCreatePoll/resources/add-circle-filled.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatCreatePoll/resources/close.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatCreatePoll/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatCreatePollOptions/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatCreatePollOptions/resources/remove.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatCreatePollOptions/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatReceiverDocumentBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatReceiverDocumentBubble/resources/collaborative-document.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatReceiverDocumentBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatReceiverPollMessageBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatReceiverPollMessageBubble/resources/checkmark.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatReceiverPollMessageBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatReceiverStickerMessageBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatReceiverStickerMessageBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatReceiverWhiteboardBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatReceiverWhiteboardBubble/resources/collaborative-whiteboard.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatReceiverWhiteboardBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatSenderDocumentBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatSenderDocumentBubble/resources/collaborative-document.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatSenderDocumentBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatSenderPollMessageBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatSenderPollMessageBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatSenderStickerBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatSenderStickerBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatSenderWhiteboardBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatSenderWhiteboardBubble/resources/collaborative-whiteboard.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/Extensions/CometChatSenderWhiteboardBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatActionMessageBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatActionMessageBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatDeleteMessageBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatDeleteMessageBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatEmojiKeyboard/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatEmojiKeyboard/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatImageViewer/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatImageViewer/resources/ring.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatImageViewer/resources/close.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatImageViewer/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatLinkPreview/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatLinkPreview/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatLiveReactions/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatLiveReactions/resources/heart.png","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatLiveReactions/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageActions/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageActions/resources/threaded-message.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageActions/resources/delete.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageActions/resources/edit.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageActions/resources/reactions.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageActions/resources/message-translate.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageActions/resources/send-message-in-private.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageActions/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageComposer/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageComposer/resources/add-circle-filled.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageComposer/resources/video.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageComposer/resources/audio-file.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageComposer/resources/file-upload.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageComposer/resources/image.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageComposer/resources/emoji.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageComposer/resources/send-message.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageComposer/resources/polls.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageComposer/resources/stickers.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageComposer/resources/close.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageComposer/resources/collaborative-document.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageComposer/resources/collaborative-whiteboard.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageComposer/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageComposer/resources/heart.png","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageHeader/controller.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageHeader/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageHeader/resources/menu.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageHeader/resources/audio-call.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageHeader/resources/video-call.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageHeader/resources/info.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageHeader/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageList/MessageFilter.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageList/controller.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageList/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageList/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatSharedMediaView/controller.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatSharedMediaView/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatSharedMediaView/resources/file-upload.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Shared/CometChatSharedMediaView/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Users/CometChatUserDetails/controller.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Users/CometChatUserDetails/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Users/CometChatUserDetails/resources/back.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Users/CometChatUserDetails/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Users/CometChatUserList/controller.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Users/CometChatUserList/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Users/CometChatUserList/resources/search.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Users/CometChatUserList/resources/back.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Users/CometChatUserList/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Users/CometChatUserListItem/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Users/CometChatUserListItem/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Users/CometChatUserListWithMessages/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Users/CometChatUserListWithMessages/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatCreateGroup/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatCreateGroup/resources/creating.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatCreateGroup/resources/close.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatCreateGroup/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatGroupDetails/controller.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatGroupDetails/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatGroupDetails/resources/back.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatGroupDetails/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatGroupList/controller.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatGroupList/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatGroupList/resources/search.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatGroupList/resources/back.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatGroupList/resources/create.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatGroupList/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatGroupListItem/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatGroupListItem/resources/password-protected-group.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatGroupListItem/resources/private-group.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatGroupListItem/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatViewGroupMemberList/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatViewGroupMemberList/resources/close.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatViewGroupMemberList/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatViewGroupMemberListItem/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatViewGroupMemberListItem/resources/edit.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatViewGroupMemberListItem/resources/done.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatViewGroupMemberListItem/resources/close.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatViewGroupMemberListItem/resources/ban-member.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatViewGroupMemberListItem/resources/delete.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatViewGroupMemberListItem/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatAddGroupMemberList/controller.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatAddGroupMemberList/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatAddGroupMemberList/resources/adding.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatAddGroupMemberList/resources/search.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatAddGroupMemberList/resources/close.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatAddGroupMemberList/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatAddGroupMemberListItem/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatAddGroupMemberListItem/resources/group-member-unselect.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatAddGroupMemberListItem/resources/group-member-select.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatAddGroupMemberListItem/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatBanGroupMemberList/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatBanGroupMemberList/resources/close.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatBanGroupMemberList/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatBanGroupMemberListItem/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatBanGroupMemberListItem/resources/ban-member.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatBanGroupMemberListItem/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatGroupListWithMessages/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatGroupListWithMessages/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatTransferOwnershipMemberList/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatTransferOwnershipMemberList/resources/close.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatTransferOwnershipMemberList/resources/transferring.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatTransferOwnershipMemberList/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatTransferOwnershipMemberListItem/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatTransferOwnershipMemberListItem/resources/group-member-unselect.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatTransferOwnershipMemberListItem/resources/group-member-select.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Groups/CometChatTransferOwnershipMemberListItem/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessages/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessages/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageThread/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageThread/resources/close.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatMessageThread/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReadReceipt/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReadReceipt/resources/message-read.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReadReceipt/resources/message-delivered.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReadReceipt/resources/message-sent.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReadReceipt/resources/wait.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReadReceipt/resources/warning-small.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReadReceipt/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReceiverAudioMessageBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReceiverAudioMessageBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReceiverDirectCallBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReceiverDirectCallBubble/resources/video-call.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReceiverDirectCallBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReceiverFileMessageBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReceiverFileMessageBubble/resources/file-upload.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReceiverFileMessageBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReceiverImageMessageBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReceiverImageMessageBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReceiverImageMessageBubble/resources/1px.png","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReceiverTextMessageBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReceiverTextMessageBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReceiverVideoMessageBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatReceiverVideoMessageBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatSenderAudioMessageBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatSenderAudioMessageBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatSenderDirectCallBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatSenderDirectCallBubble/resources/video-call.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatSenderDirectCallBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatSenderFileMessageBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatSenderFileMessageBubble/resources/file-upload.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatSenderFileMessageBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatSenderImageMessageBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatSenderImageMessageBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatSenderImageMessageBubble/resources/1px.png","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatSenderTextMessageBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatSenderTextMessageBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatSenderVideoMessageBubble/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatSenderVideoMessageBubble/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatThreadedMessageReplyCount/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatThreadedMessageReplyCount/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatBlockedUser/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Messages/CometChatBlockedUser/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Chats/CometChatConversationListWithMessages/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/Chats/CometChatConversationListWithMessages/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/UserProfile/CometChatUserProfile/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/UserProfile/CometChatUserProfile/resources/notify.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/UserProfile/CometChatUserProfile/resources/privacy.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/UserProfile/CometChatUserProfile/resources/chats.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/UserProfile/CometChatUserProfile/resources/help.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/UserProfile/CometChatUserProfile/resources/warning.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/UserProfile/CometChatUserProfile/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/CometChatUI/CometChatNavBar/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/CometChatUI/CometChatNavBar/resources/chats.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/CometChatUI/CometChatNavBar/resources/users.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/CometChatUI/CometChatNavBar/resources/groups.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/CometChatUI/CometChatNavBar/resources/more.svg","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/CometChatUI/CometChatNavBar/index.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/CometChatUI/style.js","cometchat-pro-react-ui-kit/CometChatWorkspace/src/components/CometChatUI/index.js","App.js","reportWebVitals.js","index.js"],"names":["Register","props","useState","phone","setPhone","userName","setUserName","setUser","id","onSubmit","e","preventDefault","uid","name","user","CometChat","User","setName","createUser","then","console","log","error","type","required","value","onChange","target","UID","login","TEXT_MESSAGE_RECEIVED","MEDIA_MESSAGE_RECEIVED","CUSTOM_MESSAGE_RECEIVED","MESSAGE_DELIVERED","MESSAGE_READ","MESSAGE_DELETED","MESSAGE_EDITED","TRANSIENT_MESSAGE_RECEIVED","INCOMING_CALL_RECEIVED","OUTGOING_CALL_ACCEPTED","OUTGOING_CALL_REJECTED","INCOMING_CALL_CANCELLED","GROUP_MEMBER_SCOPE_CHANGED","GROUP_MEMBER_KICKED","GROUP_MEMBER_BANNED","GROUP_MEMBER_UNBANNED","GROUP_MEMBER_ADDED","GROUP_MEMBER_LEFT","GROUP_MEMBER_JOINED","USER_ONLINE","USER_OFFLINE","TYPING_STARTED","TYPING_ENDED","CUSTOM_TYPE_POLL","CUSTOM_TYPE_STICKER","CUSTOM_TYPE_DOCUMENT","CUSTOM_TYPE_WHITEBOARD","CUSTOM_TYPE_MEETING","CONSTANTS","LOCALE","ACTIVECALL","MAX_MESSAGE_COUNT","METADATA_TYPE_LIVEREACTION","LIVE_REACTIONS","heart","thumbsup","clap","wink","MESSAGES_COMPONENT","EMBEDDED_COMPONENT","OUTGOING_DEFAULT_CALLING","INCOMING_DEFAULT_CALLING","INCOMING_DIRECT_CALLING","OUTGOING_DIRECT_CALLING","AUDIO","INCOMING_MESSAGE","INCOMING_OTHER_MESSAGE","OUTGOING_MESSAGE","INCOMING_CALL","OUTGOING_CALL","ERROR_CODES","ERR_CHAT_API_FAILURE","CALLS","ONGOING_CALL","ONGOING_CALL_SAME_GROUP","ONGOING_CALL_DIFF_GROUP","GROUPS","OWNER","LIVE_REACTION_INTERVAL","FILE_METADATA","ACTIONS","MESSAGE_SENT","MESSAGE_COMPOSED","ERROR_IN_SENDING_MESSAGE","ACCEPT_DIRECT_CALL","JOIN_DIRECT_CALL","START_DIRECT_CALL","DIRECT_CALL_ENDED","POLL_CREATED","GROUP_DELETED","GROUP_LEFT","GROUP_CREATED","VIEW_DETAIL","VIEW_THREADED_MESSAGE","CLOSE_THREADED_MESSAGE","TOGGLE_SIDEBAR","ON_MESSAGE_EDITED","ON_MESSAGE_DELETED","ON_MESSAGE_READ_DELIVERED","DELETE_MESSAGE","EDIT_MESSAGE","CLOSE_GROUP_DETAIL","CLOSE_USER_DETAIL","VIEW_ORIGINAL_IMAGE","FETCH_GROUP_MEMBERS","SCOPECHANGE_GROUPMEMBER_SUCCESS","BAN_GROUP_MEMBER","KICK_GROUP_MEMBER","BAN_GROUPMEMBER_SUCCESS","KICK_GROUPMEMBER_SUCCESS","CHANGE_SCOPE_GROUP_MEMBER","UNBAN_GROUP_MEMBER","ADD_GROUP_MEMBER_SUCCESS","FETCH_BANNED_GROUP_MEMBERS","UNBAN_GROUP_MEMBER_SUCCESS","REACT_TO_MESSAGE","INITIATE_VIDEO_CALL","INITIATE_AUDIO_CALL","CHANGE_TAB","ITEM_CLICKED","THREAD_MESSAGE_COMPOSED","SEND_LIVE_REACTION","STOP_LIVE_REACTION","SHOW_LIVE_REACTION","CLEAR_EDIT_PREVIEW","MESSAGE_RECEIVED","MESSAGES_INITIAL_FETCH","MESSAGES_FETCHED","REFRESHING_MESSAGES","MESSAGES_REFRESHED","NEW_MESSAGES","CLEAR_UNREAD_MESSAGES","START_AUDIO_CALL","START_VIDEO_CALL","OUTGOING_CALL_CANCELLED","INCOMING_CALL_ACCEPTED","INCOMING_CALL_REJECTED","CALL_ENDED","USER_JOINED_CALL","USER_LEFT_CALL","DELETE_CONVERSATION","CONVERSATION_DELETED","SEND_STICKER","CLOSE_STICKER_KEYBOARD","ERROR","INFO","TRANSLATE_MESSAGE","EVENTS","KEYS","CallAlertManager","callListenerId","Date","getTime","callback","addCallListener","this","CallListener","onIncomingCallReceived","call","enums","onIncomingCallCancelled","onOutgoingCallAccepted","removeCallListener","theme","fontFamily","fontSize","primaryColor","secondaryTextColor","color","primary","secondary","darkSecondary","search","tertiary","grey","helpText","blue","white","red","borderColor","backgroundColor","lightGrey","darkGrey","callScreenGrey","silver","breakPoints","CometChatAvatar","setAvatarImage","image","trim","length","getImage","Object","keys","hasOwnProperty","avatarImage","avatar","char","charAt","toUpperCase","generateAvatar","group","icon","guid","img","Image","src","onload","_isMounted","setState","generator","data","canvas","document","createElement","context","getContext","width","height","fillStyle","str","hash","i","charCodeAt","colour","toString","substr","stringToColour","fillRect","font","textAlign","textBaseline","fillText","toDataURL","imgRef","React","createRef","state","prevProps","borderWidth","borderStyle","cornerRadius","css","overflow","display","alt","style","borderRadius","ref","el","Component","defaultProps","backdropStyle","zIndex","opacity","position","top","left","cursor","transition","CometChatBackdrop","show","className","onClick","clicked","badgeStyle","fontWeight","lineHeight","marginLeft","padding","marginRight","CometChatBadgeCount","badgeCount","count","presenceStyle","presenceStatus","status","float","CometChatUserPresence","useContext","CometChatContext","presence","setPresence","useEffect","FeatureRestriction","isUserPresenceEnabled","response","catch","translations","ar","de","en","es","fr","hi","ms","pt","ru","zh","sv","lt","hu","Translator","language","rtlLanguages","includes","languageDb","defaultLanguage","key","getLanguage","localStorage","getItem","setLanguage","item","setItem","getBrowserLanguage","navigator","languages","userLanguage","getDefaultLanguage","savedLanguage","browserLanguageCode","toLowerCase","browserLanguage","indexOf","split","notificationStyle","backgroundColorProp","pointerEvents","marginBottom","minHeight","boxShadow","backgroundPosition","backgroundRepeat","flexDirection","justifyContent","alignItems","boxSizing","iconStyle","mask","CometChatToastNotification","componentWillUnmount","clearAutoDismiss","setInfo","message","infoIcon","setAutoDismiss","setError","errorIcon","setSuccess","successIcon","setWarning","warningIcon","autoDelete","interval","setTimeout","deleteToast","dismissTime","clearTimeout","messageClassName","types","iconClassName","toastIcon","flexShrink","maxWidth","title","translate","lang","keyframes","transform","margin","border","outline","closeIcon","alertButtonStyle","CometChatConfirmDialog","confirmButtonText","cancelButtonText","Fragment","close","right","UIKitSettings","setCustomJS","customJS","setCustomCSS","customCSS","setTabs","tabList","tabs","setUserSettings","userSettings","setCalls","calls","setUsers","users","setChats","chats","setGroups","groups","setChatListMode","option","chatListFilterKey","returnMatchedKey","chatListFilterOptions","chatListMode","setUserListMode","userListFilterKey","userListFilterOptions","userListMode","setGroupListMode","setUserVideoCall","userVideoCall","setGroupVideoCall","groupVideoCall","setUserAudioCall","userAudioCall","setGroupAudioCall","groupAudioCall","setEditMessage","editMessage","setSendMessageInOneOnOne","sendMessageInOneOnOne","setSendMessageInGroup","sendMessageInGroup","setJoinOrLeaveGroup","joinOrLeaveGroup","setBlockUser","blockUser","setSendEmojis","sendEmojis","setSendEmojisInLargerSize","sendEmojisInLargerSize","setSendGifs","sendGifs","setShareCopyForwardMessage","shareCopyForwardMessage","setSendFiles","sendFiles","setSendPhotoVideos","sendPhotoVideos","setViewShareMedia","viewShareMedia","setEnableSoundForMessages","enableSoundForMessages","setEnableSoundForCalls","enableSoundForCalls","setSendStickers","sendStickers","setViewGroupMembers","viewGroupMembers","setCallNotifications","callNotifications","setAllowDeleteGroup","allowDeleteGroup","setKickMember","kickMember","setBanMember","banMember","setAllowPromoteDemoteMembers","allowPromoteDemoteMembers","setAllowAddMembers","allowAddMembers","setShareLocation","shareLocation","setJoinLeaveNotifications","joinLeaveNotifications","setSendVoiceNotes","sendVoiceNotes","setMessageTranslation","messageTranslation","setGroupCreation","groupCreation","setSendTypingIndicator","sendTypingIndicator","setShowUserPresence","showUserPresence","setDeleteMessage","deleteMessage","setThreadedChats","threadedChats","setReplyingToMessage","replyingToMessage","setShowReadDeliveryReceipts","showReadDeliveryReceipts","setHideDeletedMessages","hideDeletedMessages","setEmailReplies","emailReplies","setSendMessageReaction","sendMessageReaction","setCollaborativeWhiteboard","collaborativeWhiteboard","setCollaborativeDocument","collaborativeDocument","setPolls","polls","setSendLiveReaction","sendLiveReaction","setPublicGroup","publicGroup","setPrivateGroup","privateGroup","setPasswordGroup","passwordGroup","setAllowModeratorToDeleteMemberMessages","allowModeratorToDeleteMemberMessages","setUnreadCount","unreadCount","setSmartReplies","smartReplies","setSearchUsers","searchUsers","setSearchGroups","searchGroups","setSearchMessages","searchMessages","setCallRecording","callRecording","setCallLiveStreaming","callLiveStreaming","setCallTranscription","callTranscription","setThumbnailGeneration","thumbnailGeneration","setLinkPreview","linkPreview","setSaveMessages","saveMessages","setPinMessages","pinMessages","setRichMediaPreview","richMediaPreview","setVoiceTranscription","voiceTranscription","setMentions","mentions","setXssFilter","xssFilter","setProfanityFilter","profanityFilter","setImageModeration","imageModeration","setDataMasking","dataMasking","setMalwareScanner","malwareScanner","setSentimentAnalysis","sentimentAnalysis","setInflightMessageModeration","inflightMessageModeration","setMessageHistory","messageHistory","setViewProfile","viewProfile","setMessageInPrivate","messageInPrivate","setShowCallRecordingOption","showCallRecordingOption","setChatWindow","chatWindow","matchWith","optionToMatch","entries","foregroundColor","overrideSystemBackgroundColor","window","groupInMode","groupListFilterOptions","values","searchChats","setGroupInQnaModeByModerators","highlightMessageFromModerators","ALL","NONE","FRIENDS","PUBLIC","PASSWORD","PUBLIC_AND_PASSWORD","USERS","USERS_AND_GROUPS","isRecentChatListEnabled","Promise","resolve","isGroupListEnabled","isUserSettingsEnabled","isEditMessageEnabled","isQNAModeEnabled","isHighlightMessagesEnabled","isJoinLeaveGroupsEnabled","isLargerSizeEmojisEnabled","isGifsEnabled","isShareCopyForwardMessageEnabled","isSharedMediaEnabled","isMessagesSoundEnabled","isCallsSoundEnabled","isViewingGroupMembersEnabled","isCallActionMessagesEnabled","isGroupDeletionEnabled","isChangingGroupMemberScopeEnabled","isAddingGroupMembersEnabled","isLocationSharingEnabled","isGroupActionMessagesEnabled","isGroupCreationEnabled","isDeleteMessageEnabled","isHideDeletedMessagesEnabled","isViewProfileEnabled","isMessageInPrivateEnabled","isCallListEnabled","isFeatureEnabled","calls_enabled","isUserListEnabled","chat_users_list_enabled","isOneOnOneVideoCallEnabled","call_one_on_one_video_enabled","isGroupVideoCallEnabled","call_groups_video_enabled","isOneOnOneAudioCallEnabled","call_one_on_one_audio_enabled","isGroupAudioCallEnabled","call_groups_audio_enabled","isOneOnOneChatEnabled","chat_one_on_one_enabled","isGroupChatEnabled","chat_groups_enabled","isDeleteMemberMessageEnabled","moderation_groups_moderators_enabled","isBlockUserEnabled","moderation_users_block_enabled","isEmojisEnabled","emojis_enabled","isFilesEnabled","chat_messages_media_enabled","isPhotosVideosEnabled","isKickingGroupMembersEnabled","moderation_groups_kick_enabled","isBanningGroupMembersEnabled","moderation_groups_ban_enabled","isVoiceNotesEnabled","chat_voice_notes_enabled","isTypingIndicatorsEnabled","chat_typing_indicator_enabled","chat_users_presence_enabled","isThreadedMessagesEnabled","chat_messages_threads_enabled","isMessageRepliesEnabled","chat_messages_replies_enabled","isDeliveryReceiptsEnabled","chat_messages_receipts_enabled","isLiveReactionsEnabled","live_reactions_enabled","isPublicGroupEnabled","chat_groups_public_enabled","isPrivateGroupEnabled","chat_groups_private_enabled","isPasswordGroupEnabled","chat_groups_password_enabled","isUnreadCountEnabled","chat_messages_unread_count_enabled","isUserSearchEnabled","chat_users_search_enabled","isGroupSearchEnabled","chat_groups_search_enabled","isMessageSearchEnabled","chat_messages_search_enabled","isCallRecordingEnabled","call_recording_enabled","isCallLiveStreamingEnabled","call_live_streaming_enabled","isCallTranscriptEnabled","call_transcript_enabled","isMessageHistoryEnabled","chat_messages_history_enabled","isMessageTranslationEnabled","message_translation_enabled","isExtensionEnabled","isReactionsEnabled","reactions_enabled","reactions","isCollaborativeWhiteBoardEnabled","collaboration_whiteboard_enabled","collaborationWhiteboard","isCollaborativeDocumentEnabled","collaboration_document_enabled","collaborationDocument","isStickersEnabled","stickers_enabled","sticker","isEmailRepliesEnabled","email_replies_enabled","isPollsEnabled","polls_enabled","isSmartRepliesEnabled","smart_replies_enabled","isThumbnailGenerationEnabled","thumbnail_generation_enabled","isLinkPreviewEnabled","link_preview_enabled","isSaveMessagesEnabled","messages_saved_enabled","isPinMessagesEnabled","messages_pinned_enabled","isRichMediaPreviewEnabled","rich_media_preview_enabled","isVoiceTranscriptionEnabled","voice_transcription_enabled","isMentionsEnabled","mentions_enabled","isXssFilterEnabled","moderation_xss_filter_enabled","isProfanityFilterEnabled","moderation_profanity_filter_enabled","isImageModerationEnabled","moderation_image_moderation_enabled","isDataMaskingEnabled","moderation_data_masking_enabled","isMalwareScannerEnabled","moderation_malware_scanner_enabled","isSentimentAnalysisEnabled","moderation_sentiment_analysis_enabled","chat_messages_custom_enabled","moderation_inflight_message_moderation_enabled","emojis","extensionKey","createContext","CometChatContextProvider","setRoles","roles","GROUP_MEMBER_SCOPE","ADMIN","MODERATOR","PARTICIPANT","getUser","reject","code","getGroup","hasJoined","groupType","password","GROUP_TYPE","promptMessage","prompt","joinGroup","setToastMessage","getLoggedinUser","timer","loggedInUser","isInitialized","isUserLoggedIn","setInterval","clearInterval","clearGroupMembers","groupMembers","groupAdmins","groupModerators","bannedGroupMembers","setAllGroupMembers","updateGroupMembers","setGroupMembers","setGroupAdmins","setGroupModerators","setBannedGroupMembers","bannedMembers","updateBannedGroupMembers","setCallInProgress","callType","callInProgress","setType","setTypeAndItem","setDeletedGroupId","deletedGroupId","setLeftGroupId","leftGroupId","setLastMessage","lastMessage","setClearedUnreadMessages","flag","clearedUnreadMessages","setDirectCallCustomMessage","event","directCallCustomMessage","directCallCustomMessageAction","checkIfDirectCallIsOngoing","output","customData","sessionID","checkIfCallIsOngoing","getActiveCallSessionID","sessionId","hasKeyValue","undefined","settings","featureRestriction","toastMessage","unreadMessages","toastRef","ACTION_TYPE","TYPE_USER","errorCode","TYPE_GROUP","_component","Provider","toastNotificationPos","children","Storage","attachChangeDetection","addEventListener","detachChangeDetection","removeEventListener","storageKey","storageValue","JSON","stringify","parse","removeItem","clear","LocalizedString","SELECT_VIDEO_SOURCE","SELECT_INPUT_AUDIO_SOURCE","SELECT_OUTPUT_AUDIO_SOURCE","SELECT_MODE","CALL_RECORDING_STARTED_MSG","USER_JOINED_CALL_MSG","CALL_RECORDING_ENDED_MSG","USER_LEFT_CALL_MSG","CAMERA_ERROR_MSG","MIC_ERROR_MSG","CAMERA_MIC_ERROR_MSG","RECORDING_TEXT","TRYING_TO_START_RECORDING_TEXT","JOINING_TEXT","UN_MUTE_AUDIO_TEXT","MUTE_AUDIO_TEXT","END_CALL_TEXT","START_RECORDING_TEXT","STOP_RECORDING_TEXT","START_SCREEN_SHARE_TEXT","STOP_SCREEN_SHARE_TEXT","MUTE_VIDEO_TEXT","UN_MUTE_VIDEO_TEXT","SELECT_LAYOUT_HEADER","NO_OF_USER_IN_TILE_TEXT","CHANGE_AUDIO_SOURCE","CHANGE_AUDIO_SOURCE_DESC","AUDIO_INPUT_DEVICE_LABEL","NO_AUDIO_DEVICE_AVAILABLE","AUDIO_OUTPUT_DEVICE_LABEL","CHANGE_VIDEO_SOURCE","CHANGE_VIDEO_SOURCE_DESC","VIDEO_DEVICES_LABEL","FULL_SCREEN","EXIT_FULL_SCREEN","CHANGE_LAYOUT","AUDIO_SETTING","VIDEO_SETTING","USER_LIST","MORE","MUTE_USER","PIN_USER","UNPIN_USER","UN_MUTE_USER","MUTED","YOU_HAVE_BLOCKED","NOT_POSSIBLE_TO_SEND_MESSAGES","IOS_BROWSER_WARNING","PEOPLE_TEXT","SPOTLIGHT_DETAIL_TEXT1","SPOTLIGHT_DETAIL_TEXT2","SPOTLIGHT_DETAIL_TEXT3","SPOTLIGHT_DETAIL_TEXT4","callScreenWrapperStyle","fadeAnimation","bottom","animation","callScreenHeaderStyle","cursorStyle","maximized","callScreenResizerStyle","backgroundStyle","clipPath","background","CometChatCallScreen","enableDragging","checkIfCallScreenIsMaximized","dragging","rel","x","pageX","y","pageY","toggleCallScreenBackground","toggleCallScreenInnerBackground","onmousemove","startDragging","onmouseup","disableDragging","elem","callScreenEl","current","dialogWidth","clientWidth","dialogHeight","clientHeight","windowWidth","innerWidth","windowHeight","innerHeight","checkIfCallScreenIsMinimized","minimumWidth","minWidth","minimumHeight","Math","min","max","stopPropagation","initResize","element","startX","startY","startWidth","parseFloat","getComputedStyle","getPropertyValue","replace","startHeight","parseInt","startResize","stopResize","minHWidth","maxHeight","setDimensionOfCallScreenInnerBackground","callScreenBackgroundEl","callScreenInnerBackgroundEl","setPositionOfCallScreenInnerBackground","minimize","setSizingAndPostionOfCallScreen","maximize","toggle","startDirectCall","showRecordingButton","callSettings","CallSettingsBuilder","enableDefaultLayout","setSessionID","setIsAudioOnlyCall","setLocalizedStringObject","build","callScreenFrame","startCall","OngoingCallListener","onCallEnded","actionGenerated","onError","startDefaultCall","getSessionId","CALL_TYPE","setMode","CALL_MODE","DEFAULT","onUserJoined","callInitiator","callMessage","category","action","callReceiver","receiverId","receiverType","sentAt","onUserLeft","endedCall","resizeText","iconView","minimizeIcon","maximizeIcon","onMouseDown","userSelect","PureComponent","contextType","SoundManager","incomingCallAudio","outgoingCallAudio","incomingMessageAudio","outgoingMessageAudio","incomingOtherMessageAudio","play","onIncomingCall","onOutgoingCall","onIncomingMessage","onIncomingOtherMessage","onOutgoingMessage","pause","pauseIncomingCall","pauseOutgoingCall","Audio","default","playMessageAlert","messageAudio","currentTime","playCallAlert","callAudio","loop","incomingCallWrapperStyle","slideDown","positionValue","leftPos","rightPos","topPos","bottomPos","zIndexValue","widgetsettings","dockedview","launched","alignment","widgetWidth","widgetHeight","ButtonStyle","callIconStyle","CometChatIncomingCall","adjustFontSize","callButtonRef","reduceFontSize","buttonNodeList","querySelectorAll","forEach","buttonNode","scrollWidth","callScreenUpdated","incomingCallReceived","incomingCallCancelled","outgoingCallAccepted","incomingCall","sender","rejectCall","callStatus","isCallActive","CALL_STATUS","BUSY","REJECTED","rejectedCall","acceptCall","checkForActiveCallAndEndCall","success","endCall","actionHandler","logStorageChange","newValue","oldValue","attachListeners","callScreen","incomingCallAlert","audioCallIcon","VIDEO","videoCallIcon","textOverflow","whiteSpace","textTransform","CallScreenManager","onOutgoingCallRejected","styles","CometChatOutgoingCall","outgoingCallRejected","outgoingCallScreen","errorScreen","errorMessage","clearCallInProgress","cancelCall","CANCELLED","removeListeners","receiver","callIcon","messageAlertManager","msgListenerId","addMessageListener","MessageListener","onCustomMessageReceived","customMessage","removeMessageListener","CometChatIncomingDirectCall","messageListenerCallback","joinCall","ignoreCall","MessageAlertManager","wordBoundary","emailPattern","RegExp","urlPattern","phoneNumPattern","linkify","outputStr","results","match","url","normalizedURL","startsWith","checkMessageForExtensionsData","injectedObject","metadata","extensionsObject","getMessageFileMetadata","metadataKey","fileMetadata","ID","random","getUnixTimestamp","round","dateDiffInDays","a","b","utc1","UTC","getFullYear","getMonth","getDate","utc2","floor","CometChatOutgoingDirectCall","prepareCustomMessageData","sendCustomMessage","RECEIVER_TYPE","GROUP","conversationId","CustomMessage","setSender","setReceiver","setConversationId","_composedAt","_id","newMessageObj","callScreenRef","ConversationListManager","conversationRequest","conversationListenerId","userListenerId","groupListenerId","ConversationsRequestBuilder","setConversationType","setLimit","fetchNext","addUserListener","UserListener","onUserOnline","onlineUser","onUserOffline","offlineUser","addGroupListener","GroupListener","onGroupMemberScopeChanged","changedUser","newScope","oldScope","changedGroup","onGroupMemberKicked","kickedUser","kickedBy","kickedFrom","onGroupMemberBanned","bannedUser","bannedBy","bannedFrom","onGroupMemberUnbanned","unbannedUser","unbannedBy","unbannedFrom","onMemberAddedToGroup","userAdded","userAddedBy","userAddedIn","onGroupMemberLeft","leavingUser","onGroupMemberJoined","joinedUser","joinedGroup","onTextMessageReceived","textMessage","onMediaMessageReceived","mediaMessage","onMessageDeleted","deletedMessage","onMessageEdited","editedMessage","onMessagesRead","messageReceipt","removeUserListener","removeGroupListener","CometChatEvent","_triggers","push","params","chatsWrapperStyle","_parent","chatsHeaderStyle","borderBottom","chatsHeaderCloseStyle","mq","chatsHeaderTitleStyle","enableCloseMenu","CometChatConversationList","incrementUnreadCount","filterConversation","conversationlist","find","c","conversationType","USER","conversationWith","updateLastMessage","conversationList","conversationKey","findIndex","conversationObj","newConversationObj","splice","unshift","newConversation","Conversation","setConversationWith","setUnreadMessageCount","updateUnreadCount","clearUnreadCount","unreadMessageCount","conversationCallback","options","updateUser","markMessageAsDelivered","conversationUpdated","markAsDelivered","updateConversation","conversationEditedDeleted","updateGroupMemberAdded","updateGroupMemberRemoved","updateGroupMemberScopeChanged","updateGroupMemberChanged","conversationWithObj","getStatus","hideGroupActionMessages","playAudio","CATEGORY_ACTION","TYPE_GROUP_MEMBER","getReceiverType","getSender","getReceiverId","conversation","messageId","makeConversation","CometChatHelper","getConversationFromMessage","makeUnreadMessageCount","shouldIncrementCount","incomingMessage","CATEGORY_MESSAGE","makeLastMessage","newMessage","assign","lastMessageObj","newLastMessageObj","membersCount","actionFor","newConversationWithObj","scope","handleScroll","currentTarget","scrollHeight","scrollTop","getConversations","handleClick","onItemClick","handleMenuClose","fetchNextConversation","decoratorMessage","conversations","eachConversation","newUnreadMessageCount","updatedConversation","contextProviderRef","conversationDeleted","deleteConversation","showConfirmDialog","conversationToBeDeleted","onDeleteConfirm","optionSelected","deletedConversation","chatListRef","on","args","blockedByMe","convKey","convObj","convWithObj","newConvWithObj","newConvObj","map","messageContainer","wordWrap","closeBtn","navigateIcon","chatList","dir","getDirection","overflowY","onScroll","chatListWrapper","CometChatConversationListActions","toggleTooltip","setAttribute","dataset","removeAttribute","deleteInProgress","actionInProgress","progressIcon","actionIcon","loadingIcon","deleteIcon","onMouseEnter","onMouseLeave","listStyleType","listItem","selectedState","selectedConversation","itemNameStyle","itemLastMsgStyle","CometChatConversationListItem","getLastMessage","enableHideDeletedMessages","getMessage","CATEGORY_CALL","getCallMessage","getActionMessage","CATEGORY_CUSTOM","getCustomMessage","getLastMessageTimestamp","timestamp","messageTimestamp","currentTimestamp","now","dateDifferenceInDays","dateFormat","getTimeStampForLastMessage","pollMessage","stickerMessage","docMessage","whiteboardMessage","meetingMessage","getTextMessage","messageText","text","xssData","sanitized_text","maskedData","sensitive_data","message_masked","profaneData","profanity","message_clean","MESSAGE_TYPE","TEXT","MEDIA","IMAGE","imageMessage","FILE","fileMessage","videoMessage","audioMessage","CUSTOM","actionMessage","MEMBER_JOINED","MEMBER_LEFT","actionBy","actionOn","MEMBER_SCOPE_CHANGED","extras","byEntity","onEntity","byString","forString","MEMBER_ADDED","MEMBER_KICKED","MEMBER_BANNED","MEMBER_UNBANNED","textContent","enableUnreadCount","handleMouseHover","toggleFlag","isHovering","lastMessageTimestamp","lastMessageTimeStamp","toolTipView","flexGrow","paddingLeft","paddingRight","previewWrapperStyle","slideAnimation","previewCloseStyle","previewOptionStyle","CometChatSmartReplyPreview","alignSelf","stickerWrapperStyle","stickerSectionListStyle","borderTop","overflowX","stickerItemStyle","stickerCloseStyle","CometChatStickerKeyboard","getStickers","callExtension","stickers","activeStickerSet","customStickers","defaultStickers","sort","stickerSetOrder","stickerList","stickerSet","reduce","r","index","stickerSetName","activeStickerList","stickerOrder","sendStickerMessage","stickerItem","onStickerSetClicked","sectionItem","activestickerlist","stickerset","closeStickerKeyboard","stickerlist","activestickerset","sectionItems","stickerSetThumbnail","stickerUrl","stickerName","flexWrap","messageReactionsStyle","reactionData","hoveredBorderStyle","verticalAlign","emojiButtonStyle","reactionCountStyle","CometChatMessageReactions","enableMessageReaction","reactToMessages","emoji","messageObject","colons","msgId","getMessageReactions","reaction","reactionName","replaceAll","reactionCount","userList","reactionTitle","join","concat","reactionClassName","size","native","addMessageReaction","reactIcon","messageReactions","addReactionEmoji","modalWrapperStyle","modalErrorStyle","modalTableStyle","borderCollapse","tr","tableLayout","tableFootStyle","loadingState","textMargin","creatingPoll","disabled","td","button","span","addOptionIconStyle","backgroundSize","CometChatCreatePoll","addPollOption","removePollOption","optionKey","opt","optionChangeHandler","newOption","createPoll","question","questionRef","firstOption","optionOneRef","secondOption","optionTwoRef","optionItems","optionRef","pollOptionView","tabIndex","createText","clearIcon","colSpan","autoFocus","placeholder","addIcon","creatingIcon","removeOptionIconStyle","CometChatCreatePollOptions","autoComplete","removeIcon","messageThumbnailStyle","nameWrapperStyle","paddingValue","messageTxtWrapperStyle","messageTxtTitleStyle","messageBtnStyle","li","CometChatReceiverDocumentBubble","toggleHoverState","launchCollaborativeDocument","documentUrl","documentData","document_url","open","nextProps","nextState","reactionsData","documentTitle","flex","documentIcon","pollAnswerStyle","pollPercentStyle","curvedBorders","answerWrapperStyle","optionData","widthProp","voters","p","checkIconStyle","CometChatReceiverPollMessageBubble","answerPollQuestion","selectedOption","vote","pollId","pollExtensionData","pollOptions","total","totalText","toLocaleString","checkIcon","checkImg","template","messageImgWrapperStyle","CometChatReceiverStickerMessageBubble","stickerData","stickerImg","sticker_name","sticker_url","CometChatReceiverWhiteboardBubble","launchCollaborativeWhiteboard","whiteboardUrl","whiteboardData","board_url","username","whiteboardIcon","CometChatSenderDocumentBubble","wordBreak","CometChatSenderPollMessageBubble","messageImgWrapper","CometChatSenderStickerBubble","messageTxtIconStyle","CometChatSenderWhiteboardBubble","CometChatActionMessageBubble","getCallActionMessage","INITIATED","ONGOING","UNANSWERED","ENDED","byUser","onUser","messageContainerStyle","messageWrapperStyle","Width","fontStyle","messageTxtStyle","messageInfoWrapperStyle","messageTimeStampStyle","messageDetailStyle","paddingSpace","nameStyle","CometChatDeleteMessageBubble","setLoggedInUser","messageDate","CometChatEmojiKeyboard","categories","people","nature","foods","activity","places","objects","symbols","flags","emojiClicked","showPreview","exclude","i18n","imageWrapperStyle","heightProps","imgStyle","sizeProps","objectFit","CometChatImageViewer","setImage","imageIcon","previewDataStyle","previewTitleStyle","previewDescStyle","previewTextStyle","previewLinkStyle","CometChatLinkPreview","linkObject","linkText","href","CometChatLiveReactions","sendMessage","transientMessage","TransientMessage","sendTransientMessage","setItems","parentElement","offsetWidth","offsetHeight","elements","elementWidth","elementHeight","ySpeed","verticalSpeed","omega","PI","horizontalSpeed","time","sin","items","requestAnimation","animate","transformString","visibility","classList","add","counter","before","reactionImg","Array","fill","messageActionStyle","direction","groupButtonStyle","deleteOption","backgroundProp","CometChatMessageActions","enableThreadedChats","enableDeleteMessage","enableDeleteMessageForModerator","enableEditMessage","enableTranslateMessage","enableMessageInPrivate","sendMessageInPrivate","reactToMessage","viewThread","translateMessage","startThreadIcon","replyCount","editIcon","translateIcon","sendMessageInPrivateIcon","tooltip","chatComposerStyle","order","editPreviewContainerStyle","inputInnerStyle","borderRadiusVal","emojiViewer","stickerViewer","messageInputStyle","disabledState","content","inputStickyStyle","attachments","flexDirectionProp","filePickerStyle","active","showFilePicker","fileItemStyle","stickyAttachButtonStyle","stickyButtonStyle","sendButtonStyle","stickerBtnStyle","CometChatMessageComposer","enableLiveReaction","enablePolls","enableTypingIndicator","enableStickers","enablePhotosVideos","enableFiles","enableEmojis","enableCollaborativeDocument","enableCollaborativeWhiteboard","focusOnMessageComposer","messageInputRef","focus","messageToReact","pasteHtmlAtCaret","messageInput","innerText","messageType","changeHandler","startTyping","toggleFilePicker","currentState","openFileDialogue","fileType","imageUploaderRef","click","fileUploaderRef","audioUploaderRef","videoUploaderRef","onImageChange","files","uploadedFile","reader","FileReader","newFile","File","result","sendMediaMessage","readAsArrayBuffer","onFileChange","onAudioChange","onVideoChange","getReceiverDetails","endTyping","MediaMessage","parentMessageId","setParentMessageId","setMetadata","sendMessageOnEnter","keyCode","shiftKey","sendTextMessage","messageToBeEdited","TextMessage","setText","replyPreview","setId","messageFrom","closeEditPreview","typingInterval","isTyping","typingMetadata","typingNotification","TypingIndicator","persist","toggleStickerPicker","toggleEmojiPicker","toggleCreatePoll","toggleCollaborativeDocument","toggleCollaborativeBoard","closeCreatePoll","sendSticker","sendReplyMessage","clearReplyPreview","startLiveReaction","animationInProgress","timeout","liveReactionInterval","stopLiveReaction","newMessageObject","reactionObject","userObject","emojiObject","reactionExtensionsData","metadatObject","extensions","liveReactionInProgress","shareDocument","shareWhiteboard","prevState","hasXSS","html","selectPastedContent","sel","range","getSelection","getRangeAt","rangeCount","deleteContents","node","lastNode","frag","createDocumentFragment","firstChild","appendChild","firstNode","insertNode","cloneRange","setStartAfter","setStartBefore","collapse","removeAllRanges","addRange","selection","originalRange","createRange","pasteHTML","setEndPoint","select","liveReactionBtn","liveReactionText","docText","docs","docIcon","videoText","audioText","imageText","avp","videoIcon","accept","audioIcon","pollText","createPollBtn","pollIcon","collaborativeDocText","collaborativeDocBtn","collaborativeBoardText","collaborativeBoardBtn","emojiText","emojiBtn","insertEmoticon","StickerText","stickerBtn","stickerIcon","sendMessageText","sendBtn","sendBlue","attachText","attach","roundedPlus","editPreview","smartReplyPreview","smartReplyData","contentEditable","onInput","onBlur","onKeyDown","MessageHeaderManager","onTypingStarted","typingIndicator","onTypingEnded","chatSideBarBtnStyle","displayValue","sidebar","chatUserStyle","chatNameStyle","chatStatusStyle","typing","chatOptionStyle","ongoingCall","bgColor","CometChatMessageHeader","setStatusForUser","USER_STATUS","ONLINE","OFFLINE","lastActiveAt","lastActive","setStatusForGroup","membersText","updateHeader","groupUser","enableUserPresence","showTyping","typingText","resetChat","enableGroupVoiceCall","enableGroupVideoCall","enableOneOnOneVoiceCall","combinedResponse","enableOneOnOneVideoCall","enableAddGroupMembers","enableChangeScope","enableKickGroupMembers","enableBanGroupMembers","enableDeleteGroup","enableViewGroupMembers","enableLeaveGroup","enableSharedMedia","enableBlockUser","initiateAudioCall","initiateVideoCall","viewDetail","videoCallClassName","audioCallClassName","viewDetailClassName","chatWithClassName","chatNameClassName","chatStatusClassName","audioCallText","audioCallBtn","videoCallText","videoCallBtn","viewDetailText","viewDetailBtn","detailPaneIcon","menuIcon","MessageFilter","getCategories","getTypes","MessageListManager","messageRequest","limit","initializeMessageRequest","messageFilterManager","categoryList","typeList","MessagesRequestBuilder","setUID","setCategories","setTypes","hideReplies","setGUID","fetchPrevious","onMessagesDelivered","onTransientMessageReceived","chatListStyle","messageDateStyle","CometChatMessageList","lastScrollTop","times","scrollToBottom","messagesEnd","messageHandler","fetchMessages","messageList","messageCount","getUid","markAsRead","messages","fetchPreviousMessages","messageUpdated","onMessageReadAndDelivered","onMessageReceived","onGroupUpdated","onCallUpdated","updateEditedMessage","messageKey","m","messageObj","getReceiver","getReceiptType","deliveredAt","getDeliveredAt","readAt","getReadAt","reInitializeMessageBuilder","markMessageAsRead","messageReceivedHandler","customMessageReceivedHandler","getSenderMessageComponent","component","getReceiverMessageComponent","getSenderCustomMessageComponent","getReceiverCustomMessageComponent","getActionMessageComponent","getComponent","ifChatWindowChanged","cDate","dateSeparator","dateField","messageSentDate","timeStampInMilliSeconds","getMessageDate","paddingTop","SharedMediaManager","messagetype","mediaMessageListenerId","mediaMessageRequest","setCategory","sectionStyle","containerHeightProp","containerHeight","buttonStyle","activeBtn","itemStyle","itemTypeStyle","CometChatSharedMediaView","messageDeleted","messageReceived","filteredMessages","filter","getMessages","mediaClickHandler","fileIcon","UserDetailManager","userDetailStyle","headerStyle","headerCloseStyle","privacySectionStyle","sectionHeaderStyle","itemLinkStyle","userPresenceStyle","CometChatUserDetails","enableViewProfile","usersList","blockUsers","newType","newItem","unblockUser","unblockUsers","profileLink","link","closeDetailView","blockUserText","blockUserView","sharedmediaView","UserListManager","searchKey","userRequest","initializeUsersRequest","userListModeOptions","usersRequest","UsersRequestBuilder","setSearchKeyword","friendsOnly","contactWrapperStyle","contactHeaderStyle","contactHeaderCloseStyle","contactHeaderTitleStyle","contactSearchButtonStyle","CometChatUserList","toggleUserSearch","enableSearchUser","userUpdated","userlist","userKey","u","userObj","newUserObj","getUsers","val","fetchNextUsers","userListRef","newUserObject","currentLetter","chr","firstChar","selectedUser","clickHandler","searchUser","searchIcon","userListTemplate","userListWrapper","itemDescStyle","marginTop","CometChatUserListItem","userPresence","userScreenSidebarStyle","sidebarView","sidebarview","borderRight","userScreenMainStyle","itemClicked","toggleSideBar","chatWithUser","messageScreen","creatingGroup","inputStyle","CometChatCreateGroup","enablePublicGroup","enablePasswordGroup","enablePrivateGroup","passwordChangeHandler","nameChangeHandler","typeChangeHandler","passwordInput","validate","groupName","createGroup","PRIVATE","Group","newGroup","populateGroupType","groupTypes","groupTypeSelect","groupTypeKeys","groupTypeListOptions","groupTypeKey","GroupDetailManager","groupMemberRequest","bannedGroupMemberRequest","GroupMembersRequestBuilder","BannedMembersRequestBuilder","deleteLink","deleteCss","CometChatGroupDetails","groupUpdated","updateGroupMemberPresence","member","updatedMember","addParticipants","removeParticipants","banMembers","unbanMembers","updateParticipants","memberlist","memberKey","k","memberObj","newMemberObj","bannedmemberlist","bannedMemberKey","bannedMemberObj","newBannedMemberObj","getGroupMembers","administratorslist","moderatorslist","fetchNextGroupMembers","getBannedGroupMembers","fetchNextBannedGroupMembers","deleteGroup","showDeleteConfirmDialog","showLeaveGroupConfirmDialog","showTransferOwnershipConfirmDialog","onLeaveConfirm","leaveGroup","onTransferConfirm","transferOwnership","owner","viewMember","addMember","membersActionHandler","members","updateOwnership","unbannedMembers","filteredBannedMembers","bannedmember","found","triggerUpdate","groupmembers","filteredMembers","groupmember","closeGroupDetail","addAdministrator","addModerator","viewMembersBtn","paddingBottom","addMembersBtn","deleteGroupBtn","bannedMembersBtn","leaveGroupBtn","viewMembers","loggedinuser","addMembers","GroupListManager","groupRequest","GroupsRequestBuilder","groupWrapperStyle","groupHeaderStyle","groupHeaderCloseStyle","groupHeaderTitleStyle","groupAddStyle","CometChatGroupList","enableSearchGroup","enableCreateGroup","enableJoinGroup","updateMemberChanged","updateMemberRemoved","updateMemberAdded","updateMemberJoined","grouplist","groupKey","g","groupObj","newgroupObj","getGroups","newGroupObj","searchGroup","fetchNextGroups","groupList","createGroupHandler","createGroupActionHandler","groupListRef","selectedGroup","createGroupBtn","groupListTemplate","groupListWrapper","itemIconStyle","CometChatGroupListItem","groupTypeIcon","shieldIcon","lockIcon","modalCaptionStyle","textAlignStyle","listHeaderStyle","nameColumnStyle","editAccess","scopeColumnStyle","actionColumnStyle","CometChatViewGroupMemberList","updateUserColumnTitle","userColumnTitle","matches","updateMembers","changeScope","memberToBan","banGroupMember","memberToKick","kickGroupMember","updateGroupMemberScope","setUserColumnTitle","matchMedia","addListener","modalRowStyle","borderLeft","participantView","avatarStyle","marginProp","displayProp","scopeIconStyle","kickIconStyle","CometChatViewGroupMemberListItem","toggleChangeScope","showChangeScope","scopeChangeHandler","updateMemberScope","contains","changeScopeDropDown","defaultValue","editClassName","changescope","ban","banIcon","kick","kickIcon","doneIcon","scopeIcon","AddMembersManager","membersRequest","initializeMembersRequest","modalCloseStyle","searchButtonStyle","modalListStyle","modalFootStyle","addingMembers","CometChatAddGroupMemberList","membersToAdd","membersToRemove","filteredlist","filteredUserList","foundbanned","membersUpdated","userState","IndexFound","membersList","newmember","newMember","GroupMember","addMembersToGroup","addGroupMemberBtn","addingIcon","firstLetter","changed","selectionBoxStyle","inactiveStateImg","activeStateImg","CometChatAddGroupMemberListItem","checked","setChecked","nameContainer","lastChild","inactiveIcon","activeIcon","htmlFor","roleColumnStyle","CometChatBanGroupMemberList","unbanMember","memberToUnBan","unbanGroupMember","membersToBan","membersToUnBan","userStyle","roleStyle","actionStyle","CometChatBanGroupMemberListItem","unBan","unban","groupScreenSidebarStyle","groupScreenMainStyle","CometChatGroupListWithMessages","otherProps","newObject","chatWithGroup","btnState","newGroupOwner","transferringOwnership","CometChatTransferOwnershipMemberList","changeOwnership","updateGroupOwner","transferGroupOwnership","memberList","transferBtn","transferText","transferIcon","modalColumnStyle","selectionColumnStyle","CometChatTransferOwnershipMemberListItem","handleCheck","toggleSelectedState","isSelected","chatWrapperStyle","viewdetailscreen","threadmessageview","secondaryViewWidth","chatSecondaryStyle","messagePaneUnreadBannerMessageStyle","textShadow","CometChatMessages","enableGroupActionMessages","enableCallActionMessages","enableSendingOneOnOneMessage","enableSendingGroupMessage","updateReplyCount","appendMessage","messageSent","triggerHandler","updateMessages","updateParentThreadedMessage","removeMessages","prependMessages","prependMessagesAndScrollToBottom","refreshingMessages","messageRefreshed","newMessagesArrived","jumpToMessages","messageEdited","clearEditPreview","appendCallMessage","toggleOriginalImageView","audioCall","videoCall","toggleDetailView","toggleReaction","liveReactionReceived","outgoingDirectCallRef","viewThreadedMessage","threadMessageComposed","closeThreadedMessage","appendMemberAddedMessage","appendMemberUnbannedMessage","appendMemberScopeChangedMessage","appendMemberKickedMessage","appendMemberBannedMessage","errorHandler","infoMessageHandler","infoCode","eachMember","viewOriginalImage","viewdetail","parentMessage","threaditem","threadmessageparent","threadmessageitem","threadmessagetype","Call","initiateCall","outgoingCall","outgoingCallRef","liveReaction","markMessagesAsRead","unreadMessage","messageListRef","messagelist","receivedMessage","composerRef","blockedUser","messageComposer","newMessageIndicator","liveReactionView","incomingCallView","incomingDirectCallView","outgoingDirectCallView","outgoingCallView","detailScreen","threadMessageView","activeTab","threadItem","threadType","originalImageView","messageComponent","messageWrapper","parentMessageStyle","messageSeparatorStyle","hr","CometChatMessageThread","parentMessageEdited","newReplyCount","getParentMessageComponent","seperator","replyText","fontWight","scrollbarWidth","CometChatReadReceipt","toggleReadReceipts","receipts","ticks","receiptText","errorTick","sendingTick","greyTick","blueDoubleTick","greyDoubleTick","receipt","getMessageSentTime","CometChatReceiverAudioMessageBubble","controls","CometChatReceiverDirectCallBubble","messageTitle","joinCallMessage","messageFileWrapperStyle","textDecoration","label","CometChatReceiverFileMessageBubble","CometChatReceiverImageMessageBubble","chooseImage","thumbnailGenerationObject","smallUrl","imageToDownload","thumbnailGenerationData","imageName","imageUrl","downloadImage","setMessageImageUrl","imgUrl","xhr","XMLHttpRequest","responseType","readyState","statusText","onerror","Error","ontimeout","send","parsedMessage","emojiMessage","showVariation","emojiProp","zoom","CometChatReceiverTextMessageBubble","getMessageText","formattedText","emojiParsedMessage","twemoji","folder","ext","ReactHtmlParser","decodeEntities","enableLargerSizeEmojis","translatedMessage","translateToLanguage","browserLanguageArray","linkPreviewData","CometChatReceiverVideoMessageBubble","CometChatSenderAudioMessageBubble","getFileData","Blob","fileName","fileUrl","fileData","CometChatSenderDirectCallBubble","CometChatSenderFileMessageBubble","CometChatSenderImageMessageBubble","readAsDataURL","heightProp","CometChatSenderTextMessageBubble","messageTextRef","CometChatSenderVideoMessageBubble","replyCountStyle","CometChatThreadedMessageReplyCount","reply","setReply","replies","bockedSubTitleStyle","unblockButtonStyle","CometChatBlockedUser","chatWith","chatScreenSidebarStyle","chatScreenMainStyle","CometChatConversationListWithMessages","tab","userInfoScreenStyle","userStatusStyle","optionTitleStyle","optionStyle","CometChatUserProfile","userProfile","notificationIcon","privacyIcon","chatIcon","helpIcon","reportIcon","isActive","activeStateBg","itemLinkTextStyle","colorProp","CometChatNavBar","tabListKeys","getFilteredTabs","filteredTabs","promises","enableChats","enableUsers","enableGroups","enableSettings","allSettled","eachTabKey","tabKey","tabEnabled","tabChanged","getActiveTab","getTabList","chatsTabActive","userTabActive","groupsTabActive","moreTabActive","chatGreyIcon","contactGreyIcon","groupGreyIcon","moreGreyIcon","tabName","t","unifiedSidebarStyle","unifiedMainStyle","CometChatUI","navBarAction","navBarRef","App","logout","method","headers","appId","apiKey","Accept","body","accepted","fetch","json","alert","err","addFriend","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","appSetting","AppSettingsBuilder","subscribePresenceForAllUsers","setRegion","init","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.953d9d48.chunk.js","sourcesContent":["import { CometChat } from \"@cometchat-pro/chat\";\r\nimport React, { useState } from \"react\";\r\n\r\nexport default function Register(props) {\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [userName, setUserName] = useState(\"\");\r\n  const setUser = props.setUser;\r\n\r\n  const handleSubmit = (e) => {\r\n      e.preventDefault();\r\n   let authKey = \"591e1b9b6eb5d93b7bc95b76b600da068dd276a3\";\r\nvar uid = phone;\r\nvar name = userName + \" (\" + phone + \")\";\r\n\r\nvar user = new CometChat.User(uid);\r\n\r\nuser.setName(name);\r\n\r\nCometChat.createUser(user, authKey).then(\r\n    user => {\r\n        console.log(\"user created\", user);\r\n    },error => {\r\n        console.log(\"error\", error);\r\n    }\r\n)\r\n  };\r\n\r\n  return (\r\n    <div id=\"register\">\r\n      <form onSubmit={handleSubmit}>\r\n        <legend>Register</legend>\r\n        {/* phone */}\r\n        <label>Phone Number</label> <br />\r\n        <input\r\n          type=\"tel\"\r\n          required\r\n          name=\"phone\"\r\n          value={phone}\r\n          onChange={(e) => setPhone(e.target.value)}\r\n        />{\" \"}\r\n        <br />\r\n        {/* user name */}\r\n        <label>User Name</label> <br />\r\n        <input\r\n          type=\"name\"\r\n          required\r\n          name=\"userName\"\r\n          value={userName}\r\n          onChange={(e) => setUserName(e.target.value)}\r\n        />{\" \"}\r\n        <br />\r\n        <button type=\"submit\">Register</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}","import { CometChat } from \"@cometchat-pro/chat\";\r\nimport React, { useState } from \"react\";\r\n\r\nexport default function Register(props) {\r\n  const [phone, setPhone] = useState(\"\");\r\n  const setUser = props.setUser;\r\n\r\n  const handleSubmit = (e) => {\r\n      e.preventDefault();\r\n  var UID = phone;\r\n    var authKey = \"591e1b9b6eb5d93b7bc95b76b600da068dd276a3\";\r\n\r\n    CometChat.login(UID, authKey).then(\r\n      (User) => {\r\n        console.log(\"Login Successfulkokok:\", { User });\r\n        // User loged in successfully.\r\n        console.log(User.uid);\r\n        setUser(User);\r\n      },\r\n      (error) => {\r\n        console.log(\"Login failed with exception:\", { error });\r\n        // User login failed, check error and take appropriate action.\r\n      }\r\n    );\r\n\r\n  };\r\n\r\n  return (\r\n    <div id=\"login\">\r\n      <form onSubmit={handleSubmit}>\r\n        <legend>Login</legend>\r\n        <label>Phone Number</label> <br />\r\n        <input\r\n          type=\"tel\"\r\n          required\r\n          name=\"phone\"\r\n          value={phone}\r\n          onChange={(e) => setPhone(e.target.value)}\r\n        />{\" \"}\r\n        <br />\r\n        <button>Login</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}","export const TEXT_MESSAGE_RECEIVED = 'onTextMessageReceived';\r\nexport const MEDIA_MESSAGE_RECEIVED = 'onMediaMessageReceived';\r\nexport const CUSTOM_MESSAGE_RECEIVED = 'onCustomMessageReceived';\r\nexport const MESSAGE_DELIVERED = 'onMessagesDelivered';\r\nexport const MESSAGE_READ = 'onMessagesRead';\r\nexport const MESSAGE_DELETED = 'onMessageDeleted';\r\nexport const MESSAGE_EDITED = 'onMessageEdited';\r\nexport const TRANSIENT_MESSAGE_RECEIVED = \"onTransientMessageReceived\";\r\n\r\nexport const INCOMING_CALL_RECEIVED = 'onIncomingCallReceived';\r\nexport const OUTGOING_CALL_ACCEPTED = 'onOutgoingCallAccepted';\r\nexport const OUTGOING_CALL_REJECTED = 'onOutgoingCallRejected';\r\nexport const INCOMING_CALL_CANCELLED = 'onIncomingCallCancelled';\r\n\r\nexport const GROUP_MEMBER_SCOPE_CHANGED = \"onGroupMemberScopeChanged\";\r\nexport const GROUP_MEMBER_KICKED = \"onGroupMemberKicked\";\r\nexport const GROUP_MEMBER_BANNED = \"onGroupMemberBanned\";\r\nexport const GROUP_MEMBER_UNBANNED = \"onGroupMemberUnbanned\";\r\nexport const GROUP_MEMBER_ADDED = \"onMemberAddedToGroup\";\r\nexport const GROUP_MEMBER_LEFT = \"onGroupMemberLeft\";\r\nexport const GROUP_MEMBER_JOINED = \"onGroupMemberJoined\";\r\n\r\nexport const USER_ONLINE = \"onUserOnline\";\r\nexport const USER_OFFLINE = \"onUserOffline\";\r\n\r\nexport const TYPING_STARTED = \"onTypingStarted\";\r\nexport const TYPING_ENDED = \"onTypingEnded\";\r\n\r\nexport const CUSTOM_TYPE_POLL = \"extension_poll\";\r\nexport const CUSTOM_TYPE_STICKER = \"extension_sticker\";\r\nexport const CUSTOM_TYPE_DOCUMENT = \"extension_document\";\r\nexport const CUSTOM_TYPE_WHITEBOARD = \"extension_whiteboard\";\r\nexport const CUSTOM_TYPE_MEETING = \"meeting\";\r\n\r\nexport const CONSTANTS = {\r\n\tLOCALE: \"cometchat:locale\",\r\n\tACTIVECALL: \"cometchat:activecall\",\r\n\tMAX_MESSAGE_COUNT: 1000,\r\n\tMETADATA_TYPE_LIVEREACTION: \"live_reaction\",\r\n\tLIVE_REACTIONS: { heart: \"./resources/heart.png\", thumbsup: \"👍\", clap: \"👏\", wink: \"😉\" },\r\n\tMESSAGES_COMPONENT: \"messages\",\r\n\tEMBEDDED_COMPONENT: \"embedded\",\r\n\tOUTGOING_DEFAULT_CALLING: \"outgoing_default\",\r\n\tINCOMING_DEFAULT_CALLING: \"incoming_default\",\r\n\tINCOMING_DIRECT_CALLING: \"incoming_direct\",\r\n\tOUTGOING_DIRECT_CALLING: \"outgoing_direct\",\r\n\tAUDIO: {\r\n\t\tINCOMING_MESSAGE: \"incomingMessage\",\r\n\t\tINCOMING_OTHER_MESSAGE: \"incomingOtherMessage\",\r\n\t\tOUTGOING_MESSAGE: \"outgoingMessage\",\r\n\t\tINCOMING_CALL: \"incomingCall\",\r\n\t\tOUTGOING_CALL: \"outgoingCall\",\r\n\t},\r\n\tERROR_CODES: {\r\n\t\tERR_CHAT_API_FAILURE: \"ERR_CHAT_API_FAILURE\",\r\n\t},\r\n\tCALLS: {\r\n\t\tONGOING_CALL: \"noOngoingCall\",\r\n\t\tONGOING_CALL_SAME_GROUP: \"ongoingDirectCallInSameGroup\",\r\n\t\tONGOING_CALL_DIFF_GROUP: \"ongoingDirectCallInDifferentGroup\",\r\n\t},\r\n\tGROUPS: {\r\n\t\tOWNER: \"owner\",\r\n\t},\r\n\tLIVE_REACTION_INTERVAL: 1500,\r\n\tFILE_METADATA: \"file\",\r\n};\r\n\r\nexport const ACTIONS = {\r\n\tMESSAGE_SENT: \"messageSent\",\r\n\tMESSAGE_COMPOSED: \"messageComposed\",\r\n\tERROR_IN_SENDING_MESSAGE: \"errorInSendingMessage\",\r\n\tACCEPT_DIRECT_CALL: \"acceptDirectCall\",\r\n\tJOIN_DIRECT_CALL: \"joinDirectCall\",\r\n\tSTART_DIRECT_CALL: \"startDirectCall\",\r\n\tDIRECT_CALL_ENDED: \"directCallEnded\",\r\n\tPOLL_CREATED: \"pollCreated\",\r\n\tGROUP_DELETED: \"groupDeleted\",\r\n\tGROUP_LEFT: \"leftGroup\",\r\n\tGROUP_CREATED: \"groupCreated\",\r\n\tVIEW_DETAIL: \"viewDetail\",\r\n\tVIEW_THREADED_MESSAGE: \"viewThreadedMessage\",\r\n\tCLOSE_THREADED_MESSAGE: \"closeThreadedMessage\",\r\n\tTOGGLE_SIDEBAR: \"toggleSidebar\",\r\n\tON_MESSAGE_EDITED: \"onMessageEdited\",\r\n\tON_MESSAGE_DELETED: \"onMessageDeleted\",\r\n\tON_MESSAGE_READ_DELIVERED: \"onMessageReadAndDelivered\",\r\n\tDELETE_MESSAGE: \"deleteMessage\",\r\n\tMESSAGE_DELETED: \"messageDeleted\",\r\n\tEDIT_MESSAGE: \"editMessage\",\r\n\tMESSAGE_EDITED: \"messageEdited\",\r\n\tCLOSE_GROUP_DETAIL: \"closeGroupDetail\",\r\n\tCLOSE_USER_DETAIL: \"closeUserDetail\",\r\n\tVIEW_ORIGINAL_IMAGE: \"viewOriginalImage\",\r\n\tFETCH_GROUP_MEMBERS: \"fetchGroupMembers\",\r\n\tSCOPECHANGE_GROUPMEMBER_SUCCESS: \"updateGroupMember\",\r\n\tBAN_GROUP_MEMBER: \"ban\",\r\n\tKICK_GROUP_MEMBER: \"kick\",\r\n\tBAN_GROUPMEMBER_SUCCESS: \"banGroupMember\",\r\n\tKICK_GROUPMEMBER_SUCCESS: \"kickGroupMember\",\r\n\tCHANGE_SCOPE_GROUP_MEMBER: \"changescope\",\r\n\tUNBAN_GROUP_MEMBER: \"unban\",\r\n\tADD_GROUP_MEMBER_SUCCESS: \"addGroupMembers\",\r\n\tFETCH_BANNED_GROUP_MEMBERS: \"fetchBannedGroupMembers\",\r\n\tUNBAN_GROUP_MEMBER_SUCCESS: \"unbanGroupMembers\",\r\n\tREACT_TO_MESSAGE: \"reactToMessage\",\r\n\tINITIATE_VIDEO_CALL: \"initiateVideoCall\",\r\n\tINITIATE_AUDIO_CALL: \"initiateAudioCall\",\r\n\tCHANGE_TAB: \"changeTab\",\r\n\tITEM_CLICKED: \"itemClicked\",\r\n\tTHREAD_MESSAGE_COMPOSED: \"threadMessageComposed\",\r\n\tSEND_LIVE_REACTION: \"sendReaction\",\r\n\tSTOP_LIVE_REACTION: \"stopReaction\",\r\n\tSHOW_LIVE_REACTION: \"showReaction\",\r\n\tCLEAR_EDIT_PREVIEW: \"clearEditPreview\",\r\n\tMESSAGE_RECEIVED: \"messageReceived\",\r\n\tCUSTOM_MESSAGE_RECEIVED: \"customMessageReceived\",\r\n\tMESSAGE_READ: \"messageRead\",\r\n\tMESSAGES_INITIAL_FETCH: \"messageInitialFetch\",\r\n\tMESSAGES_FETCHED: \"messageFetched\",\r\n\tREFRESHING_MESSAGES: \"refreshingMessages\",\r\n\tMESSAGES_REFRESHED: \"messageRefreshed\",\r\n\tNEW_MESSAGES: \"newMessagesArrived\",\r\n\tCLEAR_UNREAD_MESSAGES: \"clearUnreadMessages\",\r\n\tSTART_AUDIO_CALL: \"startAudioCall\",\r\n\tSTART_VIDEO_CALL: \"startVideoCall\",\r\n\tOUTGOING_CALL_ACCEPTED: \"outgoingCallAccepted\",\r\n\tOUTGOING_CALL_REJECTED: \"outgoingCallRejected\",\r\n\tOUTGOING_CALL_CANCELLED: \"outgoingCallCancelled\",\r\n\tINCOMING_CALL_ACCEPTED: \"incomingCallAccepted\",\r\n\tINCOMING_CALL_REJECTED: \"incomingCallRejected\",\r\n\tCALL_ENDED: \"callEnded\",\r\n\tUSER_JOINED_CALL: \"userJoinedCall\",\r\n\tUSER_LEFT_CALL: \"userLeftCall\",\r\n\tDELETE_CONVERSATION: \"deleteConversation\",\r\n\tCONVERSATION_DELETED: \"conversationDeleted\",\r\n\tSEND_STICKER: \"sendSticker\",\r\n\tCLOSE_STICKER_KEYBOARD: \"closeStickerKeyboard\",\r\n\tERROR: \"errorOccurred\",\r\n\tINFO: \"infoMessage\",\r\n\tTRANSLATE_MESSAGE: \"translateMessage\"\r\n};\r\n\r\nexport const EVENTS = {\r\n\tNEW_MESSAGES: \"newMessagesArrived\",\r\n\tCLEAR_UNREAD_MESSAGES: \"clearUnreadMessages\",\r\n};\r\n\r\n\r\nexport const KEYS = {\r\n\tMETADATA: \"metadata\",\r\n\tINCREMENT_UNREAD_COUNT: \"incrementUnreadCount\",\r\n};","import { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nexport class CallAlertManager {\r\n\r\n    callListenerId = \"incoming_call_\" + new Date().getTime();\r\n\r\n    attachListeners(callback) {\r\n\r\n        CometChat.addCallListener(\r\n            this.callListenerId,\r\n            new CometChat.CallListener({\r\n                onIncomingCallReceived: call => {\r\n                    callback(enums.INCOMING_CALL_RECEIVED, call);\r\n                },\r\n                onIncomingCallCancelled: call => {\r\n                    callback(enums.INCOMING_CALL_CANCELLED, call);\r\n                },\r\n                onOutgoingCallAccepted: call => {\r\n                    callback(enums.OUTGOING_CALL_ACCEPTED, call);\r\n                },\r\n            })\r\n        );\r\n    }\r\n\r\n    removeListeners() {\r\n        CometChat.removeCallListener(this.callListenerId);\r\n    }\r\n}","export const theme = {\r\n    fontFamily: \"Inter, sans-serif\",\r\n    fontSize: \"14px\",\r\n    primaryColor: \"#39f\",\r\n    secondaryTextColor: \"#808080\",\r\n    color: {\r\n        primary: \"#141414\",\r\n        secondary: \"#cccccc\",\r\n        darkSecondary: \"#eaeaea\",\r\n        search: \"rgba(20, 20, 20, 0.4)\",\r\n        tertiary: \"rgba(20, 20, 20, 0.5)\",\r\n        grey: \"rgba(20,20,20,0.04)\",\r\n        helpText: \"rgba(20, 20, 20, 0.6)\",\r\n        blue: \"#39f\",\r\n        white: \"#fff\",\r\n        red: \"#ff3b30\"\r\n    },\r\n    borderColor: {\r\n        primary: \"#eaeaea\",\r\n        secondary: \"#cccccc\",\r\n        darkSecondary: \"#eaeaea\",\r\n        white: \"#fff\",\r\n        blue: \"#39f\",\r\n    },\r\n    backgroundColor: {\r\n        white: \"#fff\",\r\n        primary: \"#E6E6E6\",\r\n        secondary: \"#f6f6f6\",\r\n        blue: \"#39f\",\r\n        red: \"#ff3b30\",\r\n        grey: \"rgba(20,20,20,0.04)\",\r\n        lightGrey: \"rgba(20, 20, 20, 0.08)\",\r\n        darkGrey: \"rgba(20,20,20,0.9)\",\r\n        callScreenGrey: \"#444444\",\r\n        silver: \"#c4c4c4\"\r\n    },\r\n    breakPoints: [\r\n        \"(min-width: 320px) and (max-width: 767px)\",\r\n        \"(min-width: 320px) and (max-width: 480px)\",\r\n        \"(min-width: 481px) and (max-width: 768px)\",\r\n        \"(min-width: 769px) and (max-width: 1024px)\",\r\n        \"(min-width: 1025px) and (max-width: 1200px)\",\r\n    ]\r\n};\r\n","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport { imgStyle } from \"./style\";\r\n\r\nimport srcIcon from \"./resources/1px.png\";\r\n\r\nclass CometChatAvatar extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.imgRef = React.createRef();\r\n\t\tthis._isMounted = false;\r\n\t\tthis.state = {\r\n\t\t\tavatarImage: srcIcon\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tthis._isMounted = true;\r\n\t\tthis.setAvatarImage();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\r\n\t\tif(prevProps !== this.props) {\r\n\r\n\t\t\tthis.setAvatarImage();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis._isMounted = false;\r\n\t}\r\n\r\n\tsetAvatarImage = () => {\r\n\r\n\t\tif ((this.props.image).trim().length) {\r\n\r\n\t\t\tthis.getImage(this.props.image);\r\n\r\n\t\t} else if (Object.keys(this.props.user).length) {\r\n\r\n\t\t\tif (this.props.user.hasOwnProperty(\"avatar\")) {\r\n\r\n\t\t\t\tconst avatarImage = this.props.user.avatar;\r\n\t\t\t\tthis.getImage(avatarImage);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst uid = this.props.user.uid;\r\n\t\t\t\tconst char = this.props.user.name.charAt(0).toUpperCase();\r\n\r\n\t\t\t\tconst avatarImage = this.generateAvatar(uid, char);\r\n\t\t\t\tthis.getImage(avatarImage);\r\n\t\t\t}\r\n\r\n\t\t} else if (Object.keys(this.props.group).length) {\r\n\r\n\t\t\tif (this.props.group.hasOwnProperty(\"icon\")) {\r\n\r\n\t\t\t\tconst avatarImage = this.props.group.icon;\r\n\t\t\t\tthis.getImage(avatarImage);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst guid = this.props.group.guid;\r\n\t\t\t\tconst char = this.props.group.name.charAt(0).toUpperCase();\r\n\r\n\t\t\t\tconst avatarImage = this.generateAvatar(guid, char);\r\n\t\t\t\tthis.getImage(avatarImage);\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetImage = (image) => {\r\n\r\n\t\tlet img = new Image();\r\n\t\timg.src = image;\r\n\t\timg.onload = () => {\r\n\r\n\t\t\tif (this._isMounted) {\r\n\t\t\t\tthis.setState({ avatarImage: image });\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\tgenerateAvatar = (generator, data) => {\r\n\r\n\t\tconst stringToColour = function (str) {\r\n\r\n\t\t\tlet hash = 0;\r\n\t\t\tfor (let i = 0; i < str.length; i++) {\r\n\t\t\t\thash = str.charCodeAt(i) + ((hash << 5) - hash);\r\n\t\t\t}\r\n\r\n\t\t\tlet colour = '#';\r\n\t\t\tfor (let i = 0; i < 3; i++) {\r\n\t\t\t\tlet value = (hash >> (i * 8)) & 0xFF;\r\n\t\t\t\tcolour += ('00' + value.toString(16)).substr(-2);\r\n\t\t\t}\r\n\t\t\treturn colour;\r\n\t\t}\r\n\r\n\t\tconst canvas = document.createElement(\"canvas\");\r\n\t\tconst context = canvas.getContext(\"2d\");\r\n\r\n\t\tcanvas.width = 200;\r\n\t\tcanvas.height = 200;\r\n\r\n\t\t// Draw background\r\n\t\tcontext.fillStyle = stringToColour(generator);\r\n\t\tcontext.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n\t\t// Draw text\r\n\t\tcontext.font = \"bold 100px 'Inter', sans-serif\";\r\n\t\tcontext.fillStyle = \"white\";//foregroundColor;\r\n\t\tcontext.textAlign = \"center\";\r\n\t\tcontext.textBaseline = \"middle\";\r\n\t\tcontext.fillText(data, canvas.width / 2, canvas.height / 2);\r\n\r\n\t\treturn canvas.toDataURL(\"image/png\");\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\tconst borderWidth = this.props.borderWidth;\r\n\t\tconst borderStyle = this.props.borderStyle;\r\n\t\tconst borderColor = this.props.borderColor;\r\n\t\tconst cornerRadius = this.props.cornerRadius;\r\n\r\n\t\tconst getStyle = () => ({ borderWidth: borderWidth, borderStyle: borderStyle, borderColor: borderColor, borderRadius: cornerRadius });\r\n\r\n\t\treturn (\r\n\t\t\t<img src={this.state.avatarImage} css={imgStyle()} alt={this.state.avatarImage} style={getStyle()} ref={el => { this.imgRef = el;}} />\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatAvatar.defaultProps = {\r\n\tborderWidth: \"1px\",\r\n\tborderStyle: \"solid\",\r\n\tborderColor: theme.borderColor.primary,\r\n\tcornerRadius: \"50%\",\r\n\ttheme: theme,\r\n\timage: \"\",\r\n\tuser: {},\r\n\tgroup: {},\r\n};\r\n\r\nCometChatAvatar.propTypes = {\r\n\tborderWidth: PropTypes.string,\r\n\tborderStyle: PropTypes.string,\r\n\tborderColor: PropTypes.string,\r\n\tcornerRadius: PropTypes.string,\r\n\timage: PropTypes.string,\r\n\ttheme: PropTypes.object,\r\n\tuser: PropTypes.oneOfType([PropTypes.object, PropTypes.shape(CometChat.User)]),\r\n\tgroup: PropTypes.oneOfType([PropTypes.object, PropTypes.shape(CometChat.Group)])\r\n}\r\n\r\nexport { CometChatAvatar };","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXx7OqhaJO7AAAAAXRSTlPM0jRW/QAAAApJREFUeJxjYgAAAAYAAzY3fKgAAAAASUVORK5CYII=\"","export const imgStyle = () => {\r\n\r\n    return {\r\n        overflow: \"hidden\",\r\n        display: \"inherit\",\r\n        width: \"100%\",\r\n        height: \"100%\"\r\n    }\r\n}","export const backdropStyle = (props) => {\r\n\r\n    return {\r\n        zIndex: \"3\",\r\n        backgroundColor: \"#000\",\r\n        opacity: \".3\",\r\n        position: \"fixed\",\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        top: \"0\",\r\n        left: \"0\",\r\n        cursor: \"pointer\",\r\n        transition: \"background .3s ease-out 0\",\r\n        ...props.style,\r\n    }\r\n}","/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport {\r\n    backdropStyle\r\n} from \"./style\";\r\n\r\nconst CometChatBackdrop = props => (props.show ? <div css={backdropStyle(props)} className=\"modal__backdrop\" onClick={props.clicked}></div> : null);\r\n\r\n// Specifies the default values for props:\r\nCometChatBackdrop.defaultProps = {\r\n\tshow: false,\r\n\tstyle: {},\r\n\tclicked: () => {},\r\n};\r\n\r\nCometChatBackdrop.propTypes = {\r\n    show: PropTypes.bool,\r\n    style: PropTypes.object,\r\n    clicked: PropTypes.func,\r\n}\r\n\r\nexport { CometChatBackdrop };","export const badgeStyle = (props) => {\r\n\r\n    return {\r\n        display: \"block\",\r\n        fontSize: \"12px\",\r\n        width: \"auto\",\r\n        height: \"18px\",\r\n        borderRadius: \"16px\",\r\n        backgroundColor: `${props.theme.primaryColor}`,\r\n        color: `${props.theme.color.white}`,\r\n        textAlign: \"center\",\r\n        fontWeight: \"700\",\r\n        lineHeight: \"18px\",\r\n        marginLeft: \"4px\",\r\n        padding: \"0 9px\",\r\n        marginRight: \"2px\",\r\n        opacity: \"1\",\r\n        transition: \"opacity .1s\",\r\n    }\r\n}","/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport { badgeStyle } from \"./style\";\r\n\r\nconst CometChatBadgeCount = (props) => {\r\n\r\n\tlet badgeCount = null;\r\n\t\r\n\tif(props.count) {\r\n\t\tbadgeCount = (\r\n\t\t\t<span css={badgeStyle(props)} className=\"unread-count\">{props.count}</span>\r\n\t\t);\r\n\t}\r\n\t\r\n\treturn badgeCount;\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatBadgeCount.defaultProps = {\r\n\tcount: 0,\r\n\ttheme: theme\r\n};\r\n\r\nCometChatBadgeCount.propTypes = {\r\n\tcount: PropTypes.number,\r\n\ttheme: PropTypes.object\r\n}\r\n\r\nexport { CometChatBadgeCount };","export const presenceStyle = (props) => {\r\n\r\n    let presenceStatus = {\r\n        backgroundColor: \"#C4C4C4\"\r\n    }\r\n\r\n    if (props.status === \"online\" || props.status === \"available\") {\r\n        presenceStatus = {\r\n            backgroundColor: \"#3BDF2F\"\r\n        }\r\n    }\r\n\r\n    return {\r\n        width: \"9px\",\r\n        height: \"9px\",\r\n        top: \"-12px\",\r\n        float: \"right\",\r\n        position: \"relative\",\r\n        ...presenceStatus\r\n    }\r\n}\r\n","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport {jsx} from \"@emotion/core\"\r\nimport PropTypes from \"prop-types\"\r\n\r\nimport {CometChatContext} from \"../../../util/CometChatContext\"\r\n\r\nimport {presenceStyle} from \"./style\"\r\n\r\nconst CometChatUserPresence = props => {\r\n\r\n\tconst context = React.useContext(CometChatContext);\r\n    const [presence, setPresence] = React.useState(false);\r\n\r\n    const togglePresence = () => {\r\n\r\n        context.FeatureRestriction.isUserPresenceEnabled().then(response => {\r\n\r\n            if (response !== presence) {\r\n                setPresence(response);\r\n            }\r\n\r\n        }).catch(error => {\r\n\r\n            if (presence !== false) {\r\n                setPresence(false);\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    React.useEffect(togglePresence);\r\n\r\n\t//if user presence feature is disabled\r\n\tif (presence === false) {\r\n\t\treturn null\r\n\t}\r\n\r\n\tconst borderWidth = props.borderWidth\r\n\tconst borderColor = props.borderColor\r\n\tconst cornerRadius = props.cornerRadius\r\n\r\n\tconst getStyle = () => ({borderWidth: borderWidth, borderStyle: \"solid\", borderColor: borderColor, borderRadius: cornerRadius})\r\n\r\n\treturn <span css={presenceStyle(props)} className=\"presence\" style={getStyle()}></span>\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatUserPresence.defaultProps = {\r\n\tborderWidth: \"1px\",\r\n\tborderColor: \"#eaeaea\",\r\n\tcornerRadius: \"50%\",\r\n};\r\n\r\nCometChatUserPresence.propTypes = {\r\n\tborderWidth: PropTypes.string,\r\n\tborderColor: PropTypes.string,\r\n\tcornerRadius: PropTypes.string,\r\n}\r\n\r\nexport {CometChatUserPresence}","import * as enums from \"../../util/enums.js\";\r\n\r\nimport translationAR from \"./locales/ar/translation.json\";\r\nimport translationDE from \"./locales/de/translation.json\";\r\nimport translationEN from \"./locales/en/translation.json\";\r\nimport translationES from \"./locales/es/translation.json\";\r\nimport translationFR from \"./locales/fr/translation.json\";\r\nimport translationHI from \"./locales/hi/translation.json\";\r\nimport translationMS from \"./locales/ms/translation.json\";\r\nimport translationPT from \"./locales/pt/translation.json\";\r\nimport translationRU from \"./locales/ru/translation.json\";\r\nimport translationZH from \"./locales/zh/translation.json\";\r\nimport translationZHTW from \"./locales/zh-tw/translation.json\";\r\nimport translationSV from \"./locales/sv/translation.json\";\r\nimport translationLT from \"./locales/lt/translation.json\";\r\nimport translationHU from \"./locales/hu/translation.json\";\r\n\r\n// the translations\r\nconst translations = {\r\n\tar: translationAR,\r\n\tde: translationDE,\r\n\ten: translationEN,\r\n\tes: translationES,\r\n\tfr: translationFR,\r\n\thi: translationHI,\r\n\tms: translationMS,\r\n\tpt: translationPT,\r\n\tru: translationRU,\r\n\tzh: translationZH,\r\n\t\"zh-tw\": translationZHTW,\r\n\tsv: translationSV,\r\n\tlt: translationLT,\r\n\thu: translationHU,\r\n};\r\n\r\nclass Translator {\r\n\r\n    static key = enums.CONSTANTS[\"LOCALE\"];\r\n    static rtlLanguages = [\"ar\"];\r\n    static defaultLanguage = \"en\";\r\n\r\n    static getLanguage = () => {\r\n\r\n        return localStorage.getItem(this.key);\r\n    }\r\n\r\n    static setLanguage = (language) => {\r\n\r\n        const item = this.key;\r\n        localStorage.setItem(item, language);\r\n    }\r\n\r\n    static getBrowserLanguage = () => ((navigator.languages && navigator.languages[0]) || navigator.language || navigator.userLanguage);\r\n\r\n    static getDefaultLanguage = () => {\r\n\r\n        //get the language from localstorage\r\n        const savedLanguage = this.getLanguage();\r\n\r\n        //get the language set in the browser\r\n        const browserLanguageCode = Translator.getBrowserLanguage().toLowerCase();\r\n        let browserLanguage = browserLanguageCode;\r\n\r\n        //check if the language set in the browser has hyphen(-), if yes split and take the first element of the array\r\n        if (browserLanguageCode !== \"zh-tw\" && browserLanguageCode.indexOf(\"-\") !== -1) {\r\n\r\n            const browserLanguageArray = browserLanguageCode.split(\"-\");\r\n            browserLanguage = browserLanguageArray[0];\r\n        }\r\n\r\n        //if there is language set in localstorage and it is different from browser language, update local storage and return the language code\r\n        if (savedLanguage) {\r\n\r\n            if (savedLanguage !== browserLanguage) {\r\n\r\n                this.setLanguage(browserLanguage);\r\n                \r\n                //if the translations are not available, default to en\r\n                return (translations.hasOwnProperty(browserLanguage)) ? browserLanguage : this.defaultLanguage;\r\n                \r\n            } else {\r\n\r\n                //if the translations are not available, default to en\r\n                return (translations.hasOwnProperty(browserLanguage)) ? browserLanguage : this.defaultLanguage;\r\n            }\r\n\r\n        } else {\r\n\r\n            this.setLanguage(browserLanguage);\r\n\r\n            //if the translations are not available, default to en\r\n            return (translations.hasOwnProperty(browserLanguage)) ? browserLanguage : this.defaultLanguage;\r\n        }\r\n    }\r\n\r\n    static getDirection(language) {\r\n        return this.rtlLanguages.includes(language) ? \"rtl\" : \"ltr\";\r\n    }\r\n\r\n    static translate(str, language) {\r\n\r\n        if (translations.hasOwnProperty(language)) {\r\n\r\n            const languageDb = translations[language];\r\n            if (languageDb.hasOwnProperty(str)) {\r\n                return languageDb[str];\r\n            }\r\n\r\n            return str;\r\n\r\n        } else {\r\n\r\n            const languageDb = translations[this.defaultLanguage];\r\n            if (languageDb.hasOwnProperty(str)) {\r\n                return languageDb[str];\r\n            }\r\n\r\n            return str;\r\n        }\r\n    }\r\n}\r\n\r\nexport default Translator;","export const notificationContainerStyle = (props, keyframes) => {\r\n\r\n    // const toastInRight = keyframes`\r\n    // from {transform: translateX(100%);}\r\n    // to {transform: translateX(0);}`;\r\n\r\n    // const toastInLeft = keyframes`\r\n    //     from {transform: translateX(-100%); }\r\n    //     to {transform: translateX(0);}`;\r\n\r\n    // let positionProp = {}\r\n    // if (props.position === \"top-right\") {\r\n\r\n    //     positionProp = {\r\n    //         top: \"12px\",\r\n    //         right: \"12px\",\r\n    //         transition: \"transform .6s ease-in\",\r\n    //         animation: `${toastInRight} .5s`\r\n    //     };\r\n\r\n    // } else if (props.position === \"bottom-right\") {\r\n\r\n    //     positionProp = {\r\n    //         bottom: \"12px\",\r\n    //         right: \"12px\",\r\n    //         transition: \"transform .6s ease-in\",\r\n    //         animation: `${toastInRight} .5s`\r\n    //     };\r\n\r\n    // } else if (props.position === \"top-left\") {\r\n\r\n    //     positionProp = {\r\n    //         top: \"12px\",\r\n    //         left: \"12px\",\r\n    //         transition: \"transform .6s ease-in\",\r\n    //         animation: `${toastInLeft} .5s`\r\n    //     };\r\n\r\n    // } else if (props.position === \"bottom-left\") {\r\n\r\n    //     positionProp = {\r\n    //         bottom: \"12px\",\r\n    //         left: \"12px\",\r\n    //         transition: \"transform .6s ease-in\",\r\n    //         animation: `${toastInLeft} .5s`\r\n    //     };\r\n    // }\r\n\r\n    return {\r\n        fontSize: \"14px\",\r\n        boxSizing: \"border-box\",\r\n        position: \"absolute\",\r\n        zIndex: \"5\",\r\n        width: \"80%\",\r\n        maxWidth: \"320px\",\r\n        top: \"70px\",\r\n        left: \"50%\",\r\n        transform: \"translate(-50%, 0)\",\r\n    }\r\n}\r\n\r\nexport const notificationStyle = (props, state) => {\r\n\r\n    let backgroundColorProp = {\r\n        backgroundColor: \"#000\",\r\n    };\r\n    if (state.type === \"ERROR\") {\r\n\r\n        backgroundColorProp = {\r\n            backgroundColor: \"#d9534f\",\r\n        };\r\n\r\n    } else if (state.type === \"SUCCESS\") {\r\n       \r\n        backgroundColorProp = {\r\n            backgroundColor: \"#5cb85c\",\r\n        };\r\n\r\n    } else if (state.type === \"INFO\") {\r\n\r\n        backgroundColorProp = {\r\n            backgroundColor: \"#5bc0de\",\r\n        };\r\n\r\n    } else if (state.type === \"WARNING\") {\r\n\r\n        backgroundColorProp = {\r\n            backgroundColor: \"#f0ad4e\",\r\n        };\r\n    }\r\n\r\n    return {\r\n        transition: \".3s ease\",\r\n        position: \"relative\",\r\n        pointerEvents: \"auto\",\r\n        overflow: \"hidden\",\r\n        padding: \"8px\",\r\n        marginBottom: \"16px\",\r\n        fontSize: \"13px\",\r\n        width: \"100%\",\r\n        minHeight: \"50px\",\r\n        boxShadow: \"0 0 10px #999\",\r\n        color: \"#fff\",\r\n        ...backgroundColorProp,\r\n        backgroundPosition: \"15px\",\r\n        backgroundRepeat: \"no-repeat\",\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"center\",\r\n        boxSizing: \"border-box\"\r\n    }\r\n}\r\n\r\nexport const notificationIconStyle = () => {\r\n\r\n    return {\r\n        marginRight: \"16px\",\r\n        width: \"25px\",\r\n        height: \"25px\",\r\n        flexShrink: \"0\",\r\n        \"img\": {\r\n            maxWidth: \"100%\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const notificationMessageContainerStyle = () => {\r\n\r\n    return {\r\n        width: \"calc(100% - 60px)\"\r\n    }\r\n}\r\n\r\nexport const notificationMessageStyle = () => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        textAlign: \"left\",\r\n        marginLeft: \"-1px\",\r\n    }\r\n}\r\n\r\nexport const notificationCloseButtonStyle = () => {\r\n\r\n    return {\r\n        width: \"25px\",\r\n        height: \"25px\",\r\n        padding: \"0\",\r\n        border: \"none\",\r\n        outline: \"none\",\r\n        backgroundColor: \"transparent\",\r\n        cursor:\" pointer\",\r\n        \"img\": {\r\n            flexShrink: \"0\",\r\n            maxWidth: \"100%\"\r\n        }\r\n    }\r\n}\r\n\r\nexport const iconStyle = (img, theme) => {\r\n\r\n    return {\r\n        width: \"24px\",\r\n        height: \"24px\",\r\n        display: \"inline-block\",\r\n        mask: `url(${img}) center center no-repeat`,\r\n        backgroundColor: `${theme.color.white}`,\r\n    };\r\n}\r\n","export default __webpack_public_path__ + \"static/media/close-circle-filled.9a00b56f.svg\";","export default __webpack_public_path__ + \"static/media/checkmark-filled.e0c5cecf.svg\";","export default __webpack_public_path__ + \"static/media/warning-filled.cfff2a11.svg\";","export default __webpack_public_path__ + \"static/media/info-filled.c300c7d4.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx, keyframes } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport {\r\n    notificationContainerStyle,\r\n    notificationStyle,\r\n    notificationIconStyle,\r\n    notificationMessageContainerStyle,\r\n    notificationMessageStyle,\r\n    notificationCloseButtonStyle,\r\n    iconStyle\r\n} from \"./style\";\r\n\r\nimport closeIcon from \"./resources/close-circle-filled.svg\";\r\nimport successIcon from \"./resources/checkmark-filled.svg\";\r\nimport errorIcon from \"./resources/warning-filled.svg\";\r\nimport infoIcon from \"./resources/info-filled.svg\";\r\nimport warningIcon from \"./resources/warning-filled.svg\";\r\n\r\nexport class CometChatToastNotification extends React.Component {\r\n\r\n    interval;\r\n    static types = {\r\n        \"INFO\": \"info\",\r\n        \"WARNING\": \"warning\",\r\n        \"SUCCESS\": \"success\",\r\n        \"ERROR\": \"error\",\r\n    }\r\n\r\n    constructor(props) {\r\n\r\n        super(props);\r\n\r\n        this._isMounted = false;\r\n        this.state = { \r\n            type: \"\",\r\n            message: \"\"\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this._isMounted = true;\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n\r\n        this._isMounted = false;\r\n        this.clearAutoDismiss();\r\n    }\r\n\r\n    setInfo = (message) => {\r\n\r\n        if (this._isMounted) {\r\n\r\n            this.setState({ type: \"INFO\", message: message, icon: infoIcon });\r\n            this.setAutoDismiss();\r\n        }\r\n    }\r\n\r\n    setError = (message) => {\r\n        \r\n        if (this._isMounted) {\r\n\r\n            this.setState({ type: \"ERROR\", message: message, icon: errorIcon });\r\n            //this.setAutoDismiss();\r\n        }\r\n    }\r\n\r\n    setSuccess = (message) => {\r\n\r\n        if (this._isMounted) {\r\n\r\n            this.setState({ type: \"SUCCESS\", message: message, icon: successIcon });\r\n            this.setAutoDismiss();\r\n        }\r\n    }\r\n\r\n    setWarning = (message) => {\r\n\r\n        if (this._isMounted) {\r\n\r\n            this.setState({ type: \"WARNING\", message: message, icon: warningIcon });\r\n            this.setAutoDismiss();\r\n        }\r\n    }\r\n\r\n    setAutoDismiss = () => {\r\n\r\n        this.clearAutoDismiss();\r\n        \r\n        if (this.props.autoDelete) {\r\n            this.interval = setTimeout(() => this.deleteToast(), this.props.dismissTime);\r\n        }\r\n    }\r\n\r\n    clearAutoDismiss = () => {\r\n        clearTimeout(this.interval);\r\n    }\r\n\r\n    deleteToast = () => {\r\n        this.setState({ type: \"\", message: \"\", icon: \"\" });\r\n    }\r\n\r\n    render() {\r\n\r\n        if (!this.state.type.trim().length || !this.state.message.trim().length) {\r\n            return null;\r\n        }\r\n\r\n        const messageClassName = `toast__message message-${CometChatToastNotification.types[this.state.type]}`;\r\n        const iconClassName = `toast__icon icon-${CometChatToastNotification.types[this.state.type]}`;\r\n        let toastIcon = (this.state.icon.trim().length) ? (\r\n\r\n            <div css={notificationIconStyle()} className={iconClassName}>\r\n                <i css={iconStyle(this.state.icon, this.props.theme)} title={Translator.translate(\"CLOSE\", this.props.lang)}></i>\r\n            </div>\r\n        ) : null;\r\n\r\n        return (\r\n            <div css={notificationContainerStyle(this.props, keyframes)} className=\"toast__notification\">\r\n                <div css={notificationStyle(this.props, this.state)} className=\"toast__container\">\r\n                    {toastIcon}\r\n                    <div css={notificationMessageContainerStyle()} className={messageClassName}>\r\n                        <p css={notificationMessageStyle()}>{Translator.translate(this.state.message, this.props.lang)}</p>\r\n                    </div>\r\n                    <button css={notificationCloseButtonStyle()} type=\"button\" onClick={this.deleteToast} className=\"toast__close\">\r\n                        <i css={iconStyle(closeIcon, this.props.theme)} title={Translator.translate(\"CLOSE\", this.props.lang)}></i>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nCometChatToastNotification.defaultProps = {\r\n\ttype: \"\",\r\n\tmessage: \"\",\r\n\ticon: \"\",\r\n\tposition: \"center\",\r\n\tautoDelete: true,\r\n\tdismissTime: 3000,\r\n\tlang: Translator.getDefaultLanguage(),\r\n\ttheme: theme,\r\n};\r\n\r\nCometChatToastNotification.propTypes = {\r\n\ttype: PropTypes.oneOf(Object.values(CometChatToastNotification.types).concat(\"\")),\r\n\tmessage: PropTypes.string.isRequired,\r\n\ticon: PropTypes.string.isRequired,\r\n\tposition: PropTypes.oneOf([\"top-right\", \"bottom-right\", \"top-left\", \"bottom-left\", \"center\"]),\r\n\tautoDelete: PropTypes.bool,\r\n\tdismissTime: PropTypes.number,\r\n\tlang: PropTypes.string,\r\n\ttheme: PropTypes.object,\r\n};\r\n","export const alertWrapperStyle = props => {\r\n\treturn {\r\n\t\twidth: \"calc(100% - 32px)\",\r\n\t\theight: \"auto\",\r\n\t\tbackgroundColor: `${props.theme.backgroundColor.white}`,\r\n\t\tposition: \"absolute\",\r\n\t\tmargin: \"0 auto\",\r\n\t\tpadding: \"16px\",\r\n\t\tfontSize: \"13px\",\r\n\t\tborderRadius: \"8px\",\r\n\t\tborder: \"1px solid #eee\",\r\n\t\tzIndex: \"4\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"0\",\r\n\t\tright: \"0\",\r\n\t\ttransform: \"translateY(-50%)\",\r\n\t};\r\n};\r\n\r\nexport const alertMessageStyle = () => {\r\n\treturn {\r\n\t\ttextAlign: \"center\"\r\n\t}\r\n}\r\n\r\nexport const alertButtonStyle = (props) => {\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"row\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t\tmargin: \"24px 0 0 0\",\r\n\t\t\"> button\": {\r\n\t\t\tpadding: \"5px 24px\",\r\n\t\t\tmargin: \"0 8px\",\r\n\t\t\tborderRadius: \"4px\",\r\n\t\t\tfontSize: \"12px\",\r\n\t\t\tfontWeight: \"600\",\r\n\t\t\tborder: `1px solid ${props.theme.primaryColor}`,\r\n\t\t},\r\n\t\t\"> button[value=yes]\": {\r\n\t\t\tbackgroundColor: `${props.theme.primaryColor}`,\r\n\t\t\tcolor: `${props.theme.color.white}`,\r\n\t\t},\r\n\t\t\"> button[value=no]\": {\r\n\t\t\tbackgroundColor: `${props.theme.backgroundColor.secondary}`,\r\n\t\t},\r\n\t};\r\n}","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport {jsx} from \"@emotion/core\";\r\n\r\nimport { CometChatBackdrop } from \"../\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {alertWrapperStyle, alertMessageStyle, alertButtonStyle} from \"./style\";\r\n\r\nclass CometChatConfirmDialog extends React.Component {\r\n\r\n    render() {\r\n\r\n        const confirmButtonText = this.props?.confirmButtonText ? this.props.confirmButtonText : Translator.translate(\"YES\", this.context.language);\r\n        const cancelButtonText = this.props?.cancelButtonText ? this.props.cancelButtonText : Translator.translate(\"NO\", this.getContext().language);\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <CometChatBackdrop show={true} style={{position:\"absolute\"}} clicked={this.props.close} />\r\n                <div className=\"confirm__dialog\" css={alertWrapperStyle(this.props)}>\r\n                    <div className=\"confirm__message\" css={alertMessageStyle(this.props)}>{this.props?.message}</div>\r\n                    <div className=\"confirm__buttons\" css={alertButtonStyle(this.props)}>\r\n                        <button type=\"button\" value=\"no\" onClick={this.props.onClick}>{cancelButtonText}</button>\r\n                        <button type=\"button\" value=\"yes\" onClick={this.props.onClick}>{confirmButtonText}</button>\r\n                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport { CometChatConfirmDialog };\r\n","import tabList from \"../resources/tabs.json\";\r\n\r\nexport class UIKitSettings {\r\n\twidgetSettings;\r\n\r\n\tstatic userListFilterOptions = {\r\n\t\tALL: \"all_users\",\r\n\t\tNONE: \"none\",\r\n\t\tFRIENDS: \"friends\",\r\n\t};\r\n\r\n\tstatic groupListFilterOptions = {\r\n\t\tPUBLIC: \"public_groups\",\r\n\t\tPASSWORD: \"password_protected_groups\",\r\n\t\tPUBLIC_AND_PASSWORD: \"public_and_password_protected_groups\",\r\n\t};\r\n\r\n\tstatic chatListFilterOptions = {\r\n\t\tUSERS: \"users\",\r\n\t\tGROUPS: \"groups\",\r\n\t\tUSERS_AND_GROUPS: \"all_chats\",\r\n\t};\r\n\r\n\tconstructor() {\r\n\t\tthis.customJS = \"\";\r\n\t\tthis.customCSS = \"\";\r\n\t\tthis.backgroundColor = \"\";\r\n\t\tthis.primaryColor = \"\";\r\n\t\tthis.foregroundColor = \"\";\r\n\t\tthis.overrideSystemBackgroundColor = \"\";\r\n\r\n\t\tthis.chatWindow = window;\r\n\r\n\t\tthis.userListMode = UIKitSettings.userListFilterOptions[\"ALL\"];\r\n\t\tthis.groupInMode = UIKitSettings.groupListFilterOptions[\"PUBLIC_AND_PASSWORD\"];\r\n\t\tthis.chatListMode = UIKitSettings.chatListFilterOptions[\"USERS_AND_GROUPS\"];\r\n\r\n\t\tthis.chats = true;\r\n\t\tthis.calls = false;\r\n\t\tthis.users = true;\r\n\t\tthis.groups = true;\r\n\t\tthis.userSettings = true;\r\n\t\tthis.tabs = Object.values(tabList);\r\n\r\n\t\tthis.searchUsers = true;\r\n\t\tthis.searchGroups = true;\r\n\t\tthis.searchMessages = true;\r\n\t\tthis.searchChats = true;\r\n\r\n\t\tthis.unreadCount = true;\r\n\r\n\t\tthis.publicGroup = true;\r\n\t\tthis.privateGroup = true;\r\n\t\tthis.passwordGroup = true;\r\n\r\n\t\tthis.blockUser = true;\r\n\t\tthis.viewShareMedia = true;\r\n\r\n\t\tthis.groupCreation = true;\r\n\t\tthis.allowDeleteGroup = true;\r\n\t\tthis.joinOrLeaveGroup = true;\r\n\t\tthis.viewGroupMembers = true;\r\n\t\tthis.kickMember = true;\r\n\t\tthis.banMember = true;\r\n\t\tthis.allowPromoteDemoteMembers = true;\r\n\t\tthis.allowAddMembers = true;\r\n\r\n\t\tthis.callNotifications = true;\r\n\t\tthis.joinLeaveNotifications = true;\r\n\r\n\t\tthis.enableSoundForMessages = true;\r\n\t\tthis.enableSoundForCalls = true;\r\n\r\n\t\tthis.userVideoCall = true;\r\n\t\tthis.groupVideoCall = true;\r\n\t\tthis.userAudioCall = true;\r\n\t\tthis.groupAudioCall = true;\r\n\r\n\t\tthis.sendTypingIndicator = true;\r\n\t\tthis.showUserPresence = true;\r\n\t\tthis.showReadDeliveryReceipts = true;\r\n\r\n\t\tthis.threadedChats = true;\r\n\t\tthis.hideDeletedMessages = false;\r\n\r\n\t\tthis.sendMessageInOneOnOne = true;\r\n\t\tthis.sendMessageInGroup = true;\r\n\t\tthis.editMessage = true;\r\n\t\tthis.deleteMessage = true;\r\n\t\tthis.replyingToMessage = true;\r\n\r\n\t\tthis.sendEmojis = true;\r\n\t\tthis.sendEmojisInLargerSize = true;\r\n\t\tthis.sendGifs = false;\r\n\t\tthis.shareCopyForwardMessage = false;\r\n\t\tthis.sendFiles = true;\r\n\t\tthis.sendPhotoVideos = true;\r\n\t\tthis.sendVoiceNotes = true;\r\n\t\tthis.sendLiveReaction = true;\r\n\r\n\t\tthis.sendMessageReaction = true;\r\n\t\tthis.collaborativeWhiteboard = true;\r\n\t\tthis.collaborativeDocument = true;\r\n\t\tthis.sendStickers = true;\r\n\t\tthis.shareLocation = false;\r\n\t\tthis.polls = true;\r\n\t\tthis.messageTranslation = true;\r\n\r\n\t\tthis.allowModeratorToDeleteMemberMessages = true;\r\n\t\tthis.setGroupInQnaModeByModerators = false;\r\n\t\tthis.highlightMessageFromModerators = false;\r\n\t\tthis.emailReplies = true;\r\n\t\tthis.smartReplies = true;\r\n\t\tthis.callRecording = true;\r\n\t\tthis.callLiveStreaming = true;\r\n\t\tthis.callTranscription = true;\r\n\t\tthis.thumbnailGeneration = true;\r\n\t\tthis.linkPreview = true;\r\n\t\tthis.saveMessages = true;\r\n\t\tthis.pinMessages = true;\r\n\t\tthis.richMediaPreview = true;\r\n\t\tthis.voiceTranscription = true;\r\n\t\tthis.mentions = true;\r\n\t\tthis.xssFilter = true;\r\n\t\tthis.profanityFilter = true;\r\n\t\tthis.imageModeration = true;\r\n\t\tthis.dataMasking = true;\r\n\t\tthis.malwareScanner = true;\r\n\t\tthis.sentimentAnalysis = true;\r\n\t\tthis.inflightMessageModeration = true;\r\n\t\tthis.messageHistory = true;\r\n\r\n\t\tthis.viewProfile = true;\r\n\t\tthis.messageInPrivate = true;\r\n\r\n\t\tthis.showCallRecordingOption = true;\r\n\t}\r\n\r\n\tsetCustomJS = customJS => {\r\n\t\tthis.customJS = customJS;\r\n\t};\r\n\r\n\tsetCustomCSS = customCSS => {\r\n\t\tthis.customCSS = customCSS;\r\n\t};\r\n\r\n\tsetTabs = tabList => {\r\n\t\tthis.tabs = tabList;\r\n\t};\r\n\r\n\tsetUserSettings = userSettings => {\r\n\t\tthis.userSettings = userSettings;\r\n\t};\r\n\r\n\tsetCalls = calls => {\r\n\t\tthis.calls = calls;\r\n\t};\r\n\r\n\tsetUsers = users => {\r\n\t\tthis.users = users;\r\n\t};\r\n\r\n\tsetChats = chats => {\r\n\t\tthis.chats = chats;\r\n\t};\r\n\r\n\tsetGroups = groups => {\r\n\t\tthis.groups = groups;\r\n\t};\r\n\r\n\tsetChatListMode = option => {\r\n\t\tif (!option.trim().length) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst chatListFilterKey = this.returnMatchedKey(UIKitSettings.chatListFilterOptions, option);\r\n\t\tif (chatListFilterKey) {\r\n\t\t\tthis.chatListMode = UIKitSettings.chatListFilterOptions[chatListFilterKey];\r\n\t\t}\r\n\t};\r\n\r\n\tsetUserListMode = option => {\r\n\t\tif (!option.trim().length) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst userListFilterKey = this.returnMatchedKey(UIKitSettings.userListFilterOptions, option);\r\n\t\tif (userListFilterKey) {\r\n\t\t\tthis.userListMode = UIKitSettings.userListFilterOptions[userListFilterKey];\r\n\t\t}\r\n\t};\r\n\r\n\tsetGroupListMode = () => {};\r\n\r\n\tsetUserVideoCall = userVideoCall => {\r\n\t\tthis.userVideoCall = userVideoCall;\r\n\t};\r\n\r\n\tsetGroupVideoCall = groupVideoCall => {\r\n\t\tthis.groupVideoCall = groupVideoCall;\r\n\t};\r\n\r\n\tsetUserAudioCall = userAudioCall => {\r\n\t\tthis.userAudioCall = userAudioCall;\r\n\t};\r\n\r\n\tsetGroupAudioCall = groupAudioCall => {\r\n\t\tthis.groupAudioCall = groupAudioCall;\r\n\t};\r\n\r\n\tsetEditMessage = editMessage => {\r\n\t\tthis.editMessage = editMessage;\r\n\t};\r\n\r\n\tsetSendMessageInOneOnOne = sendMessageInOneOnOne => {\r\n\t\tthis.sendMessageInOneOnOne = sendMessageInOneOnOne;\r\n\t};\r\n\r\n\tsetSendMessageInGroup = sendMessageInGroup => {\r\n\t\tthis.sendMessageInGroup = sendMessageInGroup;\r\n\t};\r\n\r\n\tsetJoinOrLeaveGroup = joinOrLeaveGroup => {\r\n\t\tthis.joinOrLeaveGroup = joinOrLeaveGroup;\r\n\t};\r\n\r\n\tsetBlockUser = blockUser => {\r\n\t\tthis.blockUser = blockUser;\r\n\t};\r\n\r\n\tsetSendEmojis = sendEmojis => {\r\n\t\tthis.sendEmojis = sendEmojis;\r\n\t};\r\n\r\n\tsetSendEmojisInLargerSize = sendEmojisInLargerSize => {\r\n\t\tthis.sendEmojisInLargerSize = sendEmojisInLargerSize;\r\n\t};\r\n\r\n\tsetSendGifs = sendGifs => {\r\n\t\tthis.sendGifs = sendGifs;\r\n\t};\r\n\r\n\tsetShareCopyForwardMessage = shareCopyForwardMessage => {\r\n\t\tthis.shareCopyForwardMessage = shareCopyForwardMessage;\r\n\t};\r\n\r\n\tsetSendFiles = sendFiles => {\r\n\t\tthis.sendFiles = sendFiles;\r\n\t};\r\n\r\n\tsetSendPhotoVideos = sendPhotoVideos => {\r\n\t\tthis.sendPhotoVideos = sendPhotoVideos;\r\n\t};\r\n\r\n\tsetViewShareMedia = viewShareMedia => {\r\n\t\tthis.viewShareMedia = viewShareMedia;\r\n\t};\r\n\r\n\tsetEnableSoundForMessages = enableSoundForMessages => {\r\n\t\tthis.enableSoundForMessages = enableSoundForMessages;\r\n\t};\r\n\r\n\tsetEnableSoundForCalls = enableSoundForCalls => {\r\n\t\tthis.enableSoundForCalls = enableSoundForCalls;\r\n\t};\r\n\r\n\tsetSendStickers = sendStickers => {\r\n\t\tthis.sendStickers = sendStickers;\r\n\t};\r\n\r\n\tsetViewGroupMembers = viewGroupMembers => {\r\n\t\tthis.viewGroupMembers = viewGroupMembers;\r\n\t};\r\n\r\n\tsetCallNotifications = callNotifications => {\r\n\t\tthis.callNotifications = callNotifications;\r\n\t};\r\n\r\n\tsetAllowDeleteGroup = allowDeleteGroup => {\r\n\t\tthis.allowDeleteGroup = allowDeleteGroup;\r\n\t};\r\n\r\n\tsetKickMember = kickMember => {\r\n\t\tthis.kickMember = kickMember;\r\n\t};\r\n\r\n\tsetBanMember = banMember => {\r\n\t\tthis.banMember = banMember;\r\n\t};\r\n\r\n\tsetAllowPromoteDemoteMembers = allowPromoteDemoteMembers => {\r\n\t\tthis.allowPromoteDemoteMembers = allowPromoteDemoteMembers;\r\n\t};\r\n\r\n\tsetAllowAddMembers = allowAddMembers => {\r\n\t\tthis.allowAddMembers = allowAddMembers;\r\n\t};\r\n\r\n\tsetShareLocation = shareLocation => {\r\n\t\tthis.shareLocation = shareLocation;\r\n\t};\r\n\r\n\tsetJoinLeaveNotifications = joinLeaveNotifications => {\r\n\t\tthis.joinLeaveNotifications = joinLeaveNotifications;\r\n\t};\r\n\r\n\tsetSendVoiceNotes = sendVoiceNotes => {\r\n\t\tthis.sendVoiceNotes = sendVoiceNotes;\r\n\t};\r\n\r\n\tsetMessageTranslation = messageTranslation => {\r\n\t\tthis.messageTranslation = messageTranslation;\r\n\t};\r\n\r\n\tsetGroupCreation = groupCreation => {\r\n\t\tthis.groupCreation = groupCreation;\r\n\t};\r\n\r\n\tsetSendTypingIndicator = sendTypingIndicator => {\r\n\t\tthis.sendTypingIndicator = sendTypingIndicator;\r\n\t};\r\n\r\n\tsetShowUserPresence = showUserPresence => {\r\n\t\tthis.showUserPresence = showUserPresence;\r\n\t};\r\n\r\n\tsetDeleteMessage = deleteMessage => {\r\n\t\tthis.deleteMessage = deleteMessage;\r\n\t};\r\n\r\n\tsetThreadedChats = threadedChats => {\r\n\t\tthis.threadedChats = threadedChats;\r\n\t};\r\n\r\n\tsetReplyingToMessage = replyingToMessage => {\r\n\t\tthis.replyingToMessage = replyingToMessage;\r\n\t};\r\n\r\n\tsetShowReadDeliveryReceipts = showReadDeliveryReceipts => {\r\n\t\tthis.showReadDeliveryReceipts = showReadDeliveryReceipts;\r\n\t};\r\n\r\n\tsetHideDeletedMessages = hideDeletedMessages => {\r\n\t\tthis.hideDeletedMessages = hideDeletedMessages;\r\n\t};\r\n\r\n\tsetEmailReplies = emailReplies => {\r\n\t\tthis.emailReplies = emailReplies;\r\n\t};\r\n\r\n\tsetSendMessageReaction = sendMessageReaction => {\r\n\t\tthis.sendMessageReaction = sendMessageReaction;\r\n\t};\r\n\r\n\tsetCollaborativeWhiteboard = collaborativeWhiteboard => {\r\n\t\tthis.collaborativeWhiteboard = collaborativeWhiteboard;\r\n\t};\r\n\r\n\tsetCollaborativeDocument = collaborativeDocument => {\r\n\t\tthis.collaborativeDocument = collaborativeDocument;\r\n\t};\r\n\r\n\tsetPolls = polls => {\r\n\t\tthis.polls = polls;\r\n\t};\r\n\r\n\tsetSendLiveReaction = sendLiveReaction => {\r\n\t\tthis.sendLiveReaction = sendLiveReaction;\r\n\t};\r\n\r\n\tsetPublicGroup = publicGroup => {\r\n\t\tthis.publicGroup = publicGroup;\r\n\t};\r\n\r\n\tsetPrivateGroup = privateGroup => {\r\n\t\tthis.privateGroup = privateGroup;\r\n\t};\r\n\r\n\tsetPasswordGroup = passwordGroup => {\r\n\t\tthis.passwordGroup = passwordGroup;\r\n\t};\r\n\r\n\tsetAllowModeratorToDeleteMemberMessages = allowModeratorToDeleteMemberMessages => {\r\n\t\tthis.allowModeratorToDeleteMemberMessages = allowModeratorToDeleteMemberMessages;\r\n\t};\r\n\r\n\tsetUnreadCount = unreadCount => {\r\n\t\tthis.unreadCount = unreadCount;\r\n\t};\r\n\r\n\tsetSmartReplies = smartReplies => {\r\n\t\tthis.smartReplies = smartReplies;\r\n\t};\r\n\r\n\tsetSearchUsers = searchUsers => {\r\n\t\tthis.searchUsers = searchUsers;\r\n\t};\r\n\r\n\tsetSearchGroups = searchGroups => {\r\n\t\tthis.searchGroups = searchGroups;\r\n\t};\r\n\r\n\tsetSearchMessages = searchMessages => {\r\n\t\tthis.searchMessages = searchMessages;\r\n\t};\r\n\r\n\tsetCallRecording = callRecording => {\r\n\t\tthis.callRecording = callRecording;\r\n\t};\r\n\r\n\tsetCallLiveStreaming = callLiveStreaming => {\r\n\t\tthis.callLiveStreaming = callLiveStreaming;\r\n\t};\r\n\r\n\tsetCallTranscription = callTranscription => {\r\n\t\tthis.callTranscription = callTranscription;\r\n\t};\r\n\r\n\tsetThumbnailGeneration = thumbnailGeneration => {\r\n\t\tthis.thumbnailGeneration = thumbnailGeneration;\r\n\t};\r\n\r\n\tsetLinkPreview = linkPreview => {\r\n\t\tthis.linkPreview = linkPreview;\r\n\t};\r\n\r\n\tsetSaveMessages = saveMessages => {\r\n\t\tthis.saveMessages = saveMessages;\r\n\t};\r\n\r\n\tsetPinMessages = pinMessages => {\r\n\t\tthis.pinMessages = pinMessages;\r\n\t};\r\n\r\n\tsetRichMediaPreview = richMediaPreview => {\r\n\t\tthis.richMediaPreview = richMediaPreview;\r\n\t};\r\n\r\n\tsetVoiceTranscription = voiceTranscription => {\r\n\t\tthis.voiceTranscription = voiceTranscription;\r\n\t};\r\n\r\n\tsetMentions = mentions => {\r\n\t\tthis.mentions = mentions;\r\n\t};\r\n\r\n\tsetXssFilter = xssFilter => {\r\n\t\tthis.xssFilter = xssFilter;\r\n\t};\r\n\r\n\tsetProfanityFilter = profanityFilter => {\r\n\t\tthis.profanityFilter = profanityFilter;\r\n\t};\r\n\r\n\tsetImageModeration = imageModeration => {\r\n\t\tthis.imageModeration = imageModeration;\r\n\t};\r\n\r\n\tsetDataMasking = dataMasking => {\r\n\t\tthis.dataMasking = dataMasking;\r\n\t};\r\n\r\n\tsetMalwareScanner = malwareScanner => {\r\n\t\tthis.malwareScanner = malwareScanner;\r\n\t};\r\n\r\n\tsetSentimentAnalysis = sentimentAnalysis => {\r\n\t\tthis.sentimentAnalysis = sentimentAnalysis;\r\n\t};\r\n\r\n\tsetInflightMessageModeration = inflightMessageModeration => {\r\n\t\tthis.inflightMessageModeration = inflightMessageModeration;\r\n\t};\r\n\r\n\tsetMessageHistory = messageHistory => {\r\n\t\tthis.messageHistory = messageHistory;\r\n\t};\r\n\r\n\tsetViewProfile = viewProfile => {\r\n\t\tthis.viewProfile = viewProfile;\r\n\t};\r\n\r\n\tsetMessageInPrivate = messageInPrivate => {\r\n\t\tthis.messageInPrivate = messageInPrivate;\r\n\t};\r\n\r\n\tsetShowCallRecordingOption = showCallRecordingOption => {\r\n\t\tthis.showCallRecordingOption = showCallRecordingOption;\r\n\t};\r\n\r\n\tsetChatWindow = chatWindow => {\r\n\t\tthis.chatWindow = chatWindow;\r\n\t};\r\n\r\n\treturnMatchedKey = (matchWith, optionToMatch) => {\r\n\t\tfor (const [key, value] of Object.entries(matchWith)) {\r\n\t\t\tif (value === optionToMatch) {\r\n\t\t\t\treturn key;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n}\r\n","import { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nexport class FeatureRestriction {\r\n\t/**\r\n\t * Core Chat\r\n\t */\r\n\tstatic chat_users_list_enabled = \"core.chat.users.list.enabled\";\r\n\tstatic chat_users_presence_enabled = \"core.chat.users.presence.enabled\";\r\n\tstatic chat_users_search_enabled = \"core.chat.users.search.enabled\";\r\n\r\n\tstatic chat_groups_enabled = \"core.chat.groups.enabled\";\r\n\tstatic chat_groups_public_enabled = \"core.chat.groups.public.enabled\";\r\n\tstatic chat_groups_private_enabled = \"core.chat.groups.private.enabled\";\r\n\tstatic chat_groups_password_enabled = \"core.chat.groups.password.enabled\";\r\n\tstatic chat_groups_search_enabled = \"core.chat.groups.search.enabled\";\r\n\r\n\tstatic chat_messages_media_enabled = \"core.chat.messages.media.enabled\";\r\n\tstatic chat_messages_threads_enabled = \"core.chat.messages.threads.enabled\";\r\n\tstatic chat_messages_replies_enabled = \"core.chat.messages.replies.enabled\";\r\n\tstatic chat_messages_receipts_enabled = \"core.chat.messages.receipts.enabled\";\r\n\tstatic chat_messages_unread_count_enabled = \"core.chat.messages.unread-count.enabled\";\r\n\tstatic chat_messages_search_enabled = \"core.chat.messages.search.enabled\";\r\n\tstatic chat_messages_history_enabled = \"core.chat.messages.history.enabled\";\r\n\tstatic chat_messages_custom_enabled = \"core.chat.messages.custom.enabled\";\r\n\r\n\tstatic chat_one_on_one_enabled = \"core.chat.one-on-one.enabled\";\r\n\tstatic chat_voice_notes_enabled = \"core.chat.voice-notes.enabled\";\r\n\tstatic chat_typing_indicator_enabled = \"core.chat.typing-indicator.enabled\";\r\n\r\n\t/**\r\n\t * Voice & Video Calling/Conferencing\r\n\t */\r\n\tstatic calls_enabled = \"core.call.enabled\";\r\n\tstatic call_one_on_one_video_enabled = \"core.call.one-on-one.video.enabled\";\r\n\tstatic call_groups_video_enabled = \"core.call.groups.video.enabled\";\r\n\tstatic call_one_on_one_audio_enabled = \"core.call.one-on-one.audio.enabled\";\r\n\tstatic call_groups_audio_enabled = \"core.call.groups.audio.enabled\";\r\n\tstatic call_recording_enabled = \"core.call.recording.enabled\";\r\n\tstatic call_live_streaming_enabled = \"core.call.live-streaming.enabled\";\r\n\tstatic call_transcript_enabled = \"core.call.transcript.enabled\";\r\n\r\n\t/**\r\n\t * Collaboration\r\n\t */\r\n\tstatic collaboration_whiteboard_enabled = \"features.collaboration.whiteboard.enabled\";\r\n\tstatic collaboration_document_enabled = \"features.collaboration.document.enabled\";\r\n\r\n\t/**\r\n\t * Moderation\r\n\t */\r\n\tstatic moderation_groups_moderators_enabled = \"features.moderation.groups.moderators.enabled\";\r\n\tstatic moderation_users_block_enabled = \"features.moderation.users.block.enabled\";\r\n\tstatic moderation_groups_kick_enabled = \"features.moderation.groups.kick.enabled\";\r\n\tstatic moderation_groups_ban_enabled = \"features.moderation.groups.ban.enabled\";\r\n\tstatic moderation_xss_filter_enabled = \"features.moderation.xss-filter.enabled\";\r\n\tstatic moderation_profanity_filter_enabled = \"features.moderation.profanity-filter.enabled\";\r\n\tstatic moderation_image_moderation_enabled = \"features.moderation.image-moderation.enabled\";\r\n\tstatic moderation_data_masking_enabled = \"features.moderation.data-masking.enabled\";\r\n\tstatic moderation_malware_scanner_enabled = \"features.moderation.malware-scanner.enabled\";\r\n\tstatic moderation_sentiment_analysis_enabled = \"features.moderation.sentiment-analysis.enabled\";\r\n\tstatic moderation_inflight_message_moderation_enabled = \"features.moderation.inflight-message-moderation.enabled\";\r\n\r\n\t/**\r\n\t * User Engagement\r\n\t */\r\n\tstatic reactions_enabled = \"features.ue.reactions.enabled\";\r\n\tstatic emojis_enabled = \"features.ue.emojis.enabled\";\r\n\tstatic stickers_enabled = \"features.ue.stickers.enabled\";\r\n\tstatic message_translation_enabled = \"features.ue.message-translation.enabled\";\r\n\tstatic email_replies_enabled = \"features.ue.email-replies.enabled\";\r\n\tstatic polls_enabled = \"features.ue.polls.enabled\";\r\n\tstatic live_reactions_enabled = \"features.ue.live-reactions.enabled\";\r\n\tstatic smart_replies_enabled = \"features.ue.smart-replies.enabled\";\r\n\tstatic mentions_enabled = \"features.ue.mentions.enabled\";\r\n\r\n\t/**\r\n\t * User Experience\r\n\t */\r\n\tstatic thumbnail_generation_enabled = \"features.ux.thumbnail-generation.enabled\";\r\n\tstatic link_preview_enabled = \"features.ux.link-preview.enabled\";\r\n\tstatic messages_saved_enabled = \"features.ux.messages.saved.enabled\";\r\n\tstatic messages_pinned_enabled = \"features.ux.messages.pinned.enabled\";\r\n\tstatic rich_media_preview_enabled = \"features.ux.rich-media-preview.enabled\";\r\n\tstatic voice_transcription_enabled = \"features.ux.voice-transcription.enabled\";\r\n\r\n\t/**\r\n\t * Extensions slug\r\n\t */\r\n\tstatic dataMasking = \"data-masking\";\r\n\tstatic profanityFilter = \"profanity-filter\";\r\n\tstatic thumbnailGeneration = \"thumbnail-generator\";\r\n\tstatic linkPreview = \"link-preview\";\r\n\tstatic richMediaPreview = \"rich-media\";\r\n\tstatic sticker = \"stickers\";\r\n\tstatic reactions = \"reactions\";\r\n\tstatic messageTranslation = \"message-translation\";\r\n\tstatic smartReplies = \"smart-reply\";\r\n\tstatic collaborationWhiteboard = \"whiteboard\";\r\n\tstatic collaborationDocument = \"document\";\r\n\tstatic pinMessages = \"pin-message\";\r\n\tstatic saveMessages = \"save-message\";\r\n\tstatic voiceTranscription = \"voice-transcription\";\r\n\tstatic polls = \"polls\";\r\n\tstatic xssFilter = \"xss-filter\";\r\n\tstatic imageModeration = \"image-moderation\";\r\n\tstatic malwareScanner = \"virus-malware-scanner\";\r\n\tstatic sentimentAnalysis = \"sentiment-analysis\";\r\n\tstatic emailReplies = \"email-replies\";\r\n\tstatic emojis = \"emojis\";\r\n\tstatic mentions = \"mentions\";\r\n\r\n\tstatic isExtensionEnabled = extensionKey => {\r\n\t\treturn new Promise(resolve =>\r\n\t\t\tCometChat.isExtensionEnabled(extensionKey)\r\n\t\t\t\t.then(response => resolve(response))\r\n\t\t\t\t.catch(error => resolve(false)),\r\n\t\t);\r\n\t};\r\n\r\n\tUIKitSettings;\r\n\r\n\tconstructor(UIKitSettings) {\r\n\t\tthis.UIKitSettings = UIKitSettings;\r\n\t}\r\n\r\n\tisRecentChatListEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.chats));\r\n\tisGroupListEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.groups));\r\n\tisUserSettingsEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.userSettings));\r\n\tisEditMessageEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.editMessage));\r\n\tisQNAModeEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.setGroupInQnaModeByModerators));\r\n\tisHighlightMessagesEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.highlightMessageFromModerators));\r\n\tisJoinLeaveGroupsEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.joinOrLeaveGroup));\r\n\tisLargerSizeEmojisEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.sendEmojisInLargerSize));\r\n\tisGifsEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.sendGifs));\r\n\tisShareCopyForwardMessageEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.shareCopyForwardMessage));\r\n\tisSharedMediaEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.viewShareMedia));\r\n\tisMessagesSoundEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.enableSoundForMessages));\r\n\tisCallsSoundEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.enableSoundForCalls));\r\n\tisViewingGroupMembersEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.viewGroupMembers));\r\n\tisCallActionMessagesEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.callNotifications));\r\n\tisGroupDeletionEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.allowDeleteGroup));\r\n\tisChangingGroupMemberScopeEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.allowPromoteDemoteMembers));\r\n\tisAddingGroupMembersEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.allowAddMembers));\r\n\tisLocationSharingEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.shareLocation));\r\n\tisGroupActionMessagesEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.joinLeaveNotifications));\r\n\tisGroupCreationEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.groupCreation));\r\n\tisDeleteMessageEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.deleteMessage));\r\n\tisHideDeletedMessagesEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.hideDeletedMessages));\r\n\tisViewProfileEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.viewProfile));\r\n\tisMessageInPrivateEnabled = () => new Promise(resolve => resolve(this.UIKitSettings.messageInPrivate));\r\n\r\n\tisCallListEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.calls_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.calls))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisUserListEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_users_list_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.users))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisOneOnOneVideoCallEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.call_one_on_one_video_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.userVideoCall))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisGroupVideoCallEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.call_groups_video_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.groupVideoCall))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisOneOnOneAudioCallEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.call_one_on_one_audio_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.userAudioCall))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisGroupAudioCallEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.call_groups_audio_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.groupAudioCall))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisOneOnOneChatEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_one_on_one_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.sendMessageInOneOnOne))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisGroupChatEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_groups_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.sendMessageInGroup))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisDeleteMemberMessageEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.moderation_groups_moderators_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.allowModeratorToDeleteMemberMessages))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisBlockUserEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.moderation_users_block_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.blockUser))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisEmojisEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.emojis_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.sendEmojis))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisFilesEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_messages_media_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.sendFiles))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisPhotosVideosEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_messages_media_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.sendPhotoVideos))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisKickingGroupMembersEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.moderation_groups_kick_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.kickMember))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisBanningGroupMembersEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.moderation_groups_ban_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.banMember))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisVoiceNotesEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_voice_notes_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.sendVoiceNotes))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisTypingIndicatorsEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_typing_indicator_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.sendTypingIndicator))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisUserPresenceEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_users_presence_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.showUserPresence))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisThreadedMessagesEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_messages_threads_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.threadedChats))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisMessageRepliesEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_messages_replies_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.replyingToMessage))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisDeliveryReceiptsEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_messages_receipts_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.showReadDeliveryReceipts))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisLiveReactionsEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.live_reactions_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.sendLiveReaction))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisPublicGroupEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_groups_public_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.publicGroup))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisPrivateGroupEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_groups_private_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.privateGroup))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisPasswordGroupEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_groups_password_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.passwordGroup))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisUnreadCountEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_messages_unread_count_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.unreadCount))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisUserSearchEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_users_search_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.searchUsers))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisGroupSearchEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_groups_search_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.searchGroups))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisMessageSearchEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_messages_search_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.searchMessages))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisCallRecordingEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.call_recording_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.callRecording))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisCallLiveStreamingEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.call_live_streaming_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.callLiveStreaming))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisCallTranscriptEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.call_transcript_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.callTranscription))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisMessageHistoryEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.chat_messages_history_enabled)\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.messageHistory))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisMessageTranslationEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.message_translation_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.messageTranslation))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.messageTranslation))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisReactionsEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.reactions_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.reactions))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.sendMessageReaction))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisCollaborativeWhiteBoardEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.collaboration_whiteboard_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.collaborationWhiteboard))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.collaborativeWhiteboard))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisCollaborativeDocumentEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.collaboration_document_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.collaborationDocument))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.collaborativeDocument))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisStickersEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.stickers_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.sticker))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.sendStickers))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisEmailRepliesEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.email_replies_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.emailReplies))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.emailReplies))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisPollsEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.polls_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.polls))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.polls))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisSmartRepliesEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.smart_replies_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.smartReplies))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.smartReplies))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisThumbnailGenerationEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.thumbnail_generation_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.thumbnailGeneration))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.thumbnailGeneration))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisLinkPreviewEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.link_preview_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.linkPreview))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.linkPreview))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisSaveMessagesEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.messages_saved_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.saveMessages))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.saveMessages))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisPinMessagesEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.messages_pinned_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.pinMessages))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.pinMessages))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisRichMediaPreviewEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.rich_media_preview_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.richMediaPreview))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.richMediaPreview))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisVoiceTranscriptionEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.voice_transcription_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.voiceTranscription))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.voiceTranscription))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisMentionsEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.mentions_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.mentions))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.mentions))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisXssFilterEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.moderation_xss_filter_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.xssFilter))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.xssFilter))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisProfanityFilterEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.moderation_profanity_filter_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.profanityFilter))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.profanityFilter))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisImageModerationEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.moderation_image_moderation_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.imageModeration))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.imageModeration))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisDataMaskingEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.moderation_data_masking_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.dataMasking))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.dataMasking))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisMalwareScannerEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.moderation_malware_scanner_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.malwareScanner))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.malwareScanner))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tisSentimentAnalysisEnabled = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tCometChat.isFeatureEnabled(FeatureRestriction.moderation_sentiment_analysis_enabled)\r\n\t\t\t\t.then(response => response && FeatureRestriction.isExtensionEnabled(FeatureRestriction.sentimentAnalysis))\r\n\t\t\t\t.then(response => resolve(response && this.UIKitSettings.sentimentAnalysis))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\t// isInFlightMessageModerationEnabled = () => {\r\n\r\n\t//     return new Promise(resolve => {\r\n\r\n\t//         CometChat.isFeatureEnabled(FeatureRestriction.moderation_inflight_message_moderation_enabled)\r\n\t//             .then(response => {\r\n\r\n\t//                 return response\r\n\t//                     && FeatureRestriction.isExtensionEnabled(FeatureRestriction.sentimentAnalysis)\r\n\t//                     && this.UIKitSettings.inflightMessageModeration;\r\n\t//             })\r\n\t//             .catch(error => resolve(false));\r\n\t//     });\r\n\t// }\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatToastNotification } from \"../components/Shared\";\r\nimport { UIKitSettings } from \"./UIKitSettings\";\r\nimport * as enums from \"./enums.js\";\r\n\r\nimport Translator from \"../resources/localization/translator\";\r\nimport { FeatureRestriction } from \"./FeatureRestriction\";\r\nimport { theme } from \"../resources/theme\";\r\n\r\nexport const CometChatContext = React.createContext({});\r\n\r\nexport class CometChatContextProvider extends React.Component {\r\n\tloggedInUser;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tconst settings = new UIKitSettings();\r\n\t\tconst featureRestriction = new FeatureRestriction(settings);\r\n\r\n\t\tthis.state = {\r\n\t\t\titem: {},\r\n\t\t\ttype: \"\",\r\n\t\t\ttoastMessage: props.toastMessage,\r\n\t\t\tgroupMembers: props.groupMembers,\r\n\t\t\tbannedGroupMembers: props.bannedGroupMembers,\r\n\t\t\tgroupAdmins: props.groupAdmins,\r\n\t\t\tgroupModerators: props.groupModerators,\r\n\t\t\tcallInProgress: props.callInProgress,\r\n\t\t\tcallType: \"\",\r\n\t\t\tdeletedGroupId: \"\",\r\n\t\t\tleftGroupId: \"\",\r\n\t\t\tlastMessage: {},\r\n\t\t\tunreadMessages: [],\r\n\t\t\tclearedUnreadMessages: false,\r\n\t\t\tdirectCallCustomMessage: {},\r\n\t\t\tdirectCallCustomMessageAction: \"\",\r\n\t\t\tUIKitSettings: settings,\r\n\t\t\tFeatureRestriction: featureRestriction,\r\n\t\t\ttheme: theme,\r\n\t\t\tlanguage: props.language,\r\n\t\t\troles: {\r\n\t\t\t\t[CometChat.GROUP_MEMBER_SCOPE.ADMIN]: Translator.translate(\"ADMINISTRATOR\", props.language),\r\n\t\t\t\t[CometChat.GROUP_MEMBER_SCOPE.MODERATOR]: Translator.translate(\"MODERATOR\", props.language),\r\n\t\t\t\t[CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT]: Translator.translate(\"PARTICIPANT\", props.language),\r\n\t\t\t},\r\n\t\t\tgetLoggedinUser: this.getLoggedinUser,\r\n\t\t\tsetGroupMembers: this.setGroupMembers,\r\n\t\t\tupdateGroupMembers: this.updateGroupMembers,\r\n\t\t\tsetAllGroupMembers: this.setAllGroupMembers,\r\n\t\t\tsetGroupAdmins: this.setGroupAdmins,\r\n\t\t\tsetGroupModerators: this.setGroupModerators,\r\n\t\t\tsetBannedGroupMembers: this.setBannedGroupMembers,\r\n\t\t\tupdateBannedGroupMembers: this.updateBannedGroupMembers,\r\n\t\t\tclearGroupMembers: this.clearGroupMembers,\r\n\t\t\tsetToastMessage: this.setToastMessage,\r\n\t\t\tsetCallInProgress: this.setCallInProgress,\r\n\t\t\tsetItem: this.setItem,\r\n\t\t\tsetType: this.setType,\r\n\t\t\tsetTypeAndItem: this.setTypeAndItem,\r\n\t\t\tsetDeletedGroupId: this.setDeletedGroupId,\r\n\t\t\tsetLeftGroupId: this.setLeftGroupId,\r\n\t\t\tsetLastMessage: this.setLastMessage,\r\n\t\t\tsetClearedUnreadMessages: this.setClearedUnreadMessages,\r\n\t\t\tsetDirectCallCustomMessage: this.setDirectCallCustomMessage,\r\n\t\t\tcheckIfDirectCallIsOngoing: this.checkIfDirectCallIsOngoing,\r\n\t\t\tcheckIfCallIsOngoing: this.checkIfCallIsOngoing,\r\n\t\t\tgetActiveCallSessionID: this.getActiveCallSessionID,\r\n\t\t\thasKeyValue: this.hasKeyValue,\r\n\t\t\tsetRoles: this.setRoles,\r\n\t\t};\r\n\r\n\t\tthis.toastRef = React.createRef();\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getLoggedinUser();\r\n\r\n\t\tif (this.props.user.trim().length) {\r\n\t\t\tthis.getUser(this.props.user.trim())\r\n\t\t\t\t.then(user => {\r\n\t\t\t\t\tthis.setType(CometChat.ACTION_TYPE.TYPE_USER);\r\n\t\t\t\t\tthis.setItem(user);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tconst errorCode = error && error.hasOwnProperty(\"code\") ? error.code : \"uid not available\";\r\n\t\t\t\t\tthis.toastRef.setError(errorCode);\r\n\t\t\t\t});\r\n\t\t} else if (this.props.group.trim().length) {\r\n\t\t\tthis.getGroup(this.props.group.trim())\r\n\t\t\t\t.then(group => {\r\n\t\t\t\t\tthis.setType(CometChat.ACTION_TYPE.TYPE_GROUP);\r\n\t\t\t\t\tthis.setItem(group);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tconst errorCode = error && error.hasOwnProperty(\"code\") ? error.code : \"guid not available\";\r\n\t\t\t\t\tthis.toastRef.setError(errorCode);\r\n\t\t\t\t});\r\n\t\t} else if (this.props.user.trim().length === 0 && this.props.group.trim().length === 0 && this.props._component === enums.CONSTANTS[\"MESSAGES_COMPONENT\"]) {\r\n\t\t\tconst errorCode = \"UID_OR_GUID_NOT_AVAILABLE\";\r\n\t\t\tthis.toastRef.setError(errorCode);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\r\n\t\tif (this.props.user.trim().length && prevProps.user !== this.props.user) {\r\n\t\t\tthis.getUser(this.props.user)\r\n\t\t\t\t.then(user => {\r\n\t\t\t\t\t//this.setType(CometChat.ACTION_TYPE.TYPE_USER);\r\n\t\t\t\t\t//this.setItem(user);\r\n\t\t\t\t\tthis.setTypeAndItem(CometChat.ACTION_TYPE.TYPE_USER, user);\r\n\t\t\t\t\t//this.setClearedUnreadMessages(false);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tconst errorCode = error && error.hasOwnProperty(\"code\") ? error.code : \"uid not available\";\r\n\t\t\t\t\tthis.toastRef.setError(errorCode);\r\n\t\t\t\t});\r\n\t\t} else if (this.props.group.trim().length && prevProps.group !== this.props.group) {\r\n\t\t\tthis.getGroup(this.props.group)\r\n\t\t\t\t.then(group => {\r\n\t\t\t\t\t//this.setType(CometChat.ACTION_TYPE.TYPE_GROUP);\r\n\t\t\t\t\t//this.setItem(group);\r\n\t\t\t\t\tthis.setTypeAndItem(CometChat.ACTION_TYPE.TYPE_GROUP, group);\r\n\t\t\t\t\t//this.setClearedUnreadMessages(false);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tconst errorCode = error && error.hasOwnProperty(\"code\") ? error.code : \"guid not available\";\r\n\t\t\t\t\tthis.toastRef.setError(errorCode);\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t//when the active group is deleted, close the chat window.\r\n\t\tif (this.state.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.state.item.guid === this.state.deletedGroupId) {\r\n\t\t\t//this.setItem({});\r\n\t\t\t//this.setType(\"\");\r\n\t\t\tthis.setTypeAndItem({}, \"\");\r\n\t\t\tthis.setDeletedGroupId(\"\");\r\n\t\t}\r\n\r\n\t\t//when the active group is left, close the chat window.\r\n\t\tif (this.state.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.state.item.guid === this.state.leftGroupId) {\r\n\t\t\tthis.setTypeAndItem({}, \"\");\r\n\t\t\tthis.setLeftGroupId(\"\");\r\n\t\t}\r\n\r\n\t\tif (prevProps.language !== this.props.language) {\r\n\t\t\tthis.setState({ language: this.props.language });\r\n\t\t\tthis.setRoles();\r\n\t\t}\r\n\t}\r\n\r\n\tsetRoles = () => {\r\n\t\tconst roles = {\r\n\t\t\t[CometChat.GROUP_MEMBER_SCOPE.ADMIN]: Translator.translate(\"ADMINISTRATOR\", this.props.language),\r\n\t\t\t[CometChat.GROUP_MEMBER_SCOPE.MODERATOR]: Translator.translate(\"MODERATOR\", this.props.language),\r\n\t\t\t[CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT]: Translator.translate(\"PARTICIPANT\", this.props.language),\r\n\t\t};\r\n\t\tthis.setState({ roles: roles });\r\n\t};\r\n\r\n\tgetUser = uid => {\r\n\t\tconst promise = new Promise((resolve, reject) => {\r\n\t\t\tif (!uid) {\r\n\t\t\t\tconst error = { code: \"uid not available\" };\r\n\t\t\t\treject(error);\r\n\t\t\t}\r\n\r\n\t\t\tCometChat.getUser(uid)\r\n\t\t\t\t.then(user => resolve(user))\r\n\t\t\t\t.catch(error => reject(error));\r\n\t\t});\r\n\r\n\t\treturn promise;\r\n\t};\r\n\r\n\tgetGroup = guid => {\r\n\t\tconst promise = new Promise((resolve, reject) => {\r\n\t\t\tif (!guid) {\r\n\t\t\t\tconst error = { code: \"guid not available\" };\r\n\t\t\t\treject(error);\r\n\t\t\t}\r\n\r\n\t\t\tCometChat.getGroup(guid)\r\n\t\t\t\t.then(group => {\r\n\t\t\t\t\tif (group.hasJoined === false) {\r\n\t\t\t\t\t\tconst guid = group.guid;\r\n\t\t\t\t\t\tconst groupType = group.type;\r\n\t\t\t\t\t\tlet password = \"\";\r\n\t\t\t\t\t\tif (groupType === CometChat.GROUP_TYPE.PASSWORD) {\r\n\t\t\t\t\t\t\tconst promptMessage = Translator.translate(\"Enter password\", this.props.lang);\r\n\t\t\t\t\t\t\tpassword = prompt(promptMessage);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tCometChat.joinGroup(guid, groupType, password)\r\n\t\t\t\t\t\t\t.then(group => resolve(group))\r\n\t\t\t\t\t\t\t.catch(error => reject(error));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresolve(group);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => reject(error));\r\n\t\t});\r\n\r\n\t\treturn promise;\r\n\t};\r\n\r\n\tsetToastMessage = (type, message) => {\r\n\t\t// switch(type) {\r\n\r\n\t\t//     case \"error\":\r\n\t\t//         this.toastRef.setError(message);\r\n\t\t//     break;\r\n\t\t//     case \"success\":\r\n\t\t//         this.toastRef.setSuccess(message);\r\n\t\t//         break;\r\n\t\t//     case \"info\":\r\n\t\t//         this.toastRef.setInfo(message);\r\n\t\t//         break;\r\n\t\t//     case \"warning\":\r\n\t\t//         this.toastRef.setWarning(message);\r\n\t\t//         break;\r\n\t\t//     default:\r\n\t\t//     break;\r\n\t\t// }\r\n\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgetLoggedinUser = () => {\r\n\t\tlet timerCounter = 10000;\r\n\t\tlet timer = 0;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif (timerCounter === timer) {\r\n\t\t\t\treturn reject(`timer reached ${timerCounter}`);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.loggedInUser) {\r\n\t\t\t\treturn resolve(this.loggedInUser);\r\n\t\t\t}\r\n\r\n\t\t\tif (!CometChat.isInitialized()) {\r\n\t\t\t\treturn reject(\"CometChat not initialized\");\r\n\t\t\t}\r\n\r\n\t\t\tthis.isUserLoggedIn = setInterval(() => {\r\n\t\t\t\tCometChat.getLoggedinUser()\r\n\t\t\t\t\t.then(user => {\r\n\t\t\t\t\t\tthis.loggedInUser = user;\r\n\t\t\t\t\t\tclearInterval(this.isUserLoggedIn);\r\n\t\t\t\t\t\treturn resolve(user);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => reject(error));\r\n\r\n\t\t\t\ttimer += 100;\r\n\t\t\t}, 100);\r\n\t\t});\r\n\r\n\t\t// return new Promise((resolve, reject) => {\r\n\t\t// \tCometChat.getLoggedinUser()\r\n\t\t// \t\t.then(user => resolve(user))\r\n\t\t// \t\t.catch(error => reject(error));\r\n\t\t// });\r\n\t};\r\n\r\n\tclearGroupMembers = () => {\r\n\t\tthis.setState({\r\n\t\t\tgroupMembers: [],\r\n\t\t\tgroupAdmins: [],\r\n\t\t\tgroupModerators: [],\r\n\t\t\tbannedGroupMembers: [],\r\n\t\t});\r\n\t};\r\n\r\n\tsetAllGroupMembers = (groupMembers, groupAdmins, groupModerators) => {\r\n\t\tthis.setState({\r\n\t\t\tgroupMembers: [...this.state.groupMembers, ...groupMembers],\r\n\t\t\tgroupAdmins: [...this.state.groupAdmins, ...groupAdmins],\r\n\t\t\tgroupModerators: [...this.state.groupModerators, ...groupModerators],\r\n\t\t});\r\n\t};\r\n\r\n\tupdateGroupMembers = groupMembers => {\r\n\t\tthis.setState({\r\n\t\t\tgroupMembers: [...groupMembers],\r\n\t\t});\r\n\t};\r\n\r\n\tsetGroupMembers = groupMembers => {\r\n\t\tthis.setState({\r\n\t\t\tgroupMembers: [...this.state.groupMembers, ...groupMembers],\r\n\t\t});\r\n\t};\r\n\r\n\tsetGroupAdmins = groupAdmins => {\r\n\t\tthis.setState({\r\n\t\t\tgroupAdmins: [...this.state.groupAdmins, ...groupAdmins],\r\n\t\t});\r\n\t};\r\n\r\n\tsetGroupModerators = groupModerators => {\r\n\t\tthis.setState({\r\n\t\t\tgroupModerators: [...this.state.groupModerators, ...groupModerators],\r\n\t\t});\r\n\t};\r\n\r\n\tsetBannedGroupMembers = bannedMembers => {\r\n\t\tthis.setState({\r\n\t\t\tbannedGroupMembers: [...this.state.bannedGroupMembers, ...bannedMembers],\r\n\t\t});\r\n\t};\r\n\r\n\tupdateBannedGroupMembers = bannedMembers => {\r\n\t\tthis.setState({\r\n\t\t\tbannedGroupMembers: [...bannedMembers],\r\n\t\t});\r\n\t};\r\n\r\n\tsetCallInProgress = (call, callType) => {\r\n\t\tthis.setState({ callInProgress: { ...call }, callType });\r\n\t};\r\n\r\n\tsetItem = item => {\r\n\t\tthis.setState({ item: { ...item } });\r\n\t};\r\n\r\n\tsetType = type => {\r\n\t\tthis.setState({ type });\r\n\t};\r\n\r\n\tsetTypeAndItem = (type, item) => {\r\n\t\tthis.setState({ item: { ...item }, type });\r\n\t};\r\n\r\n\tsetDeletedGroupId = guid => {\r\n\t\tthis.setState({ deletedGroupId: guid });\r\n\t};\r\n\r\n\tsetLeftGroupId = guid => {\r\n\t\tthis.setState({ leftGroupId: guid });\r\n\t};\r\n\r\n\tsetLastMessage = message => {\r\n\t\tthis.setState({ lastMessage: message });\r\n\t};\r\n\r\n\tsetClearedUnreadMessages = flag => {\r\n\t\tthis.setState({ clearedUnreadMessages: flag });\r\n\t};\r\n\r\n\tsetDirectCallCustomMessage = (message, event) => {\r\n\t\tthis.setState({ directCallCustomMessage: message, directCallCustomMessageAction: event });\r\n\t};\r\n\r\n\tcheckIfDirectCallIsOngoing = () => {\r\n\t\tlet output = null;\r\n\r\n\t\tif (Object.keys(this.state.callInProgress).length && (this.state.callType === enums.CONSTANTS[\"INCOMING_DIRECT_CALLING\"] || this.state.callType === enums.CONSTANTS[\"OUTGOING_DIRECT_CALLING\"])) {\r\n\t\t\tif (this.state.callInProgress.customData.sessionID === this.state.item.guid) {\r\n\t\t\t\toutput = enums.CONSTANTS.CALLS[\"ONGOING_CALL_SAME_GROUP\"];\r\n\t\t\t} else {\r\n\t\t\t\toutput = enums.CONSTANTS.CALLS[\"ONGOING_CALL_DIFF_GROUP\"];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t};\r\n\r\n\tcheckIfCallIsOngoing = () => {\r\n\t\tif (Object.keys(this.state.callInProgress).length) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tgetActiveCallSessionID = () => {\r\n\t\tlet sessionID;\r\n\t\tif (this.state.callType === enums.CONSTANTS[\"INCOMING_DIRECT_CALLING\"] || this.state.callType === enums.CONSTANTS[\"OUTGOING_DIRECT_CALLING\"]) {\r\n\t\t\tsessionID = this.state.callInProgress?.data?.customData?.sessionID;\r\n\t\t} else {\r\n\t\t\tsessionID = this.state.callInProgress?.sessionId;\r\n\t\t}\r\n\r\n\t\treturn sessionID;\r\n\t};\r\n\r\n\thasKeyValue = (data, key) => {\r\n\t\tif (data.hasOwnProperty(key) === false || data[key] === null || data[key] === undefined) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t};\r\n\r\n\trender() {\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<CometChatContext.Provider value={this.state}>\r\n\t\t\t\t<CometChatToastNotification ref={el => (this.toastRef = el)} lang={this.props.language} position={this.props.toastNotificationPos} />\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</CometChatContext.Provider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nCometChatContextProvider.defaultProps = {\r\n\ttoastMessage: {},\r\n\tgroupMembers: [],\r\n\tbannedGroupMembers: [],\r\n\tgroupAdmins: [],\r\n\tgroupModerators: [],\r\n\tcallInProgress: {},\r\n\tuser: \"\",\r\n\tgroup: \"\",\r\n\t_component: \"\",\r\n\tlanguage: Translator.getDefaultLanguage(),\r\n};\r\n\r\nCometChatContextProvider.propTypes = {\r\n\ttoastMessage: PropTypes.object,\r\n\tgroupMembers: PropTypes.array,\r\n\tbannedGroupMembers: PropTypes.array,\r\n\tgroupAdmins: PropTypes.array,\r\n\tgroupModerators: PropTypes.array,\r\n\tcallInProgress: PropTypes.object,\r\n\tgroup: PropTypes.string,\r\n\tuser: PropTypes.string,\r\n\t_component: PropTypes.string,\r\n\tlanguage: PropTypes.string,\r\n};\r\n","export class Storage {\r\n\r\n    static attachChangeDetection = (callback) => {\r\n        window.addEventListener('storage', callback);\r\n    }\r\n\r\n    static detachChangeDetection = (callback) => {\r\n        window.removeEventListener('storage', callback);\r\n    }\r\n\r\n    static setItem = (storageKey, storageValue) => {\r\n        localStorage.setItem(storageKey, JSON.stringify(storageValue));\r\n    }\r\n\r\n    static getItem = (storageKey) => {\r\n        return JSON.parse(localStorage.getItem(storageKey));\r\n    }\r\n\r\n    static removeItem = (storageKey) => {\r\n        localStorage.removeItem(storageKey);\r\n    }\r\n\r\n    static clear = () => {\r\n\r\n    }\r\n}","import Translator from \"../../../resources/localization/translator\";\r\n\r\nexport const LocalizedString = language => {\r\n\treturn {\r\n\t\tSELECT_VIDEO_SOURCE: Translator.translate(\"SELECT_VIDEO_SOURCE\", language),\r\n\t\tSELECT_INPUT_AUDIO_SOURCE: Translator.translate(\"SELECT_INPUT_AUDIO_SOURCE\", language),\r\n\t\tSELECT_OUTPUT_AUDIO_SOURCE: Translator.translate(\"SELECT_OUTPUT_AUDIO_SOURCE\", language),\r\n\t\tSELECT_MODE: Translator.translate(\"SELECT_MODE\", language),\r\n\t\tCALL_RECORDING_STARTED_MSG: Translator.translate(\"CALL_RECORDING_STARTED_MSG\", language),\r\n\t\tUSER_JOINED_CALL_MSG: Translator.translate(\"USER_JOINED_CALL_MSG\", language),\r\n\t\tCALL_RECORDING_ENDED_MSG: Translator.translate(\"CALL_RECORDING_ENDED_MSG\", language),\r\n\t\tUSER_LEFT_CALL_MSG: Translator.translate(\"USER_LEFT_CALL_MSG\", language),\r\n\t\tCAMERA_ERROR_MSG: Translator.translate(\"CAMERA_ERROR_MSG\", language),\r\n\t\tMIC_ERROR_MSG: Translator.translate(\"MIC_ERROR_MSG\", language),\r\n\t\tCAMERA_MIC_ERROR_MSG: Translator.translate(\"CAMERA_MIC_ERROR_MSG\", language),\r\n\t\tRECORDING_TEXT: Translator.translate(\"RECORDING_TEXT\", language),\r\n\t\tTRYING_TO_START_RECORDING_TEXT: Translator.translate(\"TRYING_TO_START_RECORDING_TEXT\", language),\r\n\t\tJOINING_TEXT: Translator.translate(\"JOINING_TEXT\", language),\r\n\t\tUN_MUTE_AUDIO_TEXT: Translator.translate(\"UN_MUTE_AUDIO_TEXT\", language),\r\n\t\tMUTE_AUDIO_TEXT: Translator.translate(\"MUTE_AUDIO_TEXT\", language),\r\n\t\tEND_CALL_TEXT: Translator.translate(\"END_CALL_TEXT\", language),\r\n\t\tSTART_RECORDING_TEXT: Translator.translate(\"START_RECORDING_TEXT\", language),\r\n\t\tSTOP_RECORDING_TEXT: Translator.translate(\"STOP_RECORDING_TEXT\", language),\r\n\t\tSTART_SCREEN_SHARE_TEXT: Translator.translate(\"START_SCREEN_SHARE_TEXT\", language),\r\n\t\tSTOP_SCREEN_SHARE_TEXT: Translator.translate(\"STOP_SCREEN_SHARE_TEXT\", language),\r\n\t\tMUTE_VIDEO_TEXT: Translator.translate(\"MUTE_VIDEO_TEXT\", language),\r\n\t\tUN_MUTE_VIDEO_TEXT: Translator.translate(\"UN_MUTE_VIDEO_TEXT\", language),\r\n\t\tSELECT_LAYOUT_HEADER: Translator.translate(\"SELECT_LAYOUT_HEADER\", language),\r\n\t\tNO_OF_USER_IN_TILE_TEXT: Translator.translate(\"NO_OF_USER_IN_TILE_TEXT\", language),\r\n\t\tCHANGE_AUDIO_SOURCE: Translator.translate(\"CHANGE_AUDIO_SOURCE\", language),\r\n\t\tCHANGE_AUDIO_SOURCE_DESC: Translator.translate(\"CHANGE_AUDIO_SOURCE_DESC\", language),\r\n\t\tAUDIO_INPUT_DEVICE_LABEL: Translator.translate(\"AUDIO_INPUT_DEVICE_LABEL\", language),\r\n\t\tNO_AUDIO_DEVICE_AVAILABLE: Translator.translate(\"NO_AUDIO_DEVICE_AVAILABLE\", language),\r\n\t\tAUDIO_OUTPUT_DEVICE_LABEL: Translator.translate(\"AUDIO_OUTPUT_DEVICE_LABEL\", language),\r\n\t\tCHANGE_VIDEO_SOURCE: Translator.translate(\"CHANGE_VIDEO_SOURCE\", language),\r\n\t\tCHANGE_VIDEO_SOURCE_DESC: Translator.translate(\"CHANGE_VIDEO_SOURCE_DESC\", language),\r\n\t\tVIDEO_DEVICES_LABEL: Translator.translate(\"VIDEO_DEVICES_LABEL\", language),\r\n\t\tFULL_SCREEN: Translator.translate(\"FULL_SCREEN\", language),\r\n\t\tEXIT_FULL_SCREEN: Translator.translate(\"EXIT_FULL_SCREEN\", language),\r\n\t\tCHANGE_LAYOUT: Translator.translate(\"CHANGE_LAYOUT\", language),\r\n\t\tAUDIO_SETTING: Translator.translate(\"AUDIO_SETTING\", language),\r\n\t\tVIDEO_SETTING: Translator.translate(\"VIDEO_SETTING\", language),\r\n\t\tUSER_LIST: Translator.translate(\"USER_LIST\", language),\r\n\t\tMORE: Translator.translate(\"MORE\", language),\r\n\t\tMUTE_USER: Translator.translate(\"MUTE_USER\", language),\r\n\t\tPIN_USER: Translator.translate(\"PIN_USER\", language),\r\n\t\tUNPIN_USER: Translator.translate(\"UNPIN_USER\", language),\r\n\t\tUN_MUTE_USER: Translator.translate(\"UN_MUTE_USER\", language),\r\n\t\tMUTED: Translator.translate(\"MUTED\", language),\r\n\t\tYOU_HAVE_BLOCKED: Translator.translate(\"YOU_HAVE_BLOCKED\", language),\r\n\t\tNOT_POSSIBLE_TO_SEND_MESSAGES: Translator.translate(\"NOT_POSSIBLE_TO_SEND_MESSAGES\", language),\r\n\t\tIOS_BROWSER_WARNING: Translator.translate(\"IOS_BROWSER_WARNING\", language),\r\n\t\tPEOPLE_TEXT: Translator.translate(\"PEOPLE_TEXT\", language),\r\n\t\tSPOTLIGHT_DETAIL_TEXT1: Translator.translate(\"SPOTLIGHT_DETAIL_TEXT1\", language),\r\n\t\tSPOTLIGHT_DETAIL_TEXT2: Translator.translate(\"SPOTLIGHT_DETAIL_TEXT2\", language),\r\n\t\tSPOTLIGHT_DETAIL_TEXT3: Translator.translate(\"SPOTLIGHT_DETAIL_TEXT3\", language),\r\n\t\tSPOTLIGHT_DETAIL_TEXT4: Translator.translate(\"SPOTLIGHT_DETAIL_TEXT4\", language),\r\n\t};\r\n};\r\n","\r\n\r\nexport const callScreenWrapperStyle = (props, keyframes) => {\r\n\r\n    const fadeAnimation = keyframes`\r\n    from {\r\n        opacity: 0;\r\n    }\r\n    to {\r\n        opacity: 1;\r\n    }`;\r\n\r\n    return {\r\n        width: \"100%\",\r\n        height: \"calc(100% - 50px)\",\r\n        position: \"absolute\",\r\n        top: \"50px\",\r\n        right: \"0\",\r\n        bottom: \"0\",\r\n        left: \"0\",\r\n        backgroundColor: `${props.theme.backgroundColor.darkGrey}`,\r\n        zIndex: \"999\",\r\n        color: `${props.theme.color.white}`,\r\n        textAlign: \"center\",\r\n        boxSizing: \"border-box\",\r\n        animation: `${fadeAnimation} 250ms ease`,\r\n        fontFamily: `${props.theme.fontFamily}`,\r\n        \"*\": {\r\n            boxSizing: \"border-box\",\r\n            fontFamily: `${props.theme.fontFamily}`,\r\n        },\r\n        \"iframe\": {\r\n            border: \"none\"\r\n        },\r\n    }\r\n}\r\n\r\nexport const callScreenBackgroundStyle = (state) => {\r\n\r\n    return {\r\n        display: \"none\",\r\n        width: \"100vw\",\r\n        height: \"100vh\",\r\n        position: \"fixed\",\r\n        top: \"0\",\r\n        left: \"0\",\r\n        bottom: \"0\",\r\n        right: \"0\",\r\n        zIndex: \"2147483001\",\r\n    }\r\n}\r\n\r\nexport const callScreenContainerStyle = (props) => {\r\n\r\n    return {\r\n        width: props.maxWidth,\r\n        height: props.maxHeight,\r\n        position: \"fixed\",\r\n        top: \"0\",\r\n        left: \"0\",\r\n        overflow: \"hidden\",\r\n        zIndex: \"2147483002\",\r\n        \"*\": {\r\n            boxSizing: \"border-box\",\r\n            fontFamily: `${props.theme.fontFamily}`,\r\n        }\r\n    }\r\n}\r\n\r\nexport const callScreenInnerBackgroundStyle = () => {\r\n\r\n    return {\r\n        display: \"none\",\r\n        position: \"absolute\",\r\n        top: \"0\",\r\n        left: \"0\",\r\n        bottom: \"0\",\r\n        right: \"0\",\r\n        zIndex: \"2147483003\",\r\n    }\r\n}\r\n\r\nexport const callScreenHeaderStyle = (state) => {\r\n\r\n    const cursorStyle = (state.maximized) ? {} : {\r\n        cursor: \"grabbing\",\r\n    };\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"flex-end\",\r\n        backgroundColor: \"#282c34\",\r\n        width: \"100%\",\r\n        height: \"50px\",\r\n        position: \"absolute\",\r\n        top: \"0\",\r\n        right: \"0\",\r\n        bottom: \"0\",\r\n        left: \"0\",\r\n        zIndex: \"2147483004\",\r\n        ...cursorStyle\r\n    }\r\n}\r\n\r\nexport const headerTitleStyle = () => {\r\n\r\n    return {\r\n        width: \"calc(100% - 55px)\",\r\n        padding: \"16px\",\r\n    }\r\n}\r\n\r\nexport const headerButtonStyle = () => {\r\n\r\n    return {\r\n        width: \"55px\",\r\n        padding: \"16px\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        \"button\": {\r\n            border: \"none\",\r\n            background: \"transparent\",\r\n            cursor: \"pointer\",\r\n            outline: \"none\",\r\n            display: \"flex\",\r\n            flexDirection: \"row\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            width: \"100%\",\r\n            padding: \"0px\",\r\n            userSelect: \"none\",\r\n            \"img\": {\r\n                maxWidth: \"100%\",\r\n                flexShrink: \"0\"\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const callScreenResizerStyle = (state) => {\r\n\r\n    const backgroundStyle = (state.maximized) ? {\r\n        display: \"none\"\r\n    }: {\r\n        cursor: \"nwse-resize\",\r\n        clipPath: \"polygon(100% 0,100% 100%,0 100%)\",\r\n        background: \"repeating-linear-gradient(135deg,hsla(0,0%,100%,.5),hsla(0,0%,100%,.5) 2px,#000 0,#000 4px)\",\r\n    };\r\n\r\n    return {\r\n        width: \"35px\",\r\n        height: \"35px\",\r\n        position: \"absolute\",\r\n        right: \"0\",\r\n        bottom: \"0\",\r\n        zIndex: \"2147483004\", \r\n        ...backgroundStyle\r\n    }\r\n}\r\n\r\nexport const iconStyle = (img) => {\r\n\r\n    return {\r\n        width: \"24px\",\r\n        height: \"24px\",\r\n        display: \"inline-block\",\r\n        cursor: \"pointer\",\r\n        mask: `url(${img}) center center no-repeat`,\r\n        backgroundColor: `white`,\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/reduce-size.1235f385.svg\";","export default __webpack_public_path__ + \"static/media/increase-size.2d86ddec.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx, keyframes } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport { Storage } from \"../../../util/Storage\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\nimport { LocalizedString } from \"./strings\";\r\n\r\nimport {\r\n    callScreenBackgroundStyle,\r\n    callScreenContainerStyle,\r\n    callScreenInnerBackgroundStyle,\r\n    callScreenHeaderStyle,\r\n    callScreenWrapperStyle,\r\n    headerTitleStyle,\r\n    headerButtonStyle,\r\n    callScreenResizerStyle,\r\n    iconStyle\r\n} from \"./style\";\r\n\r\nimport minimizeIcon from \"./resources/reduce-size.svg\";\r\nimport maximizeIcon from \"./resources/increase-size.svg\";\r\n\r\nclass CometChatCallScreen extends React.PureComponent {\r\n\r\n    static contextType = CometChatContext;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            x: 0,\r\n            y: 0,\r\n            rel: null, // position relative to the cursor\r\n            dragging: false,\r\n            maximized: true\r\n        };\r\n\r\n        this.loggedInUser = props.loggedInUser;\r\n        \r\n        this.callScreenBackgroundEl = React.createRef();\r\n        this.callScreenInnerBackgroundEl = React.createRef();\r\n        this.callScreenEl = React.createRef();\r\n        this.callScreenFrame = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        this.document = window.document;\r\n\r\n        if (this.props.call.type === enums.CUSTOM_TYPE_MEETING) {\r\n            this.startDirectCall(this.props.call);\r\n        } else {\r\n            this.startDefaultCall(this.props.call);\r\n        }\r\n    }\r\n\r\n    enableDragging = (e) => {\r\n\r\n        e.preventDefault();\r\n        \r\n        if (this.checkIfCallScreenIsMaximized() === true) {\r\n            return false;\r\n        }\r\n\r\n        this.setState({\r\n            dragging: true,\r\n            rel: {\r\n                x: e.pageX - this.state.x,\r\n                y: e.pageY - this.state.y\r\n            }\r\n        });\r\n\r\n        this.toggleCallScreenBackground(true);\r\n        this.toggleCallScreenInnerBackground(true);\r\n\r\n        this.document.onmousemove = (e) => this.startDragging(e);\r\n        this.document.onmouseup = (e) => this.disableDragging(e);\r\n    }\r\n\r\n    checkIfCallScreenIsMaximized = () => {\r\n\r\n        const elem = this.callScreenEl.current;\r\n\r\n        const dialogWidth = elem.clientWidth;\r\n        const dialogHeight = elem.clientHeight;\r\n\r\n        const windowWidth = window.innerWidth;\r\n        const windowHeight = window.innerHeight;\r\n\r\n        if (dialogWidth === windowWidth && dialogHeight === windowHeight) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    checkIfCallScreenIsMinimized = () => {\r\n\r\n        const elem = this.callScreenEl.current;\r\n\r\n        const dialogWidth = elem.clientWidth;\r\n        const dialogHeight = elem.clientHeight;\r\n\r\n        const minimumWidth = this.props.minWidth;\r\n        const minimumHeight = this.props.minHeight;\r\n\r\n        if (dialogWidth === minimumWidth && dialogHeight === minimumHeight) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    startDragging = (e) => {\r\n        \r\n        if (!this.state.dragging) return;\r\n        \r\n        e = e || window.event;\r\n\r\n        const elem = this.callScreenEl.current;\r\n\r\n        const dialogWidth = elem.clientWidth; \r\n        const dialogHeight = elem.clientHeight; \r\n        const x = Math.min(\r\n            Math.max(0, e.pageX - this.state.rel.x),\r\n            window.innerWidth - dialogWidth - 20\r\n        );\r\n        const y = Math.min(\r\n            Math.max(0, e.pageY - this.state.rel.y),\r\n            window.innerHeight - dialogHeight - 20\r\n        ); \r\n\r\n        this.setState({\r\n            x: x,\r\n            y: y\r\n        });\r\n\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    }\r\n\r\n    disableDragging = (e) => {\r\n\r\n        this.document.onmousemove = null;\r\n        this.document.onmouseup = null;\r\n\r\n        this.setState({ dragging: false });\r\n\r\n        this.toggleCallScreenBackground(false);\r\n        this.toggleCallScreenInnerBackground(false);\r\n    }\r\n\r\n    initResize = (e) => {\r\n\r\n        e.preventDefault();\r\n\r\n        if (this.checkIfCallScreenIsMaximized() === true) {\r\n            return false;\r\n        }\r\n\r\n        const element = this.callScreenEl.current;\r\n\r\n        this.startX = e.pageX;\r\n        this.startY = e.pageY;\r\n\r\n        this.startWidth = parseFloat(getComputedStyle(element, null).getPropertyValue(\"width\").replace(\"px\", \"\"));\r\n        this.startHeight = parseInt(getComputedStyle(element, null).getPropertyValue(\"height\").replace(\"px\", \"\"));\r\n\r\n        this.document.onmousemove = (e) => this.startResize(e);\r\n        this.document.onmouseup = (e) => this.stopResize(e);\r\n    }\r\n\r\n    startResize = (e) => {\r\n        \r\n        let width = this.startWidth + (e.pageX - this.startX);\r\n        let height = this.startHeight + (e.pageY - this.startY);\r\n\r\n        if (width < this.props.minWidth) {\r\n            width = this.props.minHWidth;\r\n        }\r\n\r\n        if (width > window.innerWidth) {\r\n            width = this.props.maxWidth;\r\n        }\r\n\r\n        if (height < this.props.minHeight) {\r\n            height = this.props.minHeight;\r\n        }\r\n\r\n        if (height > window.innerHeight) {\r\n            height = this.props.maxHeight;\r\n        }\r\n\r\n        this.callScreenEl.current.style.width = width + \"px\";\r\n        this.callScreenEl.current.style.height = height + \"px\";\r\n\r\n        this.setDimensionOfCallScreenInnerBackground({ width: width + \"px\", height: height + \"px\" });\r\n\r\n        this.toggleCallScreenBackground(true);\r\n        this.toggleCallScreenInnerBackground(true);\r\n    }\r\n\r\n    stopResize = () => {\r\n        \r\n        this.document.onmousemove = null;\r\n        this.document.onmouseup = null;\r\n\r\n        this.toggleCallScreenBackground(false);\r\n        this.toggleCallScreenInnerBackground(false);\r\n\r\n        if (this.checkIfCallScreenIsMaximized() === true) {\r\n            this.setState({ maximized: true });\r\n        } \r\n        if (this.checkIfCallScreenIsMinimized() === true) {\r\n            this.setState({ maximized: false });\r\n        }\r\n    }\r\n\r\n    toggleCallScreenBackground = (flag) => {\r\n\r\n        if (this.callScreenBackgroundEl && this.callScreenBackgroundEl.current) {\r\n            this.callScreenBackgroundEl.current.style.display = (flag) ? \"block\" : \"none\";\r\n        }\r\n    }\r\n\r\n    toggleCallScreenInnerBackground = (flag) => {\r\n\r\n        if (this.callScreenInnerBackgroundEl && this.callScreenInnerBackgroundEl.current) {\r\n            this.callScreenInnerBackgroundEl.current.style.display = (flag) ? \"block\" : \"none\";\r\n        }\r\n    }\r\n\r\n    setDimensionOfCallScreenInnerBackground = (props) => {\r\n\r\n        this.callScreenInnerBackgroundEl.current.style.width = props.width;\r\n        this.callScreenInnerBackgroundEl.current.style.height = props.height;\r\n    }\r\n\r\n    setPositionOfCallScreenInnerBackground = (props) => {\r\n\r\n        this.callScreenInnerBackgroundEl.current.style.top = props.y;\r\n        this.callScreenInnerBackgroundEl.current.style.left = props.x;\r\n    }\r\n\r\n    minimize = () => {\r\n\r\n        if (!this.callScreenEl || !this.callScreenEl.current) {\r\n            return false;\r\n        }\r\n\r\n        const width = this.props.minWidth + \"px\";\r\n        const height = this.props.minHeight + \"px\";\r\n\r\n        this.setState({ maximized: false });\r\n        this.setSizingAndPostionOfCallScreen({ width: width, height: height });\r\n        this.setDimensionOfCallScreenInnerBackground({ width: width, height: height });\r\n        this.setPositionOfCallScreenInnerBackground({ x: \"0px\", y: \"0px\" });\r\n    }\r\n\r\n    maximize = () => {\r\n\r\n        if (!this.callScreenEl || !this.callScreenEl.current) {\r\n            return false;\r\n        }\r\n\r\n        const width = this.props.maxWidth;\r\n        const height = this.props.maxHeight;\r\n\r\n        this.setState({ maximized: true });\r\n        this.setSizingAndPostionOfCallScreen({ width: width, height: height });\r\n        this.setDimensionOfCallScreenInnerBackground({ width: width, height: height });\r\n        this.setPositionOfCallScreenInnerBackground({ x: \"0px\", y: \"0px\" });\r\n    }\r\n\r\n    setSizingAndPostionOfCallScreen = (props) => {\r\n\r\n        this.callScreenEl.current.style.width = props.width;\r\n        this.callScreenEl.current.style.height = props.height;\r\n        this.callScreenEl.current.style.top = \"0px\";\r\n        this.callScreenEl.current.style.left = \"0px\";\r\n    }\r\n\r\n    toggle = (e) => {\r\n\r\n        this.setState({ x: 0, y: 0 });\r\n\r\n        if (this.state.maximized) {\r\n            this.minimize();\r\n        } else {\r\n            this.maximize();\r\n        }\r\n\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    }\r\n\r\n    startDirectCall = (call) => {\r\n\r\n        const sessionId = call.data.customData.sessionID;\r\n        const customCSS = this.context.UIKitSettings.customCSS;\r\n        const showRecordingButton = this.context.UIKitSettings.showCallRecordingOption;\r\n\r\n        const callSettings = new CometChat.CallSettingsBuilder()\r\n            .enableDefaultLayout(true)\r\n            .setSessionID(sessionId)\r\n            .setIsAudioOnlyCall(false)\r\n            .showRecordingButton(showRecordingButton)\r\n            .setCustomCSS(customCSS)\r\n            .setLocalizedStringObject(LocalizedString(this.props.lang)).build();\r\n\r\n        const el = this.callScreenFrame;\r\n        CometChat.startCall(\r\n            callSettings,\r\n            el,\r\n            new CometChat.OngoingCallListener({\r\n                onCallEnded: call => {\r\n\r\n                    if (this.context) {\r\n                        this.context.setCallInProgress({}, \"\");\r\n                    }\r\n                    Storage.removeItem(enums.CONSTANTS[\"ACTIVECALL\"]);\r\n                    this.props.actionGenerated(enums.ACTIONS[\"DIRECT_CALL_ENDED\"]);\r\n                },\r\n                onError: error => {\r\n\r\n                    if (this.context) {\r\n                        this.context.setCallInProgress(null, \"\");\r\n                    }\r\n                    \r\n                    this.props.actionGenerated(enums.ACTIONS[\"DIRECT_CALL_ERROR\"]);\r\n                    const errorCode = (error && error.hasOwnProperty(\"code\")) ? error.code : \"ERROR\";\r\n                    this.context.setToastMessage(\"error\", errorCode);\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    startDefaultCall = (call) => {\r\n\r\n        const sessionId = call.getSessionId();\r\n        const callType = (call.type === CometChat.CALL_TYPE.AUDIO ? true : false);\r\n        const customCSS = this.context.UIKitSettings.customCSS;\r\n        const showRecordingButton = this.context.UIKitSettings.showCallRecordingOption;\r\n\r\n        const callSettings = new CometChat.CallSettingsBuilder()\r\n\t\t\t\t\t.setSessionID(sessionId)\r\n\t\t\t\t\t.enableDefaultLayout(true)\r\n\t\t\t\t\t.setMode(CometChat.CALL_MODE.DEFAULT)\r\n\t\t\t\t\t.setIsAudioOnlyCall(callType)\r\n\t\t\t\t\t.showRecordingButton(showRecordingButton)\r\n\t\t\t\t\t.setCustomCSS(customCSS)\r\n\t\t\t\t\t.setLocalizedStringObject(LocalizedString(this.props.lang))\r\n\t\t\t\t\t.build();\r\n\r\n\r\n        const el = this.callScreenFrame;\r\n        CometChat.startCall(\r\n            callSettings,\r\n            el,\r\n            new CometChat.OngoingCallListener({\r\n                onUserJoined: user => {\r\n\r\n                    /* Notification received here if another user joins the call. */\r\n                    /* this method can be use to display message or perform any actions if someone joining the call */\r\n                    //call initiator gets the same info in outgoingcallaccpeted event\r\n                    if (call.callInitiator.uid !== this.loggedInUser.uid && call.callInitiator.uid !== user.uid) {\r\n\r\n                        const callMessage = {\r\n                            \"category\": call.category,\r\n                            \"type\": call.type,\r\n                            \"action\": call.action,\r\n                            \"status\": call.status,\r\n                            \"callInitiator\": call.callInitiator,\r\n                            \"callReceiver\": call.callReceiver,\r\n                            \"receiverId\": call.receiverId,\r\n                            \"receiverType\": call.receiverType,\r\n                            \"sentAt\": call.sentAt,\r\n                            \"sender\": { ...user }\r\n                        };\r\n                        this.props.actionGenerated(enums.ACTIONS[\"USER_JOINED_CALL\"], callMessage);\r\n                    }\r\n                },\r\n                onUserLeft: user => {\r\n                    /* Notification received here if another user left the call. */\r\n                    /* this method can be use to display message or perform any actions if someone leaving the call */\r\n                    //call initiator gets the same info in outgoingcallaccpeted event\r\n                    if (call.callInitiator.uid !== this.loggedInUser.uid && call.callInitiator.uid !== user.uid) {\r\n\r\n                        const callMessage = {\r\n                            \"category\": call.category,\r\n                            \"type\": call.type,\r\n                            \"action\": \"left\",\r\n                            \"status\": call.status,\r\n                            \"callInitiator\": call.callInitiator,\r\n                            \"callReceiver\": call.callReceiver,\r\n                            \"receiverId\": call.receiverId,\r\n                            \"receiverType\": call.receiverType,\r\n                            \"sentAt\": call.sentAt,\r\n                            \"sender\": { ...user }\r\n                        };\r\n\r\n                        this.props.actionGenerated(enums.ACTIONS[\"USER_LEFT_CALL\"], callMessage);\r\n                    }\r\n                },\r\n                onCallEnded: endedCall => {\r\n\r\n                    /* Notification received here if current ongoing call is ended. */\r\n                    if (this.context) {\r\n                        this.context.setCallInProgress(null, \"\");\r\n                    }\r\n                    Storage.removeItem(enums.CONSTANTS[\"ACTIVECALL\"]);\r\n                    this.props.actionGenerated(enums.ACTIONS[\"OUTGOING_CALL_ENDED\"], endedCall);\r\n                    /* hiding/closing the call screen can be done here. */\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    render() {\r\n\r\n        const resizeText = Translator.translate(\"RESIZE\", this.props.lang);\r\n        let iconView = (<i css={iconStyle(minimizeIcon)} title={resizeText}></i>);\r\n        if (this.state.maximized === false) {\r\n            iconView = (<i css={iconStyle(maximizeIcon)} title={resizeText}></i>);\r\n        }\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <div css={callScreenBackgroundStyle(this.state)} ref={this.callScreenBackgroundEl}></div>\r\n                <div ref={this.callScreenEl} className=\"callscreen__container\" css={callScreenContainerStyle(this.props)} \r\n                    style={{ top: this.state.y + \"px\", left: this.state.x + \"px\" }}>\r\n                    <div css={callScreenInnerBackgroundStyle()} ref={this.callScreenInnerBackgroundEl}></div>\r\n                    <div css={callScreenHeaderStyle(this.state)} className=\"callscreen__header\" onMouseDown={this.enableDragging}>\r\n                        <div css={headerTitleStyle()}>&nbsp;</div>\r\n                        <div className=\"callscreen__resize\" css={headerButtonStyle()} onClick={this.toggle} onMouseDown={e => e.stopPropagation()}><button type=\"button\" title={resizeText}>{iconView}</button></div>\r\n                    </div>\r\n                    <div css={callScreenWrapperStyle(this.props, keyframes)} className=\"callscreen__wrapper\" ref={el => { this.callScreenFrame = el; }}></div>\r\n                    <div css={callScreenResizerStyle(this.state)} className=\"callscreen__resizer-both\" onMouseDown={this.initResize}></div>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatCallScreen.defaultProps = {\r\n    lang: Translator.getDefaultLanguage(),\r\n    theme: theme,\r\n    minWidth: 400,\r\n    minHeight: 300,\r\n    maxWidth: \"100%\",\r\n    maxHeight: \"100%\",\r\n    style: {},\r\n};\r\n\r\nCometChatCallScreen.propTypes = {\r\n    lang: PropTypes.string,\r\n    theme: PropTypes.object,\r\n    minWidth: PropTypes.number,\r\n    minHeight: PropTypes.number,\r\n    maxWidth: PropTypes.string,\r\n    maxHeight: PropTypes.string,\r\n    style: PropTypes.object,\r\n}\r\n\r\nexport { CometChatCallScreen }\r\n","import * as enums from \"./enums\";\r\n\r\nexport class SoundManager {\r\n\tstatic widgetSettings;\r\n\tstatic incomingCallAudio = null;\r\n\tstatic outgoingCallAudio = null;\r\n\tstatic incomingMessageAudio = null;\r\n\tstatic outgoingMessageAudio = null;\r\n\tstatic incomingOtherMessageAudio = null;\r\n\r\n\tstatic play = (action, context) => {\r\n\t\tswitch (action) {\r\n\t\t\tcase enums.CONSTANTS.AUDIO[\"INCOMING_CALL\"]:\r\n\t\t\t\tthis.onIncomingCall(context);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CONSTANTS.AUDIO[\"OUTGOING_CALL\"]:\r\n\t\t\t\tthis.onOutgoingCall(context);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CONSTANTS.AUDIO[\"INCOMING_MESSAGE\"]:\r\n\t\t\t\tthis.onIncomingMessage(context);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CONSTANTS.AUDIO[\"INCOMING_OTHER_MESSAGE\"]:\r\n\t\t\t\tthis.onIncomingOtherMessage(context);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CONSTANTS.AUDIO[\"OUTGOING_MESSAGE\"]:\r\n\t\t\t\tthis.onOutgoingMessage(context);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tstatic pause = (action, context) => {\r\n\t\tswitch (action) {\r\n\t\t\tcase enums.CONSTANTS.AUDIO[\"INCOMING_CALL\"]:\r\n\t\t\t\tthis.pauseIncomingCall(context);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CONSTANTS.AUDIO[\"OUTGOING_CALL\"]:\r\n\t\t\t\tthis.pauseOutgoingCall(context);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CONSTANTS.AUDIO[\"INCOMING_MESSAGE\"]:\r\n\t\t\tcase enums.CONSTANTS.AUDIO[\"INCOMING_OTHER_MESSAGE\"]:\r\n\t\t\tcase enums.CONSTANTS.AUDIO[\"OUTGOING_MESSAGE\"]:\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tstatic onIncomingMessage = context => {\r\n\t\tthis.enableSoundForMessages(context).then(response => {\r\n\t\t\tif (response === true) {\r\n\t\t\t\tif (this.incomingMessageAudio === null) {\r\n\t\t\t\t\timport(\"../resources/audio/incomingmessage.wav\").then(response => {\r\n\t\t\t\t\t\tthis.incomingMessageAudio = new Audio(response.default);\r\n\t\t\t\t\t\tthis.playMessageAlert(this.incomingMessageAudio);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.playMessageAlert(this.incomingMessageAudio);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tstatic onIncomingOtherMessage = context => {\r\n\t\tthis.enableSoundForMessages(context).then(response => {\r\n\t\t\tif (response === true) {\r\n\t\t\t\tif (this.incomingOtherMessageAudio === null) {\r\n\t\t\t\t\timport(\"../resources/audio/incomingothermessage.wav\").then(response => {\r\n\t\t\t\t\t\tthis.incomingOtherMessageAudio = new Audio(response.default);\r\n\t\t\t\t\t\tthis.playMessageAlert(this.incomingOtherMessageAudio);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.playMessageAlert(this.incomingOtherMessageAudio);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tstatic onOutgoingMessage = context => {\r\n\t\tthis.enableSoundForMessages(context).then(response => {\r\n\t\t\tif (response === true) {\r\n\t\t\t\tif (this.outgoingMessageAudio === null) {\r\n\t\t\t\t\timport(\"../resources/audio/outgoingmessage.wav\").then(response => {\r\n\t\t\t\t\t\tthis.outgoingMessageAudio = new Audio(response.default);\r\n\t\t\t\t\t\tthis.playMessageAlert(this.outgoingMessageAudio);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.playMessageAlert(this.outgoingMessageAudio);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tstatic playMessageAlert = messageAudio => {\r\n\t\tmessageAudio.currentTime = 0;\r\n\t\tmessageAudio.play();\r\n\t};\r\n\r\n\tstatic onIncomingCall = context => {\r\n\t\tthis.enableSoundForCalls(context).then(response => {\r\n\t\t\tif (response === true) {\r\n\t\t\t\tif (this.incomingCallAudio === null) {\r\n\t\t\t\t\timport(\"../resources/audio/incomingcall.wav\").then(response => {\r\n\t\t\t\t\t\tthis.incomingCallAudio = new Audio(response.default);\r\n\t\t\t\t\t\tthis.playCallAlert(this.incomingCallAudio);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.playCallAlert(this.incomingCallAudio);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tstatic onOutgoingCall = context => {\r\n\t\tthis.enableSoundForCalls(context).then(response => {\r\n\t\t\tif (response === true) {\r\n\t\t\t\tif (this.outgoingCallAudio === null) {\r\n\t\t\t\t\timport(\"../resources/audio/outgoingcall.wav\").then(response => {\r\n\t\t\t\t\t\tthis.outgoingCallAudio = new Audio(response.default);\r\n\t\t\t\t\t\tthis.playCallAlert(this.outgoingCallAudio);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.playCallAlert(this.outgoingCallAudio);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tstatic playCallAlert = callAudio => {\r\n\t\ttry {\r\n\t\t\tcallAudio.currentTime = 0;\r\n\t\t\tif (typeof callAudio.loop == \"boolean\") {\r\n\t\t\t\tcallAudio.loop = true;\r\n\t\t\t} else {\r\n\t\t\t\tcallAudio.addEventListener(\r\n\t\t\t\t\t\"ended\",\r\n\t\t\t\t\tfunction () {\r\n\t\t\t\t\t\tthis.currentTime = 0;\r\n\t\t\t\t\t\tthis.play();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfalse,\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tcallAudio.play();\r\n\t\t} catch (error) {}\r\n\t};\r\n\r\n\tstatic pauseIncomingCall = context => {\r\n\t\tthis.enableSoundForCalls(context).then(response => {\r\n\t\t\tif (response === true) {\r\n\t\t\t\tif (this.incomingCallAudio) {\r\n\t\t\t\t\tthis.incomingCallAudio.pause();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tstatic pauseOutgoingCall = context => {\r\n\t\tthis.enableSoundForCalls(context).then(response => {\r\n\t\t\tif (response === true) {\r\n\t\t\t\tif (this.outgoingCallAudio) {\r\n\t\t\t\t\tthis.outgoingCallAudio.pause();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tstatic enableSoundForCalls = context => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tcontext.FeatureRestriction.isCallsSoundEnabled()\r\n\t\t\t\t.then(response => resolve(response))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n\r\n\tstatic enableSoundForMessages = context => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tcontext.FeatureRestriction.isMessagesSoundEnabled()\r\n\t\t\t\t.then(response => resolve(response))\r\n\t\t\t\t.catch(error => resolve(false));\r\n\t\t});\r\n\t};\r\n}","export const incomingCallWrapperStyle = (props, keyframes) => {\r\n\r\n    const slideDown = keyframes`\r\n    0% { transform: translateY(-50px); }\r\n    100% { transform: translateY(0px); }\r\n    `;\r\n\r\n    let positionValue = \"absolute\";\r\n    let leftPos = \"0\";\r\n    let rightPos = \"0\";\r\n    let topPos = \"0\";\r\n    let bottomPos = \"unset\";\r\n    let zIndexValue = \"998\";\r\n    \r\n    if (props.hasOwnProperty(\"widgetsettings\")) {\r\n\r\n        if (props.widgetsettings.hasOwnProperty(\"dockedview\") && props.widgetsettings.dockedview) {\r\n\r\n            //if chat window is open\r\n            if (props.widgetsettings.hasOwnProperty(\"launched\") && props.widgetsettings.launched) {\r\n\r\n                zIndexValue = \"2147483000\";\r\n                positionValue = \"fixed\";\r\n                topPos = \"unset\";\r\n                bottomPos = \"100px\";\r\n                \r\n                if (props.widgetsettings.hasOwnProperty(\"alignment\") && props.widgetsettings.alignment === \"left\") {\r\n\r\n                    rightPos = \"unset\";\r\n                    leftPos = \"20px\";\r\n\r\n                    if (props.widgetsettings.hasOwnProperty(\"width\")) {\r\n\r\n                        if (props.widgetsettings.width.includes(\"px\")) {\r\n\r\n                            const widgetWidth = props.widgetsettings.width.replace(\"px\", \"\");\r\n                            rightPos = parseInt(widgetWidth) - 250 - 15;\r\n                            rightPos = rightPos + \"px\";\r\n                        }\r\n                    }\r\n\r\n                    if (props.widgetsettings.hasOwnProperty(\"height\")) {\r\n\r\n                        if (props.widgetsettings.height.includes(\"px\")) {\r\n\r\n                            const widgetHeight = props.widgetsettings.height.replace(\"px\", \"\");\r\n                            bottomPos = parseInt(widgetHeight) - 140 + 100;\r\n                            bottomPos = bottomPos + \"px\";\r\n                        }\r\n                    }\r\n                    \r\n                } else {\r\n\r\n                    leftPos = \"unset\";\r\n                    rightPos = \"20px\";\r\n                    \r\n                    if(props.widgetsettings.hasOwnProperty(\"width\")) {\r\n\r\n                        if (props.widgetsettings.width.includes(\"px\")) {\r\n\r\n                            const widgetWidth = props.widgetsettings.width.replace(\"px\", \"\");\r\n                            rightPos = parseInt(widgetWidth) - 250 - 15;\r\n                            rightPos = rightPos + \"px\";\r\n                        }\r\n                    }\r\n\r\n                    if (props.widgetsettings.hasOwnProperty(\"height\")) {\r\n\r\n                        if (props.widgetsettings.height.includes(\"px\")) {\r\n\r\n                            const widgetHeight = props.widgetsettings.height.replace(\"px\", \"\"); \r\n                            bottomPos = parseInt(widgetHeight) - 140 + 100;\r\n                            bottomPos = bottomPos + \"px\";\r\n                        }\r\n                    }\r\n                }\r\n                \r\n            } else {\r\n\r\n                leftPos = \"unset\";\r\n                positionValue = \"fixed\";\r\n            }\r\n        } else {\r\n            zIndexValue = \"2147483000\";\r\n        }\r\n    }\r\n\r\n    return {\r\n        position: positionValue,\r\n        top: topPos,\r\n        left: leftPos,\r\n        bottom: bottomPos,\r\n        right: rightPos,\r\n        borderRadius: \"10px\",\r\n        margin: \"16px\",\r\n        backgroundColor: `${props.theme.backgroundColor.callScreenGrey}`,\r\n        zIndex: zIndexValue,\r\n        color: `${props.theme.color.white}`,\r\n        textAlign: \"center\",\r\n        boxSizing: \"border-box\",\r\n        fontFamily: `${props.theme.fontFamily}`,\r\n        animation: `${slideDown} 250ms ease`,\r\n        width: \"248px\",\r\n        \"*\": {\r\n            boxSizing: \"border-box\",\r\n            fontFamily: `${props.theme.fontFamily}`,\r\n        },\r\n    }\r\n}\r\n\r\nexport const callContainerStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        width: \"100%\",\r\n        padding: \"16px\",\r\n    }\r\n}\r\n\r\nexport const headerWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const callDetailStyle = () => {\r\n\r\n    return {\r\n        width: \"calc(100% - 36px)\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        textAlign: \"left\"\r\n    }\r\n}\r\n\r\nexport const nameStyle = () => {\r\n\r\n    return {\r\n        fontSize: \"15px\",\r\n        fontWeight: \"600\",\r\n        display: \"block\",\r\n        width: \"100%\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n        lineHeight: \"20px\",\r\n    }\r\n}\r\n\r\nexport const callTypeStyle = (props) => {\r\n\r\n    return {\r\n        fontSize: \"13px\",\r\n        width: \"100%\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n        textTransform: \"capitalize\",\r\n        lineHeight: \"20px\",\r\n        color: \"#8A8A8A\",\r\n        display: \"flex\",\r\n        justifyContent: \"start\",\r\n        alignItems: \"center\",\r\n        padding: \"2px 0 0 0px\",\r\n        \"span\": {\r\n            padding: \"0 5px\"\r\n        }\r\n    }\r\n}\r\n\r\nexport const thumbnailStyle = () => {\r\n\r\n    return {\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n    }\r\n}\r\n\r\nexport const headerButtonStyle = () => {\r\n\r\n    return {\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        margin: \"10px 0 0 0\",\r\n    }\r\n}\r\n\r\nexport const ButtonStyle = (props, action) => {\r\n\r\n    const backgroundColor = (action) ? `${props.theme.backgroundColor.blue}!important` : `${props.theme.backgroundColor.red}!important`;\r\n\r\n    return {\r\n        cursor: \"pointer\",\r\n        padding: \"8px 16px\",\r\n        backgroundColor: backgroundColor,\r\n        borderRadius: \"5px\",\r\n        color: `${props.theme.color.white}`,\r\n        fontSize: \"100%\",\r\n        outline: \"0\",\r\n        border: \"0\",\r\n        width: \"49%\",\r\n        overflow: \"hidden\"\r\n    }\r\n}\r\n\r\nexport const callIconStyle = (img, context) => {\r\n\r\n    return {\r\n        width: \"24px\",\r\n        height: \"24px\",\r\n        display: \"inline-block\",\r\n        cursor: \"pointer\",\r\n        mask: `url(${img}) center center no-repeat`,\r\n        backgroundColor: `${context.theme.secondaryTextColor}`,\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/incoming-call.f3f43f25.svg\";","export default __webpack_public_path__ + \"static/media/incoming-video-call.91fb8e60.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx, keyframes } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CallAlertManager } from \"./controller\";\r\n\r\nimport { CometChatCallScreen } from \"../CometChatCallScreen\";\r\nimport { CometChatAvatar } from \"../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport { SoundManager } from \"../../../util/SoundManager\";\r\nimport { Storage } from \"../../../util/Storage\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n    incomingCallWrapperStyle,\r\n    callContainerStyle,\r\n    headerWrapperStyle,\r\n    callDetailStyle,\r\n    nameStyle,\r\n    callTypeStyle,\r\n    thumbnailStyle,\r\n    headerButtonStyle,\r\n    ButtonStyle,\r\n\tcallIconStyle\r\n} from \"./style\";\r\n\r\nimport audioCallIcon from \"./resources/incoming-call.svg\";\r\nimport videoCallIcon from \"./resources/incoming-video-call.svg\";\r\n\r\nclass CometChatIncomingCall extends React.PureComponent {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis._isMounted = false;\r\n\t\tthis.state = {\r\n\t\t\tincomingCall: null,\r\n\t\t\tcallInProgress: null,\r\n\t\t};\r\n\r\n\t\tthis.callButtonRef = React.createRef();\r\n\r\n\t\tCometChat.getLoggedinUser()\r\n\t\t\t.then(user => (this.loggedInUser = user))\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis._isMounted = true;\r\n\r\n\t\tthis.CallAlertManager = new CallAlertManager();\r\n\t\tthis.CallAlertManager.attachListeners(this.callScreenUpdated);\r\n\r\n\t\tStorage.attachChangeDetection(this.logStorageChange);\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tif (this.state.incomingCall) {\r\n\t\t\tthis.adjustFontSize();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis._isMounted = false;\r\n\t\tStorage.detachChangeDetection(this.logStorageChange);\r\n\t}\r\n\r\n\tadjustFontSize = () => {\r\n\t\tif (this.callButtonRef && this.callButtonRef.current) {\r\n\t\t\tlet reduceFontSize = false;\r\n\t\t\tconst buttonNodeList = this.callButtonRef.current.querySelectorAll(\"button\");\r\n\r\n\t\t\tbuttonNodeList.forEach(buttonNode => {\r\n\t\t\t\tconst parentContainerWidth = buttonNode.clientWidth;\r\n\t\t\t\tconst currentTextWidth = buttonNode.scrollWidth;\r\n\r\n\t\t\t\tif (parentContainerWidth < currentTextWidth) {\r\n\t\t\t\t\treduceFontSize = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (reduceFontSize) {\r\n\t\t\t\tbuttonNodeList.forEach(buttonNode => {\r\n\t\t\t\t\tbuttonNode.style.fontSize = \"85%\";\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tcallScreenUpdated = (key, call) => {\r\n\t\tswitch (key) {\r\n\t\t\tcase enums.INCOMING_CALL_RECEIVED: //occurs at the callee end\r\n\t\t\t\tthis.incomingCallReceived(call);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.INCOMING_CALL_CANCELLED: //occurs(call dismissed) at the callee end, caller cancels the call\r\n\t\t\t\tthis.incomingCallCancelled(call);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.OUTGOING_CALL_ACCEPTED: //occurs(call dismissed) at the callee end, caller cancels the call\r\n\t\t\t\tthis.outgoingCallAccepted(call);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tincomingCallReceived = incomingCall => {\r\n\t\tif (this._isMounted) {\r\n\t\t\tif (this.state.incomingCall === null) {\r\n\t\t\t\tif (incomingCall?.callInitiator.uid !== this.loggedInUser?.uid) {\r\n\t\t\t\t\tSoundManager.play(enums.CONSTANTS.AUDIO[\"INCOMING_CALL\"], this.context);\r\n\t\t\t\t\tthis.setState({ incomingCall: incomingCall });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tincomingCallCancelled = call => {\r\n\t\tif (this._isMounted) {\r\n\t\t\t//we are not marking this as read as it will done in messagelist component\r\n\t\t\tSoundManager.pause(enums.CONSTANTS.AUDIO[\"INCOMING_CALL\"], this.context);\r\n\t\t\tthis.setState({ incomingCall: null });\r\n\t\t}\r\n\t};\r\n\r\n\toutgoingCallAccepted = call => {\r\n\r\n\t\tif(call.sender?.uid === this.loggedInUser?.uid) {\r\n\t\t\tif (this._isMounted) {\r\n\t\t\t\t//we are not marking this as read as it will done in messagelist component\r\n\t\t\t\tSoundManager.pause(enums.CONSTANTS.AUDIO[\"INCOMING_CALL\"], this.context);\r\n\t\t\t\tthis.setState({ incomingCall: null });\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trejectCall = () => {\r\n\t\tSoundManager.pause(enums.CONSTANTS.AUDIO[\"INCOMING_CALL\"], this.context);\r\n\t\tlet callStatus = this.isCallActive() ? CometChat.CALL_STATUS.BUSY : CometChat.CALL_STATUS.REJECTED;\r\n\r\n\t\tCometChat.rejectCall(this.state.incomingCall.sessionId, callStatus)\r\n\t\t\t.then(rejectedCall => {\r\n\t\t\t\tif (this.isCallActive() === false) {\r\n\t\t\t\t\tif (this.context) {\r\n\t\t\t\t\t\tthis.context.setCallInProgress(null, \"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tStorage.setItem(enums.CONSTANTS[\"ACTIVECALL\"], rejectedCall);\r\n\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"INCOMING_CALL_REJECTED\"], rejectedCall);\r\n\t\t\t\t\tthis.setState({ callInProgress: null });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setState({ incomingCall: null });\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tthis.setState({ incomingCall: null, callInProgress: null });\r\n\t\t\t\tconst errorCode = error && error.hasOwnProperty(\"code\") ? error.code : \"ERROR\";\r\n\t\t\t\tthis.context.setToastMessage(\"error\", errorCode);\r\n\t\t\t});\r\n\t};\r\n\r\n\tacceptCall = () => {\r\n\t\tthis.checkForActiveCallAndEndCall()\r\n\t\t\t.then(response => {\r\n\t\t\t\tSoundManager.pause(enums.CONSTANTS.AUDIO[\"INCOMING_CALL\"], this.context);\r\n\t\t\t\tCometChat.acceptCall(this.state.incomingCall.sessionId)\r\n\t\t\t\t\t.then(call => {\r\n\t\t\t\t\t\tif (this.context) {\r\n\t\t\t\t\t\t\tthis.context.setCallInProgress(call, enums.CONSTANTS[\"INCOMING_DEFAULT_CALLING\"]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tStorage.setItem(enums.CONSTANTS[\"ACTIVECALL\"], call);\r\n\t\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"INCOMING_CALL_ACCEPTED\"], call);\r\n\t\t\t\t\t\tthis.setState({ incomingCall: null, callInProgress: call });\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tif (this.context) {\r\n\t\t\t\t\t\t\tthis.context.setCallInProgress(null, \"\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.setState({ incomingCall: null, callInProgress: null });\r\n\r\n\t\t\t\t\t\tconst errorCode = error && error.hasOwnProperty(\"code\") ? error.code : \"ERROR\";\r\n\t\t\t\t\t\tthis.context.setToastMessage(\"error\", errorCode);\r\n\t\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconst errorCode = error && error.hasOwnProperty(\"code\") ? error.code : \"ERROR\";\r\n\t\t\t\tthis.context.setToastMessage(\"error\", errorCode);\r\n\t\t\t});\r\n\t};\r\n\r\n\tisCallActive = () => {\r\n\t\tif (Object.keys(this.context.callInProgress).length === 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet sessionID = this.getActiveCallSessionID();\r\n\t\tif (!sessionID) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t};\r\n\r\n\tgetActiveCallSessionID = () => {\r\n\t\treturn this.context.getActiveCallSessionID();\r\n\t};\r\n\r\n\tcheckForActiveCallAndEndCall = () => {\r\n\t\tconst promise = new Promise((resolve, reject) => {\r\n\t\t\tif (this.isCallActive() === false) {\r\n\t\t\t\treturn resolve({ success: true });\r\n\t\t\t}\r\n\r\n\t\t\tlet sessionID = this.getActiveCallSessionID();\r\n\t\t\tCometChat.endCall(sessionID)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn resolve(response);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\treturn reject(error);\r\n\t\t\t\t});\r\n\t\t});\r\n\r\n\t\treturn promise;\r\n\t};\r\n\r\n\tactionHandler = (action, call) => {\r\n\t\tswitch (action) {\r\n\t\t\tcase enums.ACTIONS[\"OUTGOING_CALL_ENDED\"]:\r\n\t\t\t\tthis.setState({ callInProgress: null });\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"USER_JOINED_CALL\"]:\r\n\t\t\tcase enums.ACTIONS[\"USER_LEFT_CALL\"]:\r\n\t\t\t\tthis.props.actionGenerated(action, call);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tlogStorageChange = event => {\r\n\t\tif (event?.key !== enums.CONSTANTS[\"ACTIVECALL\"]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (event.newValue || event.oldValue) {\r\n\t\t\tlet call;\r\n\t\t\tif (event.newValue) {\r\n\t\t\t\tcall = JSON.parse(event.newValue);\r\n\t\t\t} else if (event.oldValue) {\r\n\t\t\t\tcall = JSON.parse(event.oldValue);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.state.incomingCall?.getSessionId() === call?.sessionId) {\r\n\t\t\t\tSoundManager.pause(enums.CONSTANTS.AUDIO[\"INCOMING_CALL\"], this.context);\r\n\t\t\t\tthis.setState({ incomingCall: null });\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet callScreen = null,\r\n\t\t\tincomingCallAlert = null;\r\n\t\tif (this.state.incomingCall) {\r\n\t\t\tlet callType = (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<i css={callIconStyle(audioCallIcon, this.context)} title={Translator.translate(\"INCOMING_AUDIO_CALL\", this.props.lang)}></i>\r\n\t\t\t\t\t<span>{Translator.translate(\"INCOMING_AUDIO_CALL\", this.props.lang)}</span>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\t\t\tif (this.state.incomingCall.type === CometChat.CALL_TYPE.VIDEO) {\r\n\t\t\t\tcallType = (\r\n\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t<i css={callIconStyle(videoCallIcon, this.context)} title={Translator.translate(\"INCOMING_VIDEO_CALL\", this.props.lang)}></i>\r\n\t\t\t\t\t\t<span>{Translator.translate(\"INCOMING_VIDEO_CALL\", this.props.lang)}</span>\r\n\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tincomingCallAlert = (\r\n\t\t\t\t<div css={incomingCallWrapperStyle(this.props, keyframes)} className=\"callalert__wrapper\">\r\n\t\t\t\t\t<div css={callContainerStyle()} className=\"callalert__container\">\r\n\t\t\t\t\t\t<div css={headerWrapperStyle()} className=\"callalert__header\">\r\n\t\t\t\t\t\t\t<div css={callDetailStyle()} className=\"header__detail\">\r\n\t\t\t\t\t\t\t\t<div css={nameStyle()} className=\"name\">\r\n\t\t\t\t\t\t\t\t\t{this.state.incomingCall.sender.name}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div css={callTypeStyle(this.props)} className=\"calltype\">\r\n\t\t\t\t\t\t\t\t\t{callType}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div css={thumbnailStyle()} className=\"header__thumbnail\">\r\n\t\t\t\t\t\t\t\t<CometChatAvatar user={this.state.incomingCall.sender} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div css={headerButtonStyle()} className=\"callalert__buttons\" ref={this.callButtonRef}>\r\n\t\t\t\t\t\t\t<button type=\"button\" css={ButtonStyle(this.props, 0)} className=\"button button__decline\" onClick={() => this.rejectCall(this.state.incomingCall, CometChat.CALL_STATUS.REJECTED)}>\r\n\t\t\t\t\t\t\t\t{Translator.translate(\"DECLINE\", this.props.lang)}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button type=\"button\" css={ButtonStyle(this.props, 1)} className=\"button button__accept\" onClick={this.acceptCall}>\r\n\t\t\t\t\t\t\t\t{Translator.translate(\"ACCEPT\", this.props.lang)}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (this.state.callInProgress) {\r\n\t\t\tcallScreen = <CometChatCallScreen loggedInUser={this.loggedInUser} call={this.state.callInProgress} lang={this.props.lang} actionGenerated={this.actionHandler} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t{incomingCallAlert}\r\n\t\t\t\t{callScreen}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatIncomingCall.defaultProps = {\r\n    lang: Translator.getDefaultLanguage(),\r\n    theme: theme\r\n};\r\n\r\nCometChatIncomingCall.propTypes = {\r\n    lang: PropTypes.string,\r\n    theme: PropTypes.object\r\n}\r\n\r\nexport { CometChatIncomingCall };\r\n","import { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nexport class CallScreenManager {\r\n\r\n\tcallListenerId = \"callscreen_\" + new Date().getTime();\r\n\r\n\tattachListeners(callback) {\r\n\r\n\t\tCometChat.addCallListener(\r\n\t\t\tthis.callListenerId,\r\n\t\t\tnew CometChat.CallListener({\r\n\t\t\t\tonOutgoingCallAccepted: call => {\r\n\t\t\t\t\tcallback(enums.OUTGOING_CALL_ACCEPTED, call);\r\n\t\t\t\t},\r\n\t\t\t\tonOutgoingCallRejected: call => {\r\n\t\t\t\t\tcallback(enums.OUTGOING_CALL_REJECTED, call);\r\n\t\t\t\t},\r\n\t\t\t\tonIncomingCallCancelled: call => {\r\n\t\t\t\t\tcallback(enums.INCOMING_CALL_CANCELLED, call);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tCometChat.removeCallListener(this.callListenerId);\r\n\t}\r\n}","export const callScreenWrapperStyle = (props, keyframes) => {\r\n\r\n    let styles = {\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        position: \"absolute\",\r\n        top: \"0\",\r\n        right: \"0\",\r\n        bottom: \"0\",\r\n        left: \"0\",\r\n        zIndex: \"999\",\r\n    }\r\n\r\n    if (props.widgetsettings) {\r\n\r\n        styles = {\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            position: \"fixed\",\r\n            top: \"0\",\r\n            right: \"0\",\r\n            bottom: \"0\",\r\n            left: \"0\",\r\n            zIndex: \"2147483000\",\r\n        }\r\n    }\r\n\r\n    const fadeAnimation = keyframes`\r\n    from {\r\n        opacity: 0;\r\n    }\r\n    to {\r\n        opacity: 1;\r\n    }`;\r\n\r\n    return {\r\n        ...styles,\r\n        backgroundColor: `${props.theme.backgroundColor.darkGrey}`,\r\n        color: `${props.theme.color.white}`,\r\n        textAlign: \"center\",\r\n        boxSizing: \"border-box\",\r\n        animation: `${fadeAnimation} 250ms ease`,\r\n        fontFamily: `${props.theme.fontFamily}`,\r\n        \"*\": {\r\n            boxSizing: \"border-box\",\r\n            fontFamily: `${props.theme.fontFamily}`,\r\n        },\r\n    }\r\n}\r\n\r\nexport const callScreenContainerStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        height: \"100%\",\r\n        width: \"100%\"\r\n    }\r\n}\r\n\r\nexport const headerStyle = () => {\r\n\r\n    return {\r\n        padding: \"20px 10px\",\r\n        width: \"100%\",\r\n        height: \"20%\",\r\n    }\r\n}\r\n\r\nexport const headerDurationStyle = () => {\r\n\r\n    return {\r\n        fontSize: \"13px\",\r\n        display: \"inline-block\",\r\n        padding: \"5px\"\r\n    }\r\n}\r\n\r\nexport const headerNameStyle = () => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        fontWeight: \"700\",\r\n        textTransform: \"capitalize\",\r\n        fontSize: \"16px\",\r\n    }\r\n}\r\n\r\nexport const thumbnailWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"100%\",\r\n        height: \"50%\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\"\r\n    }\r\n}\r\n\r\nexport const thumbnailStyle = () => {\r\n\r\n    return {\r\n        width: \"200px\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const headerIconStyle = () => {\r\n\r\n    return {\r\n        width: \"100%\",\r\n        height: \"15%\",\r\n        padding: \"10px\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\"\r\n    }\r\n}\r\n\r\nexport const iconWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\"\r\n    }\r\n}\r\n\r\nexport const iconStyle = (img) => {\r\n\r\n    return {\r\n        width: \"50px\",\r\n        height: \"50px\",\r\n        borderRadius: \"27px\",\r\n        backgroundColor: \"red\",\r\n        display: \"flex\",\r\n        margin: \"auto 10px\",\r\n        cursor: \"pointer\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        \"i\": {\r\n            mask: `url(${img}) center center no-repeat`,\r\n            backgroundColor: `white`,\r\n            display: \"inline-block\",\r\n            width: \"24px\",\r\n            height: \"24px\",\r\n        },\r\n    };\r\n}\r\n\r\nexport const errorContainerStyle = () => {\r\n\r\n    return {\r\n        color: \"#fff\",\r\n        textAlign: \"center\",\r\n        borderRadius: \"2px\",\r\n        padding: \"13px 10px\",\r\n        fontSize: \"13px\",\r\n        width: \"100%\",\r\n        height: \"10%\",\r\n        backgroundColor: \"#333\",\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/end-call.ce281132.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx, keyframes } from \"@emotion/core\";\r\nimport PropTypes from 'prop-types';\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CallScreenManager } from \"./controller\";\r\n\r\nimport { CometChatCallScreen } from \"../CometChatCallScreen\";\r\nimport { CometChatAvatar } from \"../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport { SoundManager } from \"../../../util/SoundManager\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport {\r\n\tcallScreenWrapperStyle,\r\n\tcallScreenContainerStyle,\r\n\theaderStyle,\r\n\theaderDurationStyle,\r\n\theaderNameStyle,\r\n\tthumbnailWrapperStyle,\r\n\tthumbnailStyle,\r\n\theaderIconStyle,\r\n\ticonWrapperStyle,\r\n\ticonStyle,\r\n\terrorContainerStyle\r\n} from \"./style\"; \r\n\r\nimport callIcon from \"./resources/end-call.svg\";\r\n\r\nclass CometChatOutgoingCall extends React.PureComponent {\r\n\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\r\n\t\tsuper(props);\r\n\r\n\t\tthis.callScreenFrame = React.createRef();\r\n\r\n\t\tthis.state = {\r\n\t\t\terrorScreen: false,\r\n\t\t\terrorMessage: null,\r\n\t\t\toutgoingCallScreen: false,\r\n\t\t\tcallInProgress: null,\r\n\t\t}\r\n\r\n\t\tCometChat.getLoggedinUser().then(user => this.loggedInUser = user).catch(error => {\r\n\t\t\tconsole.error(error);\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tthis.CallScreenManager = new CallScreenManager();\r\n\t\tthis.CallScreenManager.attachListeners(this.callScreenUpdated);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.CallScreenManager.removeListeners();\r\n\t\tthis.CallScreenManager = null;\r\n\t}\r\n\r\n\tcallScreenUpdated = (key, call) => {\r\n\r\n\t\tswitch (key) {\r\n\r\n\t\t\tcase enums.OUTGOING_CALL_ACCEPTED://occurs at the caller end\r\n\t\t\t\tthis.outgoingCallAccepted(call);\r\n\t\t\tbreak;\r\n\t\t\tcase enums.OUTGOING_CALL_REJECTED://occurs at the caller end, callee rejects the call\r\n\t\t\t\tthis.outgoingCallRejected(call);\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\toutgoingCallAccepted = (call) => {\r\n\r\n\t\tif (this.state.outgoingCallScreen === true) {\r\n\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"OUTGOING_CALL_ACCEPTED\"], call);\r\n\r\n\t\t\tSoundManager.pause(enums.CONSTANTS.AUDIO[\"OUTGOING_CALL\"], this.context);\r\n\t\t\tthis.setState({ outgoingCallScreen: false, callInProgress: call, errorScreen: false, errorMessage: null });\r\n\r\n\t\t\tif(this.context) {\r\n\t\t\t\tthis.context.setCallInProgress(call, enums.CONSTANTS[\"OUTGOING_DEFAULT_CALLING\"]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\toutgoingCallRejected = (call) => {\r\n\r\n\t\tSoundManager.pause(enums.CONSTANTS.AUDIO[\"OUTGOING_CALL\"], this.context);\r\n\t\tif (call.hasOwnProperty(\"status\") && call.status === CometChat.CALL_STATUS.BUSY) {\r\n\r\n\t\t\t//show busy message.\r\n\t\t\tconst errorMessage = `${call.sender.name} ${Translator.translate(\"ON_ANOTHER_CALL\", this.props.lang)}`;\r\n\t\t\tthis.setState({ errorScreen: true, errorMessage: errorMessage });\r\n\t\t\tthis.clearCallInProgress();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"OUTGOING_CALL_REJECTED\"], call);\r\n\t\t\tthis.setState({ outgoingCallScreen: false, callInProgress: null, errorScreen: false, errorMessage: null });\r\n\t\t\tthis.clearCallInProgress();\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tstartCall = (call) => {\r\n\r\n\t\tSoundManager.play(enums.CONSTANTS.AUDIO[\"OUTGOING_CALL\"], this.context);\r\n\t\tthis.setState({ outgoingCallScreen: true, callInProgress: call, errorScreen: false, errorMessage: null });\r\n\t}\r\n\r\n\tactionHandler = (action, call) => {\r\n\r\n\t\tswitch (action) {\r\n\r\n\t\t\tcase enums.ACTIONS[\"OUTGOING_CALL_ENDED\"]:\r\n\t\t\t\tthis.setState({ callInProgress: null });\r\n\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"USER_JOINED_CALL\"]:\r\n\t\t\tcase enums.ACTIONS[\"USER_LEFT_CALL\"]:\r\n\t\t\t\tthis.props.actionGenerated(action, call);\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t//cancelling an outgoing call\r\n\tcancelCall = () => {\r\n\r\n\t\tSoundManager.pause(enums.CONSTANTS.AUDIO[\"OUTGOING_CALL\"], this.context);\r\n\t\t//if user busy error, just close the callscreen, no need to reject the call\r\n\t\tif (this.state.errorScreen) {\r\n\r\n\t\t\tthis.setState({ errorScreen: false, errorMessage: null, outgoingCallScreen: false, callInProgress: null });\r\n\t\t\tthis.clearCallInProgress();\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"OUTGOING_CALL_CANCELLED\"]);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tCometChat.rejectCall(this.state.callInProgress.sessionId, CometChat.CALL_STATUS.CANCELLED).then(call => {\r\n\r\n\t\t\t\tthis.setState({ outgoingCallScreen: false, callInProgress: null });\r\n\t\t\t\tthis.clearCallInProgress();\r\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"OUTGOING_CALL_CANCELLED\"]);\r\n\r\n\t\t\t}).catch(error => {\r\n\r\n\t\t\t\tthis.setState({ outgoingCallScreen: false, callInProgress: null });\r\n\t\t\t\tthis.clearCallInProgress();\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tclearCallInProgress = () => {\r\n\t\tif (this.context) {\r\n\t\t\tthis.context.setCallInProgress(null, \"\");\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\tlet callScreen = null, errorScreen = null;\r\n\t\tif (this.state.callInProgress) {\r\n\r\n\t\t\tlet avatar = (<CometChatAvatar user={this.state.callInProgress.receiver} />);\r\n\t\t\tif (this.state.errorScreen) {\r\n\t\t\t\terrorScreen = (\r\n\t\t\t\t\t<div css={errorContainerStyle()} className=\"callscreen__error__wrapper\"><div>{this.state.errorMessage}</div></div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.state.outgoingCallScreen) {\r\n\t\t\t\tcallScreen = (\r\n\t\t\t\t\t<div css={callScreenWrapperStyle(this.props, keyframes)} className=\"callscreen__wrapper\" ref={el => { this.callScreenFrame = el; }}>\r\n\t\t\t\t\t\t<div css={callScreenContainerStyle()} className=\"callscreen__container\">\r\n\t\t\t\t\t\t\t<div css={headerStyle()} className=\"callscreen__header\">\r\n\t\t\t\t\t\t\t\t<span css={headerDurationStyle()} className=\"header__calling\">{Translator.translate(\"CALLING\", this.props.lang)}</span>\r\n\t\t\t\t\t\t\t\t<h6 css={headerNameStyle()} className=\"header__name\">{this.state.callInProgress.receiver.name}</h6>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div css={thumbnailWrapperStyle()} className=\"callscreen__thumbnail__wrapper\">\r\n\t\t\t\t\t\t\t\t<div css={thumbnailStyle()} className=\"callscreen__thumbnail\">{avatar}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{errorScreen}\r\n\t\t\t\t\t\t\t<div css={headerIconStyle()} className=\"callscreen__icons\">\r\n\t\t\t\t\t\t\t\t<div css={iconWrapperStyle()} className=\"icon__block\" onClick={this.cancelCall}>\r\n\t\t\t\t\t\t\t\t\t<div css={iconStyle(callIcon)} className=\"icon icon__end\"><i></i></div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tcallScreen = <CometChatCallScreen loggedInUser={this.loggedInUser} call={this.state.callInProgress} lang={this.props.lang} actionGenerated={this.actionHandler} />;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn callScreen;\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatOutgoingCall.defaultProps = {\r\n\tlang: Translator.getDefaultLanguage(),\r\n\ttheme: theme,\r\n};\r\n\r\nCometChatOutgoingCall.propTypes = {\r\n\tlang: PropTypes.string,\r\n\ttheme: PropTypes.object,\r\n}\r\n\r\nexport { CometChatOutgoingCall };\r\n","import { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nexport class messageAlertManager {\r\n\r\n    msgListenerId = \"incoming_message_\" + new Date().getTime();\r\n\r\n    attachListeners(callback) {\r\n\r\n        CometChat.addMessageListener(\r\n            this.msgListenerId,\r\n            new CometChat.MessageListener({\r\n                onCustomMessageReceived: customMessage => {\r\n                    callback(enums.CUSTOM_MESSAGE_RECEIVED, customMessage);\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    removeListeners() {\r\n        CometChat.removeMessageListener(this.msgListenerId);\r\n    }\r\n}\r\n","export const incomingCallWrapperStyle = (props, keyframes) => {\r\n\r\n    const slideDown = keyframes`\r\n    0% { transform: translateY(-50px); }\r\n    100% { transform: translateY(0px); }\r\n    `;\r\n\r\n    let positionValue = \"absolute\";\r\n    let leftPos = \"0\";\r\n    let rightPos = \"0\";\r\n    let topPos = \"0\";\r\n    let bottomPos = \"unset\";\r\n    let zIndexValue = \"998\";\r\n\r\n    if (props.hasOwnProperty(\"widgetsettings\")) {\r\n\r\n        if (props.widgetsettings.hasOwnProperty(\"dockedview\") && props.widgetsettings.dockedview) {\r\n\r\n            //if chat window is open\r\n            if (props.widgetsettings.hasOwnProperty(\"launched\") && props.widgetsettings.launched) {\r\n\r\n                zIndexValue = \"2147483000\";\r\n                positionValue = \"fixed\";\r\n                topPos = \"unset\";\r\n                bottomPos = \"100px\";\r\n\r\n                if (props.widgetsettings.hasOwnProperty(\"alignment\") && props.widgetsettings.alignment === \"left\") {\r\n\r\n                    rightPos = \"unset\";\r\n                    leftPos = \"20px\";\r\n\r\n                    if (props.widgetsettings.hasOwnProperty(\"width\")) {\r\n\r\n                        if (props.widgetsettings.width.includes(\"px\")) {\r\n\r\n                            const widgetWidth = props.widgetsettings.width.replace(\"px\", \"\");\r\n                            rightPos = parseInt(widgetWidth) - 250 - 15;\r\n                            rightPos = rightPos + \"px\";\r\n                        }\r\n                    }\r\n\r\n                    if (props.widgetsettings.hasOwnProperty(\"height\")) {\r\n\r\n                        if (props.widgetsettings.height.includes(\"px\")) {\r\n\r\n                            const widgetHeight = props.widgetsettings.height.replace(\"px\", \"\");\r\n                            bottomPos = parseInt(widgetHeight) - 140 + 100;\r\n                            bottomPos = bottomPos + \"px\";\r\n                        }\r\n                    }\r\n\r\n                } else {\r\n\r\n                    leftPos = \"unset\";\r\n                    rightPos = \"20px\";\r\n\r\n                    if (props.widgetsettings.hasOwnProperty(\"width\")) {\r\n\r\n                        if (props.widgetsettings.width.includes(\"px\")) {\r\n\r\n                            const widgetWidth = props.widgetsettings.width.replace(\"px\", \"\");\r\n                            rightPos = parseInt(widgetWidth) - 250 - 15;\r\n                            rightPos = rightPos + \"px\";\r\n                        }\r\n                    }\r\n\r\n                    if (props.widgetsettings.hasOwnProperty(\"height\")) {\r\n\r\n                        if (props.widgetsettings.height.includes(\"px\")) {\r\n\r\n                            const widgetHeight = props.widgetsettings.height.replace(\"px\", \"\");\r\n                            bottomPos = parseInt(widgetHeight) - 140 + 100;\r\n                            bottomPos = bottomPos + \"px\";\r\n                        }\r\n                    }\r\n                }\r\n\r\n            } else {\r\n\r\n                leftPos = \"unset\";\r\n                positionValue = \"fixed\";\r\n            }\r\n        } else {\r\n            zIndexValue = \"2147483000\";\r\n        }\r\n    }\r\n\r\n    return {\r\n        position: positionValue,\r\n        top: topPos,\r\n        left: leftPos,\r\n        bottom: bottomPos,\r\n        right: rightPos,\r\n        borderRadius: \"10px\",\r\n        margin: \"16px\",\r\n        backgroundColor: `${props.theme.backgroundColor.callScreenGrey}`,\r\n        zIndex: zIndexValue,\r\n        color: `${props.theme.color.white}`,\r\n        textAlign: \"center\",\r\n        boxSizing: \"border-box\",\r\n        fontFamily: `${props.theme.fontFamily}`,\r\n        animation: `${slideDown} 250ms ease`,\r\n        width: \"248px\",\r\n        \"*\": {\r\n            boxSizing: \"border-box\",\r\n            fontFamily: `${props.theme.fontFamily}`,\r\n        },\r\n    }\r\n}\r\n\r\nexport const callContainerStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        width: \"100%\",\r\n        padding: \"16px\",\r\n    }\r\n}\r\n\r\nexport const headerWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const callDetailStyle = () => {\r\n\r\n    return {\r\n        width: \"calc(100% - 36px)\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        textAlign: \"left\"\r\n    }\r\n}\r\n\r\nexport const nameStyle = () => {\r\n\r\n    return {\r\n        fontSize: \"15px\",\r\n        fontWeight: \"600\",\r\n        display: \"block\",\r\n        width: \"100%\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n        lineHeight: \"20px\",\r\n    }\r\n}\r\n\r\nexport const callTypeStyle = (props) => {\r\n\r\n    return {\r\n        fontSize: \"13px\",\r\n        width: \"100%\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n        textTransform: \"capitalize\",\r\n        lineHeight: \"20px\",\r\n        color: \"#8A8A8A\",\r\n        display: \"flex\",\r\n        justifyContent: \"start\",\r\n        alignItems: \"center\",\r\n        padding: \"2px 0 0 0px\",\r\n        \"span\": {\r\n            padding: \"0 5px\"\r\n        }\r\n    }\r\n}\r\n\r\nexport const thumbnailStyle = () => {\r\n\r\n    return {\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n    }\r\n}\r\n\r\nexport const headerButtonStyle = () => {\r\n\r\n    return {\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        margin: \"10px 0 0 0\",\r\n    }\r\n}\r\n\r\nexport const ButtonStyle = (props, action) => {\r\n\r\n    const backgroundColor = (action) ? `${props.theme.backgroundColor.blue}!important` : `${props.theme.backgroundColor.red}!important`;\r\n\r\n    return {\r\n\t\t\tcursor: \"pointer\",\r\n\t\t\tpadding: \"8px 16px\",\r\n\t\t\tbackgroundColor: backgroundColor,\r\n\t\t\tborderRadius: \"5px\",\r\n\t\t\tcolor: `${props.theme.color.white}`,\r\n\t\t\tfontSize: \"100%\",\r\n\t\t\toutline: \"0\",\r\n\t\t\tborder: \"0\",\r\n\t\t\twidth: \"49%\",\r\n\t\t\toverflow: \"hidden\",\r\n\t\t};\r\n}\r\n\r\nexport const callIconStyle = (img, context) => {\r\n\treturn {\r\n\t\twidth: \"24px\",\r\n\t\theight: \"24px\",\r\n\t\tdisplay: \"inline-block\",\r\n\t\tcursor: \"pointer\",\r\n\t\tmask: `url(${img}) center center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.secondaryTextColor}`,\r\n\t};\r\n};","export default __webpack_public_path__ + \"static/media/incoming-video-call.91fb8e60.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx, keyframes } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { messageAlertManager } from \"./controller\";\r\n\r\nimport { CometChatAvatar } from \"../../Shared\";\r\nimport { CometChatCallScreen } from \"../CometChatCallScreen\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport { SoundManager } from \"../../../util/SoundManager\";\r\nimport { Storage } from \"../../../util/Storage\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport {\r\n    incomingCallWrapperStyle,\r\n    callContainerStyle,\r\n    headerWrapperStyle,\r\n    callDetailStyle,\r\n    nameStyle,\r\n    callTypeStyle,\r\n    thumbnailStyle,\r\n    headerButtonStyle,\r\n    ButtonStyle,\r\n\tcallIconStyle\r\n} from \"./style\";\r\n\r\nimport videoCallIcon from \"./resources/incoming-video-call.svg\";\r\n\r\nclass CometChatIncomingDirectCall extends React.PureComponent {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis._isMounted = false;\r\n\t\tthis.state = {\r\n\t\t\tincomingCall: null,\r\n\t\t\tcallInProgress: null,\r\n\t\t\tmaximize: true,\r\n\t\t};\r\n\r\n\t\tthis.callButtonRef = React.createRef();\r\n\r\n\t\tCometChat.getLoggedinUser()\r\n\t\t\t.then(user => (this.loggedInUser = user))\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis._isMounted = true;\r\n\r\n\t\tthis.MessageAlertManager = new messageAlertManager();\r\n\t\tthis.MessageAlertManager.attachListeners(this.messageListenerCallback);\r\n\r\n\t\tStorage.attachChangeDetection(this.logStorageChange);\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tif (this.state.incomingCall) {\r\n\t\t\tthis.adjustFontSize();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis._isMounted = false;\r\n\t\tStorage.detachChangeDetection(this.logStorageChange);\r\n\t}\r\n\r\n\tadjustFontSize = () => {\r\n\t\tif (this.callButtonRef && this.callButtonRef.current) {\r\n\t\t\tlet reduceFontSize = false;\r\n\t\t\tconst buttonNodeList = this.callButtonRef.current.querySelectorAll(\"button\");\r\n\r\n\t\t\tbuttonNodeList.forEach(buttonNode => {\r\n\t\t\t\tconst parentContainerWidth = buttonNode.clientWidth;\r\n\t\t\t\tconst currentTextWidth = buttonNode.scrollWidth;\r\n\r\n\t\t\t\tif (parentContainerWidth < currentTextWidth) {\r\n\t\t\t\t\treduceFontSize = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (reduceFontSize) {\r\n\t\t\t\tbuttonNodeList.forEach(buttonNode => {\r\n\t\t\t\t\tbuttonNode.style.fontSize = \"85%\";\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tmessageListenerCallback = (key, message) => {\r\n\t\tswitch (key) {\r\n\t\t\tcase enums.CUSTOM_MESSAGE_RECEIVED: //occurs at the callee end\r\n\t\t\t\tthis.incomingCallReceived(message);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tincomingCallReceived = message => {\r\n\t\tif (this._isMounted) {\r\n\t\t\tif (message.type !== enums.CUSTOM_TYPE_MEETING) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (Object.keys(this.context.callInProgress).length) {\r\n\t\t\t\tif (this.context.checkIfDirectCallIsOngoing() && this.context.getActiveCallSessionID() === message.data.customData.sessionID) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (message?.sender.uid !== this.loggedInUser?.uid) {\r\n\t\t\t\tSoundManager.play(enums.CONSTANTS.AUDIO[\"INCOMING_CALL\"], this.context);\r\n\t\t\t\tthis.setState({incomingCall: message});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tjoinCall = () => {\r\n\t\tthis.checkForActiveCallAndEndCall()\r\n\t\t\t.then(response => {\r\n\t\t\t\tSoundManager.pause(enums.CONSTANTS.AUDIO[\"INCOMING_CALL\"], this.context);\r\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"ACCEPT_DIRECT_CALL\"], true);\r\n\r\n\t\t\t\tif (this.context) {\r\n\t\t\t\t\tthis.context.setCallInProgress(this.state.incomingCall, enums.CONSTANTS[\"INCOMING_DIRECT_CALLING\"]);\r\n\t\t\t\t}\r\n\t\t\t\tStorage.setItem(enums.CONSTANTS[\"ACTIVECALL\"], this.state.incomingCall);\r\n\t\t\t\tthis.setState({incomingCall: null, callInProgress: this.state.incomingCall});\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconst errorCode = error && error.hasOwnProperty(\"code\") ? error.code : \"ERROR\";\r\n\t\t\t\tthis.context.setToastMessage(\"error\", errorCode);\r\n\t\t\t});\r\n\t};\r\n\r\n\tignoreCall = () => {\r\n\t\tSoundManager.pause(enums.CONSTANTS.AUDIO[\"INCOMING_CALL\"], this.context);\r\n\t\tStorage.setItem(enums.CONSTANTS[\"ACTIVECALL\"], this.state.incomingCall);\r\n\t\tthis.setState({incomingCall: null});\r\n\t};\r\n\r\n\tcheckForActiveCallAndEndCall = () => {\r\n\t\tconst promise = new Promise((resolve, reject) => {\r\n\t\t\tif (this.isCallActive() === false) {\r\n\t\t\t\treturn resolve({success: true});\r\n\t\t\t}\r\n\r\n\t\t\tlet sessionID = this.getActiveCallSessionID();\r\n\t\t\tCometChat.endCall(sessionID)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn resolve(response);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\treturn reject(error);\r\n\t\t\t\t});\r\n\t\t});\r\n\r\n\t\treturn promise;\r\n\t};\r\n\r\n\tisCallActive = () => {\r\n\t\tif (Object.keys(this.context.callInProgress).length === 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet sessionID = this.getActiveCallSessionID();\r\n\t\tif (!sessionID) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t};\r\n\r\n\tgetActiveCallSessionID = () => {\r\n\t\treturn this.context.getActiveCallSessionID();\r\n\t};\r\n\r\n\tactionHandler = action => {\r\n\t\tswitch (action) {\r\n\t\t\tcase enums.ACTIONS[\"DIRECT_CALL_ENDED\"]:\r\n\t\t\tcase enums.ACTIONS[\"DIRECT_CALL_ERROR\"]:\r\n\t\t\t\tthis.setState({callInProgress: null});\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tlogStorageChange = event => {\r\n\t\tif (event?.key !== enums.CONSTANTS[\"ACTIVECALL\"]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (event.newValue || event.oldValue) {\r\n\t\t\tlet call;\r\n\t\t\tif (event.newValue) {\r\n\t\t\t\tcall = JSON.parse(event.newValue);\r\n\t\t\t} else if (event.oldValue) {\r\n\t\t\t\tcall = JSON.parse(event.oldValue);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.state.incomingCall?.sessionId === call?.sessionId) {\r\n\t\t\t\tSoundManager.pause(enums.CONSTANTS.AUDIO[\"INCOMING_CALL\"], this.context);\r\n\t\t\t\tthis.setState({incomingCall: null});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet callScreen = null,\r\n\t\t\tincomingCallAlert = null;\r\n\t\tif (this.state.incomingCall) {\r\n\t\t\tlet avatar = (\r\n\t\t\t\t<div css={thumbnailStyle()} className=\"header__thumbnail\">\r\n\t\t\t\t\t<CometChatAvatar cornerRadius=\"50%\" image={this.state.incomingCall.sender.avatar} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tconst callType = (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<i css={callIconStyle(videoCallIcon, this.context)} title={Translator.translate(\"INCOMING_VIDEO_CALL\", this.props.lang)}></i>\r\n\t\t\t\t\t<span>{Translator.translate(\"INCOMING_VIDEO_CALL\", this.props.lang)}</span>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\r\n\t\t\tincomingCallAlert = (\r\n\t\t\t\t<div css={incomingCallWrapperStyle(this.props, keyframes)} className=\"callalert__wrapper\">\r\n\t\t\t\t\t<div css={callContainerStyle()} className=\"callalert__container\">\r\n\t\t\t\t\t\t<div css={headerWrapperStyle()} className=\"callalert__header\">\r\n\t\t\t\t\t\t\t<div css={callDetailStyle()} className=\"header__detail\">\r\n\t\t\t\t\t\t\t\t<div css={nameStyle()} className=\"name\">\r\n\t\t\t\t\t\t\t\t\t{this.state.incomingCall.sender.name}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div css={callTypeStyle(this.props)} className=\"calltype\">\r\n\t\t\t\t\t\t\t\t\t{callType}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{avatar}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div css={headerButtonStyle()} className=\"callalert__buttons\" ref={this.callButtonRef}>\r\n\t\t\t\t\t\t\t<button type=\"button\" css={ButtonStyle(this.props, 0)} className=\"button button__ignore\" onClick={this.ignoreCall}>\r\n\t\t\t\t\t\t\t\t{Translator.translate(\"IGNORE\", this.props.lang)}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button type=\"button\" css={ButtonStyle(this.props, 1)} className=\"button button__join\" onClick={this.joinCall}>\r\n\t\t\t\t\t\t\t\t{Translator.translate(\"JOIN\", this.props.lang)}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (this.state.callInProgress) {\r\n\t\t\tcallScreen = <CometChatCallScreen loggedInUser={this.loggedInUser} call={this.state.callInProgress} lang={this.props.lang} actionGenerated={this.actionHandler} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t{incomingCallAlert}\r\n\t\t\t\t{callScreen}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatIncomingDirectCall.defaultProps = {\r\n    lang: Translator.getDefaultLanguage(),\r\n    theme: theme,\r\n};\r\n\r\nCometChatIncomingDirectCall.propTypes = {\r\n    lang: PropTypes.string,\r\n    theme: PropTypes.object,\r\n}\r\n\r\nexport { CometChatIncomingDirectCall };\r\n","/* eslint-disable no-useless-concat */\r\n/* eslint-disable no-extend-native */\r\nimport dateFormat from \"dateformat\";\r\nimport Translator from \"../resources/localization/translator\";\r\nconst milliseconds = 1000;\r\nconst seconds = 1 * milliseconds;\r\nconst minute = 60 * seconds;\r\nconst hour = 60 * minute;\r\nconst day = 24 * hour;\r\n\r\nconst wordBoundary = {\r\n    start: `(?:^|:|;|'|\"|,|{|}|\\\\.|\\\\s|\\\\!|\\\\?|\\\\(|\\\\)|\\\\[|\\\\]|\\\\*)`,\r\n    end: `(?=$|:|;|'|\"|,|{|}|\\\\.|\\\\s|\\\\!|\\\\?|\\\\(|\\\\)|\\\\[|\\\\]|\\\\*)`,\r\n};\r\n\r\nconst emailPattern = new RegExp(\r\n    wordBoundary.start +\r\n    `[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\\\.[A-Za-z]{2,6}` +\r\n    wordBoundary.end,\r\n    'gi'\r\n); \r\nconst urlPattern = new RegExp(\r\n    wordBoundary.start +\r\n    `((https?://|www\\\\.|pic\\\\.)[-\\\\w;/?:@&=+$\\\\|\\\\_.!~*\\\\|'()\\\\[\\\\]%#,☺]+[\\\\w/#](\\\\(\\\\))?)` +\r\n    wordBoundary.end,\r\n    'gi'\r\n);\r\nconst phoneNumPattern = new RegExp(\r\n    wordBoundary.start +\r\n    `(?:\\\\+?(\\\\d{1,3}))?([-. (]*(\\\\d{3})[-. )]*)?((\\\\d{3})[-. ]*(\\\\d{2,4})(?:[-.x ]*(\\\\d+))?)` +\r\n    wordBoundary.end,\r\n    'gi'\r\n);\r\n\r\nexport const linkify = (message) => {\r\n\r\n    let outputStr = message.replace(phoneNumPattern, \"<a target='blank' rel='noopener noreferrer' href='tel:$&'>$&</a>\");\r\n    outputStr = outputStr.replace(emailPattern, \"<a target='blank' rel='noopener noreferrer' href='mailto:$&'>$&</a>\");\r\n\r\n    const results = outputStr.match(urlPattern);\r\n\r\n    results &&\r\n        results.forEach((url) => {\r\n\r\n            url = url.trim();\r\n            let normalizedURL = url;\r\n            if (!url.startsWith('http')) {\r\n                normalizedURL = `//${url}`;\r\n            }\r\n            outputStr = outputStr.replace(\r\n                url,\r\n                `<a target='blank' rel='noopener noreferrer' href=\"${normalizedURL}\">${url}</a>`\r\n            );\r\n        });\r\n\r\n    return outputStr;\r\n}\r\n\r\nexport const checkMessageForExtensionsData = (message, extensionKey) => {\r\n\r\n    let output = null;\r\n    \r\n    if (message.hasOwnProperty(\"metadata\")) {\r\n\r\n        const metadata = message.metadata;\r\n        const injectedObject = metadata[\"@injected\"];\r\n        if (injectedObject && injectedObject.hasOwnProperty(\"extensions\")) {\r\n\r\n            const extensionsObject = injectedObject[\"extensions\"];\r\n            if (extensionsObject && extensionsObject.hasOwnProperty(extensionKey)) {\r\n\r\n                output = extensionsObject[extensionKey];\r\n            }\r\n        }\r\n    }\r\n\r\n    return output;\r\n}\r\n\r\nexport const getMessageFileMetadata = (message, metadataKey) => {\r\n\r\n    let fileMetadata = null;\r\n    if(message.hasOwnProperty(\"metadata\")) {\r\n\r\n        const metadata = message[\"metadata\"];\r\n        if (metadata.hasOwnProperty(metadataKey)) {\r\n            fileMetadata = metadata[metadataKey];\r\n        }\r\n    }\r\n\r\n    return fileMetadata;\r\n}\r\n\r\nexport const ID = () => {\r\n    // Math.random should be unique because of its seeding algorithm.\r\n    // Convert it to base 36 (numbers + letters), and grab the first 9 characters\r\n    // after the decimal.\r\n    return '_' + Math.random().toString(36).substr(2, 9);\r\n};\r\n\r\nexport const getUnixTimestamp = () => {\r\n\r\n    return Math.round(+new Date() / 1000);\r\n}\r\n\r\nconst dateDiffInDays = (a, b) => {\r\n\r\n    const milliSecondsPerDay = day;\r\n\r\n    // Discard the time and time-zone information.\r\n    const utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate());\r\n    const utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate());\r\n\r\n    return Math.floor((utc2 - utc1) / milliSecondsPerDay);\r\n}\r\n\r\n\r\nexport const getTimeStampForLastMessage = (timestamp, lang) => {\r\n\r\n    const timeStampInMilliSeconds = timestamp * 1000;\r\n\r\n    const messageTimestamp = new Date(timeStampInMilliSeconds);\r\n    const currentTimestamp = new Date(Date.now());\r\n\r\n    const dateDifferenceInDays = dateDiffInDays(messageTimestamp, currentTimestamp);\r\n\r\n    if (dateDifferenceInDays < 1) {\r\n\r\n        timestamp = dateFormat(messageTimestamp, \"shortTime\");\r\n\r\n    } else if (dateDifferenceInDays < 2) {\r\n\r\n        timestamp = Translator.translate(\"YESTERDAY\", lang);\r\n\r\n    } else if (dateDifferenceInDays < 7) {\r\n\r\n        timestamp = dateFormat(messageTimestamp, \"dddd\");\r\n        timestamp = Translator.translate(timestamp, lang);\r\n\r\n    } else {\r\n\r\n        timestamp = dateFormat(messageTimestamp, \"dS mmm\");\r\n    }\r\n\r\n    return timestamp;\r\n}\r\n\r\nexport const getMessageSentTime = (timestamp, lang) => {\r\n\r\n    let oTimestamp = null;\r\n\r\n    const messageTimestamp = new Date(timestamp) * 1000;\r\n    oTimestamp = dateFormat(messageTimestamp, \"shortTime\");\r\n\r\n    return oTimestamp;\r\n}\r\n\r\nexport const getMessageDate = (timestamp, lang) => {\r\n\r\n    const timeStampInMilliSeconds = timestamp * 1000;\r\n\r\n    const messageTimestamp = new Date(timeStampInMilliSeconds);\r\n    const currentTimestamp = new Date(Date.now());\r\n\r\n    const dateDifferenceInDays = dateDiffInDays(messageTimestamp, currentTimestamp);\r\n\r\n    if (dateDifferenceInDays < 1) {\r\n\r\n        timestamp = Translator.translate(\"TODAY\", lang);\r\n\r\n    } else if (dateDifferenceInDays < 2) {\r\n\r\n        timestamp = Translator.translate(\"YESTERDAY\", lang);\r\n\r\n    } else if (dateDifferenceInDays < 7) {\r\n\r\n        timestamp = dateFormat(messageTimestamp, \"dddd\");\r\n        timestamp = Translator.translate(timestamp, lang);\r\n\r\n    } else {\r\n\r\n        timestamp = dateFormat(timeStampInMilliSeconds, \"dS mmm, yyyy\");\r\n    }\r\n\r\n    return timestamp;\r\n}","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatCallScreen } from \"../CometChatCallScreen\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport { ID, getUnixTimestamp } from \"../../../util/common\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nclass CometChatOutgoingDirectCall extends React.Component {\r\n\r\n    sessionID;\r\n    static contextType = CometChatContext;\r\n    \r\n    constructor(props) {\r\n\r\n        super(props);\r\n\r\n        this.state = {\r\n            callInProgress: null,\r\n        }\r\n\r\n        this.callScreenRef = React.createRef();\r\n        \r\n        CometChat.getLoggedinUser().then(user => this.loggedInUser = user).catch(error => {\r\n            console.error(error);\r\n        });\r\n    }\r\n\r\n    actionHandler = (action) => {\r\n\r\n        switch(action) {\r\n\r\n            case enums.ACTIONS[\"DIRECT_CALL_ENDED\"]:\r\n            case enums.ACTIONS[\"DIRECT_CALL_ERROR\"]:\r\n                this.setState({ callInProgress: null });\r\n            break;\r\n            default:\r\n            break;\r\n        }\r\n    }\r\n\r\n    startCall = (sessionID) => {\r\n\r\n        this.sessionID = sessionID;\r\n        if (!this.sessionID) {\r\n            const errorCode = \"ERR_EMPTY_CALL_SESSION_ID\";\r\n            this.context.setToastMessage(\"error\", errorCode);\r\n            return false;\r\n        }\r\n\r\n        const customMessage = this.prepareCustomMessageData();\r\n        this.setState({ callInProgress: customMessage });\r\n        if(this.context) {\r\n            this.context.setCallInProgress(customMessage, enums.CONSTANTS[\"OUTGOING_DIRECT_CALLING\"]);\r\n        }\r\n\r\n        setTimeout(() => {\r\n            this.sendCustomMessage();\r\n        }, 5);\r\n    }\r\n\r\n    joinCall = (sessionID) => {\r\n\r\n        this.sessionID = sessionID;\r\n        if (this.sessionID === null) {\r\n            const errorCode = \"ERR_EMPTY_CALL_SESSION_ID\";\r\n            this.context.setToastMessage(\"error\", errorCode);\r\n            return false;\r\n        }\r\n\r\n        const customMessage = this.prepareCustomMessageData();\r\n        this.setState({ callInProgress: customMessage });\r\n        if (this.context) {\r\n            this.context.setCallInProgress(customMessage, enums.CONSTANTS[\"OUTGOING_DIRECT_CALLING\"]);\r\n        }\r\n    }\r\n\r\n    prepareCustomMessageData = () => {\r\n\r\n        const receiverType = CometChat.RECEIVER_TYPE.GROUP;\r\n        const customData = { \"sessionID\": this.sessionID, \"sessionId\": this.sessionID, \"callType\": CometChat.CALL_TYPE.VIDEO };\r\n        const customType = enums.CUSTOM_TYPE_MEETING;\r\n        const conversationId = `group_${this.sessionID}`;\r\n\r\n        const customMessage = new CometChat.CustomMessage(this.sessionID, receiverType, customType, customData);\r\n        customMessage.setSender(this.loggedInUser);\r\n        customMessage.setReceiver(receiverType);\r\n        customMessage.setConversationId(conversationId);\r\n        customMessage._composedAt = getUnixTimestamp();\r\n        customMessage._id = ID();\r\n\r\n        return customMessage;\r\n    }\r\n\r\n    sendCustomMessage = () => {\r\n\r\n        const customMessage = this.prepareCustomMessageData();\r\n        this.props.actionGenerated(enums.ACTIONS[\"MESSAGE_COMPOSED\"], [customMessage]);\r\n\r\n        CometChat.sendCustomMessage(customMessage).then(message => {\r\n\r\n            const newMessageObj = { ...message, \"_id\": customMessage._id };\r\n            this.props.actionGenerated(enums.ACTIONS[\"MESSAGE_SENT\"], [newMessageObj]);\r\n\r\n        }).catch(error => {\r\n\r\n            const newMessageObj = { ...customMessage, \"error\": error };\r\n            this.props.actionGenerated(enums.ACTIONS[\"ERROR_IN_SENDING_MESSAGE\"], [newMessageObj]);\r\n\r\n            const errorCode = (error && error.hasOwnProperty(\"code\")) ? error.code : \"ERROR\";\r\n            this.context.setToastMessage(\"error\", errorCode);\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        let callScreen = null;\r\n        if(this.state.callInProgress) {\r\n\r\n            callScreen = (\r\n                <CometChatCallScreen ref={el => this.callScreenRef = el} loggedInUser={this.loggedInUser} call={this.state.callInProgress} lang={this.props.lang} actionGenerated={this.actionHandler} />\r\n            );\r\n        }\r\n        return callScreen;\r\n    }\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatOutgoingDirectCall.defaultProps = {\r\n    lang: Translator.getDefaultLanguage(),\r\n    theme: theme,\r\n};\r\n\r\nCometChatOutgoingDirectCall.propTypes = {\r\n    lang: PropTypes.string,\r\n    theme: PropTypes.object,\r\n}\r\n\r\nexport { CometChatOutgoingDirectCall };\r\n","import { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport { UIKitSettings } from \"../../../util/UIKitSettings\";\r\n\r\nexport class ConversationListManager {\r\n\r\n    conversationRequest = null;\r\n\r\n    conversationListenerId = \"chatlist_\" + new Date().getTime();\r\n    userListenerId = \"chatlist_user_\" + new Date().getTime();\r\n    groupListenerId = \"chatlist_group_\" + new Date().getTime();\r\n    callListenerId = \"chatlist_call_\" + new Date().getTime();\r\n\r\n    constructor(context) {\r\n\r\n        const chatListMode = context.UIKitSettings.chatListMode;\r\n        const chatListFilterOptions = UIKitSettings.chatListFilterOptions;\r\n\r\n        switch (chatListMode) {\r\n            case chatListFilterOptions[\"USERS\"]:\r\n                this.conversationRequest = new CometChat.ConversationsRequestBuilder().setConversationType(CometChat.ACTION_TYPE.TYPE_USER).setLimit(30).build();\r\n            break;\r\n            case chatListFilterOptions[\"GROUPS\"]:\r\n                this.conversationRequest = new CometChat.ConversationsRequestBuilder().setConversationType(CometChat.ACTION_TYPE.TYPE_GROUP).setLimit(30).build();\r\n                break;\r\n            default:\r\n                this.conversationRequest = new CometChat.ConversationsRequestBuilder().setLimit(30).build();\r\n            break;\r\n        }\r\n    }\r\n\r\n    fetchNextConversation() {\r\n        return this.conversationRequest.fetchNext();\r\n    }\r\n\r\n    attachListeners(callback) {\r\n\r\n        CometChat.addUserListener(\r\n            this.userListenerId,\r\n            new CometChat.UserListener({\r\n                onUserOnline: onlineUser => {\r\n                    /* when someuser/friend comes online, user will be received here */\r\n                    callback(enums.USER_ONLINE, onlineUser);\r\n                },\r\n                onUserOffline: offlineUser => {\r\n                    /* when someuser/friend went offline, user will be received here */\r\n                    callback(enums.USER_OFFLINE, offlineUser);\r\n                }\r\n            })\r\n        );\r\n\r\n        CometChat.addGroupListener(\r\n            this.groupListenerId,\r\n            new CometChat.GroupListener({\r\n                onGroupMemberScopeChanged: (message, changedUser, newScope, oldScope, changedGroup) => {\r\n                    callback(enums.GROUP_MEMBER_SCOPE_CHANGED, changedGroup, message, {\"user\": changedUser, \"scope\": newScope});\r\n                }, \r\n                onGroupMemberKicked: (message, kickedUser, kickedBy, kickedFrom) => {\r\n                    callback(enums.GROUP_MEMBER_KICKED, kickedFrom, message, {\"user\": kickedUser, \"hasJoined\": false});\r\n                }, \r\n                onGroupMemberBanned: (message, bannedUser, bannedBy, bannedFrom) => {\r\n                    callback(enums.GROUP_MEMBER_BANNED, bannedFrom, message, {\"user\": bannedUser});\r\n                }, \r\n                onGroupMemberUnbanned: (message, unbannedUser, unbannedBy, unbannedFrom) => {\r\n                    callback(enums.GROUP_MEMBER_UNBANNED, unbannedFrom, message, {\"user\": unbannedUser});\r\n                }, \r\n                onMemberAddedToGroup: (message, userAdded, userAddedBy, userAddedIn) => {\r\n                    callback(enums.GROUP_MEMBER_ADDED, userAddedIn, message, {\"user\": userAdded, \"hasJoined\": true});\r\n                }, \r\n                onGroupMemberLeft: (message, leavingUser, group) => {\r\n                    callback(enums.GROUP_MEMBER_LEFT, group, message, {\"user\": leavingUser});\r\n                }, \r\n                onGroupMemberJoined: (message, joinedUser, joinedGroup) => {\r\n                    callback(enums.GROUP_MEMBER_JOINED, joinedGroup, message, {\"user\": joinedUser});\r\n                }\r\n            })\r\n        );\r\n\r\n        CometChat.addMessageListener(\r\n            this.conversationListenerId,\r\n            new CometChat.MessageListener({\r\n                onTextMessageReceived: textMessage => {\r\n                    callback(enums.TEXT_MESSAGE_RECEIVED, null, textMessage);\r\n                },\r\n                onMediaMessageReceived: mediaMessage => {\r\n                    callback(enums.MEDIA_MESSAGE_RECEIVED, null, mediaMessage);\r\n                },\r\n                onCustomMessageReceived: customMessage => {\r\n                    callback(enums.CUSTOM_MESSAGE_RECEIVED, null, customMessage);\r\n                },\r\n                onMessageDeleted: deletedMessage => {\r\n                    callback(enums.MESSAGE_DELETED, null, deletedMessage);\r\n                },\r\n                onMessageEdited: editedMessage => {\r\n                    callback(enums.MESSAGE_EDITED, null, editedMessage);\r\n                },\r\n                onMessagesRead: messageReceipt => {\r\n                    callback(enums.MESSAGE_READ, null, messageReceipt);\r\n                }\r\n            })\r\n        );\r\n\r\n        CometChat.addCallListener(\r\n            this.callListenerId,\r\n            new CometChat.CallListener({\r\n                onIncomingCallReceived: call => {\r\n                  callback(enums.INCOMING_CALL_RECEIVED, null, call);\r\n                },\r\n                onIncomingCallCancelled: call => {\r\n                    callback(enums.INCOMING_CALL_CANCELLED, null, call);\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    removeListeners() {\r\n        CometChat.removeMessageListener(this.conversationListenerId);\r\n        CometChat.removeUserListener(this.userListenerId);\r\n        CometChat.removeGroupListener(this.groupListenerId);\r\n        CometChat.removeCallListener(this.callListenerId);\r\n    }\r\n\r\n}\r\n","class CometChatEvent {\r\n\tstatic _triggers = {};\r\n\r\n\tstatic on(event, callback) {\r\n\t\tif (!CometChatEvent._triggers[event]) CometChatEvent._triggers[event] = [];\r\n\t\tCometChatEvent._triggers[event].push(callback);\r\n\t}\r\n\r\n\tstatic triggerHandler(event, params) {\r\n\t\tif (CometChatEvent._triggers[event]) {\r\n\t\t\tfor (const i in CometChatEvent._triggers[event]) CometChatEvent._triggers[event][i](params);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport { CometChatEvent };","export const chatsWrapperStyle = (props, theme) => {\r\n\r\n    const borderStyle = (props._parent === \"\") ? {\r\n        border: `1px solid ${theme.borderColor.primary}`\r\n    } : {};\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        height: \"100%\",\r\n        boxSizing: \"border-box\",\r\n        ...borderStyle,\r\n        \"*\": {\r\n            boxSizing: \"border-box\",\r\n            \"::-webkit-scrollbar\": {\r\n                width: \"8px\",\r\n                height: \"4px\",\r\n            },\r\n            \"::-webkit-scrollbar-track\": {\r\n                background: \"#ffffff00\"\r\n            },\r\n            \"::-webkit-scrollbar-thumb\": {\r\n                background: \"#ccc\",\r\n                \"&:hover\": {\r\n                    background: \"#aaa\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const chatsHeaderStyle = theme => {\r\n\r\n\treturn {\r\n\t\tpadding: \"16px\",\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tborderBottom: `1px solid ${theme.borderColor.primary}`,\r\n\t\theight: \"69px\",\r\n\t};\r\n};\r\n\r\nexport const chatsHeaderCloseStyle = (img, theme) => {\r\n\r\n\tconst mq = [...theme.breakPoints];\r\n\r\n\treturn {\r\n\t\tcursor: \"pointer\",\r\n\t\tdisplay: \"none\",\r\n\t\tmask: `url(${img}) no-repeat left center`,\r\n\t\tbackgroundColor: `${theme.primaryColor}`,\r\n\t\theight: \"24px\",\r\n\t\twidth: \"33%\",\r\n\t\t[`@media ${mq[0]}`]: {\r\n\t\t\tdisplay: \"block!important\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const chatsHeaderTitleStyle = (props) => {\r\n\r\n    const alignment = (props.hasOwnProperty(\"enableCloseMenu\") && props.enableCloseMenu.length > 0) ? {\r\n        width: \"33%\",\r\n        textAlign: \"center\"\r\n    } : {};\r\n    \r\n    return {\r\n        margin: \"0\",\r\n        display: \"inline-block\",\r\n        width: \"100%\",\r\n        textAlign: \"left\",\r\n        fontSize: \"22px\",\r\n        fontWeight: \"700\",\r\n        lineHeight: \"26px\",\r\n        ...alignment,\r\n        \"&[dir=rtl]\": {\r\n            textAlign: \"right\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const chatsMsgStyle = () =>{\r\n\r\n    return {\r\n        overflow: \"hidden\",\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n    }\r\n}\r\n\r\nexport const chatsMsgTxtStyle = theme => {\r\n    \r\n\treturn {\r\n\t\tmargin: \"0\",\r\n\t\tminHeight: \"36px\",\r\n\t\tcolor: `${theme.color.secondary}`,\r\n\t\tfontSize: \"20px!important\",\r\n\t\tfontWeight: \"600\",\r\n\t\tlineHeight: \"30px\",\r\n\t\twordWrap: \"break-word\",\r\n\t\tpadding: \"0 16px\",\r\n\t};\r\n};\r\n\r\nexport const chatsListStyle = () => {\r\n\r\n    return {\r\n        height: \"calc(100% - 75px)\",\r\n        width: \"100%\",\r\n        overflowY: \"auto\",\r\n        margin: \"0\",\r\n        padding: \"0\",\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/back.12d0392f.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { ConversationListManager } from \"./controller\";\r\n\r\nimport { CometChatConfirmDialog, CometChatToastNotification } from \"../../Shared\";\r\nimport { CometChatConversationListItem } from \"../\";\r\n\r\nimport { CometChatContextProvider, CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport { UIKitSettings } from \"../../../util/UIKitSettings\";\r\nimport { SoundManager } from \"../../../util/SoundManager\";\r\nimport { CometChatEvent } from \"../../../util/CometChatEvent\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport {\r\n  chatsWrapperStyle,\r\n  chatsHeaderStyle,\r\n  chatsHeaderCloseStyle,\r\n  chatsHeaderTitleStyle,\r\n  chatsMsgStyle,\r\n  chatsMsgTxtStyle,\r\n  chatsListStyle\r\n} from \"./style\";\r\n\r\nimport navigateIcon from \"./resources/back.svg\";\r\n\r\nclass CometChatConversationList extends React.Component {\r\n\r\n\tloggedInUser = null;\r\n\tincrementUnreadCount = false;\r\n\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis._isMounted = false;\r\n\t\tthis.state = {\r\n\t\t\tconversationlist: [],\r\n\t\t\tonItemClick: null,\r\n\t\t\thideGroupActionMessages: false,\r\n\t\t\tshowConfirmDialog: false,\r\n\t\t\tdecoratorMessage: Translator.translate(\"LOADING\", props.lang),\r\n\t\t\tconversationToBeDeleted: null,\r\n\t\t};\r\n\r\n\t\tthis.contextProviderRef = React.createRef();\r\n\t\tthis.chatListRef = React.createRef();\r\n\t\tthis.toastRef = React.createRef();\r\n\r\n\t\tCometChat.getLoggedinUser()\r\n\t\t\t.then(user => (this.loggedInUser = user))\r\n\t\t\t.catch(error => this.setState({ decoratorMessage: Translator.translate(\"SOMETHING_WRONG\", this.props.lang) }));\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tthis._isMounted = true;\r\n\t\tthis.item = this.getContext().type === CometChat.ACTION_TYPE.TYPE_USER || CometChat.ACTION_TYPE.TYPE_GROUP ? this.getContext().item : null;\r\n\t\tthis.hideGroupActionMessages();\r\n\r\n\t\tthis.setState({ conversationlist: [] }, () => {\r\n\t\t\tthis.ConversationListManager = new ConversationListManager(this.getContext());\r\n\t\t\tthis.getConversations();\r\n\t\t\tthis.ConversationListManager.attachListeners(this.conversationCallback);\r\n\t\t});\r\n\r\n\t\t//updating last message whenever a message is composed and sent\r\n\t\tCometChatEvent.on(\"updateLastMessage\", args => this.updateLastMessage(args));\r\n\r\n\t\t//updating unreadcount whenever a new message is received and not read.\r\n\t\tCometChatEvent.on(enums.EVENTS[\"NEW_MESSAGES\"], args => this.updateUnreadCount(args));\r\n\r\n\t\t//clearing unreadcount whenever scrolled to the bottom.\r\n\t\tCometChatEvent.on(enums.EVENTS[\"CLEAR_UNREAD_MESSAGES\"], args => this.clearUnreadCount(args));\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\r\n\t\t//when a particular chat is selected from the chats list\r\n\t\tif ((Object.keys(this.getContext().item).length && this.getContext().type.length) || this.getContext().item !== this.item) {\r\n\t\t\tconst conversationlist = [...this.state.conversationlist];\r\n\t\t\tconst conversationObj = this.filterConversation();\r\n\t\t\t\r\n\t\t\tif (conversationObj && conversationObj.unreadMessageCount > 0 && this.incrementUnreadCount === false) {\r\n\t\t\t\tlet conversationKey = conversationlist.indexOf(conversationObj);\r\n\t\t\t\tlet newConversationObj = { ...conversationObj, unreadMessageCount: 0 };\r\n\r\n\t\t\t\tconversationlist.splice(conversationKey, 1, newConversationObj);\r\n\t\t\t\tthis.setState({ conversationlist: conversationlist });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//if user is blocked/unblocked, update conversationlist in state\r\n\t\tif (this.item && Object.keys(this.item).length && this.item.hasOwnProperty(\"uid\") && this.getContext().type === CometChat.ACTION_TYPE.TYPE_USER && this.item.uid === this.getContext().item.uid && this.item.blockedByMe !== this.getContext().item.blockedByMe) {\r\n\t\t\tlet conversationlist = [...this.state.conversationlist];\r\n\r\n\t\t\t//search for user\r\n\t\t\tlet convKey = conversationlist.findIndex(c => c.conversationType === CometChat.ACTION_TYPE.TYPE_USER && c.conversationWith.uid === this.getContext().item.uid);\r\n\t\t\tif (convKey > -1) {\r\n\t\t\t\tconst convObj = conversationlist[convKey];\r\n\r\n\t\t\t\tlet convWithObj = { ...convObj.conversationWith };\r\n\t\t\t\tlet newConvWithObj = Object.assign({}, convWithObj, { blockedByMe: this.getContext().item.blockedByMe });\r\n\r\n\t\t\t\tlet newConvObj = Object.assign({}, convObj, { conversationWith: newConvWithObj });\r\n\r\n\t\t\t\tconversationlist.splice(convKey, 1, newConvObj);\r\n\t\t\t\tthis.setState({ conversationlist: conversationlist });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//if group detail(membersCount) is updated, update grouplist\r\n\t\tif (this.item && Object.keys(this.item).length && this.item.hasOwnProperty(\"guid\") && this.getContext().type === CometChat.ACTION_TYPE.TYPE_GROUP && this.item.guid === this.getContext().item.guid && this.item.membersCount !== this.getContext().item.membersCount) {\r\n\t\t\tconst conversationlist = [...this.state.conversationlist];\r\n\r\n\t\t\tlet convKey = conversationlist.findIndex(c => c.conversationType === CometChat.ACTION_TYPE.TYPE_GROUP && c.conversationWith.guid === this.getContext().item.guid);\r\n\t\t\tif (convKey > -1) {\r\n\t\t\t\tconst convObj = conversationlist[convKey];\r\n\r\n\t\t\t\tlet convWithObj = { ...convObj.conversationWith };\r\n\t\t\t\tlet newConvWithObj = Object.assign({}, convWithObj, { membersCount: this.getContext().item.membersCount });\r\n\r\n\t\t\t\tlet newConvObj = Object.assign({}, convObj, { conversationWith: newConvWithObj });\r\n\r\n\t\t\t\tconversationlist.splice(convKey, 1, newConvObj);\r\n\t\t\t\tthis.setState({ conversationlist: conversationlist });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//upon user deleting a group, remove group from conversation list\r\n\t\tif (this.getContext().deletedGroupId.trim().length) {\r\n\t\t\tconst guid = this.getContext().deletedGroupId.trim();\r\n\t\t\tconst conversationlist = [...this.state.conversationlist];\r\n\r\n\t\t\tlet conversationKey = conversationlist.findIndex(c => c.conversationType === CometChat.ACTION_TYPE.TYPE_GROUP && c.conversationWith.guid === guid);\r\n\r\n\t\t\tif (conversationKey > -1) {\r\n\t\t\t\tconversationlist.splice(conversationKey, 1);\r\n\t\t\t\tthis.setState({ conversationlist: conversationlist });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//upon user leaving a group, remove group from conversation list\r\n\t\tif (this.getContext().leftGroupId.trim().length) {\r\n\t\t\tconst guid = this.getContext().leftGroupId.trim();\r\n\t\t\tconst conversationlist = [...this.state.conversationlist];\r\n\r\n\t\t\tlet conversationKey = conversationlist.findIndex(c => c.conversationType === CometChat.ACTION_TYPE.TYPE_GROUP && c.conversationWith.guid === guid);\r\n\r\n\t\t\tif (conversationKey > -1) {\r\n\t\t\t\tconversationlist.splice(conversationKey, 1);\r\n\t\t\t\tthis.setState({ conversationlist: conversationlist });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.item = this.getContext().type === CometChat.ACTION_TYPE.TYPE_USER || CometChat.ACTION_TYPE.TYPE_GROUP ? this.getContext().item : null;\r\n\t\tthis.hideGroupActionMessages();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\r\n\t\tthis._isMounted = false;\r\n\t\tthis.ConversationListManager.removeListeners();\r\n\t\tthis.ConversationListManager = null;\r\n\r\n\t};\r\n\r\n\tfilterConversation = () => {\r\n\r\n\t\tconst conversationlist = [...this.state.conversationlist];\r\n\t\tconst conversationObj = conversationlist.find(c => {\r\n\t\t\tif (\r\n\t\t\t\t(c.conversationType === this.getContext().type && this.getContext().type === CometChat.RECEIVER_TYPE.USER && c.conversationWith.uid === this.getContext().item.uid) ||\r\n\t\t\t\t(c.conversationType === this.getContext().type && this.getContext().type === CometChat.RECEIVER_TYPE.GROUP && c.conversationWith.guid === this.getContext().item.guid)\r\n\t\t\t) {\r\n\t\t\t\treturn c;\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\treturn conversationObj;\r\n\t}\r\n\r\n\tupdateLastMessage = lastMessage => {\r\n\r\n\t\tconst conversationList = [...this.state.conversationlist];\r\n\t\tconst conversationKey = conversationList.findIndex(c => c.conversationId === lastMessage.conversationId);\r\n\r\n\t\tif (conversationKey > -1) {\r\n\t\t\tconst conversationObj = conversationList[conversationKey];\r\n\t\t\tlet newConversationObj = { ...conversationObj, lastMessage: { ...lastMessage } };\r\n\r\n\t\t\tif (conversationKey === 0) {\r\n\t\t\t\tconversationList.splice(conversationKey, 1, newConversationObj);\r\n\t\t\t} else {\r\n\t\t\t\tconversationList.splice(conversationKey, 1);\r\n\t\t\t\tconversationList.unshift(newConversationObj);\r\n\t\t\t}\r\n\r\n\t\t\tif (this._isMounted) {\r\n\t\t\t\tthis.setState({ conversationlist: conversationList });\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst chatListMode = this.getContext().UIKitSettings.chatListMode;\r\n\t\t\tconst chatListFilterOptions = UIKitSettings.chatListFilterOptions;\r\n\t\t\tif (chatListMode !== chatListFilterOptions[\"USERS_AND_GROUPS\"]) {\r\n\t\t\t\tif ((chatListMode === chatListFilterOptions[\"USERS\"] && lastMessage.receiverType === CometChat.RECEIVER_TYPE.GROUP) || (chatListMode === chatListFilterOptions[\"GROUPS\"] && lastMessage.receiverType === CometChat.RECEIVER_TYPE.USER)) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet newConversation = new CometChat.Conversation();\r\n\t\t\tnewConversation.setConversationId(lastMessage.conversationId);\r\n\t\t\tnewConversation.setConversationType(this.getContext().type);\r\n\t\t\tnewConversation.setConversationWith(this.getContext().item);\r\n\t\t\tnewConversation.setLastMessage(lastMessage);\r\n\t\t\tnewConversation.setUnreadMessageCount(0);\r\n\r\n\t\t\tconversationList.unshift(newConversation);\r\n\r\n\t\t\tif (this._isMounted) {\r\n\t\t\t\tthis.setState({ conversationlist: conversationList });\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tupdateUnreadCount = params => {\r\n\t\t\r\n\t\tthis.incrementUnreadCount = true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\tclearUnreadCount = params => {\r\n\r\n\t\tthis.incrementUnreadCount = false;\r\n\r\n\t\tlet conversationList = [...this.state.conversationlist];\r\n\t\tconst conversationObj = this.filterConversation();\r\n\r\n\t\tif (conversationObj && conversationObj.unreadMessageCount > 0) {\r\n\t\t\tlet conversationKey = conversationList.indexOf(conversationObj);\r\n\t\t\tlet newConversationObj = { ...conversationObj, unreadMessageCount: 0 };\r\n\r\n\t\t\tconversationList.splice(conversationKey, 1, newConversationObj);\r\n\t\t\tthis.setState({ conversationlist: conversationList });\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\tconversationCallback = (key, item, message, options) => {\r\n\t\tswitch (key) {\r\n\t\t\tcase enums.USER_ONLINE:\r\n\t\t\tcase enums.USER_OFFLINE:\r\n\t\t\t\tthis.updateUser(item);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.TEXT_MESSAGE_RECEIVED:\r\n\t\t\tcase enums.MEDIA_MESSAGE_RECEIVED:\r\n\t\t\tcase enums.CUSTOM_MESSAGE_RECEIVED:\r\n\t\t\t\tthis.markMessageAsDelivered(message);\r\n\t\t\t\tthis.conversationUpdated(key, message, options);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.INCOMING_CALL_RECEIVED:\r\n\t\t\tcase enums.INCOMING_CALL_CANCELLED:\r\n\t\t\tcase enums.MESSAGE_EDITED:\r\n\t\t\tcase enums.MESSAGE_DELETED:\r\n\t\t\tcase enums.MESSAGE_READ:\r\n\t\t\tcase enums.GROUP_MEMBER_ADDED:\r\n\t\t\tcase enums.GROUP_MEMBER_KICKED:\r\n\t\t\tcase enums.GROUP_MEMBER_BANNED:\r\n\t\t\tcase enums.GROUP_MEMBER_LEFT:\r\n\t\t\tcase enums.GROUP_MEMBER_SCOPE_CHANGED:\r\n\t\t\tcase enums.GROUP_MEMBER_JOINED:\r\n\t\t\tcase enums.GROUP_MEMBER_UNBANNED:\r\n\t\t\t\tthis.conversationUpdated(key, message, options);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tmarkMessageAsDelivered = message => {\r\n\r\n\t\t//if chat window is not open, mark message as delivered\r\n\t\tif ((this.getContext().type === \"\" || Object.keys(this.getContext().item).length === 0) \r\n\t\t&& message.hasOwnProperty(\"deliveredAt\") === false) {\r\n\t\t\tCometChat.markAsDelivered(message);\r\n\t\t}\r\n\t};\r\n\r\n\tconversationUpdated = (key, message, options) => {\r\n\t\tconst chatListMode = this.getContext().UIKitSettings.chatListMode;\r\n\t\tconst chatListFilterOptions = UIKitSettings.chatListFilterOptions;\r\n\r\n\t\tif (chatListMode !== chatListFilterOptions[\"USERS_AND_GROUPS\"]) {\r\n\t\t\tif ((chatListMode === chatListFilterOptions[\"USERS\"] && message.receiverType === CometChat.RECEIVER_TYPE.GROUP) || (chatListMode === chatListFilterOptions[\"GROUPS\"] && message.receiverType === CometChat.RECEIVER_TYPE.USER)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tswitch (key) {\r\n\t\t\tcase enums.TEXT_MESSAGE_RECEIVED:\r\n\t\t\tcase enums.MEDIA_MESSAGE_RECEIVED:\r\n\t\t\tcase enums.CUSTOM_MESSAGE_RECEIVED:\r\n\t\t\tcase enums.INCOMING_CALL_RECEIVED:\r\n\t\t\tcase enums.INCOMING_CALL_CANCELLED:\r\n\t\t\t\tthis.updateConversation(key, message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.MESSAGE_EDITED:\r\n\t\t\tcase enums.MESSAGE_DELETED:\r\n\t\t\t\tthis.conversationEditedDeleted(message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_ADDED:\r\n\t\t\t\tthis.updateGroupMemberAdded(message, options);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_KICKED:\r\n\t\t\tcase enums.GROUP_MEMBER_BANNED:\r\n\t\t\tcase enums.GROUP_MEMBER_LEFT:\r\n\t\t\t\tthis.updateGroupMemberRemoved(message, options);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_SCOPE_CHANGED:\r\n\t\t\t\tthis.updateGroupMemberScopeChanged(message, options);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_JOINED:\r\n\t\t\tcase enums.GROUP_MEMBER_UNBANNED:\r\n\t\t\t\tthis.updateGroupMemberChanged(message, options);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.MESSAGE_READ:\r\n\t\t\t\tthis.onMessagesRead(message);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tupdateUser = user => {\r\n\t\tconst conversationlist = [...this.state.conversationlist];\r\n\t\tconst conversationKey = conversationlist.findIndex(conversationObj => conversationObj.conversationType === \"user\" && conversationObj.conversationWith.uid === user.uid);\r\n\r\n\t\tif (conversationKey > -1) {\r\n\t\t\tlet conversationObj = { ...conversationlist[conversationKey] };\r\n\t\t\tlet conversationWithObj = { ...conversationObj.conversationWith, status: user.getStatus() };\r\n\r\n\t\t\tlet newConversationObj = { ...conversationObj, conversationWith: conversationWithObj };\r\n\t\t\tconversationlist.splice(conversationKey, 1, newConversationObj);\r\n\t\t\tthis.setState({ conversationlist: conversationlist });\r\n\t\t}\r\n\t};\r\n\r\n\thideGroupActionMessages = () => {\r\n\t\tthis.getContext()\r\n\t\t\t.FeatureRestriction.isGroupActionMessagesEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.hideGroupActionMessages) {\r\n\t\t\t\t\tthis.setState({ hideGroupActionMessages: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.hideGroupActionMessages !== false) {\r\n\t\t\t\t\tthis.setState({ hideGroupActionMessages: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tplayAudio = message => {\r\n\t\tif (message.category === CometChat.CATEGORY_ACTION && message.type === CometChat.ACTION_TYPE.TYPE_GROUP_MEMBER && this.state.hideGroupActionMessages === true) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Sound alert for incoming messages\r\n\t\t */\r\n\t\tconst receiverType = message.getReceiverType();\r\n\t\tconst receiverId = receiverType === CometChat.RECEIVER_TYPE.USER ? message.getSender().uid : message.getReceiverId();\r\n\r\n\t\tif (receiverType === this.getContext().type) {\r\n\t\t\tif ((receiverType === CometChat.RECEIVER_TYPE.USER && receiverId === this.getContext().item.uid) || (receiverType === CometChat.RECEIVER_TYPE.GROUP && receiverId === this.getContext().item.guid)) {\r\n\t\t\t\tSoundManager.play(enums.CONSTANTS.AUDIO[\"INCOMING_MESSAGE\"], this.getContext());\r\n\t\t\t} else {\r\n\t\t\t\tSoundManager.play(enums.CONSTANTS.AUDIO[\"INCOMING_OTHER_MESSAGE\"], this.getContext());\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tSoundManager.play(enums.CONSTANTS.AUDIO[\"INCOMING_OTHER_MESSAGE\"], this.getContext());\r\n\t\t}\r\n\t};\r\n\r\n\tonMessagesRead = messageReceipt => {\r\n\t\tconst conversationList = [...this.state.conversationlist];\r\n\t\tconversationList.forEach((conversation, conversationKey) => {\r\n\t\t\tif (conversation?.conversationType === messageReceipt.receiverType) {\r\n\t\t\t\tif ((conversation?.conversationType === CometChat.RECEIVER_TYPE.USER && messageReceipt.receiver === conversation?.conversationWith?.uid) || (conversation?.conversationType === CometChat.RECEIVER_TYPE.GROUP && messageReceipt.receiver === conversation?.conversationWith?.guid)) {\r\n\t\t\t\t\tlet unreadMessageCount = conversation.unreadMessageCount;\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * If the message id of the read reciept if greater than or equal to the lastmessage id, set unreadmessagecount to 0\r\n\t\t\t\t\t */\r\n\t\t\t\t\tif (messageReceipt?.messageId >= conversation?.lastMessage?.id) {\r\n\t\t\t\t\t\tunreadMessageCount = 0;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet newConversationObj = { ...conversation, unreadMessageCount: unreadMessageCount };\r\n\t\t\t\t\tconversationList.splice(conversationKey, 1, newConversationObj);\r\n\t\t\t\t\tthis.setState({ conversationlist: conversationList });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tmakeConversation = message => {\r\n\t\tconst promise = new Promise(resolve => {\r\n\t\t\tCometChat.CometChatHelper.getConversationFromMessage(message).then(conversation => {\r\n\t\t\t\tlet conversationList = [...this.state.conversationlist];\r\n\t\t\t\tlet conversationKey = conversationList.findIndex(c => c.conversationId === conversation.conversationId);\r\n\r\n\t\t\t\tlet conversationObj = { ...conversation };\r\n\t\t\t\tif (conversationKey > -1) {\r\n\t\t\t\t\tconversationObj = { ...conversationList[conversationKey] };\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresolve({ conversationKey: conversationKey, conversationObj: conversationObj, conversationList: conversationList });\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\treturn promise;\r\n\t};\r\n\r\n\tmakeUnreadMessageCount = (message, conversation = {}) => {\r\n\t\t/**\r\n\t\t * If the received message is sent by the logged in user, don't increment the unread count\r\n\t\t */\r\n\t\tif (Object.keys(conversation).length === 0) {\r\n\t\t\tif (message.sender.uid === this.loggedInUser?.uid) {\r\n\t\t\t\treturn 0;\r\n\t\t\t} else {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tlet unreadMessageCount = parseInt(conversation.unreadMessageCount);\r\n\t\tif (\r\n\t\t\t(this.getContext().item.hasOwnProperty(\"guid\") && conversation.conversationWith.hasOwnProperty(\"guid\") && this.getContext().item.guid === conversation.conversationWith.guid) ||\r\n\t\t\t(this.getContext().item.hasOwnProperty(\"uid\") && conversation.conversationWith.hasOwnProperty(\"uid\") && this.getContext().item.uid === conversation.conversationWith.uid)\r\n\t\t) {\r\n\t\t\tif (this.incrementUnreadCount === true) {\r\n\t\t\t\tunreadMessageCount = ++unreadMessageCount;\r\n\t\t\t} else {\r\n\t\t\t\tunreadMessageCount = 0;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tunreadMessageCount = this.shouldIncrementCount(message) ? ++unreadMessageCount : unreadMessageCount;\r\n\t\t}\r\n\t\treturn unreadMessageCount;\r\n\t};\r\n\r\n\tshouldIncrementCount = incomingMessage => {\r\n\t\tlet output = false;\r\n\t\tif (\r\n\t\t\t(incomingMessage.category === CometChat.CATEGORY_MESSAGE && incomingMessage.sender.uid !== this.loggedInUser?.uid) ||\r\n\t\t\t(this.getContext().hasKeyValue(incomingMessage, enums.KEYS[\"METADATA\"]) &&\r\n\t\t\t\tthis.getContext().hasKeyValue(incomingMessage[enums.KEYS[\"METADATA\"]], enums.KEYS[\"INCREMENT_UNREAD_COUNT\"]) &&\r\n\t\t\t\tincomingMessage[enums.KEYS[\"METADATA\"]][enums.KEYS[\"INCREMENT_UNREAD_COUNT\"]] === true &&\r\n\t\t\t\tincomingMessage.sender.uid !== this.loggedInUser?.uid)\r\n\t\t) {\r\n\t\t\toutput = true;\r\n\t\t}\r\n\t\t\r\n\t\treturn output;\r\n\t};\r\n\r\n\tmakeLastMessage = (message, conversation = {}) => {\r\n\t\tconst newMessage = Object.assign({}, message);\r\n\t\treturn newMessage;\r\n\t};\r\n\r\n\tupdateConversation = (key, message) => {\r\n\t\tthis.makeConversation(message).then(response => {\r\n\t\t\tconst { conversationKey, conversationObj, conversationList } = response;\r\n\r\n\t\t\tif (conversationKey > -1) {\r\n\t\t\t\tlet unreadMessageCount = this.makeUnreadMessageCount(message, conversationObj);\r\n\t\t\t\tlet lastMessageObj = this.makeLastMessage(message, conversationObj);\r\n\t\t\t\t\r\n\t\t\t\tlet newConversationObj = { ...conversationObj, lastMessage: lastMessageObj, unreadMessageCount: unreadMessageCount };\r\n\t\t\t\t\r\n\t\t\t\tconversationList.splice(conversationKey, 1);\r\n\t\t\t\tconversationList.unshift(newConversationObj);\r\n\t\t\t\tthis.setState({ conversationlist: conversationList });\r\n\r\n\t\t\t\tif (key !== enums.INCOMING_CALL_RECEIVED && key !== enums.INCOMING_CALL_CANCELLED) {\r\n\t\t\t\t\tthis.playAudio(message);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tlet unreadMessageCount = this.makeUnreadMessageCount(message, {});\r\n\t\t\t\tlet lastMessageObj = this.makeLastMessage(message);\r\n\t\t\t\t\r\n\t\t\t\tlet newConversationObj = { ...conversationObj, lastMessage: lastMessageObj, unreadMessageCount: unreadMessageCount };\r\n\t\t\t\tconversationList.unshift(newConversationObj);\r\n\t\t\t\tthis.setState({ conversationlist: conversationList });\r\n\r\n\t\t\t\tif (key !== enums.INCOMING_CALL_RECEIVED && key !== enums.INCOMING_CALL_CANCELLED) {\r\n\t\t\t\t\tthis.playAudio(message);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconversationEditedDeleted = message => {\r\n\t\tthis.makeConversation(message).then(response => {\r\n\t\t\tconst { conversationKey, conversationObj, conversationList } = response;\r\n\r\n\t\t\tif (conversationKey > -1) {\r\n\t\t\t\tlet lastMessageObj = conversationObj.lastMessage;\r\n\r\n\t\t\t\tif (lastMessageObj.id === message.id) {\r\n\t\t\t\t\tconst newLastMessageObj = Object.assign({}, lastMessageObj, message);\r\n\t\t\t\t\tlet newConversationObj = Object.assign({}, conversationObj, { lastMessage: newLastMessageObj });\r\n\t\t\t\t\tconversationList.splice(conversationKey, 1, newConversationObj);\r\n\t\t\t\t\tthis.setState({ conversationlist: conversationList });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tupdateGroupMemberAdded = (message, options) => {\r\n\t\tthis.makeConversation(message).then(response => {\r\n\t\t\tconst { conversationKey, conversationObj, conversationList } = response;\r\n\r\n\t\t\tif (conversationKey > -1) {\r\n\t\t\t\tlet lastMessageObj = this.makeLastMessage(message, conversationObj);\r\n\t\t\t\tlet conversationWithObj = { ...conversationObj.conversationWith };\r\n\r\n\t\t\t\tlet membersCount = parseInt(conversationWithObj.membersCount);\r\n\t\t\t\tif (message.hasOwnProperty(\"actionFor\") && message.actionFor.hasOwnProperty(\"membersCount\")) {\r\n\t\t\t\t\tmembersCount = message.actionFor.membersCount;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet newConversationWithObj = { ...conversationWithObj, membersCount: membersCount };\r\n\r\n\t\t\t\tlet newConversationObj = { ...conversationObj, conversationWith: newConversationWithObj, lastMessage: lastMessageObj };\r\n\t\t\t\tconversationList.splice(conversationKey, 1);\r\n\t\t\t\tconversationList.unshift(newConversationObj);\r\n\t\t\t\tthis.setState({ conversationlist: conversationList });\r\n\t\t\t\tthis.playAudio(message);\r\n\t\t\t} else {\r\n\t\t\t\tif (options && this.loggedInUser.uid === options.user.uid) {\r\n\t\t\t\t\tlet lastMessageObj = this.makeLastMessage(message);\r\n\t\t\t\t\tlet conversationWithObj = { ...conversationObj.conversationWith };\r\n\r\n\t\t\t\t\tlet membersCount = parseInt(conversationWithObj.membersCount);\r\n\t\t\t\t\tif (message.hasOwnProperty(\"actionFor\") && message.actionFor.hasOwnProperty(\"membersCount\")) {\r\n\t\t\t\t\t\tmembersCount = message.actionFor.membersCount;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet scope = CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT;\r\n\t\t\t\t\tlet hasJoined = options.hasJoined;\r\n\r\n\t\t\t\t\tlet newConversationWithObj = { ...conversationWithObj, membersCount: membersCount, scope: scope, hasJoined: hasJoined };\r\n\t\t\t\t\tlet newConversationObj = { ...conversationObj, conversationWith: newConversationWithObj, lastMessage: lastMessageObj };\r\n\r\n\t\t\t\t\tconversationList.unshift(newConversationObj);\r\n\t\t\t\t\tthis.setState({ conversationlist: conversationList });\r\n\t\t\t\t\tthis.playAudio(message);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tupdateGroupMemberRemoved = (message, options) => {\r\n\t\tthis.makeConversation(message).then(response => {\r\n\t\t\tconst { conversationKey, conversationObj, conversationList } = response;\r\n\r\n\t\t\tif (conversationKey > -1) {\r\n\t\t\t\tif (options && this.loggedInUser.uid === options.user.uid) {\r\n\t\t\t\t\tconversationList.splice(conversationKey, 1);\r\n\t\t\t\t\tthis.setState({ conversationlist: conversationList });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet lastMessageObj = this.makeLastMessage(message, conversationObj);\r\n\t\t\t\t\tlet conversationWithObj = { ...conversationObj.conversationWith };\r\n\r\n\t\t\t\t\tlet membersCount = parseInt(conversationWithObj.membersCount);\r\n\t\t\t\t\tif (message.hasOwnProperty(\"actionFor\") && message.actionFor.hasOwnProperty(\"membersCount\")) {\r\n\t\t\t\t\t\tmembersCount = message.actionFor.membersCount;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet newConversationWithObj = { ...conversationWithObj, membersCount: membersCount };\r\n\r\n\t\t\t\t\tlet newConversationObj = { ...conversationObj, conversationWith: newConversationWithObj, lastMessage: lastMessageObj };\r\n\t\t\t\t\tconversationList.splice(conversationKey, 1);\r\n\t\t\t\t\tconversationList.unshift(newConversationObj);\r\n\t\t\t\t\tthis.setState({ conversationlist: conversationList });\r\n\t\t\t\t\tthis.playAudio(message);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tupdateGroupMemberScopeChanged = (message, options) => {\r\n\t\tthis.makeConversation(message).then(response => {\r\n\t\t\tconst { conversationKey, conversationObj, conversationList } = response;\r\n\r\n\t\t\tif (conversationKey > -1) {\r\n\t\t\t\tlet lastMessageObj = this.makeLastMessage(message, conversationObj);\r\n\r\n\t\t\t\tlet conversationWithObj = { ...conversationObj.conversationWith };\r\n\t\t\t\tlet membersCount = parseInt(conversationWithObj.membersCount);\r\n\r\n\t\t\t\tlet scope = conversationWithObj.scope;\r\n\t\t\t\tif (options && this.loggedInUser.uid === options.user.uid) {\r\n\t\t\t\t\tscope = options.scope;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet newConversationWithObj = { ...conversationWithObj, membersCount: membersCount, scope: scope };\r\n\t\t\t\tlet newConversationObj = { ...conversationObj, conversationWith: newConversationWithObj, lastMessage: lastMessageObj };\r\n\t\t\t\tconversationList.splice(conversationKey, 1);\r\n\t\t\t\tconversationList.unshift(newConversationObj);\r\n\t\t\t\tthis.setState({ conversationlist: conversationList });\r\n\t\t\t\tthis.playAudio(message);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tupdateGroupMemberChanged = (message, options) => {\r\n\t\tthis.makeConversation(message).then(response => {\r\n\t\t\tconst { conversationKey, conversationObj, conversationList } = response;\r\n\t\t\tif (conversationKey > -1) {\r\n\t\t\t\tif (options && this.loggedInUser.uid !== options.user.uid) {\r\n\t\t\t\t\tlet lastMessageObj = this.makeLastMessage(message, conversationObj);\r\n\t\t\t\t\tlet conversationWithObj = { ...conversationObj.conversationWith };\r\n\r\n\t\t\t\t\tlet membersCount = parseInt(conversationWithObj.membersCount);\r\n\t\t\t\t\tif (message.hasOwnProperty(\"actionFor\") && message.actionFor.hasOwnProperty(\"membersCount\")) {\r\n\t\t\t\t\t\tmembersCount = message.actionFor.membersCount;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet newConversationWithObj = { ...conversationWithObj, membersCount: membersCount };\r\n\t\t\t\t\tlet newConversationObj = { ...conversationObj, conversationWith: newConversationWithObj, lastMessage: lastMessageObj };\r\n\t\t\t\t\tconversationList.splice(conversationKey, 1);\r\n\t\t\t\t\tconversationList.unshift(newConversationObj);\r\n\t\t\t\t\tthis.setState({ conversationlist: conversationList });\r\n\t\t\t\t\tthis.playAudio(message);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\thandleScroll = e => {\r\n\t\tconst bottom = Math.round(e.currentTarget.scrollHeight - e.currentTarget.scrollTop) === Math.round(e.currentTarget.clientHeight);\r\n\t\tif (bottom) this.getConversations();\r\n\t};\r\n\r\n\t//click handler\r\n\thandleClick = conversation => {\r\n\r\n\t\tif (!this.props.onItemClick) return;\r\n\t\tthis.props.onItemClick(conversation.conversationWith, conversation.conversationType);\r\n\t};\r\n\r\n\thandleMenuClose = () => {\r\n\t\tif (!this.props.actionGenerated) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"TOGGLE_SIDEBAR\"]);\r\n\t};\r\n\r\n\tgetConversations = () => {\r\n\t\t\r\n\t\tthis.ConversationListManager.fetchNextConversation()\r\n\t\t\t.then(conversationList => {\r\n\r\n\t\t\t\tif (conversationList.length === 0) {\r\n\t\t\t\t\tif (this.state.conversationlist.length === 0) {\r\n\t\t\t\t\t\tthis.setState({ decoratorMessage: Translator.translate(\"NO_CHATS_FOUND\", this.props.lang) });\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ decoratorMessage: \"\" });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet conversations = [...this.state.conversationlist];\r\n\t\t\t\t//if conversation exists already in the state, remove it from this list\r\n\t\t\t\tconversationList.forEach(eachConversation => {\r\n\r\n\t\t\t\t\tlet conversationKey = conversations.findIndex(c => c.conversationId === eachConversation.conversationId);\r\n\t\t\t\t\tif (conversationKey > -1) {\r\n\r\n\t\t\t\t\t\tconst newUnreadMessageCount = conversations[conversationKey][\"unreadMessageCount\"] + eachConversation[\"unreadMessageCount\"];\r\n\t\t\t\t\t\tconst updatedConversation = { ...conversations[conversationKey], unreadMessageCount: newUnreadMessageCount };\r\n\t\t\t\t\t\tconversations.splice(conversationKey, 1, updatedConversation);\r\n\r\n\t\t\t\t\t\tconversationList.splice(conversationKey, 1);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.setState({ conversationlist: [...conversations, ...conversationList] });\r\n\t\t\t})\r\n\t\t\t.catch(error => this.setState({ decoratorMessage: Translator.translate(\"SOMETHING_WRONG\", this.props.lang) }));\r\n\t};\r\n\r\n\tgetContext = () => {\r\n\t\tif (this.props._parent.length) {\r\n\t\t\treturn this.context;\r\n\t\t} else {\r\n\t\t\treturn this.contextProviderRef.state;\r\n\t\t}\r\n\t};\r\n\r\n\tactionHandler = (action, conversation) => {\r\n\t\tswitch (action) {\r\n\t\t\tcase enums.ACTIONS[\"CONVERSATION_DELETED\"]:\r\n\t\t\t\tthis.conversationDeleted(conversation);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"DELETE_CONVERSATION\"]:\r\n\t\t\t\tthis.deleteConversation(conversation);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tdeleteConversation = conversation => {\r\n\r\n\t\tif (!this.state.showConfirmDialog) {\r\n\t\t\tthis.setState({ showConfirmDialog: true, conversationToBeDeleted: conversation });\r\n\t\t}\r\n\t};\r\n\r\n\tonDeleteConfirm = e => {\r\n\r\n\t\tconst optionSelected = e.target.value;\r\n\r\n\t\tthis.setState({ showConfirmDialog: false });\r\n\t\tif (optionSelected === \"yes\") {\r\n\r\n\t\t\tconst conversation = this.state.conversationToBeDeleted;\r\n\t\t\tconst conversationWith = conversation.conversationType === CometChat.RECEIVER_TYPE.GROUP ? conversation?.conversationWith?.guid : conversation?.conversationWith?.uid;\r\n\t\t\tCometChat.deleteConversation(conversationWith, conversation.conversationType)\r\n\t\t\t\t.then(deletedConversation => {\r\n\t\t\t\t\tthis.conversationDeleted(conversation);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => this.toastRef.setError(\"SOMETHING_WRONG\"));\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.setState({ showConfirmDialog: false, conversationToBeDeleted: null });\r\n\t\t}\r\n\t};\r\n\r\n\tconversationDeleted = conversation => {\r\n\r\n\t\tconst conversationList = [...this.state.conversationlist];\r\n\t\tconst conversationKey = conversationList.findIndex(c => c.conversationId === conversation.conversationId);\r\n\r\n\t\tif (conversationKey > -1) {\r\n\r\n\t\t\tif (\r\n\t\t\t\t(conversation.conversationType === this.getContext().type && this.getContext().type === CometChat.RECEIVER_TYPE.USER && conversation.conversationWith.uid === this.getContext().item.uid) ||\r\n\t\t\t\t(conversation.conversationType === this.getContext().type && this.getContext().type === CometChat.RECEIVER_TYPE.GROUP && conversation.conversationWith.guid === this.getContext().item.guid)\r\n\t\t\t) {\r\n\t\t\t\tthis.getContext().setTypeAndItem(\"\", {});\r\n\t\t\t}\r\n\r\n\t\t\tconversationList.splice(conversationKey, 1);\r\n\t\t\tthis.setState({ conversationlist: conversationList, conversationToBeDeleted: null });\r\n\t\t}\r\n\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\tconst conversationList = this.state.conversationlist.map((conversation, key) => {\r\n\r\n\t\t\treturn <CometChatConversationListItem key={conversation.conversationId} conversation={conversation} loggedInUser={this.loggedInUser} handleClick={this.handleClick} actionGenerated={this.actionHandler} />;\r\n\t\t});\r\n\r\n\t\tlet messageContainer = null;\r\n\t\tif (this.state.decoratorMessage.length !== 0) {\r\n\t\t\tmessageContainer = (\r\n\t\t\t\t<div css={chatsMsgStyle()} className=\"chats__decorator-message\">\r\n\t\t\t\t\t<p css={chatsMsgTxtStyle(theme)} className=\"decorator-message\">\r\n\t\t\t\t\t\t{this.state.decoratorMessage}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet closeBtn = <div css={chatsHeaderCloseStyle(navigateIcon, theme)} className=\"header__close\" onClick={this.handleMenuClose}></div>;\r\n\t\tif (this.getContext() && Object.keys(this.getContext().item).length === 0) {\r\n\t\t\tcloseBtn = null;\r\n\t\t}\r\n\r\n\t\tlet showConfirmDialog = null;\r\n\t\tif (this.state.showConfirmDialog) {\r\n\t\t\tshowConfirmDialog = (\r\n\t\t\t\t<CometChatConfirmDialog\r\n\t\t\t\t\t{...this.props}\r\n\t\t\t\t\tonClick={this.onDeleteConfirm}\r\n\t\t\t\t\tmessage={Translator.translate(\"DELETE_CONFIRM\", this.getContext().language)}\r\n\t\t\t\t\tconfirmButtonText={Translator.translate(\"DELETE\", this.getContext().language)}\r\n\t\t\t\t\tcancelButtonText={Translator.translate(\"CANCEL\", this.getContext().language)}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst chatList = (\r\n\t\t\t<div css={chatsWrapperStyle(this.props, theme)} className=\"chats\">\r\n\t\t\t\t<div css={chatsHeaderStyle(theme)} className=\"chats__header\">\r\n\t\t\t\t\t{closeBtn}\r\n\t\t\t\t\t<h4 css={chatsHeaderTitleStyle(this.props)} className=\"header__title\" dir={Translator.getDirection(this.props.lang)}>\r\n\t\t\t\t\t\t{Translator.translate(\"CHATS\", this.props.lang)}\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t</div>\r\n\t\t\t\t{messageContainer}\r\n\t\t\t\t<div css={chatsListStyle()} className=\"chats__list\" onScroll={this.handleScroll} ref={el => (this.chatListRef = el)}>\r\n\t\t\t\t\t{conversationList}\r\n\t\t\t\t</div>\r\n\t\t\t\t{showConfirmDialog}\r\n\t\t\t\t<CometChatToastNotification ref={el => (this.toastRef = el)} lang={this.props.lang} />\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tlet chatListWrapper = chatList;\r\n\t\t//if used as a standalone component, add errorboundary and context provider\r\n\t\tif (this.props._parent === \"\") {\r\n\t\t\tchatListWrapper = <CometChatContextProvider ref={el => (this.contextProviderRef = el)}>{chatList}</CometChatContextProvider>;\r\n\t\t}\r\n\r\n\t\treturn chatListWrapper;\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatConversationList.defaultProps = {\r\n\tlang: Translator.getDefaultLanguage(),\r\n\ttheme: theme,\r\n\tonItemClick: () => { },\r\n\t_parent: \"\"\r\n};\r\n\r\nCometChatConversationList.propTypes = {\r\n\tlang: PropTypes.string,\r\n\ttheme: PropTypes.object,\r\n\tonItemClick: PropTypes.func,\r\n\t_parent: PropTypes.string\r\n}\r\n\r\nexport { CometChatConversationList };","export const conversationActionStyle = context => {\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\tlistStyleType: \"none\",\r\n\t\tpadding: \"8px\",\r\n\t\tmargin: \"0\",\r\n\t\twidth: \"72px\",\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.primary}`,\r\n\t\tborderRadius: \"4px\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"flex-end\",\r\n\t\tposition: \"absolute\",\r\n\t\tright: \"16px\",\r\n\t\theight: \"100%\",\r\n\t};\r\n};\r\n\r\nexport const groupButtonStyle = (actionInProgress, progressIcon, actionIcon) => {\r\n\r\n\tconst backgroundImage = actionInProgress ? progressIcon : actionIcon;\r\n\r\n\treturn {\r\n\t\toutline: \"0\",\r\n\t\tborder: \"0\",\r\n\t\theight: \"24px\",\r\n\t\twidth: \"24px\",\r\n\t\tborderRadius: \"4px\",\r\n\t\talignItems: \"center\",\r\n\t\tdisplay: \"inline-flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tposition: \"relative\",\r\n\t\tbackground: `url(${backgroundImage}) center center no-repeat`,\r\n\t};\r\n};","export default __webpack_public_path__ + \"static/media/progress.446449d0.svg\";","export default __webpack_public_path__ + \"static/media/delete.1b7009e4.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport {jsx} from \"@emotion/core\";\r\n\r\nimport {CometChatContext} from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {conversationActionStyle, groupButtonStyle} from \"./style.js\";\r\n\r\nimport loadingIcon from \"./resources/progress.svg\";\r\nimport deleteIcon from \"./resources/delete.svg\";\r\n\r\nclass CometChatConversationListActions extends React.PureComponent {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis._isMounted = false;\r\n\t\tthis.state = {\r\n\t\t\tdeleteInProgress: false,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis._isMounted = true;\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis._isMounted = false;\r\n\t}\r\n\r\n\ttoggleTooltip = (event, flag) => {\r\n\t\tconst elem = event.target;\r\n\r\n\t\tif (flag) {\r\n\t\t\telem.setAttribute(\"title\", elem.dataset.title);\r\n\t\t} else {\r\n\t\t\telem.removeAttribute(\"title\");\r\n\t\t}\r\n\t};\r\n\r\n\tdeleteConversation = event => {\r\n\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"DELETE_CONVERSATION\"], this.props.conversation);\r\n\t\tevent.stopPropagation();\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst deleteConversation = (\r\n\t\t\t<li>\r\n\t\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tcss={groupButtonStyle(this.state.deleteInProgress, loadingIcon, deleteIcon)}\r\n\t\t\t\tclassName=\"group__button button__delete\"\r\n\t\t\t\tdata-title={Translator.translate(\"DELETE\", this.context.language)}\r\n\t\t\t\tonMouseEnter={event => this.toggleTooltip(event, true)}\r\n\t\t\t\tonMouseLeave={event => this.toggleTooltip(event, false)}\r\n\t\t\t\tonClick={this.deleteConversation} />\r\n\t\t\t</li>\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<ul css={conversationActionStyle(this.context)} className=\"list__item__actions\">\r\n\t\t\t\t{deleteConversation}\r\n\t\t\t</ul>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport {CometChatConversationListActions};","export const listItem = (props) => {\r\n\r\n    const selectedState = (props.selectedConversation && props.selectedConversation.conversationId === props.conversation.conversationId) ? {\r\n        backgroundColor: `${props.theme.backgroundColor.primary}`\r\n    } : {};\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"left\",\r\n        alignItems: \"center\",\r\n        cursor: \"pointer\",\r\n        width: \"100%\",\r\n        padding: \"8px 16px\",\r\n        position: \"relative\",\r\n        ...selectedState,\r\n        '&:hover': {\r\n            backgroundColor: `${props.theme.backgroundColor.primary}`\r\n        },\r\n    }\r\n}\r\n\r\nexport const itemThumbnailStyle = () => {\r\n\r\n    return {\r\n        display: \"inline-block\",\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const itemDetailStyle = () => {\r\n\r\n    return {\r\n        width: \"calc(100% - 45px)\",\r\n        flexGrow: \"1\",\r\n        paddingLeft: \"16px\",\r\n        \"&[dir=rtl]\": {\r\n            paddingRight: \"16px\",\r\n            paddingLeft: \"0\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const itemRowStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"baseline\",\r\n    }\r\n}\r\n\r\nexport const itemNameStyle = (props) => {\r\n\r\n    return {\r\n        fontSize: \"15px\",\r\n        fontWeight: \"600\",\r\n        display: \"block\",\r\n        width: \"calc(100% - 70px)\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n        lineHeight: \"22px\",\r\n        color: `${props.theme.color.primary}`\r\n    }\r\n}\r\n\r\nexport const itemLastMsgStyle = (props) => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        fontSize: \"13px\",\r\n        fontWeight: \"400\",\r\n        width: \"calc(100% - 50px)\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n        lineHeight: \"20px\",\r\n        color: `${props.theme.color.helpText}`,\r\n    }\r\n}\r\n\r\nexport const itemLastMsgTimeStyle = (props) => {\r\n\r\n    return {\r\n        fontSize: \"11px\",\r\n        width: \"70px\",\r\n        textAlign: \"right\",\r\n        color: `${props.theme.color.helpText}`,\r\n    }\r\n}\r\n","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport {CometChatAvatar, CometChatBadgeCount, CometChatUserPresence } from \"../../Shared\";\r\nimport {CometChatConversationListActions} from \"../CometChatConversationListActions\";\r\n\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport { checkMessageForExtensionsData, getTimeStampForLastMessage } from \"../../../util/common\";\r\nimport { CometChatContext } from \"../../../util/CometChatContext\"\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n  listItem,\r\n  itemThumbnailStyle,\r\n  itemDetailStyle,\r\n  itemRowStyle,\r\n  itemNameStyle,\r\n  itemLastMsgStyle,\r\n  itemLastMsgTimeStyle\r\n} from \"./style\";\r\n\r\nclass CometChatConversationListItem extends React.PureComponent {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tlastMessage: \"\",\r\n\t\t\tlastMessageTimestamp: \"\",\r\n\t\t\tenableUnreadCount: false,\r\n\t\t\tisHovering: false,\r\n\t\t\tenableHideDeletedMessages: false,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst message = this.getLastMessage();\r\n\t\tconst timestamp = this.getLastMessageTimestamp();\r\n\t\tthis.enableUnreadCount();\r\n\t\tthis.enableHideDeletedMessages();\r\n\r\n\t\tthis.setState({ lastMessage: message, lastMessageTimestamp: timestamp });\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst previousItem = JSON.stringify(prevProps.conversation);\r\n\t\tconst currentItem = JSON.stringify(this.props.conversation);\r\n\r\n\t\tif (previousItem !== currentItem) {\r\n\t\t\tconst message = this.getLastMessage();\r\n\t\t\tconst timestamp = this.getLastMessageTimestamp();\r\n\r\n\t\t\tthis.setState({ lastMessage: message, lastMessageTimestamp: timestamp });\r\n\t\t}\r\n\r\n\t\tthis.enableUnreadCount();\r\n\t\tthis.enableHideDeletedMessages();\r\n\t}\r\n\r\n\tgetLastMessage = () => {\r\n\t\tif (this.props.hasOwnProperty(\"conversation\") === false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this.props.conversation.hasOwnProperty(\"lastMessage\") === false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet message = null;\r\n\t\tconst lastMessage = this.props.conversation.lastMessage;\r\n\r\n\t\tif (lastMessage.hasOwnProperty(\"deletedAt\")) {\r\n\t\t\tif (this.state.enableHideDeletedMessages) {\r\n\t\t\t\tmessage = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tmessage = this.props.loggedInUser.uid === lastMessage.sender.uid ? `${Translator.translate(\"YOU_DELETED_THIS_MESSAGE\", this.context.language)}` : `${Translator.translate(\"THIS_MESSAGE_DELETED\", this.context.language)}`;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tswitch (lastMessage.category) {\r\n\t\t\t\tcase CometChat.CATEGORY_MESSAGE:\r\n\t\t\t\t\tmessage = this.getMessage(lastMessage);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase CometChat.CATEGORY_CALL:\r\n\t\t\t\t\tmessage = this.getCallMessage(lastMessage);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase CometChat.CATEGORY_ACTION:\r\n\t\t\t\t\tmessage = this.getActionMessage(lastMessage);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase CometChat.CATEGORY_CUSTOM:\r\n\t\t\t\t\tmessage = this.getCustomMessage(lastMessage);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn message;\r\n\t};\r\n\r\n\tgetLastMessageTimestamp = () => {\r\n\t\tif (this.props.hasOwnProperty(\"conversation\") === false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this.props.conversation.hasOwnProperty(\"lastMessage\") === false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this.props.conversation.lastMessage.hasOwnProperty(\"sentAt\") === false && this.props.conversation.lastMessage.hasOwnProperty(\"_composedAt\") === false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet timestamp = this.props.conversation.lastMessage._composedAt || this.props.conversation.lastMessage.sentAt;\r\n\t\ttimestamp = getTimeStampForLastMessage(timestamp, this.context.language);\r\n\r\n\t\treturn timestamp;\r\n\t};\r\n\r\n\tgetCustomMessage = lastMessage => {\r\n\t\tlet message = null;\r\n\t\tconst sender = this.props.loggedInUser.uid !== lastMessage.sender.uid ? `${lastMessage.sender.name}: ` : ``;\r\n\r\n\t\tswitch (lastMessage.type) {\r\n\t\t\tcase enums.CUSTOM_TYPE_POLL:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst pollMessage = Translator.translate(\"CUSTOM_MESSAGE_POLL\", this.context.language);\r\n\t\t\t\t\tmessage = lastMessage.receiverType === CometChat.RECEIVER_TYPE.GROUP ? `${sender} ${pollMessage}` : `${pollMessage}`;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CUSTOM_TYPE_STICKER:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst stickerMessage = Translator.translate(\"CUSTOM_MESSAGE_STICKER\", this.context.language);\r\n\t\t\t\t\tmessage = lastMessage.receiverType === CometChat.RECEIVER_TYPE.GROUP ? `${sender} ${stickerMessage}` : `${stickerMessage}`;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CUSTOM_TYPE_DOCUMENT:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst docMessage = Translator.translate(\"CUSTOM_MESSAGE_DOCUMENT\", this.context.language);\r\n\t\t\t\t\tmessage = lastMessage.receiverType === CometChat.RECEIVER_TYPE.GROUP ? `${sender} ${docMessage}` : `${docMessage}`;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CUSTOM_TYPE_WHITEBOARD:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst whiteboardMessage = Translator.translate(\"CUSTOM_MESSAGE_WHITEBOARD\", this.context.language);\r\n\t\t\t\t\tmessage = lastMessage.receiverType === CometChat.RECEIVER_TYPE.GROUP ? `${sender} ${whiteboardMessage}` : `${whiteboardMessage}`;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CUSTOM_TYPE_MEETING:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst meetingMessage = Translator.translate(\"VIDEO_CALL\", this.context.language);\r\n\t\t\t\t\tmessage = `${sender} ${meetingMessage}`;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn message;\r\n\t};\r\n\r\n\tgetTextMessage = message => {\r\n\t\tlet messageText = message.text;\r\n\r\n\t\t//xss extensions data\r\n\t\tconst xssData = checkMessageForExtensionsData(message, \"xss-filter\");\r\n\t\tif (xssData && xssData.hasOwnProperty(\"sanitized_text\")) {\r\n\t\t\tmessageText = xssData.sanitized_text;\r\n\t\t}\r\n\r\n\t\t//datamasking extensions data\r\n\t\tconst maskedData = checkMessageForExtensionsData(message, \"data-masking\");\r\n\t\tif (maskedData && maskedData.hasOwnProperty(\"data\") && maskedData.data.hasOwnProperty(\"sensitive_data\") && maskedData.data.hasOwnProperty(\"message_masked\") && maskedData.data.sensitive_data === \"yes\") {\r\n\t\t\tmessageText = maskedData.data.message_masked;\r\n\t\t}\r\n\r\n\t\t//profanity extensions data\r\n\t\tconst profaneData = checkMessageForExtensionsData(message, \"profanity-filter\");\r\n\t\tif (profaneData && profaneData.hasOwnProperty(\"profanity\") && profaneData.hasOwnProperty(\"message_clean\") && profaneData.profanity === \"yes\") {\r\n\t\t\tmessageText = profaneData.message_clean;\r\n\t\t}\r\n\r\n\t\treturn messageText;\r\n\t};\r\n\r\n\tgetMessage = lastMessage => {\r\n\t\tlet message = null;\r\n\t\tconst sender = this.props?.loggedInUser?.uid !== lastMessage?.sender?.uid ? `${lastMessage?.sender?.name}: ` : ``;\r\n\r\n\t\tswitch (lastMessage.type) {\r\n\t\t\tcase CometChat.MESSAGE_TYPE.TEXT:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst textMessage = this.getTextMessage(lastMessage);\r\n\t\t\t\t\tmessage = lastMessage.receiverType === CometChat.RECEIVER_TYPE.GROUP ? `${sender} ${textMessage}` : `${textMessage}`;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.MESSAGE_TYPE.MEDIA:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst mediaMessage = Translator.translate(\"MEDIA_MESSAGE\", this.context.language);\r\n\t\t\t\t\tmessage = lastMessage.receiverType === CometChat.RECEIVER_TYPE.GROUP ? `${sender} ${mediaMessage}` : `${mediaMessage}`;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.MESSAGE_TYPE.IMAGE:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst imageMessage = Translator.translate(\"MESSAGE_IMAGE\", this.context.language);\r\n\t\t\t\t\tmessage = lastMessage.receiverType === CometChat.RECEIVER_TYPE.GROUP ? `${sender} ${imageMessage}` : `${imageMessage}`;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.MESSAGE_TYPE.FILE:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst fileMessage = Translator.translate(\"MESSAGE_FILE\", this.context.language);\r\n\t\t\t\t\tmessage = lastMessage.receiverType === CometChat.RECEIVER_TYPE.GROUP ? `${sender} ${fileMessage}` : `${fileMessage}`;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.MESSAGE_TYPE.VIDEO:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst videoMessage = Translator.translate(\"MESSAGE_VIDEO\", this.context.language);\r\n\t\t\t\t\tmessage = lastMessage.receiverType === CometChat.RECEIVER_TYPE.GROUP ? `${sender} ${videoMessage}` : `${videoMessage}`;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.MESSAGE_TYPE.AUDIO:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst audioMessage = Translator.translate(\"MESSAGE_AUDIO\", this.context.language);\r\n\t\t\t\t\tmessage = lastMessage.receiverType === CometChat.RECEIVER_TYPE.GROUP ? `${sender} ${audioMessage}` : `${audioMessage}`;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.MESSAGE_TYPE.CUSTOM:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst customMessage = Translator.translate(\"CUSTOM_MESSAGE\", this.context.language);\r\n\t\t\t\t\tmessage = lastMessage.receiverType === CometChat.RECEIVER_TYPE.GROUP ? `${sender} ${customMessage}` : `${customMessage}`;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn message;\r\n\t};\r\n\r\n\tgetCallMessage = lastMessage => {\r\n\t\tlet message = null;\r\n\t\tconst sender = this.props.loggedInUser.uid !== lastMessage.sender.uid ? `${lastMessage.sender.name}: ` : ``;\r\n\r\n\t\tswitch (lastMessage.type) {\r\n\t\t\tcase CometChat.MESSAGE_TYPE.VIDEO:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst videoMessage = Translator.translate(\"VIDEO_CALL\", this.context.language);\r\n\t\t\t\t\tmessage = lastMessage.receiverType === CometChat.RECEIVER_TYPE.GROUP ? `${sender} ${videoMessage}` : `${videoMessage}`;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.MESSAGE_TYPE.AUDIO:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst audioMessage = Translator.translate(\"AUDIO_CALL\", this.context.language);\r\n\t\t\t\t\tmessage = lastMessage.receiverType === CometChat.RECEIVER_TYPE.GROUP ? `${sender} ${audioMessage}` : `${audioMessage}`;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn message;\r\n\t};\r\n\r\n\tgetActionMessage = message => {\r\n\t\tlet actionMessage = null;\r\n\r\n\t\tif (message.hasOwnProperty(\"actionBy\") === false || message.hasOwnProperty(\"actionOn\") === false) {\r\n\t\t\treturn actionMessage;\r\n\t\t}\r\n\r\n\t\tif (message.action !== CometChat.ACTION_TYPE.MEMBER_JOINED && message.action !== CometChat.ACTION_TYPE.MEMBER_LEFT && (message.actionBy.hasOwnProperty(\"name\") === false || message.actionOn.hasOwnProperty(\"name\") === false)) {\r\n\t\t\treturn actionMessage;\r\n\t\t}\r\n\r\n\t\tif (message.action === CometChat.ACTION_TYPE.MEMBER_SCOPE_CHANGED) {\r\n\t\t\tif (message.hasOwnProperty(\"data\") && message.data.hasOwnProperty(\"extras\")) {\r\n\t\t\t\tif (message.data.extras.hasOwnProperty(\"scope\")) {\r\n\t\t\t\t\tif (message.data.extras.scope.hasOwnProperty(\"new\") === false) {\r\n\t\t\t\t\t\treturn actionMessage;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn actionMessage;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn actionMessage;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (message.action === CometChat.ACTION_TYPE.MEMBER_SCOPE_CHANGED && message.data.extras.hasOwnProperty(\"scope\") === false) {\r\n\t\t\treturn actionMessage;\r\n\t\t}\r\n\r\n\t\tif (message.action === CometChat.ACTION_TYPE.MEMBER_SCOPE_CHANGED && message.data.extras.scope.hasOwnProperty(\"new\") === false) {\r\n\t\t\treturn actionMessage;\r\n\t\t}\r\n\r\n\t\tconst byEntity = message.actionBy;\r\n\t\tconst onEntity = message.actionOn;\r\n\r\n\t\tconst byString = byEntity.name;\r\n\t\tconst forString = message.action !== CometChat.ACTION_TYPE.MEMBER_JOINED && message.action !== CometChat.ACTION_TYPE.MEMBER_LEFT ? onEntity.name : \"\";\r\n\r\n\t\tswitch (message.action) {\r\n\t\t\tcase CometChat.ACTION_TYPE.MEMBER_ADDED:\r\n\t\t\t\tactionMessage = `${byString} ${Translator.translate(\"ADDED\", this.context.language)} ${forString}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.ACTION_TYPE.MEMBER_JOINED:\r\n\t\t\t\tactionMessage = `${byString} ${Translator.translate(\"JOINED\", this.context.language)}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.ACTION_TYPE.MEMBER_LEFT:\r\n\t\t\t\tactionMessage = `${byString} ${Translator.translate(\"LEFT\", this.context.language)}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.ACTION_TYPE.MEMBER_KICKED:\r\n\t\t\t\tactionMessage = `${byString} ${Translator.translate(\"KICKED\", this.context.language)} ${forString}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.ACTION_TYPE.MEMBER_BANNED:\r\n\t\t\t\tactionMessage = `${byString} ${Translator.translate(\"BANNED\", this.context.language)} ${forString}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.ACTION_TYPE.MEMBER_UNBANNED:\r\n\t\t\t\tactionMessage = `${byString} ${Translator.translate(\"UNBANNED\", this.context.language)} ${forString}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.ACTION_TYPE.MEMBER_SCOPE_CHANGED: {\r\n\t\t\t\tconst newScope = message[\"data\"][\"extras\"][\"scope\"][\"new\"];\r\n\t\t\t\tactionMessage = `${byString} ${Translator.translate(\"MADE\", this.context.language)} ${forString} ${Translator.translate(newScope, this.context.language)}`;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn actionMessage;\r\n\t};\r\n\r\n\ttoggleTooltip = (event, flag) => {\r\n\t\tconst elem = event.target;\r\n\r\n\t\tconst scrollWidth = elem.scrollWidth;\r\n\t\tconst clientWidth = elem.clientWidth;\r\n\r\n\t\tif (scrollWidth <= clientWidth) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (flag) {\r\n\t\t\telem.setAttribute(\"title\", elem.textContent);\r\n\t\t} else {\r\n\t\t\telem.removeAttribute(\"title\");\r\n\t\t}\r\n\t};\r\n\r\n\tenableUnreadCount = () => {\r\n\t\tthis.context.FeatureRestriction.isUnreadCountEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableUnreadCount) {\r\n\t\t\t\t\tthis.setState({ enableUnreadCount: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableUnreadCount !== false) {\r\n\t\t\t\t\tthis.setState({ enableUnreadCount: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableHideDeletedMessages = () => {\r\n\t\tthis.context.FeatureRestriction.isHideDeletedMessagesEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableHideDeletedMessages) {\r\n\t\t\t\t\tthis.setState({ enableHideDeletedMessages: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableHideDeletedMessages !== false) {\r\n\t\t\t\t\tthis.setState({ enableHideDeletedMessages: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\thandleMouseHover = toggleFlag => {\r\n\t\tif (toggleFlag && !this.state.isHovering) {\r\n\t\t\tthis.setState({ isHovering: true });\r\n\t\t} else if (!toggleFlag && this.state.isHovering) {\r\n\t\t\tthis.setState({ isHovering: false });\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet lastMessageTimeStamp = null;\r\n\t\tif (this.state.lastMessage) {\r\n\t\t\tlastMessageTimeStamp = (\r\n\t\t\t\t<span css={itemLastMsgTimeStyle(this.props)} className=\"item__details__timestamp\">\r\n\t\t\t\t\t{this.state.lastMessageTimestamp}\r\n\t\t\t\t</span>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet presence;\r\n\t\tif (this.props.conversation.conversationType === CometChat.RECEIVER_TYPE.USER) {\r\n\t\t\tconst status = this.props.conversation.conversationWith.status;\r\n\t\t\tpresence = <CometChatUserPresence status={status} borderColor={this.props.theme.borderColor.primary} />;\r\n\t\t}\r\n\r\n\t\tlet avatar = null;\r\n\t\tif (this.props.conversation.conversationType === CometChat.RECEIVER_TYPE.USER) {\r\n\t\t\tavatar = <CometChatAvatar user={this.props.conversation.conversationWith} />;\r\n\t\t} else if (this.props.conversation.conversationType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\t\tavatar = <CometChatAvatar group={this.props.conversation.conversationWith} />;\r\n\t\t}\r\n\r\n\t\tlet unreadCount = null;\r\n\t\tif (this.state.enableUnreadCount) {\r\n\t\t\tunreadCount = <CometChatBadgeCount count={this.props.conversation.unreadMessageCount} />;\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatConversationListActions {...this.props} conversation={this.props.conversation} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={listItem(this.props)} className=\"list__item\" onMouseEnter={() => this.handleMouseHover(true)} onMouseLeave={() => this.handleMouseHover(false)} onClick={() => this.props.handleClick(this.props.conversation)}>\r\n\t\t\t\t<div css={itemThumbnailStyle()} className=\"list__item__thumbnail\">\r\n\t\t\t\t\t{avatar}\r\n\t\t\t\t\t{presence}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div css={itemDetailStyle()} className=\"list__item__details\" dir={Translator.getDirection(this.context.language)}>\r\n\t\t\t\t\t<div css={itemRowStyle()} className=\"item__details_block_one\">\r\n\t\t\t\t\t\t<div css={itemNameStyle(this.props)} className=\"item__details__name\" onMouseEnter={event => this.toggleTooltip(event, true)} onMouseLeave={event => this.toggleTooltip(event, false)}>\r\n\t\t\t\t\t\t\t{this.props.conversation.conversationWith.name}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{lastMessageTimeStamp}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div css={itemRowStyle()} className=\"item__details_block_two\">\r\n\t\t\t\t\t\t<div css={itemLastMsgStyle(this.props)} className=\"item__details__last-message\" onMouseEnter={event => this.toggleTooltip(event, true)} onMouseLeave={event => this.toggleTooltip(event, false)}>\r\n\t\t\t\t\t\t\t{this.state.lastMessage}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{unreadCount}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{toolTipView}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatConversationListItem.defaultProps = {\r\n\ttheme: theme,\r\n\tloggedInUser: null,\r\n\tconversation: {\r\n\t\tconversationWith: {}\r\n\t}\r\n};\r\n\r\nCometChatConversationListItem.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tloggedInUser: PropTypes.shape(CometChat.User),\r\n\tconversation: PropTypes.shape(CometChat.Conversation)\r\n}\r\n\r\nexport { CometChatConversationListItem };\r\n","export const previewWrapperStyle = (context, keyframes) => {\r\n\r\n\tconst slideAnimation = keyframes`\r\n    from {\r\n        bottom: -55px\r\n    }\r\n    to {\r\n        bottom: 0px\r\n    }`;\r\n\r\n\treturn {\r\n\t\tpadding: \"8px 8px 16px 8px\",\r\n        marginBottom: \"-8px\",\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.white}`,\r\n\t\tborder: `1px solid ${context.theme.borderColor.primary}`,\r\n\t\tfontSize: \"13px\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"row-reverse\",\r\n\t\tjustifyContent: \"space-between\",\r\n\t\tanimation: `${slideAnimation} 0.5s ease-out`,\r\n\t\tposition: \"relative\",\r\n\t};\r\n};\r\n\r\nexport const previewHeadingStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n        alignItems: \"baseline\",\r\n        justifyContent: \"space-between\"\r\n    }\r\n}\r\n\r\nexport const previewCloseStyle = (img, context) => {\r\n\r\n    return {\r\n        width: \"24px\",\r\n        height: \"24px\",\r\n        borderRadius: \"50%\",\r\n        mask: `url(${img}) center center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.primaryColor}`,\r\n        cursor: \"pointer\",\r\n    }\r\n}\r\n\r\nexport const previewOptionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"space-around\",\r\n        width: \"100%\",\r\n    }\r\n}\r\n\r\nexport const previewOptionStyle = context => {\r\n\r\n\treturn {\r\n\t\tpadding: \"8px\",\r\n\t\tmargin: \"0 8px\",\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.grey}`,\r\n\t\tborder: `1px solid ${context.theme.borderColor.primary}`,\r\n\t\tborderRadius: \"10px\",\r\n\t\tcursor: \"pointer\",\r\n\t\theight: \"100%\",\r\n\t\ttextAlign: \"center\",\r\n\t};\r\n};","export default __webpack_public_path__ + \"static/media/close.6d1416b0.svg\";","import { useContext } from 'react';\r\n\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx, keyframes } from '@emotion/core';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { CometChatContext } from \"../../../../util/CometChatContext\";\r\n\r\nimport { theme } from \"../../../../resources/theme\";\r\n\r\nimport {\r\n    previewWrapperStyle,\r\n    previewHeadingStyle,\r\n    previewCloseStyle,\r\n    previewOptionsWrapperStyle,\r\n    previewOptionStyle,\r\n} from \"./style\";\r\n\r\nimport closeIcon from \"./resources/close.svg\";\r\n\r\nconst CometChatSmartReplyPreview = (props) => {\r\n\r\n    const context = useContext(CometChatContext);\r\n\r\n    const options = props.options.map((option, key) => {\r\n\r\n        return (<div key={key} css={previewOptionStyle(context)} className=\"option\" onClick={() => props.clicked(option)}>{option}</div>)\r\n    })\r\n\r\n    return (\r\n        <div css={previewWrapperStyle(context, keyframes)} className=\"reply__preview__wrapper\">\r\n            <div css={previewHeadingStyle()} className=\"preview__heading\">\r\n                <div css={previewCloseStyle(closeIcon, context)} onClick={props.close} className=\"preview__close\"></div>\r\n            </div>\r\n            <div css={previewOptionsWrapperStyle()} className=\"preview__options\">{options}</div>\r\n        </div>\r\n    )\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatSmartReplyPreview.defaultProps = {\r\n    theme: theme\r\n};\r\n\r\nCometChatSmartReplyPreview.propTypes = {\r\n    theme: PropTypes.object\r\n}\r\n\r\nexport { CometChatSmartReplyPreview };","export const stickerWrapperStyle = (context, keyframes) => {\r\n\r\n\tconst slideAnimation = keyframes`\r\n    from {\r\n        bottom: -55px\r\n    }\r\n    to {\r\n        bottom: 0px\r\n    }`;\r\n\r\n\treturn {\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.grey}`,\r\n\t\tborder: `1px solid ${context.theme.borderColor.primary}`,\r\n\t\tborderBottom: \"none\",\r\n\t\tanimation: `${slideAnimation} 0.5s ease-out`,\r\n\t\tborderRadius: \"10px 10px 0 0\",\r\n\t\theight: \"215px\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tjustifyContent: \"center\",\r\n\t};\r\n};\r\n\r\nexport const stickerSectionListStyle = context => {\r\n\r\n\treturn {\r\n\t\tborderTop: `1px solid ${context.theme.borderColor.primary}`,\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.silver}`,\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"space-between\",\r\n\t\talignItems: \"center\",\r\n\t\ttextTransform: \"uppercase\",\r\n\t\toverflowX: \"auto\",\r\n\t\toverflowY: \"hidden\",\r\n\t\tpadding: \"10px\",\r\n\t\t\"::-webkit-scrollbar\": {\r\n\t\t\tbackground: `${context.theme.backgroundColor.primary}`,\r\n\t\t},\r\n\t\t\"::-webkit-scrollbar-thumb\": {\r\n\t\t\tbackground: `${context.theme.backgroundColor.silver}`,\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const sectionListItemStyle = () => {\r\n\r\n    return {\r\n\r\n        height: \"35px\",\r\n        width: \"35px\",\r\n        cursor: \"pointer\",\r\n        flexShrink: \"0\",\r\n        \":not(:first-of-type)\": {\r\n            marginLeft: \"16px\",\r\n        },\r\n    }\r\n}\r\n\r\nexport const stickerListStyle = () => {\r\n\r\n    return {\r\n        height: \"calc(100% - 50px)\",\r\n        display: \"flex\",\r\n        overflowX: \"hidden\",\r\n        overflowY: \"auto\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"center\"\r\n    }\r\n}\r\n\r\nexport const stickerItemStyle = context => {\r\n\r\n\tconst mq = [...context.theme.breakPoints];\r\n\r\n\treturn {\r\n\t\tminWidth: \"50px\",\r\n\t\tminHeight: \"50px\",\r\n\t\tmaxWidth: \"70px\",\r\n\t\tmaxHeight: \"70px\",\r\n\t\tcursor: \"pointer\",\r\n\t\tflexShrink: \"0\",\r\n\t\tmarginRight: \"20px\",\r\n\t\t[`@media ${mq[1]}, ${mq[2]}, ${mq[3]}`]: {\r\n\t\t\tmaxWidth: \"70px\",\r\n\t\t\tmaxHeight: \"70px\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const stickerMsgStyle = () => {\r\n\r\n    return {\r\n        overflow: \"hidden\",\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        position: \"absolute\",\r\n        top: \"35%\",\r\n    }\r\n}\r\n\r\nexport const stickerMsgTxtStyle = context => {\r\n\r\n\treturn {\r\n\t\tmargin: \"0\",\r\n\t\theight: \"30px\",\r\n\t\tcolor: `${context.theme.color.secondary}`,\r\n\t\tfontSize: \"24px!important\",\r\n\t\tfontWeight: \"600\",\r\n\t};\r\n};\r\n\r\nexport const stickerCloseStyle = (img, context) => {\r\n\t\r\n\treturn {\r\n\t\twidth: \"20px\",\r\n\t\theight: \"20px\",\r\n\t\tborderRadius: \"50%\",\r\n\t\talignSelf: \"flex-end\",\r\n\t\tmask: `url(${img}) center center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.primaryColor}`,\r\n\t\tcursor: \"pointer\",\r\n\t\tmargin: \"8px 8px 0 0\",\r\n\t};\r\n};\r\n","export default __webpack_public_path__ + \"static/media/close.6d1416b0.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx, keyframes } from '@emotion/core';\r\nimport PropTypes from 'prop-types';\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatContext } from \"../../../../util/CometChatContext\";\r\nimport * as enums from \"../../../../util/enums.js\";\r\n\r\nimport { theme } from \"../../../../resources/theme\";\r\nimport Translator from \"../../../../resources/localization/translator\";\r\n\r\nimport { \r\n    stickerWrapperStyle, \r\n    stickerSectionListStyle, \r\n    stickerListStyle,\r\n    sectionListItemStyle,\r\n    stickerItemStyle,\r\n    stickerMsgStyle,\r\n    stickerMsgTxtStyle,\r\n    stickerCloseStyle\r\n} from \"./style\";\r\n\r\nimport closeIcon from \"./resources/close.svg\";\r\n\r\nclass CometChatStickerKeyboard extends React.PureComponent {\r\n\r\n    static contextType = CometChatContext;\r\n\r\n    constructor(props, context) {\r\n\r\n        super(props, context);\r\n\r\n        this.decoratorMessage = Translator.translate(\"LOADING\", context.language);\r\n\r\n        this.state = {\r\n            stickerlist: [],\r\n            stickerset: {},\r\n            activestickerlist: [],\r\n            activestickerset: null\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getStickers();\r\n    }\r\n\r\n    getStickers = () => {\r\n\r\n        CometChat.callExtension('stickers', 'GET', 'v1/fetch', null).then(stickers => {\r\n\r\n            // Stickers received\r\n            let activeStickerSet = null; \r\n            const customStickers = (stickers.hasOwnProperty(\"customStickers\")) ? stickers[\"customStickers\"] : [];\r\n            const defaultStickers = (stickers.hasOwnProperty(\"defaultStickers\")) ? stickers[\"defaultStickers\"] : [];\r\n\r\n            defaultStickers.sort(function (a, b) {\r\n                return a.stickerSetOrder - b.stickerSetOrder;\r\n            });\r\n\r\n            customStickers.sort(function (a, b) {\r\n                return a.stickerSetOrder - b.stickerSetOrder;\r\n            });\r\n\r\n            const stickerList = [...defaultStickers, ...customStickers];\r\n            \r\n            if (stickerList.length === 0) {\r\n                this.decoratorMessage = Translator.translate(\"NO_STICKERS_FOUND\", this.context.language);\r\n            }\r\n\r\n            const stickerSet = stickerList.reduce((r, sticker, index) => {\r\n\r\n                const { stickerSetName } = sticker;\r\n                if (index === 0) {\r\n                    activeStickerSet = stickerSetName;\r\n                }\r\n\r\n                r[stickerSetName] = [...r[stickerSetName] || [], { ...sticker}];\r\n\r\n                return r;\r\n            }, {});\r\n\r\n            let activeStickerList = [];\r\n            if (Object.keys(stickerSet).length) {\r\n\r\n                Object.keys(stickerSet).forEach(key => {\r\n                    stickerSet[key].sort(function (a, b) {\r\n                        return a.stickerOrder - b.stickerOrder;\r\n                    });\r\n                });\r\n\r\n                activeStickerList = stickerSet[activeStickerSet];\r\n            }\r\n            \r\n            this.setState({ \r\n                \"stickerlist\": stickerList, \r\n                \"stickerset\": stickerSet, \r\n                \"activestickerlist\": activeStickerList, \r\n                \"activestickerset\": activeStickerSet \r\n            });\r\n\r\n        }).catch(error => {\r\n            \r\n            this.decoratorMessage = Translator.translate(\"SOMETHING_WRONG\", this.context.language);\r\n            this.setState({ \"activestickerlist\": [], \"stickerset\": {} });\r\n        });\r\n    }\r\n\r\n    sendStickerMessage = (stickerItem) => {\r\n        this.props.actionGenerated(enums.ACTIONS[\"SEND_STICKER\"], stickerItem);\r\n    }\r\n\r\n    onStickerSetClicked = (sectionItem) => {\r\n\r\n        this.setState({ activestickerlist: [] }, () => {\r\n\r\n            const stickerSet = { ...this.state.stickerset };\r\n            const activeStickerList = stickerSet[sectionItem];\r\n            this.setState({ \"activestickerset\": sectionItem, \"activestickerlist\": activeStickerList });\r\n        });\r\n    }\r\n\r\n    closeStickerKeyboard = () => {\r\n        this.props.actionGenerated(enums.ACTIONS[\"CLOSE_STICKER_KEYBOARD\"]);\r\n    }\r\n\r\n    render() {\r\n\r\n        let messageContainer = null;\r\n        if (this.state.activestickerlist.length === 0) {\r\n            messageContainer = (\r\n                <div css={stickerMsgStyle()} className=\"stickers__decorator-message\">\r\n                    <p css={stickerMsgTxtStyle(this.context)} className=\"decorator-message\">{this.decoratorMessage}</p>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        let stickers = null;\r\n        if (Object.keys(this.state.stickerset).length) {\r\n\r\n            const sectionItems = Object.keys(this.state.stickerset).map((sectionItem, key) => {\r\n\r\n                const stickerSetThumbnail = this.state.stickerset[sectionItem][0][\"stickerUrl\"];\r\n                return( <div  key={key}  className=\"stickers__sectionitem\" css={sectionListItemStyle()}  onClick={() => this.onStickerSetClicked(sectionItem)}>\r\n                    <img src={stickerSetThumbnail} alt={sectionItem} />\r\n                </div>\r\n                );\r\n            });\r\n\r\n            let activeStickerList = [];\r\n            if (this.state.activestickerlist.length) {\r\n\r\n                const stickerList = [...this.state.activestickerlist];\r\n                activeStickerList = stickerList.map((stickerItem, key) => {\r\n\r\n                    return (\r\n                        <div key={key} css={stickerItemStyle(this.context)} onClick={() => this.sendStickerMessage(stickerItem)} className=\"stickers__listitem\">\r\n                            <img src={stickerItem.stickerUrl} alt={stickerItem.stickerName} />\r\n                        </div>\r\n                    );\r\n                });\r\n            }\r\n\r\n            stickers = (\r\n                <React.Fragment>\r\n                    <div css={stickerCloseStyle(closeIcon, this.context)} className=\"stickers__close\" onClick={this.closeStickerKeyboard}></div>\r\n                    <div css={stickerListStyle(this.props)} className=\"stickers__list\">\r\n                        {activeStickerList}\r\n                    </div>\r\n                    <div css={stickerSectionListStyle(this.context)} className=\"stickers__sections\">\r\n                        {sectionItems}\r\n                    </div>\r\n                </React.Fragment>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div css={stickerWrapperStyle(this.context, keyframes)} className=\"stickers\">\r\n                {messageContainer}\r\n                {stickers}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatStickerKeyboard.defaultProps = {\r\n    theme: theme\r\n};\r\n\r\nCometChatStickerKeyboard.propTypes = {\r\n    theme: PropTypes.object\r\n}\r\n\r\nexport { CometChatStickerKeyboard };","export const messageReactionsStyle = (props, reactionData, context, loggedInUser) => {\r\n\r\n\tconst uid = loggedInUser?.uid;\r\n\tlet borderStyle = {};\r\n\tlet hoveredBorderStyle = {};\r\n\r\n\tif (reactionData.hasOwnProperty(uid)) {\r\n\t\tborderStyle = {\r\n\t\t\tborder: `1px solid ${context.theme.primaryColor}`,\r\n\t\t};\r\n\r\n\t\thoveredBorderStyle = { ...borderStyle };\r\n\t} else {\r\n\t\tborderStyle = {\r\n\t\t\tborder: \"1px solid transparent\",\r\n\t\t};\r\n\r\n\t\thoveredBorderStyle = {\r\n\t\t\tborder: `1px solid ${context.theme.borderColor.primary}`,\r\n\t\t};\r\n\t}\r\n\r\n\treturn {\r\n\t\tfontSize: \"11px\",\r\n\t\tpadding: \"2px 6px\",\r\n\t\tdisplay: \"inline-flex\",\r\n\t\talignItems: \"center\",\r\n\t\tverticalAlign: \"top\",\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.secondary}`,\r\n\t\tborderRadius: \"12px\",\r\n\t\tmargin: \"4px 4px 0 0\",\r\n\t\t...borderStyle,\r\n\t\t\".emoji-mart-emoji\": {\r\n\t\t\tdisplay: \"inline-flex\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t\tcursor: \"pointer\",\r\n\t\t},\r\n\t\t\"&:hover\": {\r\n\t\t\t...hoveredBorderStyle,\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const emojiButtonStyle = (img, context) => {\r\n\r\n    return {\r\n        outline: \"0\",\r\n        border: \"0\",\r\n        borderRadius: \"4px\",\r\n        alignItems: \"center\",\r\n        display: \"inline-flex\",\r\n        justifyContent: \"center\",\r\n        position: \"relative\",\r\n        \"i\": {\r\n            height: \"24px\",\r\n            width: \"24px\",\r\n            mask: `url(${img}) center center no-repeat`,\r\n\t\t\tbackgroundColor: `${context.theme.secondaryTextColor}`,\r\n        }        \r\n    }\r\n}\r\n\r\nexport const reactionCountStyle = context => {\r\n\r\n\treturn {\r\n\t\tcolor: `${context.theme.color.primary}`,\r\n\t\tpadding: \"0 1px 0 3px\",\r\n\t};\r\n};\r\n","export default __webpack_public_path__ + \"static/media/reactions.7b8c5bff.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Emoji } from \"emoji-mart\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatContext } from \"../../../../util/CometChatContext\";\r\nimport * as enums from \"../../../../util/enums.js\";\r\nimport { checkMessageForExtensionsData } from \"../../../../util/common\";\r\n\r\nimport { theme } from \"../../../../resources/theme\";\r\nimport Translator from \"../../../../resources/localization/translator\";\r\n\r\nimport {\r\n    messageReactionsStyle,\r\n    reactionCountStyle,\r\n    emojiButtonStyle,\r\n} from \"./style\";\r\n\r\nimport reactIcon from \"./resources/reactions.svg\";\r\n\r\nclass CometChatMessageReactions extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\tloggedInUser;\r\n\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\t\tthis._isMounted = false;\r\n\t\tthis.state = {\r\n\t\t\tenableMessageReaction: false,\r\n\t\t};\r\n\r\n\t\tthis.context.getLoggedinUser().then(user => {\r\n\t\t\tthis.loggedInUser = { ...user };\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis._isMounted = true;\r\n\t\tthis.enableMessageReaction();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis._isMounted = false;\r\n\t}\r\n\r\n\tenableMessageReaction = () => {\r\n\t\t/**\r\n\t\t * If reacting to messages feature is disabled\r\n\t\t */\r\n\t\tthis.context.FeatureRestriction.isReactionsEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableMessageReaction && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableMessageReaction: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableMessageReaction !== false) {\r\n\t\t\t\t\tthis.setState({ enableMessageReaction: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\treactToMessages = emoji => {\r\n\r\n\t\tlet messageObject = { ...this.props.message };\r\n\t\tdelete messageObject[\"metadata\"][\"@injected\"][\"extensions\"][\"reactions\"][emoji.colons][this.loggedInUser.uid];\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"MESSAGE_EDITED\"], messageObject);\r\n\r\n\t\tCometChat.callExtension(\"reactions\", \"POST\", \"v1/react\", {\r\n\t\t\tmsgId: this.props.message.id,\r\n\t\t\temoji: emoji.colons,\r\n\t\t}).then(response => {\r\n\t\t\t\r\n\t\t\t// Reaction failed\r\n\t\t\tif (!response || !response.success || response.success !== true) {\r\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\");\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\");\r\n\t\t});\r\n\t};\r\n\r\n\tgetMessageReactions = reaction => {\r\n\t\t\r\n\t\tif (reaction === null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst messageReactions = Object.keys(reaction).map((data, key) => {\r\n\t\t\tconst reactionData = reaction[data];\r\n\t\t\tconst reactionName = data.replaceAll(\":\", \"\");\r\n\t\t\tconst reactionCount = Object.keys(reactionData).length;\r\n\r\n\t\t\tif (!reactionCount) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tconst userList = [];\r\n\t\t\tlet reactionTitle = \"\";\r\n\r\n\t\t\tfor (const user in reactionData) {\r\n\t\t\t\tuserList.push(reactionData[user][\"name\"]);\r\n\t\t\t}\r\n\r\n\t\t\tif (userList.length) {\r\n\t\t\t\treactionTitle = userList.join(\", \");\r\n\t\t\t\tconst str = ` ${Translator.translate(\"REACTED\", this.context.language)}`;\r\n\t\t\t\treactionTitle = reactionTitle.concat(str);\r\n\t\t\t}\r\n\r\n\t\t\tconst reactionClassName = `reaction reaction__${reactionName}`;\r\n\t\t\treturn (\r\n\t\t\t\t<div key={key} css={messageReactionsStyle(this.props, reactionData, this.context, this.loggedInUser)} className={reactionClassName} title={reactionTitle}>\r\n\t\t\t\t\t<Emoji emoji={{ id: reactionName }} size={16} native onClick={this.reactToMessages} />\r\n\t\t\t\t\t<span css={reactionCountStyle(this.context)} className=\"reaction__count\">\r\n\t\t\t\t\t\t{reactionCount}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn messageReactions;\r\n\t};\r\n\r\n\taddMessageReaction = () => {\r\n\t\t//If reacting to messages feature is disabled\r\n\t\tif (this.state.enableMessageReaction === false) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst addReactionEmoji = (\r\n\t\t\t<div key=\"-1\" css={messageReactionsStyle(this.props, {}, this.context)} className=\"reaction reaction__add\" title={Translator.translate(\"ADD_REACTION\", this.context.language)}>\r\n\t\t\t\t<button type=\"button\" css={emojiButtonStyle(reactIcon, this.context)} className=\"button__reacttomessage\" onClick={() => this.props.actionGenerated(enums.ACTIONS[\"REACT_TO_MESSAGE\"], this.props.message)}>\r\n\t\t\t\t\t<i></i>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\treturn addReactionEmoji;\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst reaction = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tconst messageReactions = this.getMessageReactions(reaction);\r\n\r\n\t\tconst addReactionEmoji = this.addMessageReaction();\r\n\r\n\t\tif (messageReactions !== null && messageReactions.length && addReactionEmoji !== null) {\r\n\t\t\tif (this.props.message?.sender?.uid !== this.loggedInUser?.uid) {\r\n\t\t\t\tmessageReactions.push(addReactionEmoji);\r\n\t\t\t} else {\r\n\t\t\t\tmessageReactions.unshift(addReactionEmoji);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn messageReactions;\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatMessageReactions.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatMessageReactions.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatMessageReactions };\r\n","export const modalWrapperStyle = context => {\r\n\r\n\tconst mq = [...context.theme.breakPoints];\r\n\r\n\treturn {\r\n\t\tminWidth: \"350px\",\r\n\t\tminHeight: \"450px\",\r\n\t\twidth: \"50%\",\r\n\t\theight: \"40%\",\r\n\t\toverflow: \"hidden\",\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.white}`,\r\n\t\tposition: \"fixed\",\r\n\t\tleft: \"50%\",\r\n\t\ttop: \"50%\",\r\n\t\ttransform: \"translate(-50%, -50%)\",\r\n\t\tzIndex: \"1002\",\r\n\t\tmargin: \"0 auto\",\r\n\t\tboxShadow: \"rgba(20, 20, 20, 0.2) 0 16px 32px, rgba(20, 20, 20, 0.04) 0 0 0 1px\",\r\n\t\tborderRadius: \"12px\",\r\n\t\tdisplay: \"block\",\r\n\t\t[`@media ${mq[1]}, ${mq[2]}`]: {\r\n\t\t\twidth: \"100%\",\r\n\t\t\theight: \"100%\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const modalCloseStyle = (img, context) => {\r\n\r\n    return {\r\n        position: \"absolute\",\r\n        width: \"32px\",\r\n        height: \"32px\",\r\n        borderRadius: \"50%\",\r\n        top: \"16px\",\r\n        right: \"16px\",\r\n        mask: `url(${img}) center center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.primaryColor}`,\r\n        cursor: \"pointer\",\r\n    }\r\n}\r\n\r\nexport const modalBodyStyle = () => {\r\n\r\n    return {\r\n        padding: \"24px\",\r\n        height: \"100%\",\r\n        width: \"100%\"\r\n    }\r\n}\r\n\r\nexport const modalErrorStyle = (context) => {\r\n\r\n    return {\r\n        fontSize: \"12px\",\r\n\t\tcolor: `${context.theme.color.red}`,\r\n\t\ttextAlign: \"center\",\r\n\t\tmargin: \"8px 0\",\r\n\t\twidth: \"100%\",\r\n    }\r\n}\r\n\r\nexport const modalTableStyle = context => {\r\n\r\n\treturn {\r\n\t\tborderCollapse: \"collapse\",\r\n\t\tmargin: \"0\",\r\n\t\tpadding: \"0\",\r\n\t\twidth: \"100%\",\r\n\t\theight: \"90%\",\r\n\t\ttr: {\r\n\t\t\tborderBottom: `1px solid ${context.theme.borderColor.primary}`,\r\n\t\t\tdisplay: \"table\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\ttableLayout: \"fixed\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const tableCaptionStyle = () => {\r\n\r\n    return {\r\n        fontSize: \"20px\",\r\n        marginBottom: \"15px\",\r\n        fontWeight: \"bold\",\r\n        textAlign: \"left\",\r\n    }\r\n}\r\n\r\nexport const tableBodyStyle = () => {\r\n\r\n    return {\r\n        height: \"calc(100% - 40px)\",\r\n        overflowY: \"auto\",\r\n        display: \"block\",\r\n        \"tr\": {\r\n            \"td\": {\r\n                padding: \"8px 16px\",\r\n                fontSize: \"14px\",\r\n                \"input\": {\r\n                    width: \"100%\",\r\n                    border: \"none\",\r\n                    padding: \"8px 16px\",\r\n                    fontSize: \"14px\",\r\n                    \"&:focus\": {\r\n                        outline: \"none\"\r\n                    }\r\n                },\r\n                \"label\": {\r\n                    padding: \"8px 16px\", \r\n                },\r\n                \":first-of-type\": {\r\n                    width: \"120px\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const tableFootStyle = (context, state, img) => {\r\n\r\n\tlet loadingState = {};\r\n\tlet textMargin = {};\r\n\r\n\tif (state.creatingPoll) {\r\n\t\tloadingState = {\r\n\t\t\tdisabled: \"true\",\r\n\t\t\tpointerEvents: \"none\",\r\n\t\t\tbackground: `url(${img}) no-repeat right 10px center ${context.theme.primaryColor}`,\r\n\t\t};\r\n\r\n\t\ttextMargin = {\r\n\t\t\tmarginRight: \"24px\",\r\n\t\t};\r\n\t}\r\n\r\n\treturn {\r\n\t\tdisplay: \"inline-block\",\r\n\t\ttr: {\r\n\t\t\tborder: \"none\",\r\n\t\t\ttd: {\r\n\t\t\t\ttextAlign: \"center\",\r\n\t\t\t\tbutton: {\r\n\t\t\t\t\tcursor: \"pointer\",\r\n\t\t\t\t\tpadding: \"8px 16px\",\r\n\t\t\t\t\tbackgroundColor: `${context.theme.primaryColor}`,\r\n\t\t\t\t\tborderRadius: \"5px\",\r\n\t\t\t\t\tcolor: `${context.theme.color.white}`,\r\n\t\t\t\t\tfontSize: \"14px\",\r\n\t\t\t\t\toutline: \"0\",\r\n\t\t\t\t\tborder: \"0\",\r\n\t\t\t\t\t...loadingState,\r\n\t\t\t\t\tspan: {\r\n\t\t\t\t\t\t...textMargin,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const iconWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"50px\"\r\n    }\r\n}\r\n\r\nexport const addOptionIconStyle = (img, context) => {\r\n\r\n    return {\r\n        backgroundSize: \"28px 28px\",\r\n        cursor: \"pointer\",\r\n        display: \"block\",\r\n        height: \"24px\",\r\n        width: \"24px\",\r\n\t\tmask: `url(${img}) center center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.secondaryTextColor}`,\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/creating.446449d0.svg\";","export default __webpack_public_path__ + \"static/media/add-circle-filled.ed93de4c.svg\";","export default __webpack_public_path__ + \"static/media/close.6d1416b0.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatBackdrop } from \"../../../Shared\";\r\nimport { CometChatCreatePollOptions } from \"../\";\r\n\r\nimport { CometChatContext } from \"../../../../util/CometChatContext\";\r\nimport * as enums from \"../../../../util/enums.js\"; \r\n\r\nimport { theme } from \"../../../../resources/theme\";\r\nimport Translator from \"../../../../resources/localization/translator\";\r\n\r\nimport {\r\n    modalWrapperStyle,\r\n    modalCloseStyle,\r\n    modalBodyStyle,\r\n    modalErrorStyle,\r\n    modalTableStyle,\r\n    tableCaptionStyle,\r\n    tableBodyStyle,\r\n    tableFootStyle,\r\n    iconWrapperStyle,\r\n    addOptionIconStyle\r\n} from \"./style\";\r\n\r\nimport creatingIcon from \"./resources/creating.svg\";\r\nimport addIcon from \"./resources/add-circle-filled.svg\";\r\nimport clearIcon from \"./resources/close.svg\";\r\n\r\nclass CometChatCreatePoll extends React.Component {\r\n\r\n    loggedInUser = null;\r\n    static contextType = CometChatContext;\r\n\r\n    constructor(props) {\r\n\r\n        super(props);\r\n        this.state = {\r\n            errorMessage: \"\",\r\n            options: [],\r\n            creatingPoll: false\r\n        }\r\n\r\n        this.questionRef = React.createRef();\r\n        this.optionOneRef = React.createRef();\r\n        this.optionTwoRef = React.createRef();\r\n        this.optionRef = React.createRef();\r\n    }\r\n\r\n    addPollOption = () => {\r\n\r\n        const options = [...this.state.options];\r\n        options.push({ value: \"\", id: new Date().getTime() });\r\n        this.setState({options: options});\r\n    }\r\n\r\n    removePollOption = (option) => {\r\n\r\n        const options = [...this.state.options];\r\n        const optionKey = options.findIndex(opt => opt.id === option.id);\r\n        if (optionKey > -1) {\r\n\r\n            options.splice(optionKey, 1);\r\n            this.setState({ options: options});\r\n        }\r\n    }\r\n\r\n    optionChangeHandler = (event, option) => {\r\n\r\n        const options = [...this.state.options];\r\n        const optionKey = options.findIndex(opt => opt.id === option.id); \r\n        if (optionKey > -1) {\r\n\r\n            const newOption = { ...option, value: event.target.value}\r\n            options.splice(optionKey, 1, newOption);\r\n            this.setState({ options: options });\r\n        }\r\n    }\r\n\r\n    createPoll = () => {\r\n\r\n        const question = this.questionRef.current.value.trim();\r\n        const firstOption = this.optionOneRef.current.value.trim();\r\n        const secondOption = this.optionTwoRef.current.value.trim();\r\n        const optionItems = [firstOption, secondOption];\r\n\r\n        if (question.length === 0) {\r\n\r\n            this.setState({ errorMessage: Translator.translate(\"INVALID_POLL_QUESTION\", this.context.language) });\r\n            return false;\r\n        }\r\n\r\n        if (firstOption.length === 0 || secondOption.length === 0) {\r\n\r\n            this.setState({ errorMessage: Translator.translate(\"INVALID_POLL_OPTION\", this.context.language) });\r\n            return false;\r\n        }\r\n\r\n        this.state.options.forEach(function (option) {\r\n            optionItems.push(option.value)\r\n        })\r\n\r\n        let receiverId;\r\n        let receiverType = this.context.type;\r\n        if (this.context.type === CometChat.RECEIVER_TYPE.USER) {\r\n            receiverId = this.context.item.uid;\r\n        } else if (this.context.type === CometChat.RECEIVER_TYPE.GROUP) {\r\n            receiverId = this.context.item.guid;\r\n        }\r\n        \r\n        this.setState({ creatingPoll: true, errorMessage: \"\" });\r\n\r\n        CometChat.callExtension('polls', 'POST', 'v2/create', {\r\n            \"question\": question,\r\n            \"options\": optionItems,\r\n            \"receiver\": receiverId,\r\n            \"receiverType\": receiverType\r\n        }).then(response => {\r\n\r\n            if (response && response.hasOwnProperty(\"success\") && response[\"success\"] === true) {\r\n\r\n                this.setState({ creatingPoll: false });\r\n                this.props.actionGenerated(enums.ACTIONS[\"POLL_CREATED\"]);\r\n\r\n            } else {\r\n                this.setState({ errorMessage: Translator.translate(\"SOMETHING_WRONG\", this.context.language) });\r\n            }\r\n\r\n        }).catch(error => {\r\n\r\n            this.setState({ creatingPoll: false });\r\n            this.setState({ errorMessage: Translator.translate(\"SOMETHING_WRONG\", this.context.language) });\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        const optionList = [...this.state.options];\r\n        const pollOptionView = optionList.map((option, index) => {\r\n            return (\r\n                <CometChatCreatePollOptions \r\n                key={index} \r\n                option={option} \r\n                tabIndex={index+4}\r\n                lang={this.context.language}\r\n                optionChangeHandler={this.optionChangeHandler}\r\n                removePollOption={this.removePollOption} />\r\n            );\r\n        });\r\n\r\n        const createText = (this.state.creatingPoll) ? Translator.translate(\"CREATING\", this.context.language) : Translator.translate(\"CREATE\", this.context.language);\r\n        return (\r\n            <React.Fragment>\r\n                <CometChatBackdrop show={true} clicked={this.props.close} />\r\n                <div css={modalWrapperStyle(this.context)} className=\"modal__createpoll\">\r\n                    <span css={modalCloseStyle(clearIcon, this.context)} className=\"modal__close\" onClick={this.props.close} title={Translator.translate(\"CLOSE\", this.context.language)}></span>\r\n                    <div css={modalBodyStyle()} className=\"modal__body\">\r\n                        <table css={modalTableStyle(this.context)}>\r\n                            <caption css={tableCaptionStyle()} className=\"modal__title\">{Translator.translate(\"CREATE_POLL\", this.context.language)}</caption>\r\n                            <tbody css={tableBodyStyle()}>\r\n                                <tr className=\"error\">\r\n                                    <td colSpan=\"3\"><div css={modalErrorStyle(this.context)}>{this.state.errorMessage}</div></td>\r\n                                </tr>\r\n                                <tr className=\"poll__question\">\r\n                                    <td><label>{Translator.translate(\"QUESTION\", this.context.language)}</label></td>\r\n                                    <td colSpan=\"2\">\r\n                                        <input type=\"text\" autoFocus tabIndex=\"1\" placeholder={Translator.translate(\"ENTER_YOUR_QUESTION\", this.context.language)} ref={this.questionRef} />\r\n                                    </td>\r\n                                </tr>\r\n                                <tr className=\"poll__options\">\r\n                                    <td>\r\n                                        <label>{Translator.translate(\"OPTIONS\", this.context.language)}</label>\r\n                                    </td>\r\n                                    <td colSpan=\"2\">\r\n                                        <input type=\"text\" tabIndex=\"2\" placeholder={Translator.translate(\"ENTER_YOUR_OPTION\", this.context.language)} ref={this.optionOneRef} />\r\n                                    </td>\r\n                                </tr>\r\n                                <tr ref={this.optionRef} className=\"poll__options\">\r\n                                    <td>&nbsp;</td>\r\n                                    <td colSpan=\"2\">\r\n                                        <input type=\"text\" tabIndex=\"3\" placeholder={Translator.translate(\"ENTER_YOUR_OPTION\", this.context.language)} ref={this.optionTwoRef} />\r\n                                    </td>\r\n                                </tr>\r\n                                {pollOptionView}\r\n                                <tr>\r\n                                    <td>&nbsp;</td>\r\n                                    <td>\r\n                                        <label>{Translator.translate(\"ADD_NEW_OPTION\", this.context.language)}</label>\r\n                                    </td>\r\n                                    <td css={iconWrapperStyle()}>\r\n                                        <i tabIndex=\"100\" css={addOptionIconStyle(addIcon, this.context)} className=\"option__add\" onClick={this.addPollOption}></i>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                            <tfoot css={tableFootStyle(this.context, this.state, creatingIcon)}>\r\n                                <tr className=\"createpoll\">\r\n                                    <td colSpan=\"2\">\r\n                                        <button type=\"button\" onClick={this.createPoll}>\r\n                                            <span>{createText}</span>\r\n                                        </button>\r\n                                    </td>\r\n                                </tr>\r\n                            </tfoot>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatCreatePoll.defaultProps = {\r\n\ttheme: theme,\r\n};\r\n\r\nCometChatCreatePoll.propTypes = {\r\n\ttheme: PropTypes.object,\r\n};\r\n\r\nexport { CometChatCreatePoll };\r\n","export const removeOptionIconStyle = (img, context) => {\r\n\r\n\treturn {\r\n\t\tmask: `url(${img}) center center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.color.red}`,\r\n\t\tcursor: \"pointer\",\r\n\t\tdisplay: \"block\",\r\n\t\theight: \"24px\",\r\n\t\twidth: \"24px\",\r\n\t};\r\n};\r\n\r\nexport const iconWrapperStyle = () => {\r\n    return {\r\n        width: \"50px\"\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/remove.a088366d.svg\";","import { useContext } from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\n\r\nimport { CometChatContext } from \"../../../../util/CometChatContext\";\r\n\r\nimport { iconWrapperStyle } from \"../CometChatCreatePoll/style\";\r\n\r\nimport Translator from \"../../../../resources/localization/translator\";\r\n\r\nimport { removeOptionIconStyle } from \"./style\";\r\nimport removeIcon from \"./resources/remove.svg\";\r\n\r\nconst CometChatCreatePollOptions = (props) => {\r\n\r\n    const context = useContext(CometChatContext);\r\n\r\n    return (\r\n        <tr className=\"poll__options\">\r\n            <td>&nbsp;</td>\r\n            <td>\r\n                <input \r\n                autoFocus\r\n                tabIndex={props.tabIndex}\r\n                type=\"text\" \r\n                autoComplete=\"off\" \r\n                placeholder={Translator.translate(\"ENTER_YOUR_OPTION\", context.language)}\r\n                value={props.value}\r\n                onChange={(event) => props.optionChangeHandler(event, props.option)} />\r\n            </td>\r\n            <td css={iconWrapperStyle()} className=\"option__remove\">\r\n                <span css={removeOptionIconStyle(removeIcon, context)} onClick={() => props.removePollOption(props.option)}></span>\r\n            </td>\r\n        </tr>\r\n    );\r\n}\r\n\r\nexport { CometChatCreatePollOptions };","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"305px\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageThumbnailStyle = () => {\r\n\r\n    return {\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        margin: \"10px 5px\",\r\n        float: \"left\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageDetailStyle = () => {\r\n\r\n    return {\r\n        flex: \"1 1\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    }\r\n}\r\n\r\nexport const nameWrapperStyle = (avatar) => {\r\n\r\n    const paddingValue = (avatar) ? {\r\n        padding: \"3px 5px\",\r\n    } : {};\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        ...paddingValue\r\n    }\r\n}\r\n\r\nexport const nameStyle = context => {\r\n\r\n\treturn {\r\n\t\tfontSize: \"11px\",\r\n\t\tcolor: `${context.theme.color.search}`,\r\n\t};\r\n};\r\n\r\nexport const messageTxtContainerStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageTxtWrapperStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tborderRadius: \"12px\",\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.secondary}`,\r\n\t\tpadding: \"16px\",\r\n\t\talignSelf: \"flex-start\",\r\n\t\twidth: \"100%\",\r\n\t};\r\n};\r\n\r\nexport const messageTxtTitleStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t\tcolor: `${context.theme.color.primary}`,\r\n\t};\r\n};\r\n\r\nexport const messageTxtStyle = () => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        whiteSpace: \"pre-wrap\",\r\n        wordWrap: \"break-word\",\r\n        textAlign: \"left\",\r\n        width: \"calc(100% - 24px)\",\r\n        fontSize: \"14px\",\r\n        marginLeft: \"8px\"\r\n    }\r\n}\r\n\r\nexport const iconStyle = (img, context) => {\r\n\r\n\treturn {\r\n\t\twidth: \"24px\",\r\n\t\theight: \"24px\",\r\n\t\tdisplay: \"inline-block\",\r\n\t\tmask: `url(${img}) center center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.primaryColor}`,\r\n\t};\r\n};\r\n\r\nexport const messageBtnStyle = context => {\r\n\r\n\treturn {\r\n\t\tlistStyleType: \"none\",\r\n\t\tpadding: \"0\",\r\n\t\tmargin: \"0\",\r\n\t\tli: {\r\n\t\t\tbackgroundColor: `${context.theme.backgroundColor.white}`,\r\n\t\t\tborderRadius: \"8px\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\tcursor: \"pointer\",\r\n\t\t\tposition: \"relative\",\r\n\t\t\tmargin: \"16px 0 0 0\",\r\n\t\t\tpadding: \"8px\",\r\n\t\t\t\"> p\": {\r\n\t\t\t\tbackground: \"0 0\",\r\n\t\t\t\ttextAlign: \"center\",\r\n\t\t\t\tcolor: `${context.theme.primaryColor}`,\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\tdisplay: \"inline-block\",\r\n\t\t\t\tfontSize: \"14px\",\r\n\t\t\t\tfontWeight: \"600\",\r\n\t\t\t\tmargin: \"0\",\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        padding: \"4px 8px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"flex-start\",\r\n        height: \"25px\"\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-start\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-start\",\r\n        minHeight: \"36px\",\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/collaborative-document.0434e615.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../../\";\r\nimport { CometChatMessageReactions } from \"../\";\r\nimport { CometChatAvatar } from \"../../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../../util/CometChatContext\";\r\nimport { checkMessageForExtensionsData } from \"../../../../util/common\";\r\n\r\nimport { theme } from \"../../../../resources/theme\";\r\nimport Translator from \"../../../../resources/localization/translator\";\r\n\r\nimport {\r\n    messageContainerStyle,\r\n    messageWrapperStyle,\r\n    messageThumbnailStyle,\r\n    messageDetailStyle,\r\n    nameWrapperStyle,\r\n    nameStyle,\r\n    messageTxtContainerStyle,\r\n    messageTxtWrapperStyle,\r\n    messageTxtTitleStyle,\r\n    messageTxtStyle,\r\n    messageBtnStyle,\r\n    messageInfoWrapperStyle,\r\n    messageReactionsWrapperStyle,\r\n    iconStyle\r\n} from \"./style\";\r\n\r\n\r\nimport documentIcon from \"./resources/collaborative-document.svg\";\r\n\r\nclass CometChatReceiverDocumentBubble extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisHovering: false,\r\n\t\t};\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n        || this.state.isHovering !== nextState.isHovering) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\tlaunchCollaborativeDocument = () => {\r\n\t\tlet documentUrl = null;\r\n\t\tlet documentData = checkMessageForExtensionsData(this.props.message, \"document\");\r\n\t\tif (documentData && documentData.hasOwnProperty(\"document_url\") && documentData.document_url.length) {\r\n\t\t\tdocumentUrl = documentData.document_url;\r\n\t\t\twindow.open(documentUrl, \"\", \"fullscreen=yes, scrollbars=auto\");\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet avatar = null,\r\n\t\t\tname = null;\r\n\t\tif (this.props.message.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\t\tavatar = (\r\n\t\t\t\t<div css={messageThumbnailStyle} className=\"message__thumbnail\">\r\n\t\t\t\t\t<CometChatAvatar user={this.props.message.sender} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tname = (\r\n\t\t\t\t<div css={nameWrapperStyle(avatar)} className=\"message__name__wrapper\">\r\n\t\t\t\t\t<span css={nameStyle(this.context)} className=\"message__name\">\r\n\t\t\t\t\t\t{this.props.message.sender.name}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\tconst documentTitle = `${this.props.message.sender.name} ${Translator.translate(\"SHARED_COLLABORATIVE_DOCUMENT\", this.context.language)}`;\r\n\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"receiver__message__container message__document\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t{avatar}\r\n\t\t\t\t\t<div css={messageDetailStyle()} className=\"message__details\">\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t{toolTipView}\r\n\t\t\t\t\t\t<div css={messageTxtContainerStyle()} className=\"message__document__container\">\r\n\t\t\t\t\t\t\t<div css={messageTxtWrapperStyle(this.context)} className=\"message__document__wrapper\">\r\n\t\t\t\t\t\t\t\t<div css={messageTxtTitleStyle(this.context)} className=\"message__document__title\">\r\n\t\t\t\t\t\t\t\t\t<i css={iconStyle(documentIcon, this.context)} title={Translator.translate(\"COLLABORATIVE_DOCUMENT\", this.context.language)}></i>\r\n\t\t\t\t\t\t\t\t\t<p css={messageTxtStyle()} className=\"document__title\">\r\n\t\t\t\t\t\t\t\t\t\t{documentTitle}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<ul css={messageBtnStyle(this.context)} className=\"document__button\">\r\n\t\t\t\t\t\t\t\t\t<li onClick={this.launchCollaborativeDocument}>\r\n\t\t\t\t\t\t\t\t\t\t<p>{Translator.translate(\"JOIN\", this.context.language)}</p>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatReceiverDocumentBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatReceiverDocumentBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatReceiverDocumentBubble };\r\n","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"65%\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageThumbnailStyle = () => {\r\n\r\n    return {\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        margin: \"10px 5px\",\r\n        float: \"left\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageDetailStyle = () => {\r\n\r\n    return {\r\n        flex: \"1 1\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    }\r\n}\r\n\r\nexport const nameWrapperStyle = (avatar) => {\r\n\r\n    const paddingValue = (avatar) ? {\r\n        padding: \"3px 5px\",\r\n    } : {};\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        ...paddingValue\r\n    }\r\n}\r\n\r\nexport const nameStyle = context => {\r\n\r\n\treturn {\r\n\t\tfontSize: \"11px\",\r\n\t\tcolor: `${context.theme.color.search}`,\r\n\t};\r\n};\r\n\r\nexport const messageTxtContainerStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageTxtWrapperStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tborderRadius: \"12px\",\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.secondary}`,\r\n\t\tpadding: \"8px 16px\",\r\n\t\talignSelf: \"flex-start\",\r\n\t\twidth: \"100%\",\r\n\t};\r\n};\r\n\r\nexport const pollQuestionStyle = () => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        whiteSpace: \"pre-wrap\",\r\n        wordWrap: \"break-word\",\r\n        textAlign: \"left\",\r\n        width: \"100%\",\r\n        fontSize: \"14px\",\r\n    }\r\n}\r\n\r\nexport const pollAnswerStyle = context => {\r\n\r\n\treturn {\r\n\t\tlistStyleType: \"none\",\r\n\t\tpadding: \"0\",\r\n\t\tmargin: \"0\",\r\n\t\tli: {\r\n\t\t\tbackgroundColor: `${context.theme.backgroundColor.white}`,\r\n\t\t\tmargin: \"10px 0\",\r\n\t\t\tborderRadius: \"8px\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\tcursor: \"pointer\",\r\n\t\t\tposition: \"relative\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const pollTotalStyle = () => {\r\n\r\n    return {\r\n        fontSize: \"13px\",\r\n        margin: \"0\",\r\n        alignSelf: \"flex-end\"\r\n    }\r\n}\r\n\r\nexport const pollPercentStyle = (context, width) => {\r\n\r\n    const curvedBorders = (width === \"100%\") ? { borderRadius: \"8px\" } : {\r\n        borderRadius: \"8px 0 0 8px\"\r\n    };\r\n\r\n    return {\r\n        maxWidth: \"100%\",\r\n        width: width,\r\n        ...curvedBorders,\r\n        backgroundColor: `${context.theme.backgroundColor.primary}`,\r\n        minHeight: \"35px\",\r\n        height: \"100%\",\r\n        position: \"absolute\",\r\n        zIndex: \"1\",\r\n    }\r\n}\r\n\r\nexport const answerWrapperStyle = (state, optionData, context) => {\r\n\r\n\tlet countPadding = \"0px 16px 0px 0px\";\r\n    let widthProp = \"calc(100% - 40px)\";\r\n\tif (optionData.hasOwnProperty(\"voters\") && optionData.voters.hasOwnProperty(state?.loggedInUser?.uid)) {\r\n\t\t//countPadding = \"0px 8px\";\r\n\t\twidthProp = \"calc(100% - 40px)\";\r\n\t}\r\n\r\n\treturn {\r\n\t\twidth: \"100%\",\r\n\t\tcolor: `${context.theme.color.primary}`,\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tminHeight: \"35px\",\r\n        padding: \"0 16px\",\r\n\t\theight: \"100%\",\r\n\t\tzIndex: \"2\",\r\n\t\tp: {\r\n\t\t\tmargin: \"0\",\r\n\t\t\twidth: widthProp,\r\n\t\t\twhiteSpace: \"pre-wrap\",\r\n\t\t\twordWrap: \"break-word\",\r\n\t\t\tfontSize: \"14px\",\r\n\t\t},\r\n\t\tspan: {\r\n\t\t\tmaxWidth: \"40px\",\r\n\t\t\tpadding: countPadding,\r\n\t\t\tfontWeight: \"bold\",\r\n\t\t\tdisplay: \"inline-block\",\r\n\t\t\tfontSize: \"13px\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const checkIconStyle = (img, context) => {\r\n\r\n\treturn {\r\n\t\twidth: \"24px\",\r\n\t\theight: \"24px\",\r\n\t\tmask: `url(${img}) center center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.secondaryTextColor}`,\r\n\t};\r\n};\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        padding: \"4px 8px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"flex-start\",\r\n        height: \"25px\"\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-start\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-start\",\r\n        minHeight: \"36px\",\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/checkmark.1fc22517.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../../\";\r\nimport { CometChatMessageReactions } from \"../\";\r\nimport { CometChatAvatar } from \"../../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../../util/CometChatContext\";\r\nimport { checkMessageForExtensionsData } from \"../../../../util/common\";\r\nimport * as enums from \"../../../../util/enums.js\";\r\n\r\nimport { theme } from \"../../../../resources/theme\";\r\nimport Translator from \"../../../../resources/localization/translator\";\r\n\r\nimport {\r\n    messageContainerStyle,\r\n    messageWrapperStyle,\r\n    messageThumbnailStyle,\r\n    messageDetailStyle,\r\n    nameWrapperStyle,\r\n    nameStyle,\r\n    messageTxtContainerStyle,\r\n    messageTxtWrapperStyle,\r\n    pollQuestionStyle,\r\n    pollAnswerStyle,\r\n    pollPercentStyle,\r\n    answerWrapperStyle,\r\n    checkIconStyle,\r\n    pollTotalStyle,\r\n    messageInfoWrapperStyle,\r\n    messageReactionsWrapperStyle\r\n} from \"./style\";\r\n\r\n\r\nimport checkImg from \"./resources/checkmark.svg\";\r\n\r\nclass CometChatReceiverPollMessageBubble extends React.Component {\r\n\tpollId;\r\n\tstatic contextType = CometChatContext;\r\n\tloggedInUser;\r\n\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisHovering: false,\r\n\t\t\tloggedInUser: null\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tthis.context.getLoggedinUser().then(user => {\r\n\t\t\tthis.setState({ loggedInUser: {...user} });\r\n\t\t});\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n        \r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n        || this.state.isHovering !== nextState.isHovering) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tanswerPollQuestion = (event, selectedOption) => {\r\n\t\tCometChat.callExtension(\"polls\", \"POST\", \"v2/vote\", {\r\n\t\t\tvote: selectedOption,\r\n\t\t\tid: this.pollId,\r\n\t\t})\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response.hasOwnProperty(\"success\") === false || (response.hasOwnProperty(\"success\") && response[\"success\"] === false)) {\r\n\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\");\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => this.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\"));\r\n\t};\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst pollExtensionData = checkMessageForExtensionsData(this.props.message, \"polls\");\r\n\t\tif (!pollExtensionData) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t// if (!this.props.message.hasOwnProperty(\"metadata\")) {\r\n\t\t//     return null;\r\n\t\t// }\r\n\r\n\t\t// if (!this.props.message.metadata.hasOwnProperty(\"@injected\")) {\r\n\t\t//     return null;\r\n\t\t// }\r\n\r\n\t\t// if (!this.props.message.metadata[\"@injected\"].hasOwnProperty(\"extensions\")) {\r\n\t\t//     return null;\r\n\t\t// }\r\n\r\n\t\t// if (!this.props.message.metadata[\"@injected\"][\"extensions\"].hasOwnProperty(\"polls\")) {\r\n\t\t//     return null;\r\n\t\t// }\r\n\r\n\t\tlet avatar = null,\r\n\t\t\tname = null;\r\n\t\tif (this.props.message.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\t\tavatar = (\r\n\t\t\t\t<div css={messageThumbnailStyle} className=\"message__thumbnail\">\r\n\t\t\t\t\t<CometChatAvatar user={this.props.message.sender} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tname = (\r\n\t\t\t\t<div css={nameWrapperStyle(avatar)} className=\"message__name__wrapper\">\r\n\t\t\t\t\t<span css={nameStyle(this.context)} className=\"message__name\">\r\n\t\t\t\t\t\t{this.props.message.sender.name}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst pollOptions = [];\r\n\t\t//const pollExtensionData = this.props.message.metadata[\"@injected\"][\"extensions\"][\"polls\"];\r\n\r\n\t\tthis.pollId = pollExtensionData.id;\r\n\t\tconst total = pollExtensionData.results.total;\r\n\t\tlet totalText = Translator.translate(\"NO_VOTE\", this.context.language);\r\n\r\n\t\tif (total === 1) {\r\n\t\t\ttotalText = `${total} ${Translator.translate(\"VOTE\", this.context.language)}`;\r\n\t\t} else if (total > 1) {\r\n\t\t\ttotalText = `${total} ${Translator.translate(\"VOTES\", this.context.language)}`;\r\n\t\t}\r\n\r\n\t\tfor (const option in pollExtensionData.options) {\r\n\t\t\tconst optionData = pollExtensionData.results.options[option];\r\n\t\t\tconst vote = optionData[\"count\"];\r\n\r\n\t\t\tlet width = \"0%\";\r\n\t\t\tif (total) {\r\n\t\t\t\tconst fraction = vote / total;\r\n\t\t\t\twidth = fraction.toLocaleString(\"en\", { style: \"percent\" });\r\n\t\t\t}\r\n\r\n\t\t\tlet checkIcon = null;\r\n\t\t\tif (optionData.hasOwnProperty(\"voters\") && optionData.voters.hasOwnProperty(this.loggedInUser?.uid)) {\r\n\t\t\t\tcheckIcon = <i css={checkIconStyle(checkImg, this.context)}></i>;\r\n\t\t\t}\r\n\r\n\t\t\tconst template = (\r\n\t\t\t\t<li key={option} onClick={event => this.answerPollQuestion(event, option)}>\r\n\t\t\t\t\t<div css={pollPercentStyle(this.context, width)}> </div>\r\n\t\t\t\t\t<div css={answerWrapperStyle(this.state, optionData, this.context)}>\r\n\t\t\t\t\t\t{checkIcon}\r\n\t\t\t\t\t\t<span>{width}</span>\r\n\t\t\t\t\t\t<p>{optionData.text}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t);\r\n\t\t\tpollOptions.push(template);\r\n\t\t}\r\n\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"receiver__message__container message__poll\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t{avatar}\r\n\t\t\t\t\t<div css={messageDetailStyle()} className=\"message__details\">\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t{toolTipView}\r\n\t\t\t\t\t\t<div css={messageTxtContainerStyle()} className=\"message__poll__container\">\r\n\t\t\t\t\t\t\t<div css={messageTxtWrapperStyle(this.context)} className=\"message__poll__wrapper\">\r\n\t\t\t\t\t\t\t\t<p css={pollQuestionStyle()} className=\"poll__question\">\r\n\t\t\t\t\t\t\t\t\t{pollExtensionData.question}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<ul css={pollAnswerStyle(this.context)} className=\"poll__options\">\r\n\t\t\t\t\t\t\t\t\t{pollOptions}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t<p css={pollTotalStyle()} className=\"poll__votes\">\r\n\t\t\t\t\t\t\t\t\t{totalText}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatReceiverPollMessageBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatReceiverPollMessageBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatReceiverPollMessageBubble };","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"65%\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageThumbnailStyle = () => {\r\n\r\n    return {\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        margin: \"10px 5px\",\r\n        float: \"left\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageDetailStyle = () => {\r\n\r\n    return {\r\n        flex: \"1 1\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    }\r\n}\r\n\r\nexport const nameWrapperStyle = (avatar) => {\r\n\r\n    const paddingValue = (avatar) ? {\r\n        padding: \"3px 5px\",\r\n    } : {};\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        ...paddingValue\r\n    }\r\n}\r\n\r\nexport const nameStyle = context => {\r\n\r\n\treturn {\r\n\t\tfontSize: \"11px\",\r\n\t\tcolor: `${context.theme.color.search}`,\r\n\t};\r\n};\r\n\r\nexport const messageImgContainerStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageImgWrapperStyle = context => {\r\n\r\n\tconst mq = [...context.theme.breakPoints];\r\n\r\n\treturn {\r\n\t\tdisplay: \"inline-block\",\r\n\t\talignSelf: \"flex-start\",\r\n\t\tmaxWidth: \"128px\",\r\n\t\theight: \"128px\",\r\n\t\tcursor: \"pointer\",\r\n\t\t[`@media ${mq[1]}, ${mq[2]}`]: {\r\n\t\t\tmaxWidth: \"128px\",\r\n\t\t\theight: \"128px\",\r\n\t\t\tpadding: \"2px 2px\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        padding: \"4px 8px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"flex-start\",\r\n        height: \"25px\"\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-start\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-start\",\r\n        minHeight: \"36px\",\r\n    }\r\n}\r\n","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../../\";\r\nimport { CometChatMessageReactions } from \"../\";\r\nimport { CometChatAvatar } from \"../../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../../util/CometChatContext\";\r\nimport { checkMessageForExtensionsData } from \"../../../../util/common\";\r\n\r\nimport { theme } from \"../../../../resources/theme\";\r\nimport Translator from \"../../../../resources/localization/translator\";\r\n\r\nimport {\r\n    messageContainerStyle,\r\n    messageWrapperStyle,\r\n    messageThumbnailStyle,\r\n    messageDetailStyle,\r\n    nameWrapperStyle,\r\n    nameStyle,\r\n    messageImgContainerStyle,\r\n    messageImgWrapperStyle,\r\n    messageInfoWrapperStyle,\r\n    messageReactionsWrapperStyle\r\n} from \"./style\";\r\n\r\nclass CometChatReceiverStickerMessageBubble extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisHovering: false,\r\n\t\t};\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n        || this.state.isHovering !== nextState.isHovering) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet avatar = null,\r\n\t\t\tname = null;\r\n\t\tif (this.props.message.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\t\tavatar = (\r\n\t\t\t\t<div css={messageThumbnailStyle()} className=\"message__thumbnail\">\r\n\t\t\t\t\t<CometChatAvatar user={this.props.message.sender} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tname = (\r\n\t\t\t\t<div css={nameWrapperStyle(avatar)} className=\"message__name__wrapper\">\r\n\t\t\t\t\t<span css={nameStyle(this.context)} className=\"message__name\">\r\n\t\t\t\t\t\t{this.props.message.sender.name}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet stickerData = null;\r\n\t\tlet stickerImg = null;\r\n\t\tif (this.props.message.hasOwnProperty(\"data\") && this.props.message.data.hasOwnProperty(\"customData\")) {\r\n\t\t\tstickerData = this.props.message.data.customData;\r\n\r\n\t\t\tif (stickerData.hasOwnProperty(\"sticker_url\")) {\r\n\t\t\t\tconst stickerName = stickerData.hasOwnProperty(\"sticker_name\") ? stickerData.sticker_name : Translator.translate(\"STICKER\", this.context.language);\r\n\t\t\t\tstickerImg = <img src={stickerData.sticker_url} alt={stickerName} />;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"receiver__message__container message__sticker\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t{avatar}\r\n\t\t\t\t\t<div css={messageDetailStyle(name)} className=\"message__details\">\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t{toolTipView}\r\n\t\t\t\t\t\t<div css={messageImgContainerStyle()} className=\"message__image__container\">\r\n\t\t\t\t\t\t\t<div css={messageImgWrapperStyle(this.context)} className=\"message__image__wrapper\">\r\n\t\t\t\t\t\t\t\t{stickerImg}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatReceiverStickerMessageBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatReceiverStickerMessageBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatReceiverStickerMessageBubble };","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"305px\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageThumbnailStyle = () => {\r\n\r\n    return {\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        margin: \"10px 5px\",\r\n        float: \"left\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageDetailStyle = () => {\r\n\r\n    return {\r\n        flex: \"1 1\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    }\r\n}\r\n\r\nexport const nameWrapperStyle = (avatar) => {\r\n\r\n    const paddingValue = (avatar) ? {\r\n        padding: \"3px 5px\",\r\n    } : {};\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        ...paddingValue\r\n    }\r\n}\r\n\r\nexport const nameStyle = context => {\r\n\r\n\treturn {\r\n\t\tfontSize: \"11px\",\r\n\t\tcolor: `${context.theme.color.search}`,\r\n\t};\r\n};\r\n\r\nexport const messageTxtContainerStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageTxtWrapperStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tborderRadius: \"12px\",\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.secondary}`,\r\n\t\tpadding: \"16px\",\r\n\t\talignSelf: \"flex-start\",\r\n\t\twidth: \"100%\",\r\n\t};\r\n};\r\n\r\nexport const messageTxtTitleStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t\tcolor: `${context.theme.color.primary}`,\r\n\t};\r\n};\r\n\r\nexport const messageTxtStyle = () => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        whiteSpace: \"pre-wrap\",\r\n        wordWrap: \"break-word\",\r\n        textAlign: \"left\",\r\n        width: \"calc(100% - 24px)\",\r\n        fontSize: \"14px\",\r\n        marginLeft: \"8px\"\r\n    }\r\n}\r\n\r\nexport const iconStyle = (img, context) => {\r\n\treturn {\r\n\t\twidth: \"24px\",\r\n\t\theight: \"24px\",\r\n\t\tdisplay: \"inline-block\",\r\n\t\tmask: `url(${img}) center center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.primaryColor}`,\r\n\t};\r\n};\r\n\r\nexport const messageBtnStyle = context => {\r\n\r\n\treturn {\r\n\t\tlistStyleType: \"none\",\r\n\t\tpadding: \"0\",\r\n\t\tmargin: \"0\",\r\n\t\tli: {\r\n\t\t\tbackgroundColor: `${context.theme.backgroundColor.white}`,\r\n\t\t\tborderRadius: \"8px\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\tcursor: \"pointer\",\r\n\t\t\tposition: \"relative\",\r\n\t\t\tmargin: \"16px 0 0 0\",\r\n\t\t\tpadding: \"8px\",\r\n\t\t\t\"> p\": {\r\n\t\t\t\tbackground: \"0 0\",\r\n\t\t\t\ttextAlign: \"center\",\r\n\t\t\t\tcolor: `${context.theme.primaryColor}`,\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\tdisplay: \"inline-block\",\r\n\t\t\t\tfontSize: \"14px\",\r\n\t\t\t\tfontWeight: \"600\",\r\n\t\t\t\tmargin: \"0\",\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n};\r\n\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        padding: \"4px 8px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"flex-start\",\r\n        height: \"25px\"\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-start\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-start\",\r\n        minHeight: \"36px\",\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/collaborative-whiteboard.f65dc14f.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../../\";\r\nimport { CometChatMessageReactions } from \"../\";\r\nimport { CometChatAvatar } from \"../../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../../util/CometChatContext\";\r\nimport { checkMessageForExtensionsData } from \"../../../../util/common\";\r\n\r\nimport { theme } from \"../../../../resources/theme\";\r\nimport Translator from \"../../../../resources/localization/translator\";\r\n\r\nimport {\r\n\tmessageContainerStyle,\r\n\tmessageWrapperStyle,\r\n\tmessageThumbnailStyle,\r\n\tmessageDetailStyle,\r\n\tnameWrapperStyle,\r\n\tnameStyle,\r\n\tmessageTxtContainerStyle,\r\n\tmessageTxtWrapperStyle,\r\n\tmessageTxtTitleStyle,\r\n\tmessageTxtStyle,\r\n\tmessageBtnStyle,\r\n\tmessageInfoWrapperStyle,\r\n\tmessageReactionsWrapperStyle,\r\n\ticonStyle,\r\n} from \"./style\";\r\n\r\nimport whiteboardIcon from \"./resources/collaborative-whiteboard.svg\";\r\n\r\nclass CometChatReceiverWhiteboardBubble extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\tloggedInUser;\r\n\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisHovering: false,\r\n\t\t};\r\n\r\n\t\tthis.context.getLoggedinUser().then(user => {\r\n\t\t\tthis.loggedInUser = { ...user };\r\n\t\t});\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr || this.state.isHovering !== nextState.isHovering) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tlaunchCollaborativeWhiteboard = () => {\r\n\t\tlet whiteboardUrl = null;\r\n\t\tlet whiteboardData = checkMessageForExtensionsData(this.props.message, \"whiteboard\");\r\n\t\tif (whiteboardData && whiteboardData.hasOwnProperty(\"board_url\") && whiteboardData.board_url.length) {\r\n\t\t\tlet username = this.loggedInUser?.name.split(\" \").join(\"_\");\r\n\t\t\t// Appending the username to the board_url\r\n\t\t\twhiteboardUrl = whiteboardData.board_url + \"&username=\" + username;\r\n\t\t\twindow.open(whiteboardUrl, \"\", \"fullscreen=yes, scrollbars=auto\");\r\n\t\t}\r\n\t};\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet avatar = null,\r\n\t\t\tname = null;\r\n\t\tif (this.props.message.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\t\tavatar = (\r\n\t\t\t\t<div css={messageThumbnailStyle} className=\"message__thumbnail\">\r\n\t\t\t\t\t<CometChatAvatar user={this.props.message.sender} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tname = (\r\n\t\t\t\t<div css={nameWrapperStyle(avatar)} className=\"message__name__wrapper\">\r\n\t\t\t\t\t<span css={nameStyle(this.context)} className=\"message__name\">\r\n\t\t\t\t\t\t{this.props.message.sender.name}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\tconst documentTitle = `${this.props.message.sender.name} ${Translator.translate(\"SHARED_COLLABORATIVE_WHITEBOARD\", this.context.language)}`;\r\n\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"receiver__message__container message__whiteboard\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t{avatar}\r\n\t\t\t\t\t<div css={messageDetailStyle()} className=\"message__details\">\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t{toolTipView}\r\n\t\t\t\t\t\t<div css={messageTxtContainerStyle()} className=\"message__whiteboard__container\">\r\n\t\t\t\t\t\t\t<div css={messageTxtWrapperStyle(this.context)} className=\"message__whiteboard__wrapper\">\r\n\t\t\t\t\t\t\t\t<div css={messageTxtTitleStyle(this.context)} className=\"message__whiteboard__title\">\r\n\t\t\t\t\t\t\t\t\t<i css={iconStyle(whiteboardIcon, this.context)} title={Translator.translate(\"COLLABORATIVE_WHITEBOARD\", this.context.language)}></i>\r\n\t\t\t\t\t\t\t\t\t<p css={messageTxtStyle()} className=\"whiteboard__title\">\r\n\t\t\t\t\t\t\t\t\t\t{documentTitle}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<ul css={messageBtnStyle(this.context)} className=\"whiteboard__button\">\r\n\t\t\t\t\t\t\t\t\t<li onClick={this.launchCollaborativeWhiteboard}>\r\n\t\t\t\t\t\t\t\t\t\t<p>{Translator.translate(\"JOIN\", this.context.language)}</p>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatReceiverWhiteboardBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatReceiverWhiteboardBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatReceiverWhiteboardBubble };","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"305px\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageTxtWrapperStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"inline-block\",\r\n\t\tborderRadius: \"12px\",\r\n\t\tbackgroundColor: `${context.theme.primaryColor}`,\r\n\t\tcolor: `${context.theme.color.white}`,\r\n\t\tpadding: \"16px\",\r\n\t\talignSelf: \"flex-end\",\r\n\t\twidth: \"auto\",\r\n\t};\r\n};\r\n\r\nexport const messageTxtContainerStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\"\r\n    }\r\n}\r\n\r\nexport const messageTxtStyle = () => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        whiteSpace: \"pre-wrap\",\r\n        wordBreak: \"break-word\",\r\n        textAlign: \"left\",\r\n        width: \"calc(100% - 24px)\",\r\n        fontSize: \"14px\",\r\n        marginLeft: \"8px\"\r\n    }\r\n}\r\n\r\nexport const iconStyle = (img, context) => {\r\n\treturn {\r\n\t\twidth: \"24px\",\r\n\t\theight: \"24px\",\r\n\t\tdisplay: \"inline-block\",\r\n\t\tmask: `url(${img}) center center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.color.white}`,\r\n\t};\r\n};\r\n\r\nexport const messageBtnStyle = context => {\r\n\r\n\treturn {\r\n\t\tlistStyleType: \"none\",\r\n\t\tpadding: \"0\",\r\n\t\tmargin: \"0\",\r\n\t\twidth: \"100%\",\r\n\t\tli: {\r\n\t\t\tbackgroundColor: `${context.theme.backgroundColor.white}`,\r\n\t\t\tborderRadius: \"8px\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\tposition: \"relative\",\r\n\t\t\tmargin: \"16px 0 0 0\",\r\n\t\t\tpadding: \"8px\",\r\n\t\t\tcursor: \"pointer\",\r\n\t\t\t\"> p\": {\r\n\t\t\t\tbackground: \"0 0\",\r\n\t\t\t\ttextAlign: \"center\",\r\n\t\t\t\tcolor: `${context.theme.primaryColor}`,\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\tfontWeight: \"600\",\r\n\t\t\t\tdisplay: \"inline-block\",\r\n\t\t\t\tfontSize: \"14px\",\r\n\t\t\t\tmargin: \"0\",\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n        justifyContent: \"flex-end\",\r\n        alignItems: \"center\",\r\n        padding: \"4px 8px\",\r\n        height: \"25px\",\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-end\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-end\",\r\n        minHeight: \"36px\",\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/collaborative-document.0434e615.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../../\";\r\nimport { CometChatMessageReactions } from \"../\";\r\n\r\nimport { CometChatContext } from \"../../../../util/CometChatContext\";\r\nimport { checkMessageForExtensionsData } from \"../../../../util/common\";\r\n\r\nimport { theme } from \"../../../../resources/theme\";\r\nimport Translator from \"../../../../resources/localization/translator\";\r\n\r\nimport {\r\n    messageContainerStyle,\r\n    messageWrapperStyle,\r\n    messageTxtWrapperStyle,\r\n    messageTxtContainerStyle,\r\n    messageTxtStyle,\r\n    messageBtnStyle,\r\n    messageInfoWrapperStyle,\r\n    messageReactionsWrapperStyle,\r\n    iconStyle,\r\n} from \"./style\";\r\n\r\nimport documentIcon from \"./resources/collaborative-document.svg\";\r\n\r\nclass CometChatSenderDocumentBubble extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisHovering: false,\r\n\t\t};\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n        || this.state.isHovering !== nextState.isHovering) {\r\n            \r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tlaunchCollaborativeDocument = () => {\r\n\t\tlet documentUrl = null;\r\n\t\tlet documentData = checkMessageForExtensionsData(this.props.message, \"document\");\r\n\t\tif (documentData && documentData.hasOwnProperty(\"document_url\") && documentData.document_url.length) {\r\n\t\t\tdocumentUrl = documentData.document_url;\r\n\t\t\twindow.open(documentUrl, \"\", \"fullscreen=yes, scrollbars=auto\");\r\n\t\t}\r\n\t};\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\tconst documentTitle = Translator.translate(\"CREATED_DOCUMENT\", this.context.language);\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"sender__message__container message__document\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t{toolTipView}\r\n\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t<div css={messageTxtWrapperStyle(this.context)} className=\"message__document__wrapper\">\r\n\t\t\t\t\t\t<div css={messageTxtContainerStyle()} className=\"message__document__container\">\r\n\t\t\t\t\t\t\t<i css={iconStyle(documentIcon, this.context)} title={Translator.translate(\"COLLABORATIVE_DOCUMENT\", this.context.language)}></i>\r\n\t\t\t\t\t\t\t<p css={messageTxtStyle()} className=\"document__title\">\r\n\t\t\t\t\t\t\t\t{documentTitle}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ul css={messageBtnStyle(this.context)} className=\"document__button\">\r\n\t\t\t\t\t\t\t<li onClick={this.launchCollaborativeDocument}>\r\n\t\t\t\t\t\t\t\t<p>{Translator.translate(\"LAUNCH\", this.context.language)}</p>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatSenderDocumentBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatSenderDocumentBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatSenderDocumentBubble };\r\n","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"65%\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageTxtWrapperStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"inline-block\",\r\n\t\tborderRadius: \"12px\",\r\n\t\tbackgroundColor: `${context.theme.primaryColor}`,\r\n\t\tcolor: `${context.theme.color.white}`,\r\n\t\tpadding: \"8px 16px\",\r\n\t\talignSelf: \"flex-end\",\r\n\t\twidth: \"auto\",\r\n\t};\r\n};\r\n\r\nexport const pollQuestionStyle = () => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        whiteSpace: \"pre-wrap\",\r\n        wordWrap: \"break-word\",\r\n        textAlign: \"left\",\r\n        width: \"100%\",\r\n        fontSize: \"14px\",\r\n    }\r\n}\r\n\r\nexport const pollAnswerStyle = context => {\r\n\r\n\treturn {\r\n\t\tlistStyleType: \"none\",\r\n\t\tpadding: \"0\",\r\n\t\tmargin: \"0\",\r\n\t\twidth: \"100%\",\r\n\t\tli: {\r\n\t\t\tbackgroundColor: `${context.theme.backgroundColor.white}`,\r\n\t\t\tmargin: \"10px 0\",\r\n\t\t\tborderRadius: \"8px\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\tposition: \"relative\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const pollTotalStyle = () => {\r\n\r\n    return {\r\n        fontSize: \"13px\",\r\n        margin: \"0\",\r\n        alignSelf: \"flex-end\"\r\n    }\r\n}\r\n\r\nexport const pollPercentStyle = (context, width) => {\r\n\r\n    const curvedBorders = (width === \"100%\") ? { borderRadius: \"8px\" } : {\r\n        borderRadius: \"8px 0 0 8px\"\r\n    };\r\n\r\n    return {\r\n        maxWidth: \"100%\",\r\n        width: width,\r\n        ...curvedBorders,\r\n        backgroundColor: `${context.theme.backgroundColor.primary}`,\r\n        minHeight: \"35px\",\r\n        height: \"100%\",\r\n        position: \"absolute\",\r\n        zIndex: \"1\",\r\n    }\r\n}\r\n\r\nexport const answerWrapperStyle = (context, width) => {\r\n\r\n    return {\r\n        width: \"100%\",\r\n        color: `${context.theme.color.primary}`,\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        minHeight: \"35px\",\r\n        padding: \"0 16px\",\r\n        height: \"100%\",\r\n        zIndex: \"2\",\r\n        \"p\": {\r\n            margin: \"0\",\r\n            width: \"calc(100% - 40px)\",\r\n            whiteSpace: \"pre-wrap\",\r\n            wordWrap: \"break-word\",\r\n            fontSize: \"14px\",\r\n        },\r\n        \"span\": {\r\n            maxWidth: \"40px\",\r\n            padding: \"0px 16px 0px 0px\",\r\n            fontWeight: \"bold\",\r\n            display: \"inline-block\",\r\n            fontSize: \"13px\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n        justifyContent: \"flex-end\",\r\n        alignItems: \"center\",\r\n        padding: \"4px 8px\",\r\n        height: \"25px\",\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-end\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-end\",\r\n        minHeight: \"36px\",\r\n    }\r\n}\r\n","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../../\";\r\nimport { CometChatMessageReactions } from \"../\";\r\n\r\nimport { CometChatContext } from \"../../../../util/CometChatContext\";\r\nimport { checkMessageForExtensionsData } from \"../../../../util/common\";\r\n\r\nimport { theme } from \"../../../../resources/theme\";\r\nimport Translator from \"../../../../resources/localization/translator\";\r\n\r\nimport {\r\n    messageContainerStyle,\r\n    messageWrapperStyle,\r\n    messageTxtWrapperStyle,\r\n    pollQuestionStyle,\r\n    pollAnswerStyle,\r\n    pollTotalStyle,\r\n    pollPercentStyle,\r\n    answerWrapperStyle,\r\n    messageInfoWrapperStyle,\r\n    messageReactionsWrapperStyle,\r\n} from \"./style\";\r\n\r\nclass CometChatSenderPollMessageBubble extends React.Component {\r\n\tpollId;\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisHovering: false,\r\n\t\t};\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n        || this.state.isHovering !== nextState.isHovering) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst pollExtensionData = checkMessageForExtensionsData(this.props.message, \"polls\");\r\n\t\tif (!pollExtensionData) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst pollOptions = [];\r\n\r\n\t\tthis.pollId = pollExtensionData.id;\r\n\t\tconst total = pollExtensionData.results.total;\r\n\t\tlet totalText = Translator.translate(\"NO_VOTE\", this.context.language);\r\n\r\n\t\tif (total === 1) {\r\n\t\t\ttotalText = `${total} ${Translator.translate(\"VOTE\", this.context.language)}`;\r\n\t\t} else if (total > 1) {\r\n\t\t\ttotalText = `${total} ${Translator.translate(\"VOTES\", this.context.language)}`;\r\n\t\t}\r\n\r\n\t\tfor (const option in pollExtensionData.results.options) {\r\n\t\t\tconst optionData = pollExtensionData.results.options[option];\r\n\t\t\tconst vote = optionData[\"count\"];\r\n\r\n\t\t\tlet width = \"0%\";\r\n\t\t\tif (total) {\r\n\t\t\t\tconst fraction = vote / total;\r\n\t\t\t\twidth = fraction.toLocaleString(\"en\", { style: \"percent\" });\r\n\t\t\t}\r\n\r\n\t\t\tconst template = (\r\n\t\t\t\t<li key={option}>\r\n\t\t\t\t\t<div css={pollPercentStyle(this.context, width)}> </div>\r\n\t\t\t\t\t<div css={answerWrapperStyle(this.context, width)}>\r\n\t\t\t\t\t\t<span>{width}</span>\r\n\t\t\t\t\t\t<p>{optionData.text}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t);\r\n\t\t\tpollOptions.push(template);\r\n\t\t}\r\n\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"sender__message__container message__poll\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t{toolTipView}\r\n\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t<div css={messageTxtWrapperStyle(this.context)} className=\"message__poll__wrapper\">\r\n\t\t\t\t\t\t<p css={pollQuestionStyle()} className=\"poll__question\">\r\n\t\t\t\t\t\t\t{pollExtensionData.question}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<ul css={pollAnswerStyle(this.context)} className=\"poll__options\">\r\n\t\t\t\t\t\t\t{pollOptions}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<p css={pollTotalStyle()} className=\"poll__votes\">\r\n\t\t\t\t\t\t\t{totalText}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatSenderPollMessageBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatSenderPollMessageBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatSenderPollMessageBubble };\r\n","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"65%\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageImgWrapper = context => {\r\n\r\n\tconst mq = [...context.theme.breakPoints];\r\n\r\n\treturn {\r\n\t\tdisplay: \"inline-block\",\r\n\t\talignSelf: \"flex-end\",\r\n\t\tmaxWidth: \"128px\",\r\n\t\theight: \"128px\",\r\n\t\tcursor: \"pointer\",\r\n\t\tflexShrink: \"0\",\r\n\t\t[`@media ${mq[1]}, ${mq[2]}`]: {\r\n\t\t\tmaxWidth: \"128px\",\r\n\t\t\theight: \"128px\",\r\n\t\t\tpadding: \"2px 2px\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n        justifyContent: \"flex-end\",\r\n        alignItems: \"center\",\r\n        padding: \"4px 8px\",\r\n        height: \"25px\",\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-end\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-end\",\r\n        minHeight: \"36px\",\r\n    }\r\n}\r\n","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../../\";\r\nimport { CometChatMessageReactions } from \"../\";\r\n\r\nimport { CometChatContext } from \"../../../../util/CometChatContext\";\r\nimport { checkMessageForExtensionsData } from \"../../../../util/common\";\r\n\r\nimport { theme } from \"../../../../resources/theme\";\r\nimport Translator from \"../../../../resources/localization/translator\";\r\n\r\nimport {\r\n    messageContainerStyle,\r\n    messageWrapperStyle,\r\n    messageImgWrapper,\r\n    messageInfoWrapperStyle,\r\n    messageReactionsWrapperStyle,\r\n} from \"./style\";\r\n\r\nclass CometChatSenderStickerBubble extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisHovering: false,\r\n\t\t};\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n\t\t|| this.state.isHovering !== nextState.isHovering) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet stickerData = null;\r\n\t\tlet stickerImg = null;\r\n\t\tif (this.props.message.hasOwnProperty(\"data\") && this.props.message.data.hasOwnProperty(\"customData\")) {\r\n\t\t\tstickerData = this.props.message.data.customData;\r\n\r\n\t\t\tif (stickerData.hasOwnProperty(\"sticker_url\")) {\r\n\t\t\t\tconst stickerName = stickerData.hasOwnProperty(\"sticker_name\") ? stickerData.sticker_name : Translator.translate(\"STICKER\", this.context.language);\r\n\t\t\t\tstickerImg = <img src={stickerData.sticker_url} alt={stickerName} />;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"sender__message__container message__sticker\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t{toolTipView}\r\n\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t<div css={messageImgWrapper(this.context)} className=\"message__img__wrapper\">\r\n\t\t\t\t\t\t{stickerImg}{\" \"}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatSenderStickerBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatSenderStickerBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatSenderStickerBubble };","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"305px\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageTxtWrapperStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"inline-block\",\r\n\t\tborderRadius: \"12px\",\r\n\t\tbackgroundColor: `${context.theme.primaryColor}`,\r\n\t\tcolor: `${context.theme.color.white}`,\r\n\t\tpadding: \"16px\",\r\n\t\talignSelf: \"flex-end\",\r\n\t\twidth: \"auto\",\r\n\t};\r\n};\r\n\r\nexport const messageTxtContainerStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        \"> img\": {\r\n            backgroundColor: \"white\"\r\n        }\r\n    }\r\n}\r\n\r\nexport const messageTxtStyle = () => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        whiteSpace: \"pre-wrap\",\r\n        wordBreak: \"break-word\",\r\n        textAlign: \"left\",\r\n        width: \"calc(100% - 24px)\",\r\n        fontSize: \"14px\",\r\n        paddingLeft: \"8px\"\r\n    }\r\n}\r\n\r\nexport const messageTxtIconStyle = (img, context) => {\r\n\r\n    return {\r\n        mask: `url(${img}) no-repeat left center`,\r\n        backgroundColor: `${context.theme.color.white}`,\r\n        width: \"24px\",\r\n        height: \"24px\"\r\n    }\r\n}\r\n\r\nexport const messageBtnStyle = context => {\r\n\r\n\treturn {\r\n\t\tlistStyleType: \"none\",\r\n\t\tpadding: \"0\",\r\n\t\tmargin: \"0\",\r\n\t\twidth: \"100%\",\r\n\t\tli: {\r\n\t\t\tbackgroundColor: `${context.theme.backgroundColor.white}`,\r\n\t\t\tborderRadius: \"8px\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\tposition: \"relative\",\r\n\t\t\tmargin: \"16px 0 0 0\",\r\n\t\t\tpadding: \"8px\",\r\n\t\t\tcursor: \"pointer\",\r\n\t\t\t\"> p\": {\r\n\t\t\t\tbackground: \"0 0\",\r\n\t\t\t\ttextAlign: \"center\",\r\n\t\t\t\tcolor: `${context.theme.primaryColor}`,\r\n\t\t\t\twidth: \"100%\",\r\n                fontWeight: \"600\",\r\n\t\t\t\tdisplay: \"inline-block\",\r\n\t\t\t\tfontSize: \"14px\",\r\n\t\t\t\tmargin: \"0\",\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n        justifyContent: \"flex-end\",\r\n        alignItems: \"center\",\r\n        padding: \"4px 8px\",\r\n        height: \"25px\",\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-end\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-end\",\r\n        minHeight: \"36px\",\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/collaborative-whiteboard.f65dc14f.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../../\";\r\nimport { CometChatMessageReactions } from \"../\";\r\n\r\nimport { CometChatContext } from \"../../../../util/CometChatContext\";\r\nimport { checkMessageForExtensionsData } from \"../../../../util/common\";\r\n\r\nimport { theme } from \"../../../../resources/theme\";\r\nimport Translator from \"../../../../resources/localization/translator\";\r\n\r\nimport {\r\n    messageContainerStyle,\r\n    messageWrapperStyle,\r\n    messageTxtWrapperStyle,\r\n    messageTxtContainerStyle,\r\n    messageTxtStyle,\r\n    messageTxtIconStyle,\r\n    messageBtnStyle,\r\n    messageInfoWrapperStyle,\r\n    messageReactionsWrapperStyle,\r\n} from \"./style\";\r\n\r\nimport whiteboardIcon from \"./resources/collaborative-whiteboard.svg\";\r\n\r\nclass CometChatSenderWhiteboardBubble extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\tloggedInUser;\r\n\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisHovering: false,\r\n\t\t};\r\n\r\n\t\tthis.context.getLoggedinUser().then(user => {\r\n\t\t\tthis.loggedInUser = { ...user };\r\n\t\t});\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr || this.state.isHovering !== nextState.isHovering) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tlaunchCollaborativeWhiteboard = () => {\r\n\t\tlet whiteboardUrl = null;\r\n\t\tlet whiteboardData = checkMessageForExtensionsData(this.props.message, \"whiteboard\");\r\n\t\tif (whiteboardData && whiteboardData.hasOwnProperty(\"board_url\") && whiteboardData.board_url.length) {\r\n\t\t\tlet username = this.loggedInUser?.name.split(\" \").join(\"_\");\r\n\t\t\t// Appending the username to the board_url\r\n\t\t\twhiteboardUrl = whiteboardData.board_url + \"&username=\" + username;\r\n\t\t\twindow.open(whiteboardUrl, \"\", \"fullscreen=yes, scrollbars=auto\");\r\n\t\t}\r\n\t};\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\tconst documentTitle = Translator.translate(\"CREATED_WHITEBOARD\", this.context.language);\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"sender__message__container message__whiteboard\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t{toolTipView}\r\n\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t<div css={messageTxtWrapperStyle(this.context)} className=\"message__whiteboard__wrapper\">\r\n\t\t\t\t\t\t<div css={messageTxtContainerStyle()} className=\"message__whiteboard__container\">\r\n\t\t\t\t\t\t\t<i css={messageTxtIconStyle(whiteboardIcon, this.context)}></i>\r\n\t\t\t\t\t\t\t<p css={messageTxtStyle()} className=\"document__title\">\r\n\t\t\t\t\t\t\t\t{documentTitle}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ul css={messageBtnStyle(this.context)} className=\"document__button\">\r\n\t\t\t\t\t\t\t<li onClick={this.launchCollaborativeWhiteboard}>\r\n\t\t\t\t\t\t\t\t<p>{Translator.translate(\"LAUNCH\", this.context.language)}</p>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatSenderWhiteboardBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatSenderWhiteboardBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatSenderWhiteboardBubble };","export const actionMessageStyle = () => {\r\n\r\n    return {\r\n        padding: \"8px 16px\",\r\n        marginBottom: \"16px\",\r\n        textAlign: \"center\",\r\n        height: \"36px\"\r\n    }\r\n}\r\n\r\nexport const actionMessageTxtStyle = () => {\r\n\r\n    return {\r\n        fontSize: \"13.5px\",\r\n        margin: \"0\",\r\n        lineHeight: \"20px\",\r\n    }\r\n}\r\n","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport { actionMessageStyle, actionMessageTxtStyle } from \"./style\"\r\n\r\nclass CometChatActionMessageBubble extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\tloggedInUser;\r\n\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\r\n\t\tthis.context.getLoggedinUser().then(user => {\r\n\t\t\tthis.loggedInUser = { ...user };\r\n\t\t});\r\n\t}\r\n\r\n\tgetCallActionMessage = message => {\r\n\t\tconst call = message;\r\n\t\tlet actionMessage = null;\r\n\r\n\t\tswitch (call.status) {\r\n\t\t\tcase CometChat.CALL_STATUS.INITIATED: {\r\n\t\t\t\tactionMessage = Translator.translate(\"CALL_INITIATED\", this.context.language);\r\n\t\t\t\tif (call.type === CometChat.CALL_TYPE.AUDIO) {\r\n\t\t\t\t\tif (call.receiverType === CometChat.RECEIVER_TYPE.USER) {\r\n\t\t\t\t\t\tactionMessage = call.callInitiator.uid === this.loggedInUser?.uid ? Translator.translate(\"OUTGOING_AUDIO_CALL\", this.context.language) : Translator.translate(\"INCOMING_AUDIO_CALL\", this.context.language);\r\n\t\t\t\t\t} else if (call.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\t\t\t\t\tif (call.action === CometChat.CALL_STATUS.INITIATED) {\r\n\t\t\t\t\t\t\tactionMessage = call.callInitiator.uid === this.loggedInUser?.uid ? Translator.translate(\"OUTGOING_AUDIO_CALL\", this.context.language) : Translator.translate(\"INCOMING_AUDIO_CALL\", this.context.language);\r\n\t\t\t\t\t\t} else if (call.action === CometChat.CALL_STATUS.REJECTED) {\r\n\t\t\t\t\t\t\tactionMessage = call.sender.uid === this.loggedInUser?.uid ? Translator.translate(\"CALL_REJECTED\", this.context.language) : `${call.sender.name} ${Translator.translate(\"REJECTED_CALL\", this.context.language)}`;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (call.type === CometChat.CALL_TYPE.VIDEO) {\r\n\t\t\t\t\tif (call.receiverType === CometChat.RECEIVER_TYPE.USER) {\r\n\t\t\t\t\t\tactionMessage = call.callInitiator.uid === this.loggedInUser?.uid ? Translator.translate(\"OUTGOING_VIDEO_CALL\", this.context.language) : Translator.translate(\"INCOMING_VIDEO_CALL\", this.context.language);\r\n\t\t\t\t\t} else if (call.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\t\t\t\t\tif (call.action === CometChat.CALL_STATUS.INITIATED) {\r\n\t\t\t\t\t\t\tactionMessage = call.callInitiator.uid === this.loggedInUser?.uid ? Translator.translate(\"OUTGOING_VIDEO_CALL\", this.context.language) : Translator.translate(\"INCOMING_VIDEO_CALL\", this.context.language);\r\n\t\t\t\t\t\t} else if (call.action === CometChat.CALL_STATUS.REJECTED) {\r\n\t\t\t\t\t\t\tactionMessage = call.sender.uid === this.loggedInUser?.uid ? Translator.translate(\"CALL_REJECTED\", this.context.language) : `${call.sender.name} ${Translator.translate(\"REJECTED_CALL\", this.context.language)}`;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase CometChat.CALL_STATUS.ONGOING: {\r\n\t\t\t\tif (call.receiverType === CometChat.RECEIVER_TYPE.USER) {\r\n\t\t\t\t\tactionMessage = Translator.translate(\"CALL_ACCEPTED\", this.context.language);\r\n\t\t\t\t} else if (call.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\t\t\t\tif (call.action === CometChat.CALL_STATUS.ONGOING) {\r\n\t\t\t\t\t\tactionMessage = call.sender.uid === this.loggedInUser?.uid ? Translator.translate(\"CALL_ACCEPTED\", this.context.language) : `${call.sender.name} ${Translator.translate(\"JOINED\", this.context.language)}`;\r\n\t\t\t\t\t} else if (call.action === CometChat.CALL_STATUS.REJECTED) {\r\n\t\t\t\t\t\tactionMessage = call.sender.uid === this.loggedInUser?.uid ? Translator.translate(\"CALL_REJECTED\", this.context.language) : `${call.sender.name} ${Translator.translate(\"REJECTED_CALL\", this.context.language)}`;\r\n\t\t\t\t\t} else if (call.action === \"left\") {\r\n\t\t\t\t\t\tif (call.sender.uid === this.loggedInUser?.uid) {\r\n\t\t\t\t\t\t\tactionMessage = `${Translator.translate(\"YOU\", this.context.language)} ${Translator.translate(\"LEFT_THE_CALL\", this.context.language)}`;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tactionMessage = `${call.sender.name} ${Translator.translate(\"LEFT_THE_CALL\", this.context.language)}`;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase CometChat.CALL_STATUS.UNANSWERED: {\r\n\t\t\t\tactionMessage = Translator.translate(\"CALL_UNANSWERED\", this.context.language);\r\n\r\n\t\t\t\tif (call.type === CometChat.CALL_TYPE.AUDIO && (call.receiverType === CometChat.RECEIVER_TYPE.USER || call.receiverType === CometChat.RECEIVER_TYPE.GROUP)) {\r\n\t\t\t\t\tactionMessage = call.callInitiator.uid === this.loggedInUser?.uid ? Translator.translate(\"UNANSWERED_AUDIO_CALL\", this.context.language) : Translator.translate(\"MISSED_AUDIO_CALL\", this.context.language);\r\n\t\t\t\t} else if (call.type === CometChat.CALL_TYPE.VIDEO && (call.receiverType === CometChat.RECEIVER_TYPE.USER || call.receiverType === CometChat.RECEIVER_TYPE.GROUP)) {\r\n\t\t\t\t\tactionMessage = call.callInitiator.uid === this.loggedInUser?.uid ? Translator.translate(\"UNANSWERED_VIDEO_CALL\", this.context.language) : Translator.translate(\"MISSED_VIDEO_CALL\", this.context.language);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase CometChat.CALL_STATUS.REJECTED:\r\n\t\t\t\tactionMessage = Translator.translate(\"CALL_REJECTED\", this.context.language);\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.CALL_STATUS.ENDED:\r\n\t\t\t\tactionMessage = Translator.translate(\"CALL_ENDED\", this.context.language);\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.CALL_STATUS.CANCELLED:\r\n\t\t\t\tactionMessage = Translator.translate(\"CALL_CANCELLED\", this.context.language);\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.CALL_STATUS.BUSY:\r\n\t\t\t\tactionMessage = Translator.translate(\"CALL_BUSY\", this.context.language);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn actionMessage;\r\n\t};\r\n\r\n\tgetActionMessage = message => {\r\n\t\tlet actionMessage = null;\r\n\r\n\t\tconst byUser = message?.actionBy?.name;\r\n\t\tconst onUser = message?.actionOn?.name;\r\n\r\n\t\tswitch (message.action) {\r\n\t\t\tcase CometChat.ACTION_TYPE.MEMBER_JOINED:\r\n\t\t\t\tactionMessage = `${byUser} ${Translator.translate(\"JOINED\", this.context.language)}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.ACTION_TYPE.MEMBER_LEFT:\r\n\t\t\t\tactionMessage = `${byUser} ${Translator.translate(\"LEFT\", this.context.language)}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.ACTION_TYPE.MEMBER_ADDED:\r\n\t\t\t\tactionMessage = `${byUser} ${Translator.translate(\"ADDED\", this.context.language)} ${onUser}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.ACTION_TYPE.MEMBER_KICKED:\r\n\t\t\t\tactionMessage = `${byUser} ${Translator.translate(\"KICKED\", this.context.language)} ${onUser}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.ACTION_TYPE.MEMBER_BANNED:\r\n\t\t\t\tactionMessage = `${byUser} ${Translator.translate(\"BANNED\", this.context.language)} ${onUser}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.ACTION_TYPE.MEMBER_UNBANNED:\r\n\t\t\t\tactionMessage = `${byUser} ${Translator.translate(\"UNBANNED\", this.context.language)} ${onUser}`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.ACTION_TYPE.MEMBER_SCOPE_CHANGED: {\r\n\t\t\t\tconst newScope = message?.newScope;\r\n\t\t\t\tactionMessage = `${byUser} ${Translator.translate(\"MADE\", this.context.language)} ${onUser} ${Translator.translate(newScope, this.context.language)}`;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn actionMessage;\r\n\t};\r\n\r\n\tgetMessage = message => {\r\n\t\tlet actionMessage = null;\r\n\r\n\t\tif (message.category === CometChat.CATEGORY_CALL) {\r\n\t\t\tactionMessage = this.getCallActionMessage(message);\r\n\t\t} else if (message.category === CometChat.CATEGORY_ACTION) {\r\n\t\t\tactionMessage = this.getActionMessage(message);\r\n\t\t}\r\n\r\n\t\treturn actionMessage;\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\t\t\t<div css={actionMessageStyle()} className=\"action__message\">\r\n\t\t\t\t<p css={actionMessageTxtStyle()}>{this.getMessage(this.props.message)}</p>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatActionMessageBubble.defaultProps = {\r\n    theme: theme,\r\n};\r\n\r\nCometChatActionMessageBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatActionMessageBubble };","import { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nexport const messageContainerStyle = (props, loggedInUser) => {\r\n\r\n    const alignment = (props.message?.sender?.uid === loggedInUser?.uid) ? {\r\n        alignSelf: \"flex-end\"\r\n    } : {\r\n        alignSelf: \"flex-start\"\r\n    };\r\n\r\n    return {\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"65%\",\r\n        clear: \"both\",\r\n        flexShrink: \"0\",\r\n        ...alignment\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = (props, loggedInUser) => {\r\n\r\n    const alignment = (props.message?.sender?.uid === loggedInUser?.uid) ? {\r\n        display: \"flex\",\r\n        flexDirection : \"column\",\r\n    } : {};\r\n\r\n    return {\r\n        flex: \"1 1\",\r\n        position: \"relative\",\r\n        width: \"100%\",\r\n        ...alignment\r\n    }\r\n}\r\n\r\nexport const messageTxtWrapperStyle = (props, context, loggedInUser) => {\r\n\r\n\r\n    const alignment = (props.message?.sender?.uid === loggedInUser?.uid) ? {\r\n        alignSelf: \"flex-end\",\r\n    } : {\r\n        alignSelf: \"flex-start\",\r\n    };\r\n\r\n    return {\r\n        display: \"inline-block\",\r\n        borderRadius: \"12px\",\r\n        padding: \"8px 12px\",\r\n        alignSelf: \"flex-end\",\r\n        Width: \"100%\",\r\n        backgroundColor: `${context.theme.backgroundColor.secondary}`,\r\n        fontStyle: \"italic\",\r\n        ...alignment\r\n    }\r\n}\r\n\r\nexport const messageTxtStyle = context => {\r\n\r\n\treturn {\r\n\t\tfontSize: \"14px!important\",\r\n\t\tmargin: \"0\",\r\n\t\tlineHeight: \"20px!important\",\r\n\t\tcolor: `${context.theme.color.helpText}`,\r\n\t};\r\n};\r\n\r\nexport const messageInfoWrapperStyle = (props, loggedInUser) => {\r\n\r\n    const alignment = (props.message?.sender?.uid === loggedInUser?.uid) ? {\r\n        alignSelf : \"flex-end\",\r\n    } : {\r\n        alignSelf: \"flex-start\",\r\n    };\r\n\r\n    return {\r\n        ...alignment,\r\n    }\r\n}\r\n\r\nexport const messageTimeStampStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"inline-block\",\r\n\t\tfontSize: \"11px\",\r\n\t\tfontWeight: 500,\r\n\t\tlineHeight: \"12px\",\r\n\t\ttextTransform: \"uppercase\",\r\n\t\tcolor: `${context.theme.color.helpText}`,\r\n\t};\r\n};\r\n\r\nexport const messageThumbnailStyle = () => {\r\n\r\n    return {\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        margin: \"12px 0\",\r\n        float: \"left\",\r\n    }\r\n}\r\n\r\nexport const messageDetailStyle = (props, loggedInUser) => {\r\n\r\n\tlet paddingSpace = {};\r\n\tif (props.message?.sender?.uid !== loggedInUser?.uid && props.message.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\tpaddingSpace = {\r\n\t\t\tpaddingLeft: \"5px\",\r\n\t\t};\r\n\t}\r\n\r\n\treturn {\r\n\t\tflex: \"1 1\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tposition: \"relative\",\r\n\t\t...paddingSpace,\r\n\t};\r\n};\r\n\r\nexport const nameWrapperStyle = (props, loggedInUser) => {\r\n\r\n\tlet paddingSpace = {};\r\n\tif (props.message?.sender?.uid !== loggedInUser?.uid && props.message.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\tpaddingSpace = {\r\n\t\t\tpadding: \"3px 5px\",\r\n\t\t};\r\n\t}\r\n\r\n\treturn {\r\n\t\talignSelf: \"flex-start\",\r\n\t\t...paddingSpace,\r\n\t};\r\n};\r\n\r\nexport const nameStyle = context => {\r\n\treturn {\r\n\t\tfontSize: \"10px\",\r\n\t\tcolor: `${context.theme.color.helpText}`,\r\n\t};\r\n};","import React, { useContext, useState, useEffect } from \"react\";\r\nimport dateFormat from \"dateformat\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatAvatar } from \"../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n    messageContainerStyle,\r\n    messageWrapperStyle,\r\n    messageTxtWrapperStyle,\r\n    messageTxtStyle,\r\n    messageInfoWrapperStyle,\r\n    messageTimeStampStyle,\r\n    messageThumbnailStyle,\r\n    messageDetailStyle,\r\n    nameWrapperStyle,\r\n    nameStyle\r\n} from \"./style\";\r\n\r\nconst CometChatDeleteMessageBubble = (props) => {\r\n\r\n    const context = useContext(CometChatContext);\r\n\r\n\tconst [loggedInUser, setLoggedInUser] = useState(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tcontext.getLoggedinUser().then(user => {\r\n\t\t\tsetLoggedInUser({ ...user });\r\n\t\t});\r\n\t}, [context]);\r\n\r\n    let message = null;\r\n    const messageDate = (props.message.sentAt * 1000);\r\n    if (props.message?.sender?.uid === loggedInUser?.uid) {\r\n\r\n\t\t\tmessage = (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<div css={messageTxtWrapperStyle(props, context, loggedInUser)} className=\"message__txt__wrapper\">\r\n\t\t\t\t\t\t<p css={messageTxtStyle(context)} className=\"message__txt\">\r\n\t\t\t\t\t\t\t{Translator.translate(\"YOU_DELETED_THIS_MESSAGE\", context.language)}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div css={messageInfoWrapperStyle(props, loggedInUser)} className=\"message__info__wrapper\">\r\n\t\t\t\t\t\t<span css={messageTimeStampStyle(context)} className=\"message__timestamp\">\r\n\t\t\t\t\t\t\t{dateFormat(messageDate, \"shortTime\")}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tlet avatar = null,\r\n\t\t\t\tname = null;\r\n\t\t\tif (props.message.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\t\t\tavatar = (\r\n\t\t\t\t\t<div css={messageThumbnailStyle()} className=\"message__thumbnail\">\r\n\t\t\t\t\t\t<CometChatAvatar user={props.message.sender} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t\tname = (\r\n\t\t\t\t\t<div css={nameWrapperStyle(props, loggedInUser)} className=\"message__name__wrapper\">\r\n\t\t\t\t\t\t<span css={nameStyle(context)} className=\"message__name\">\r\n\t\t\t\t\t\t\t{props.message.sender.name}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tmessage = (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t{avatar}\r\n\t\t\t\t\t<div css={messageDetailStyle(props, loggedInUser)} className=\"message__details\">\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t<div css={messageTxtWrapperStyle(props, context, loggedInUser)} className=\"message__txt__wrapper\">\r\n\t\t\t\t\t\t\t<p css={messageTxtStyle(context)} className=\"message__txt\">\r\n\t\t\t\t\t\t\t\t{Translator.translate(\"THIS_MESSAGE_DELETED\", context.language)}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div css={messageInfoWrapperStyle(props, loggedInUser)} className=\"message__info__wrapper\">\r\n\t\t\t\t\t\t\t<span css={messageTimeStampStyle(context)} className=\"message__timestamp\">\r\n\t\t\t\t\t\t\t\t{dateFormat(messageDate, \"shortTime\")}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\t\t}\r\n\r\n    return (\r\n        <div css={messageContainerStyle(props, loggedInUser)} className=\"message__deleted\">\r\n            <div css={messageWrapperStyle(props, loggedInUser)} className=\"message__wrapper\">{message}</div>                            \r\n        </div>\r\n    )\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatDeleteMessageBubble.defaultProps = {\r\n    theme: theme\r\n};\r\n\r\nCometChatDeleteMessageBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatDeleteMessageBubble };","export const pickerStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        \".emoji-mart\": {\r\n            borderRadius: \"5px 5px 0 0\",\r\n            borderBottom: \"0px\",\r\n            \".emoji-mart-category-list\": {\r\n                \" > li\": {\r\n                    width: \"50px\",\r\n                    height: \"30px\",\r\n                    margin: \"8px\",\r\n                    \".emoji-mart-emoji\": {\r\n                        width: \"50px\",\r\n                        height: \"30px\",\r\n                        padding: \"0px\",\r\n                        \" > span\": {\r\n                            width: \"50px!important\",\r\n                            height: \"30px!important\",\r\n                            cursor: \"pointer\",\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n        },\r\n        \".emoji-mart-scroll\": {\r\n            height: \"200px\"\r\n        },\r\n        \".emoji-mart-preview, .emoji-mart-search\": {\r\n            display: \"none\"\r\n        },\r\n        \".emoji-mart-category\": {\r\n            \".emoji-mart-emoji:hover:before\": {\r\n                background: \"none\",\r\n                borderRadius: \"0px\",\r\n            }\r\n        }\r\n    }\r\n}","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Picker } from \"emoji-mart\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n    pickerStyle\r\n} from \"./style\";\r\n\r\nclass CometChatEmojiKeyboard extends React.Component {\r\n\r\n    categories = {};\r\n    title = \"\";\r\n\r\n    constructor(props) {\r\n\r\n        super(props);\r\n\r\n        const categories = {\r\n            people: Translator.translate(\"SMILEY_PEOPLE\", props.lang),\r\n            nature: Translator.translate(\"ANIMALES_NATURE\", props.lang),\r\n            foods: Translator.translate(\"FOOD_DRINK\", props.lang),\r\n            activity: Translator.translate(\"ACTIVITY\", props.lang),\r\n            places: Translator.translate(\"TRAVEL_PLACES\", props.lang),\r\n            objects: Translator.translate(\"OBJECTS\", props.lang),\r\n            symbols: Translator.translate(\"SYMBOLS\", props.lang),\r\n            flags: Translator.translate(\"FLAGS\", props.lang)\r\n        }\r\n\r\n        const title = Translator.translate(\"PICK_YOUR_EMOJI\", props.lang);\r\n\r\n        this.state = {\r\n            categories: categories, \r\n            title: title\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n\r\n        if(prevProps.lang !== this.props.lang) {\r\n\r\n            const categories = {\r\n                search: Translator.translate(\"SEARCH\", this.props.lang),\r\n                people: Translator.translate(\"SMILEY_PEOPLE\", this.props.lang),\r\n                nature: Translator.translate(\"ANIMALES_NATURE\", this.props.lang),\r\n                foods: Translator.translate(\"FOOD_DRINK\", this.props.lang),\r\n                activity: Translator.translate(\"ACTIVITY\", this.props.lang),\r\n                places: Translator.translate(\"TRAVEL_PLACES\", this.props.lang),\r\n                objects: Translator.translate(\"OBJECTS\", this.props.lang),\r\n                symbols: Translator.translate(\"SYMBOLS\", this.props.lang),\r\n                flags: Translator.translate(\"FLAGS\", this.props.lang)\r\n            }\r\n\r\n            const title = Translator.translate(\"PICK_YOUR_EMOJI\", this.props.lang);\r\n\r\n            this.setState({ categories: { ...categories}, title: title });\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        const exclude = [\"search\", \"recent\"];\r\n        return(\r\n            <div css={pickerStyle()}>\r\n            <Picker\r\n            title={this.state.title}\r\n            emoji=\"point_up\"\r\n            native\r\n            onClick={this.props.emojiClicked}\r\n            showPreview={false}\r\n            exclude={exclude}\r\n            i18n={{ categories: this.state.categories }} \r\n            style={{ bottom: \"100px\", \"zIndex\": \"2\", \"width\": \"100%\", height: \"230px\" }} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatEmojiKeyboard.defaultProps = {\r\n    lang: Translator.getDefaultLanguage(),\r\n};\r\n\r\nCometChatEmojiKeyboard.propTypes = {\r\n    lang: PropTypes.string,\r\n}\r\n\r\nexport { CometChatEmojiKeyboard };","export const imageWrapperStyle = (context, closeIcon, img) => {\r\n\r\n    const heightProps = (img) ? {\r\n        height: \"auto\",\r\n    } : {\r\n        height: \"100%\",\r\n    };\r\n\r\n\tconst mq = [...context.theme.breakPoints];\r\n\r\n    return {\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"0\",\r\n\t\tleft: \"0\",\r\n\t\tbottom: \"0\",\r\n\t\tright: \"0\",\r\n\t\twidth: \"100%\",\r\n\t\tpadding: \"1.8% 2.3%\",\r\n\t\tzIndex: \"9999\",\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t\tbackground: `url(${closeIcon}) no-repeat 99% 0.8% #fff`,\r\n\t\tcursor: \"pointer\",\r\n\t\t...heightProps,\r\n\t\t[`@media ${mq[1]}, ${mq[2]}`]: {\r\n\t\t\theight: \"100%\",\r\n\t\t},\r\n\t};\r\n}\r\n\r\nexport const imgStyle = image => {\r\n\r\n    const sizeProps = (!image) ? {\r\n        width: \"24px\",\r\n        height: \"24px\",\r\n    } : {\r\n\t\tmaxHeight: \"100%\",\r\n\t};\r\n\r\n\treturn {\r\n\t\tobjectFit: \"contain\",\r\n\t\t...sizeProps,\r\n\t};\r\n};","export default __webpack_public_path__ + \"static/media/ring.b56d0148.svg\";","export default __webpack_public_path__ + \"static/media/close.6d1416b0.svg\";","import React, { useContext } from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { CometChatBackdrop } from \"../../Shared\";\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\n\r\nimport {\r\n    imageWrapperStyle,\r\n    imgStyle,\r\n} from \"./style\";\r\n\r\nimport loadingIcon from \"./resources/ring.svg\";\r\nimport closeIcon from \"./resources/close.svg\";\r\n\r\nconst CometChatImageViewer = (props) => {\r\n\r\n    const context = useContext(CometChatContext);\r\n    const [image, setImage] = React.useState(null);\r\n\r\n    let img = new Image();\r\n    img.src = props.message.data.url;\r\n\r\n    img.onload = () => {\r\n        setImage(img.src);\r\n    };\r\n\r\n    let imageIcon = null;\r\n    if (image) {\r\n        imageIcon = image;\r\n    } else {\r\n        imageIcon = loadingIcon;\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <CometChatBackdrop show={true} clicked={props.close} />\r\n            <div css={imageWrapperStyle(context, closeIcon, image)} onClick={props.close} className=\"image__wrapper\">\r\n                <img src={imageIcon} css={imgStyle(image)} alt={imageIcon} />\r\n            </div>\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\n\r\n// Specifies the default values for props:\r\nCometChatImageViewer.defaultProps = {\r\n\tcount: 0,\r\n\tclose: () => {},\r\n};\r\n\r\nCometChatImageViewer.propTypes = {\r\n\tshow: PropTypes.bool,\r\n\tclose: PropTypes.func,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatImageViewer };","export const messagePreviewContainerStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"inline-block\",\r\n\t\tborderRadius: \"12px\",\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.white}`,\r\n\t\tboxShadow: \"0px 1px 2px 1px rgba(0,0,0,0.18)\",\r\n\t\talignSelf: \"flex-start\",\r\n\t\twidth: \"auto\",\r\n\t};\r\n};\r\n\r\nexport const messagePreviewWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"column\"\r\n    }\r\n}\r\n\r\nexport const previewImageStyle = (img) => {\r\n\r\n    return {\r\n        background: `url(${img}) no-repeat center center`,\r\n        backgroundSize: \"contain\",\r\n        height: \"150px\",\r\n        margin: \"12px 0\",\r\n    }\r\n}\r\n\r\nexport const previewDataStyle = context => {\r\n\r\n\treturn {\r\n\t\tborderTop: `1px solid  ${context.theme.borderColor.primary}`,\r\n\t\tborderBottom: `1px solid  ${context.theme.borderColor.primary}`,\r\n\t\tpadding: \"16px\",\r\n\t};\r\n};\r\n\r\nexport const previewTitleStyle = context => {\r\n\r\n\treturn {\r\n\t\twhiteSpace: \"pre-wrap\",\r\n\t\twordBreak: \"break-word\",\r\n\t\ttextAlign: \"left\",\r\n\t\twidth: \"auto\",\r\n\t\tcolor: `${context.theme.color.helpText}`,\r\n\t\tfontWeight: \"700\",\r\n\t\tmarginBottom: \"8px\",\r\n\t};\r\n};\r\n\r\nexport const previewDescStyle = context => {\r\n\r\n\treturn {\r\n\t\twhiteSpace: \"pre-wrap\",\r\n\t\twordBreak: \"break-word\",\r\n\t\ttextAlign: \"left\",\r\n\t\twidth: \"auto\",\r\n\t\tcolor: `${context.theme.color.helpText}`,\r\n\t\tfontStyle: \"italic\",\r\n\t\tfontSize: \"13px\",\r\n\t};\r\n};\r\n\r\nexport const previewTextStyle = context => {\r\n\r\n\treturn {\r\n\t\twhiteSpace: \"pre-wrap\",\r\n\t\twordBreak: \"break-word\",\r\n\t\ttextAlign: \"left\",\r\n\t\twidth: \"auto\",\r\n\t\t\".message__txt__wrapper\": {\r\n\t\t\tbackgroundColor: \"transparent\",\r\n\t\t\tcolor: `${context.theme.color.helpText}`,\r\n\t\t\tfontStyle: \"normal\",\r\n\t\t\tpadding: \"8px 0\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const previewLinkStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tpadding: \"12px\",\r\n\t\t\"> a\": {\r\n\t\t\tdisplay: \"inline-block\",\r\n\t\t\tcolor: `${context.theme.color.blue}`,\r\n\t\t\tfontWeight: \"700\",\r\n\t\t},\r\n\t};\r\n};\r\n","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { checkMessageForExtensionsData } from \"../../../util/common\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n    messagePreviewContainerStyle,\r\n    messagePreviewWrapperStyle,\r\n    previewImageStyle,\r\n    previewDataStyle,\r\n    previewTitleStyle,\r\n    previewDescStyle,\r\n    previewLinkStyle,\r\n    previewTextStyle,\r\n} from \"./style\";\r\n\r\nclass CometChatLinkPreview extends React.PureComponent {\r\n\r\n    static contextType = CometChatContext;\r\n\r\n    render() {\r\n\r\n        const linkPreviewData = checkMessageForExtensionsData(this.props.message, \"link-preview\");\r\n        const linkObject = linkPreviewData[\"links\"][0];\r\n\r\n        const pattern = /(http:|https:)?\\/\\/(www\\.)?(youtube.com|youtu.be)(\\S+)?/;\r\n        const linkText = (linkObject[\"url\"].match(pattern)) ? Translator.translate(\"VIEW_ON_YOUTUBE\", this.context.language) : Translator.translate(\"VISIT\", this.context.language);\r\n\r\n        return (\r\n            <div css={messagePreviewContainerStyle(this.context)} className=\"message__preview\">\r\n                <div css={messagePreviewWrapperStyle()} className=\"preview__card\">\r\n                    <div css={previewImageStyle(linkObject[\"image\"])} className=\"card__image\"></div>\r\n                    <div css={previewDataStyle(this.context)} className=\"card__info\">\r\n                        <div css={previewTitleStyle(this.context)} className=\"card__title\"><span>{linkObject[\"title\"]}</span></div>\r\n                        <div css={previewDescStyle(this.context)} className=\"card__desc\"><span>{linkObject[\"description\"]}</span></div>\r\n                        <div css={previewTextStyle(this.context)} className=\"card__text\">{this.props.messageText}</div>\r\n                    </div>\r\n                    <div css={previewLinkStyle(this.context)} className=\"card__link\">\r\n                        <a href={linkObject[\"url\"]} target=\"_blank\" rel=\"noopener noreferrer\">{linkText}</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatLinkPreview.defaultProps = {\r\n    theme: theme\r\n};\r\n\r\nCometChatLinkPreview.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatLinkPreview };","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport {\r\n    reactionContainerStyle,\r\n    reactionEmojiStyle\r\n} from \"./style\";\r\n\r\nimport heartIcon from \"./resources/heart.png\";\r\n\r\nclass CometChatLiveReactions extends React.PureComponent {\r\n\r\n    static contextType = CometChatContext;\r\n    \r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.parentElement = React.createRef();\r\n\r\n\t\tthis.counter = 0;\r\n\t\tthis.verticalSpeed = 5;\r\n\t\tthis.horizontalSpeed = 2;\r\n\t\tthis.items = [];\r\n\r\n\t\tthis.before = Date.now();\r\n\r\n\t\tconst reaction = props.reaction ? enums.CONSTANTS[\"LIVE_REACTIONS\"][props.reaction] : enums.CONSTANTS[\"LIVE_REACTIONS\"][\"heart\"];\r\n\t\tconst reactionImg = <img src={heartIcon} alt={reaction} />;\r\n\t\tthis.emojis = Array(6).fill(reactionImg);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\t//this.sendMessage();\r\n\t\tthis.setItems();\r\n\t\tthis.requestAnimation();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.timer = null;\r\n\t}\r\n\r\n\tsendMessage = () => {\r\n\r\n        //fetching the metadata type from constants\r\n\t\tconst metadata = { type: enums.CONSTANTS[\"METADATA_TYPE_LIVEREACTION\"], reaction: this.props.reaction };\r\n\r\n        const receiverType = this?.context?.type === CometChat.ACTION_TYPE.TYPE_USER ? CometChat.ACTION_TYPE.TYPE_USER : CometChat.ACTION_TYPE.TYPE_GROUP;\r\n        const receiverId = (this?.context?.type === CometChat.ACTION_TYPE.TYPE_USER) ? this?.context?.item?.uid : this?.context?.item?.guid;\r\n\r\n\t\tlet transientMessage = new CometChat.TransientMessage(receiverId, receiverType, metadata);\r\n\t\tCometChat.sendTransientMessage(transientMessage);\r\n\t};\r\n\r\n\tsetItems = () => {\r\n\t\tconst width = this.parentElement.offsetWidth;\r\n\t\tconst height = this.parentElement.offsetHeight;\r\n\r\n\t\tconst elements = this.parentElement.querySelectorAll(\".emoji\");\r\n\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tconst element = elements[i],\r\n\t\t\t\telementWidth = element.offsetWidth,\r\n\t\t\t\telementHeight = element.offsetHeight;\r\n\r\n\t\t\tconst item = {\r\n\t\t\t\telement: element,\r\n\t\t\t\telementHeight: elementHeight,\r\n\t\t\t\telementWidth: elementWidth,\r\n\t\t\t\tySpeed: -this.verticalSpeed,\r\n\t\t\t\tomega: (2 * Math.PI * this.horizontalSpeed) / (width * 60), //omega= 2Pi*frequency\r\n\t\t\t\trandom: (Math.random() / 2 + 0.5) * i * 10000, //random time offset\r\n\t\t\t\tx: function (time) {\r\n\t\t\t\t\treturn ((Math.sin(this.omega * (time + this.random)) + 1) / 2) * (width - elementWidth);\r\n\t\t\t\t},\r\n\t\t\t\ty: height + (Math.random() + 1) * i * elementHeight,\r\n\t\t\t};\r\n\r\n\t\t\tthis.items.push(item);\r\n\t\t}\r\n\t};\r\n\r\n\trequestAnimation = () => {\r\n\t\tthis.timer = setTimeout(this.animate, 1000 / 60);\r\n\t};\r\n\r\n\tanimate = () => {\r\n\t\tif (!this.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst height = this.parentElement.offsetHeight;\r\n\t\tconst time = +new Date(); //little trick, gives unix time in ms\r\n\r\n\t\tfor (let i = 0; i < this.items.length; i++) {\r\n\t\t\tconst item = this.items[i];\r\n\r\n\t\t\tconst transformString = \"translate3d(\" + item.x(time) + \"px, \" + item.y + \"px, 0px)\";\r\n\t\t\titem.element.style.transform = transformString;\r\n\r\n\t\t\titem.element.style.visibility = \"visible\";\r\n\r\n\t\t\tif (item.y <= height) {\r\n\t\t\t\titem.element.classList.add(\"fade\");\r\n\t\t\t}\r\n\r\n\t\t\titem.y += item.ySpeed;\r\n\t\t}\r\n\r\n\t\tthis.requestAnimation();\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst emojis = this.emojis.map((emoji, index) => (\r\n\t\t\t<span className=\"emoji\" css={reactionEmojiStyle()} key={index}>\r\n\t\t\t\t{emoji}\r\n\t\t\t</span>\r\n\t\t));\r\n\t\treturn (\r\n\t\t\t<div ref={el => (this.parentElement = el)} css={reactionContainerStyle()}>\r\n\t\t\t\t{emojis}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport { CometChatLiveReactions };\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAUCAYAAACXtf2DAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAFAAAAAAnxZisAAACpElEQVQ4Ea1VzUsVURQ/5868UrEg/AMy0NTMRQRBJfIQszKxgh5ByzbVIooiiDbZBwUtXAWJtGgRJW0MQsxnxfhRIbgpsqcQtajoA8uITGfu3Hs6Z+zJU3pq+n4wc+fee87vd+bcM2cQ5mB0Z+0WMuERQNiNgO+UgtYAgs7K7uffM01fVlevyc9391iAo5bsOkT1gPdvlvd4Q5l2mJ68bahdG2rTwvMmB9HV1gKP0WWA3oSWzlc86rsj9qm6mkOuwgsKsMQSgeErxpEYS5oQOpSLp0u7vA9iGwmkdsWLlaGuPKXKJw3TyU4GYizEYG+OFglXAt7gOWomzoRY5TsO+Na+8pEaqpJ97/FeIuFUjX++X+C4jb+ZPBsUi3C0Wvb5OSaRZ0MBi0xY01GxvfYApuprtjkE/ZZAZXeZpkrnczF2Ek9oaKtCi2c4ogXJRUKIFyJP2zmolHLUSZeAGjWXQq4RcpHwMTVxIeCwVEuuIWfGSPGIl/9OcqohnA7QVWUCeMg1PyJ1nCsIl7ZmVIcqqSo97xen6aK8UC4SleZB5VwS7ijs8p7e9sDQLflIlos8R4FPdLs9Gb8rXJEAq5K7YurEpLHeckTEd8rYp77G483QHNXmTOJLuwZ/ukof9I0dWIqI+PjWDFqHEps870c6EzMCslCSfPYVQtzvG9MpDos5E7GZJrc9gfX3buju/5Qml3GWgCyUed7YtwmdYJHrLqqom8r6vyDfT0whsG3bqrzV+6oeD36ZazdvkCN1NYe5nq8xSRHndpYvd14Igca5dZxdn+xtm7WZMZlXQOxe18c3ukQtLLJDc0cUSPsOiJ6AMqfKugdeRItZbgsKiN/Q5s2xwqLCYw7hOWl3/FO5oj+OtVYODwdZeJe2LD+mVDxe/D/efwCuAQs2cnkFkQAAAABJRU5ErkJggg==\"","export const reactionContainerStyle = () => {\r\n\r\n    return {\r\n        width: \"100px\",\r\n        height: \"calc(100% - 120px)\",\r\n        overflow: \"hidden\",\r\n        position: \"absolute\",\r\n        top: \"70px\",\r\n        right: \"0\",\r\n    }\r\n}\r\n\r\nexport const reactionEmojiStyle = () => {\r\n\r\n    return {\r\n        position: \"absolute\",\r\n        color: \"#DD4144\",\r\n        visibility: \"hidden\",\r\n        width: \"20px\",\r\n        height: \"20px\",\r\n        opacity: \"1\",\r\n        transition: \"opacity 3s\",\r\n        \"&.fade\": {\r\n            opacity: \"0\"\r\n        }\r\n    }\r\n}","import { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nexport const messageActionStyle = (props, context, loggedInUser) => {\r\n\r\n    const topPos = (props.message.sender?.uid !== loggedInUser?.uid && props.message.receiverType === CometChat.RECEIVER_TYPE.GROUP) ? { top: \"-4px\" } : { top: \"-30px\" };\r\n\r\n    const alignment = (props.message?.sender?.uid === loggedInUser?.uid) ? { alignSelf: \"flex-end\" } : { alignSelf: \"flex-start\" };\r\n    const direction = (props.message?.sender?.uid === loggedInUser?.uid) ? { \r\n        \"li:not(:last-of-type)\": {\r\n            marginRight: \"8px\",\r\n        }\r\n\r\n    } : {\r\n        flexDirection: \"row-reverse\",\r\n        \"li:not(:first-of-type)\": {\r\n            marginRight: \"8px\",\r\n        }\r\n\r\n    };\r\n\r\n    return {\r\n        position: \"absolute\",\r\n        zIndex: \"1\",\r\n        display: \"flex\",\r\n        listStyleType: \"none\",\r\n        padding: \"8px\",\r\n        margin: \"0\",\r\n        height: \"35px\",\r\n        border: `1px solid ${context.theme.borderColor.primary}`,\r\n        backgroundColor: `${context.theme.backgroundColor.white}`,\r\n        borderRadius: \"4px\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        ...alignment,\r\n        ...topPos,\r\n        ...direction,\r\n    }\r\n}\r\n\r\nexport const actionGroupStyle = (props) => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        position: \"relative\",\r\n    }\r\n}\r\n\r\nexport const groupButtonStyle = (img, context, deleteOption) => {\r\n\r\n    const backgroundProp = (deleteOption) ? {\r\n        backgroundColor: `${context.theme.color.red}!important`\r\n    } : {\r\n        backgroundColor: `${context.theme.secondaryTextColor}!important`\r\n    };\r\n\r\n    return {\r\n        outline: \"0\",\r\n        border: \"0\",\r\n        height: \"24px\",\r\n        width: \"24px\",\r\n        borderRadius: \"4px\",\r\n        alignItems: \"center\",\r\n        display: \"inline-flex\",\r\n        justifyContent: \"center\",\r\n        position: \"relative\",\r\n        mask: `url(${img}) center center no-repeat`,\r\n        ...backgroundProp\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/threaded-message.027bed8b.svg\";","export default __webpack_public_path__ + \"static/media/delete.1b7009e4.svg\";","export default __webpack_public_path__ + \"static/media/edit.42654a69.svg\";","export default __webpack_public_path__ + \"static/media/reactions.7b8c5bff.svg\";","export default __webpack_public_path__ + \"static/media/message-translate.4ad7d405.svg\";","export default __webpack_public_path__ + \"static/media/send-message-in-private.fa473317.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n\tmessageActionStyle,\r\n\tactionGroupStyle,\r\n\tgroupButtonStyle\r\n} from \"./style\";\r\n\r\nimport startThreadIcon from \"./resources/threaded-message.svg\";\r\nimport deleteIcon from \"./resources/delete.svg\";\r\nimport editIcon from \"./resources/edit.svg\";\r\nimport reactIcon from \"./resources/reactions.svg\";\r\nimport translateIcon from \"./resources/message-translate.svg\";\r\nimport sendMessageInPrivateIcon from \"./resources/send-message-in-private.svg\";\r\n\r\n\r\nclass CometChatMessageActions extends React.PureComponent {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\r\n\t\tthis.state = {\r\n\t\t\tloggedInUser: null,\r\n\t\t\tenableMessageReaction: false,\r\n\t\t\tenableThreadedChats: false,\r\n\t\t\tenableDeleteMessage: false,\r\n\t\t\tenableEditMessage: false,\r\n\t\t\tenableTranslateMessage: false,\r\n\t\t\tenableMessageInPrivate: false,\r\n\t\t\tenableDeleteMessageForModerator: false,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tthis.context.getLoggedinUser().then(user => {\r\n\r\n\t\t\tthis.setState({loggedInUser: { ...user }});\r\n\r\n\t\t}).then(() => {\r\n\r\n\t\t\tthis.enableMessageReaction();\r\n\t\t\tthis.enableThreadedChats();\r\n\t\t\tthis.enableDeleteMessage();\r\n\t\t\tthis.enableDeleteMessageForModerator();\r\n\t\t\tthis.enableEditMessage();\r\n\t\t\tthis.enableTranslateMessage();\r\n\t\t\tthis.enableMessageInPrivate();\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleTooltip = (event, flag) => {\r\n\t\tconst elem = event.target;\r\n\r\n\t\tif (flag) {\r\n\t\t\telem.setAttribute(\"title\", elem.dataset.title);\r\n\t\t} else {\r\n\t\t\telem.removeAttribute(\"title\");\r\n\t\t}\r\n\t};\r\n\r\n\tenableMessageReaction = () => {\r\n\t\t/**\r\n\t\t * If reacting to messages feature is disabled\r\n\t\t */\r\n\t\tthis.context.FeatureRestriction.isReactionsEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response === true) {\r\n\t\t\t\t\tthis.setState({ enableMessageReaction: true });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ enableMessageReaction: false });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tthis.setState({ enableMessageReaction: false });\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableThreadedChats = () => {\r\n\t\t/**\r\n\t\t * If threaded chats are open, return false\r\n\t\t */\r\n\t\tif (this.props.message.hasOwnProperty(\"parentMessageId\") === true) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * If threaded replies feature is disabled\r\n\t\t */\r\n\t\tthis.context.FeatureRestriction.isThreadedMessagesEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response === true) {\r\n\t\t\t\t\tthis.setState({ enableThreadedChats: true });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ enableThreadedChats: false });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tthis.setState({ enableThreadedChats: false });\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableDeleteMessage = () => {\r\n\t\tthis.context.FeatureRestriction.isDeleteMessageEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response === true) {\r\n\t\t\t\t\tthis.setState({ enableDeleteMessage: true });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ enableDeleteMessage: false });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tthis.setState({ enableDeleteMessage: false });\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableDeleteMessageForModerator = () => {\r\n\t\tthis.context.FeatureRestriction.isDeleteMemberMessageEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response === true) {\r\n\t\t\t\t\tthis.setState({ enableDeleteMessageForModerator: true });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ enableDeleteMessageForModerator: false });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tthis.setState({ enableDeleteMessageForModerator: false });\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableEditMessage = () => {\r\n\t\t/**\r\n\t\t * If the message is not sent by the logged in user or the message type is not text\r\n\t\t */\r\n\t\tif (this.props.message.sender?.uid !== this.state.loggedInUser?.uid || this.props.message.type !== CometChat.MESSAGE_TYPE.TEXT) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.context.FeatureRestriction.isEditMessageEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response === true) {\r\n\t\t\t\t\tthis.setState({ enableEditMessage: true });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ enableEditMessage: false });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tthis.setState({ enableEditMessage: false });\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableTranslateMessage = () => {\r\n\t\t/**\r\n\t\t * message type is not text\r\n\t\t */\r\n\t\tif (this.props.message.type !== CometChat.MESSAGE_TYPE.TEXT) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.context.FeatureRestriction.isMessageTranslationEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response === true) {\r\n\t\t\t\t\tthis.setState({ enableTranslateMessage: true });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ enableTranslateMessage: false });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tthis.setState({ enableTranslateMessage: false });\r\n\t\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * If message in private feature is enabled\r\n\t */\r\n\tenableMessageInPrivate = () => {\r\n\t\tthis.context.FeatureRestriction.isMessageInPrivateEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response === true) {\r\n\t\t\t\t\tthis.setState({ enableMessageInPrivate: true });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ enableMessageInPrivate: false });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tthis.setState({ enableMessageInPrivate: false });\r\n\t\t\t});\r\n\t};\r\n\r\n\tsendMessageInPrivate = () => {\r\n\t\t\r\n\t\tconst item = this.props.message?.sender;\r\n\t\tconst type = CometChat.ACTION_TYPE.TYPE_USER;\r\n\r\n\t\tthis.context.setTypeAndItem(type, item);\r\n\t};\r\n\r\n\treactToMessage = () => {\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"REACT_TO_MESSAGE\"], this.props.message);\r\n\t};\r\n\r\n\tviewThread = () => {\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"VIEW_THREADED_MESSAGE\"], this.props.message);\r\n\t};\r\n\r\n\tdeleteMessage = () => {\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"DELETE_MESSAGE\"], this.props.message);\r\n\t};\r\n\r\n\teditMessage = () => {\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"EDIT_MESSAGE\"], this.props.message);\r\n\t};\r\n\r\n\ttranslateMessage = () => {\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"TRANSLATE_MESSAGE\"], this.props.message);\r\n\t};\r\n\r\n\trender() {\r\n\t\t//don't show the tooltip while the message is being sent\r\n\t\tif (this.props.message.hasOwnProperty(\"sentAt\") === false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet reactToMessage = null;\r\n\t\tif (this.state.enableMessageReaction) {\r\n\t\t\treactToMessage = (\r\n\t\t\t\t<li css={actionGroupStyle()} className=\"action__group\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tonMouseEnter={event => this.toggleTooltip(event, true)}\r\n\t\t\t\t\t\tonMouseLeave={event => this.toggleTooltip(event, false)}\r\n\t\t\t\t\t\tcss={groupButtonStyle(reactIcon, this.context)}\r\n\t\t\t\t\t\tclassName=\"group__button button__reacttomessage\"\r\n\t\t\t\t\t\tdata-title={Translator.translate(\"ADD_REACTION\", this.context.language)}\r\n\t\t\t\t\t\tonClick={this.reactToMessage}></button>\r\n\t\t\t\t</li>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet threadedChats = null;\r\n\t\tif (this.state.enableThreadedChats) {\r\n\t\t\tthreadedChats = (\r\n\t\t\t\t<li css={actionGroupStyle()} className=\"action__group\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tonMouseEnter={event => this.toggleTooltip(event, true)}\r\n\t\t\t\t\t\tonMouseLeave={event => this.toggleTooltip(event, false)}\r\n\t\t\t\t\t\tcss={groupButtonStyle(startThreadIcon, this.context)}\r\n\t\t\t\t\t\tclassName=\"group__button button__threadedchats\"\r\n\t\t\t\t\t\tdata-title={this.props.message.replyCount ? Translator.translate(\"REPLY_TO_THREAD\", this.context.language) : Translator.translate(\"REPLY_IN_THREAD\", this.context.language)}\r\n\t\t\t\t\t\tonClick={this.viewThread}></button>\r\n\t\t\t\t</li>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * in one-on-one chat, allow deleting self messages if delete feature is enabled\r\n\t\t * in group chat, allow deleting other's messages for moderators and admins if moderator delete feature && delete feature is enabled\r\n\t\t */\r\n\t\tlet deleteMessage = null;\r\n\t\tif (\r\n\t\t\t(this.props.message.sender?.uid === this.state.loggedInUser?.uid && this.state.enableDeleteMessage) ||\r\n\t\t\t(this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP &&\r\n\t\t\t\tthis.props.message.sender?.uid !== this.state.loggedInUser?.uid &&\r\n\t\t\t\tthis.context.item.hasOwnProperty(\"scope\") &&\r\n\t\t\t\tthis.context.item.scope !== CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT &&\r\n\t\t\t\tthis.state.enableDeleteMessageForModerator &&\r\n\t\t\t\tthis.state.enableDeleteMessage)\r\n\t\t) {\r\n\t\t\tdeleteMessage = (\r\n\t\t\t\t<li css={actionGroupStyle()} className=\"action__group\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tonMouseEnter={event => this.toggleTooltip(event, true)}\r\n\t\t\t\t\t\tonMouseLeave={event => this.toggleTooltip(event, false)}\r\n\t\t\t\t\t\tcss={groupButtonStyle(deleteIcon, this.context, 1)}\r\n\t\t\t\t\t\tclassName=\"group__button button__delete\"\r\n\t\t\t\t\t\tdata-title={Translator.translate(\"DELETE_MESSAGE\", this.context.language)}\r\n\t\t\t\t\t\tonClick={this.deleteMessage}></button>\r\n\t\t\t\t</li>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet editMessage = null;\r\n\t\tif (this.state.enableEditMessage) {\r\n\t\t\teditMessage = (\r\n\t\t\t\t<li css={actionGroupStyle()} className=\"action__group\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tonMouseEnter={event => this.toggleTooltip(event, true)}\r\n\t\t\t\t\t\tonMouseLeave={event => this.toggleTooltip(event, false)}\r\n\t\t\t\t\t\tcss={groupButtonStyle(editIcon, this.context)}\r\n\t\t\t\t\t\tclassName=\"group__button button__edit\"\r\n\t\t\t\t\t\tdata-title={Translator.translate(\"EDIT_MESSAGE\", this.context.language)}\r\n\t\t\t\t\t\tonClick={this.editMessage}></button>\r\n\t\t\t\t</li>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet translateMessage = null;\r\n\t\tif (this.state.enableTranslateMessage) {\r\n\t\t\ttranslateMessage = (\r\n\t\t\t\t<li css={actionGroupStyle()} className=\"action__group\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tonMouseEnter={event => this.toggleTooltip(event, true)}\r\n\t\t\t\t\tonMouseLeave={event => this.toggleTooltip(event, false)}\r\n\t\t\t\t\tcss={groupButtonStyle(translateIcon, this.context)}\r\n\t\t\t\t\tclassName=\"group__button button__translate\"\r\n\t\t\t\t\tdata-title={Translator.translate(\"TRANSLATE_MESSAGE\", this.context.language)}\r\n\t\t\t\t\tonClick={this.translateMessage}></button>\r\n\t\t\t\t</li>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * if send message in private feature is enabled, if group chat window is open, and messages are not sent by the loggedin user...\r\n\t\t */\r\n\t\tlet messageInPrivate = null;\r\n\t\tif (this.state.enableMessageInPrivate === true && this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.props.message?.sender?.uid !== this.state.loggedInUser?.uid) {\r\n\t\t\tmessageInPrivate = (\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tonMouseEnter={event => this.toggleTooltip(event, true)}\r\n\t\t\t\t\t\tonMouseLeave={event => this.toggleTooltip(event, false)}\r\n\t\t\t\t\t\tcss={groupButtonStyle(sendMessageInPrivateIcon, this.context)}\r\n\t\t\t\t\t\tclassName=\"group__button button__translate\"\r\n\t\t\t\t\t\tdata-title={Translator.translate(\"SEND_MESSAGE_IN_PRIVATE\", this.context.language)}\r\n\t\t\t\t\t\tonClick={this.sendMessageInPrivate}></button>\r\n\t\t\t\t</li>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet tooltip = (\r\n\t\t\t<ul css={messageActionStyle(this.props, this.context, this.state.loggedInUser)} className=\"message__actions\">\r\n\t\t\t\t{reactToMessage}\r\n\t\t\t\t{threadedChats}\r\n\t\t\t\t{editMessage}\r\n\t\t\t\t{deleteMessage}\r\n\t\t\t\t{messageInPrivate}\r\n\t\t\t\t{translateMessage}\r\n\t\t\t</ul>\r\n\t\t);\r\n\r\n\t\tif (threadedChats === null && deleteMessage === null && editMessage === null && reactToMessage === null && translateMessage === null && messageInPrivate === null) {\r\n\t\t\ttooltip = null;\r\n\t\t}\r\n\r\n\t\treturn tooltip;\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatMessageActions.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatMessageActions.propTypes = {\r\n\ttheme: PropTypes.object.isRequired,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatMessageActions };\r\n","export const chatComposerStyle = context => {\r\n\r\n\treturn {\r\n\t\tpadding: \"16px\",\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.white}`,\r\n\t\tzIndex: \"1\",\r\n\t\torder: \"3\",\r\n\t\tposition: \"relative\",\r\n\t\tflex: \"none\",\r\n\t\tminHeight: \"105px\",\r\n\t};\r\n};\r\n\r\nexport const editPreviewContainerStyle = (context, keyframes) => {\r\n\r\n\tconst slideAnimation = keyframes`\r\n    from {\r\n        bottom: -60px\r\n    }\r\n    to {\r\n        bottom: 0px\r\n    }`;\r\n\r\n\treturn {\r\n\t\tpadding: \"7px\",\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.white}`,\r\n\t\tborderColor: `${context.theme.borderColor.primary}`,\r\n\t\tborderWidth: \"1px 1px 1px 5px\",\r\n\t\tborderStyle: \"solid\",\r\n\t\tcolor: `${context.theme.color.helpText}`,\r\n\t\tfontSize: \"13px\",\r\n\t\tanimation: `${slideAnimation} 0.5s ease-out`,\r\n\t\tposition: \"relative\",\r\n\t};\r\n};\r\n\r\nexport const previewHeadingStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"space-between\"\r\n    }\r\n}\r\n\r\nexport const previewTextStyle = () => {\r\n\r\n    return {\r\n        padding: \"5px 0\",\r\n    }\r\n}\r\n\r\nexport const previewCloseStyle = (img, context) => {\r\n\r\n    return {\r\n        width: \"24px\",\r\n        height: \"24px\",\r\n        borderRadius: \"50%\",\r\n        cursor: \"pointer\",\r\n        mask: `url(${img}) center center no-repeat`,\r\n        backgroundColor: `${context.theme.primaryColor}`\r\n    }\r\n}\r\n\r\nexport const composerInputStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        width: \"100%\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"flex-end\",\r\n        position: \"relative\",\r\n        zIndex: \"2\",\r\n        padding: \"0\",\r\n        minHeight: \"85px\",\r\n    }\r\n}\r\n\r\nexport const inputInnerStyle = (props, state, context) => {\r\n\r\n    const borderRadiusVal = (state.emojiViewer || state.stickerViewer) ? {\r\n        borderRadius: \"0 0 8px 8px\",\r\n    } : {\r\n        borderRadius: \"8px\",\r\n    };\r\n\r\n    return {\r\n        flex: \"1 1 auto\",\r\n        position: \"relative\",\r\n        outline: \"none\",\r\n        border: `1px solid ${context.theme.borderColor.primary}`,\r\n        backgroundColor: `${context.theme.backgroundColor.white}`,\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        width: \"100%\",\r\n        minHeight: \"85px\",\r\n        ...borderRadiusVal\r\n    }\r\n}\r\n\r\nexport const messageInputStyle = (disabled) => {\r\n\r\n    const disabledState = (disabled) ? {\r\n        pointerEvents : \"none\",\r\n        opacity: \"0.4\"\r\n    } : {};\r\n\r\n    return {\r\n        width: \"100%\",\r\n        fontSize: \"15px\",\r\n        lineHeight: \"20px\",\r\n        fontWeight: \"400\",\r\n        padding: \"16px\",\r\n        outline: \"none\",\r\n        overflowX: \"hidden\",\r\n        overflowY: \"auto\",\r\n        position: \"relative\",\r\n        whiteSpace: \"pre-wrap\",\r\n        wordWrap: \"break-word\",\r\n        zIndex: \"1\",\r\n        minHeight: \"50px\",\r\n        maxHeight: \"100px\",\r\n        userSelect: \"text\",\r\n        ...disabledState,\r\n        '&:empty:before': {\r\n            content: \"attr(placeholder)\",\r\n            color: \"rgb(153, 153, 153)\",\r\n            pointerEvents: \"none\",\r\n            display: \"block\", /* For Firefox */\r\n        }\r\n    }\r\n}\r\n\r\nexport const inputStickyStyle = (disabled, attachments, context) => {\r\n\r\n    const disabledState = (disabled) ? {\r\n        pointerEvents: \"none\",\r\n    } : {};\r\n\r\n    const flexDirectionProp = (attachments === null) ? {\r\n        flexDirection: \"row-reverse\",\r\n    } : {};\r\n\r\n    return {\r\n        padding: \"8px 16px\",\r\n        // height: \"40px\",\r\n        borderTop: `1px solid ${context.theme.borderColor.primary}`,\r\n        backgroundColor: `${context.theme.backgroundColor.grey}`,\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        ...flexDirectionProp,\r\n        ...disabledState,\r\n        '&:empty:before': {\r\n            pointerEvents: \"none\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const stickyAttachmentStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        width: \"auto\"\r\n    }\r\n}\r\n\r\nexport const attachmentIconStyle = () => {\r\n\r\n    return {\r\n        margin: \"auto 0\",\r\n        width: \"24px\",\r\n        height: \"20px\",\r\n        cursor: \"pointer\",\r\n    }\r\n}\r\n\r\nexport const filePickerStyle = (state) => {\r\n\r\n    const active = (state.showFilePicker) ? {\r\n        width: \"calc(100% - 20px)\",\r\n        opacity: \"1\",\r\n    } : {};\r\n\r\n    return {\r\n        width: \"0\",\r\n        borderRadius: \"8px\",\r\n        overflow: \"hidden\",\r\n        zIndex: \"1\",\r\n        opacity: \"0\",\r\n        transition: \"width 0.5s linear\",\r\n        ...active,\r\n    }\r\n}\r\n\r\nexport const fileListStyle = () => {\r\n\r\n    return {\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        padding: \"0 0 0 16px\",\r\n    }\r\n}\r\n\r\nexport const fileItemStyle = (img, context) => {\r\n\r\n    return {\r\n        height: \"24px\",\r\n        cursor: \"pointer\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        margin: \"0 16px 0 0\",\r\n        \" > i\": {\r\n            width: \"24px\",\r\n            height: \"24px\",\r\n            display: \"inline-block\",\r\n            mask: `url(${img}) center center no-repeat`,\r\n            backgroundColor: `${context.theme.secondaryTextColor}`\r\n        },\r\n        ' > input': {\r\n            display: \"none\",\r\n        },\r\n    }\r\n}\r\n\r\nexport const stickyAttachButtonStyle = (img, context) => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        cursor: \"pointer\",\r\n        width: \"24px\",\r\n        \"i\": {\r\n            width: \"24px\",\r\n            height: \"24px\",\r\n            display: \"inline-block\",\r\n            mask: `url(${img}) center center no-repeat`,\r\n            backgroundColor: `${context.theme.secondaryTextColor}`\r\n        }\r\n    }\r\n}\r\n\r\nexport const stickyButtonStyle = (state) => {\r\n\r\n    const active = (state.showFilePicker) ? {\r\n        display: \"none\",\r\n    } : {\r\n        display: \"flex\",\r\n    };\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        cursor: \"pointer\",\r\n        width: \"auto\",\r\n        ...active\r\n    }\r\n}\r\n\r\nexport const emojiButtonStyle = (img, context) => {\r\n\r\n    return {\r\n        height: \"24px\",\r\n        cursor: \"pointer\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        margin: \"0 0 0 16px\",\r\n        \"i\": {\r\n            width: \"24px\",\r\n            height: \"24px\",\r\n            display: \"inline-block\",\r\n            mask: `url(${img}) center center no-repeat`,\r\n            backgroundColor: `${context.theme.secondaryTextColor}`\r\n        }\r\n    }\r\n}\r\n\r\nexport const sendButtonStyle = (img, context) => {\r\n\r\n    return {\r\n        height: \"24px\",\r\n        cursor: \"pointer\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        margin: \"0 0 0 16px\",\r\n        \"i\": {\r\n            width: \"24px\",\r\n            height: \"24px\",\r\n            display: \"inline-block\",\r\n            mask: `url(${img}) center center no-repeat`,\r\n            backgroundColor: `${context.theme.primaryColor}`\r\n        }\r\n    }\r\n}\r\n\r\nexport const reactionBtnStyle = () => {\r\n\r\n    return {\r\n        cursor: \"pointer\",\r\n        height: \"24px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        margin: \"0 0 0 16px\",\r\n    }\r\n}\r\n\r\nexport const stickerBtnStyle = (img, context) => {\r\n\r\n    return {\r\n        cursor: \"pointer\",\r\n        height: \"24px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        margin: \"0 0 0 16px\",\r\n        \"i\": {\r\n            width: \"24px\",\r\n            height: \"24px\",\r\n            display: \"inline-block\",\r\n            mask: `url(${img}) center center no-repeat`,\r\n            backgroundColor: `${context.theme.secondaryTextColor}`\r\n        }\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/add-circle-filled.ed93de4c.svg\";","export default __webpack_public_path__ + \"static/media/video.05363a89.svg\";","export default __webpack_public_path__ + \"static/media/audio-file.a6cb4e3d.svg\";","export default __webpack_public_path__ + \"static/media/file-upload.842b59e4.svg\";","export default __webpack_public_path__ + \"static/media/image.e987e720.svg\";","export default __webpack_public_path__ + \"static/media/emoji.7cf2c977.svg\";","export default __webpack_public_path__ + \"static/media/send-message.90edaad1.svg\";","export default __webpack_public_path__ + \"static/media/polls.114247f7.svg\";","export default __webpack_public_path__ + \"static/media/stickers.97e52098.svg\";","export default __webpack_public_path__ + \"static/media/close.6d1416b0.svg\";","export default __webpack_public_path__ + \"static/media/collaborative-document.0434e615.svg\";","export default __webpack_public_path__ + \"static/media/collaborative-whiteboard.f65dc14f.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx, keyframes } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport \"emoji-mart/css/emoji-mart.css\";\r\n\r\nimport { CometChatSmartReplyPreview, CometChatCreatePoll, CometChatStickerKeyboard } from \"../Extensions\";\r\nimport { CometChatEmojiKeyboard } from \"../\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport { checkMessageForExtensionsData, ID, getUnixTimestamp } from \"../../../util/common\";\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport { SoundManager } from \"../../../util/SoundManager\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n\tchatComposerStyle,\r\n\teditPreviewContainerStyle,\r\n\tpreviewHeadingStyle,\r\n\tpreviewCloseStyle,\r\n\tpreviewTextStyle,\r\n\tcomposerInputStyle,\r\n\tinputInnerStyle,\r\n\tmessageInputStyle,\r\n\tinputStickyStyle,\r\n\tstickyAttachmentStyle,\r\n\tfilePickerStyle,\r\n\tfileListStyle,\r\n\tfileItemStyle,\r\n\tstickyAttachButtonStyle,\r\n\tstickyButtonStyle,\r\n\temojiButtonStyle,\r\n\tsendButtonStyle,\r\n\treactionBtnStyle,\r\n\tstickerBtnStyle\r\n} from \"./style\";\r\n\r\nimport roundedPlus from \"./resources/add-circle-filled.svg\";\r\nimport videoIcon from \"./resources/video.svg\";\r\nimport audioIcon from \"./resources/audio-file.svg\";\r\nimport docIcon from \"./resources/file-upload.svg\";\r\nimport imageIcon from \"./resources/image.svg\";\r\nimport insertEmoticon from \"./resources/emoji.svg\";\r\nimport sendBlue from \"./resources/send-message.svg\";\r\nimport pollIcon from \"./resources/polls.svg\";\r\nimport stickerIcon from \"./resources/stickers.svg\";\r\nimport closeIcon from \"./resources/close.svg\";\r\nimport documentIcon from \"./resources/collaborative-document.svg\";\r\nimport whiteboardIcon from \"./resources/collaborative-whiteboard.svg\";\r\nimport heartIcon from \"./resources/heart.png\";\r\n\r\nclass CometChatMessageComposer extends React.PureComponent {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.imageUploaderRef = React.createRef();\r\n\t\tthis.fileUploaderRef = React.createRef();\r\n\t\tthis.audioUploaderRef = React.createRef();\r\n\t\tthis.videoUploaderRef = React.createRef();\r\n\t\tthis.messageInputRef = React.createRef();\r\n\t\tthis.liveReactionInProgress = false;\r\n\t\tthis.isTyping = false;\r\n\r\n\t\tthis.state = {\r\n\t\t\tshowFilePicker: false,\r\n\t\t\tmessageInput: \"\",\r\n\t\t\tmessageType: \"\",\r\n\t\t\temojiViewer: false,\r\n\t\t\tcreatePoll: false,\r\n\t\t\tmessageToBeEdited: \"\",\r\n\t\t\treplyPreview: null,\r\n\t\t\tstickerViewer: false,\r\n\t\t\tmessageToReact: \"\",\r\n\t\t\tshareDocument: false,\r\n\t\t\tshareWhiteboard: false,\r\n\t\t\tenableLiveReaction: false,\r\n\t\t\tenablePolls: false,\r\n\t\t\tenableTypingIndicator: false,\r\n\t\t\tenableStickers: false,\r\n\t\t\tenablePhotosVideos: false,\r\n\t\t\tenableFiles: false,\r\n\t\t\tenableEmojis: false,\r\n\t\t\tenableCollaborativeDocument: false,\r\n\t\t\tenableCollaborativeWhiteboard: false,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tCometChat.getLoggedinUser()\r\n\t\t\t.then(user => (this.loggedInUser = user))\r\n\t\t\t.catch(error => this.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\"));\r\n\r\n\t\tthis.item = this.context.type === CometChat.ACTION_TYPE.TYPE_USER || this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP ? this.context.item : null;\r\n\t\tthis.enableLiveReaction();\r\n\t\tthis.enablePolls();\r\n\t\tthis.enableTypingIndicator();\r\n\t\tthis.enableStickers();\r\n\t\tthis.enablePhotosVideos();\r\n\t\tthis.enableFiles();\r\n\t\tthis.enableEmojis();\r\n\t\tthis.enableCollaborativeDocument();\r\n\t\tthis.enableCollaborativeWhiteboard();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tif (prevProps.messageToBeEdited !== this.props.messageToBeEdited) {\r\n\t\t\tconst messageToBeEdited = this.props.messageToBeEdited;\r\n\r\n\t\t\tthis.setState({ messageInput: messageToBeEdited, messageToBeEdited: messageToBeEdited });\r\n\r\n\t\t\tconst element = this.messageInputRef.current;\r\n\t\t\tif (messageToBeEdited) {\r\n\t\t\t\tlet messageText = messageToBeEdited.text;\r\n\r\n\t\t\t\t//xss extensions data\r\n\t\t\t\tconst xssData = checkMessageForExtensionsData(messageToBeEdited, \"xss-filter\");\r\n\t\t\t\tif (xssData && xssData.hasOwnProperty(\"sanitized_text\") && xssData.hasOwnProperty(\"hasXSS\") && xssData.hasXSS === \"yes\") {\r\n\t\t\t\t\tmessageText = xssData.sanitized_text;\r\n\t\t\t\t}\r\n\r\n\t\t\t\telement.focus();\r\n\t\t\t\telement.textContent = \"\";\r\n\t\t\t\tthis.pasteHtmlAtCaret(messageText, false);\r\n\t\t\t} else {\r\n\t\t\t\telement.textContent = \"\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (prevProps.replyPreview !== this.props.replyPreview) {\r\n\t\t\tthis.setState({ replyPreview: this.props.replyPreview });\r\n\t\t}\r\n\r\n\t\tconst previousMessageStr = JSON.stringify(prevProps.messageToReact);\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.messageToReact);\r\n\r\n\t\tif (previousMessageStr !== currentMessageStr) {\r\n\t\t\tthis.setState({ messageToReact: this.props.messageToReact });\r\n\t\t}\r\n\r\n\t\tif (this.context.item !== this.item) {\r\n\t\t\tthis.messageInputRef.current.textContent = \"\";\r\n\t\t\tthis.setState({ stickerViewer: false, emojiViewer: false, replyPreview: null, messageToBeEdited: \"\", messageInput: \"\" });\r\n\r\n\t\t\tthis.focusOnMessageComposer();\r\n\t\t}\r\n\r\n\t\tif (prevState.messageInput !== this.state.messageInput) {\r\n\t\t\tthis.focusOnMessageComposer();\r\n\t\t}\r\n\r\n\t\tthis.item = this.context.type === CometChat.ACTION_TYPE.TYPE_USER || this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP ? this.context.item : null;\r\n\t\tthis.enableLiveReaction();\r\n\t\tthis.enablePolls();\r\n\t\tthis.enableTypingIndicator();\r\n\t\tthis.enableStickers();\r\n\t\tthis.enablePhotosVideos();\r\n\t\tthis.enableFiles();\r\n\t\tthis.enableEmojis();\r\n\t\tthis.enableCollaborativeDocument();\r\n\t\tthis.enableCollaborativeWhiteboard();\r\n\t}\r\n\r\n\t/**\r\n\t * if live reactions feature is disabled\r\n\t */\r\n\tenableLiveReaction = () => {\r\n\t\tthis.context.FeatureRestriction.isLiveReactionsEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableLiveReaction) {\r\n\t\t\t\t\tthis.setState({ enableLiveReaction: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableLiveReaction !== false) {\r\n\t\t\t\t\tthis.setState({ enableLiveReaction: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * if polls feature is disabled\r\n\t */\r\n\tenablePolls = () => {\r\n\t\tthis.context.FeatureRestriction.isPollsEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enablePolls) {\r\n\t\t\t\t\tthis.setState({ enablePolls: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enablePolls !== false) {\r\n\t\t\t\t\tthis.setState({ enablePolls: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * if typing indicator feature is disabled\r\n\t */\r\n\tenableTypingIndicator = () => {\r\n\t\tthis.context.FeatureRestriction.isTypingIndicatorsEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableTypingIndicator) {\r\n\t\t\t\t\tthis.setState({ enableTypingIndicator: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableTypingIndicator !== false) {\r\n\t\t\t\t\tthis.setState({ enableTypingIndicator: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * if stickers feature is disabled\r\n\t */\r\n\tenableStickers = () => {\r\n\t\tthis.context.FeatureRestriction.isStickersEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableStickers) {\r\n\t\t\t\t\tthis.setState({ enableStickers: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableStickers !== false) {\r\n\t\t\t\t\tthis.setState({ enableStickers: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * if uploding photos, videos feature is disabled\r\n\t */\r\n\tenablePhotosVideos = () => {\r\n\t\tthis.context.FeatureRestriction.isPhotosVideosEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enablePhotosVideos) {\r\n\t\t\t\t\tthis.setState({ enablePhotosVideos: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enablePhotosVideos !== false) {\r\n\t\t\t\t\tthis.setState({ enablePhotosVideos: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * if uploding files feature is disabled\r\n\t */\r\n\tenableFiles = () => {\r\n\t\tthis.context.FeatureRestriction.isFilesEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableFiles) {\r\n\t\t\t\t\tthis.setState({ enableFiles: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableFiles !== false) {\r\n\t\t\t\t\tthis.setState({ enableFiles: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * if sending emojis feature is disabled\r\n\t */\r\n\tenableEmojis = () => {\r\n\t\tthis.context.FeatureRestriction.isEmojisEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableEmojis) {\r\n\t\t\t\t\tthis.setState({ enableEmojis: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableEmojis !== false) {\r\n\t\t\t\t\tthis.setState({ enableEmojis: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * if sharing collborative document feature is disabled\r\n\t */\r\n\tenableCollaborativeDocument = () => {\r\n\t\tthis.context.FeatureRestriction.isCollaborativeDocumentEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableCollaborativeDocument) {\r\n\t\t\t\t\tthis.setState({ enableCollaborativeDocument: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableCollaborativeDocument !== false) {\r\n\t\t\t\t\tthis.setState({ enableCollaborativeDocument: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * if sharing collborative whiteboard feature is disabled\r\n\t */\r\n\tenableCollaborativeWhiteboard = () => {\r\n\t\tthis.context.FeatureRestriction.isCollaborativeWhiteBoardEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableCollaborativeWhiteboard) {\r\n\t\t\t\t\tthis.setState({ enableCollaborativeWhiteboard: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableCollaborativeWhiteboard !== false) {\r\n\t\t\t\t\tthis.setState({ enableCollaborativeWhiteboard: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tfocusOnMessageComposer = () => {\r\n\t\tif (this.messageInputRef && this.messageInputRef.current) {\r\n\t\t\tthis.messageInputRef.current.focus();\r\n\t\t}\r\n\t};\r\n\r\n\tpasteHtmlAtCaret(html, selectPastedContent) {\r\n\t\tvar sel, range;\r\n\t\tconst chatWindow = this.context.UIKitSettings.chatWindow;\r\n\t\tif (chatWindow.getSelection) {\r\n\t\t\t// IE9 and non-IE\r\n\t\t\tsel = chatWindow.getSelection();\r\n\t\t\tif (sel.getRangeAt && sel.rangeCount) {\r\n\t\t\t\trange = sel.getRangeAt(0);\r\n\t\t\t\trange.deleteContents();\r\n\r\n\t\t\t\t// Range.createContextualFragment() would be useful here but is\r\n\t\t\t\t// only relatively recently standardized and is not supported in\r\n\t\t\t\t// some browsers (IE9, for one)\r\n\t\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\t\tel.innerText = html;\r\n\t\t\t\tvar frag = document.createDocumentFragment(),\r\n\t\t\t\t\tnode,\r\n\t\t\t\t\tlastNode;\r\n\t\t\t\twhile ((node = el.firstChild)) {\r\n\t\t\t\t\tlastNode = frag.appendChild(node);\r\n\t\t\t\t}\r\n\t\t\t\tvar firstNode = frag.firstChild;\r\n\t\t\t\trange.insertNode(frag);\r\n\r\n\t\t\t\t// Preserve the selection\r\n\t\t\t\tif (lastNode) {\r\n\t\t\t\t\trange = range.cloneRange();\r\n\t\t\t\t\trange.setStartAfter(lastNode);\r\n\t\t\t\t\tif (selectPastedContent) {\r\n\t\t\t\t\t\trange.setStartBefore(firstNode);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trange.collapse(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsel.removeAllRanges();\r\n\t\t\t\t\tsel.addRange(range);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if ((sel = document.selection) && sel.type !== \"Control\") {\r\n\t\t\t// IE < 9\r\n\t\t\tvar originalRange = sel.createRange();\r\n\t\t\toriginalRange.collapse(true);\r\n\t\t\tsel.createRange().pasteHTML(html);\r\n\t\t\tif (selectPastedContent) {\r\n\t\t\t\trange = sel.createRange();\r\n\t\t\t\trange.setEndPoint(\"StartToStart\", originalRange);\r\n\t\t\t\trange.select();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\temojiClicked = (emoji, event) => {\r\n\t\tif (this.state.messageToReact) {\r\n\t\t\tthis.reactToMessages(emoji);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst element = this.messageInputRef.current;\r\n\t\telement.focus();\r\n\t\tthis.pasteHtmlAtCaret(emoji.native, false);\r\n\t\tthis.setState({ messageInput: element.innerText, messageType: \"text\" });\r\n\t};\r\n\r\n\tchangeHandler = event => {\r\n\t\tthis.startTyping();\r\n\r\n\t\tconst elem = event.currentTarget;\r\n\t\tlet messageInput = elem.textContent.trim();\r\n\r\n\t\tif (!messageInput.length) {\r\n\t\t\tevent.currentTarget.textContent = messageInput;\r\n\t\t\t//return false;\r\n\t\t}\r\n\r\n\t\tthis.setState({ messageInput: elem.innerText, messageType: \"text\" });\r\n\t};\r\n\r\n\ttoggleFilePicker = () => {\r\n\t\tconst currentState = !this.state.showFilePicker;\r\n\t\tthis.setState({ showFilePicker: currentState });\r\n\t};\r\n\r\n\topenFileDialogue = fileType => {\r\n\t\tswitch (fileType) {\r\n\t\t\tcase \"image\":\r\n\t\t\t\tthis.imageUploaderRef.current.click();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"file\":\r\n\t\t\t\tthis.fileUploaderRef.current.click();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"audio\":\r\n\t\t\t\tthis.audioUploaderRef.current.click();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"video\":\r\n\t\t\t\tthis.videoUploaderRef.current.click();\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tonImageChange = e => {\r\n\t\tif (!this.imageUploaderRef.current.files[\"0\"]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst uploadedFile = this.imageUploaderRef.current.files[\"0\"];\r\n\r\n\t\tvar reader = new FileReader(); // Creating reader instance from FileReader() API\r\n\t\treader.addEventListener(\r\n\t\t\t\"load\",\r\n\t\t\tevent => {\r\n\t\t\t\t// Setting up base64 URL on image\r\n\r\n\t\t\t\tconst newFile = new File([reader.result], uploadedFile.name, uploadedFile);\r\n\t\t\t\tthis.sendMediaMessage(newFile, CometChat.MESSAGE_TYPE.IMAGE);\r\n\t\t\t},\r\n\t\t\tfalse,\r\n\t\t);\r\n\r\n\t\treader.readAsArrayBuffer(uploadedFile);\r\n\t};\r\n\r\n\tonFileChange = e => {\r\n\t\tif (!this.fileUploaderRef.current.files[\"0\"]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst uploadedFile = this.fileUploaderRef.current.files[\"0\"];\r\n\r\n\t\tvar reader = new FileReader(); // Creating reader instance from FileReader() API\r\n\t\treader.addEventListener(\r\n\t\t\t\"load\",\r\n\t\t\tevent => {\r\n\t\t\t\t// Setting up base64 URL on image\r\n\r\n\t\t\t\tconst newFile = new File([reader.result], uploadedFile.name, uploadedFile);\r\n\t\t\t\tthis.sendMediaMessage(newFile, CometChat.MESSAGE_TYPE.FILE);\r\n\t\t\t},\r\n\t\t\tfalse,\r\n\t\t);\r\n\r\n\t\treader.readAsArrayBuffer(uploadedFile);\r\n\t};\r\n\r\n\tonAudioChange = e => {\r\n\t\tif (!this.audioUploaderRef.current.files[\"0\"]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst uploadedFile = this.audioUploaderRef.current.files[\"0\"];\r\n\r\n\t\tvar reader = new FileReader(); // Creating reader instance from FileReader() API\r\n\t\treader.addEventListener(\r\n\t\t\t\"load\",\r\n\t\t\t() => {\r\n\t\t\t\t// Setting up base64 URL on image\r\n\r\n\t\t\t\tconst newFile = new File([reader.result], uploadedFile.name, uploadedFile);\r\n\t\t\t\tthis.sendMediaMessage(newFile, CometChat.MESSAGE_TYPE.AUDIO);\r\n\t\t\t},\r\n\t\t\tfalse,\r\n\t\t);\r\n\r\n\t\treader.readAsArrayBuffer(uploadedFile);\r\n\t};\r\n\r\n\tonVideoChange = e => {\r\n\t\tif (!this.videoUploaderRef.current.files[\"0\"]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst uploadedFile = this.videoUploaderRef.current.files[\"0\"];\r\n\r\n\t\tvar reader = new FileReader(); // Creating reader instance from FileReader() API\r\n\t\treader.addEventListener(\r\n\t\t\t\"load\",\r\n\t\t\t() => {\r\n\t\t\t\t// Setting up base64 URL on image\r\n\r\n\t\t\t\tconst newFile = new File([reader.result], uploadedFile.name, uploadedFile);\r\n\t\t\t\tthis.sendMediaMessage(newFile, CometChat.MESSAGE_TYPE.VIDEO);\r\n\t\t\t},\r\n\t\t\tfalse,\r\n\t\t);\r\n\r\n\t\treader.readAsArrayBuffer(uploadedFile);\r\n\t};\r\n\r\n\tgetReceiverDetails = () => {\r\n\t\tlet receiverId;\r\n\t\tlet receiverType;\r\n\r\n\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_USER) {\r\n\t\t\treceiverId = this.context.item.uid;\r\n\t\t\treceiverType = CometChat.RECEIVER_TYPE.USER;\r\n\t\t} else if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP) {\r\n\t\t\treceiverId = this.context.item.guid;\r\n\t\t\treceiverType = CometChat.RECEIVER_TYPE.GROUP;\r\n\t\t}\r\n\r\n\t\treturn { receiverId: receiverId, receiverType: receiverType };\r\n\t};\r\n\r\n\tsendMediaMessage = (messageInput, messageType) => {\r\n\t\tthis.toggleFilePicker();\r\n\t\tthis.endTyping(null, null);\r\n\r\n\t\tconst { receiverId, receiverType } = this.getReceiverDetails();\r\n\r\n\t\tlet mediaMessage = new CometChat.MediaMessage(receiverId, messageInput, messageType, receiverType);\r\n\t\tif (this.props.parentMessageId) {\r\n\t\t\tmediaMessage.setParentMessageId(this.props.parentMessageId);\r\n\t\t}\r\n\r\n\t\tmediaMessage.setSender(this.loggedInUser);\r\n\t\tmediaMessage.setReceiver(this.context.type);\r\n\t\tmediaMessage.setType(messageType);\r\n\t\tmediaMessage.setMetadata({\r\n\t\t\t[enums.CONSTANTS[\"FILE_METADATA\"]]: messageInput,\r\n\t\t});\r\n\t\tmediaMessage._composedAt = getUnixTimestamp();\r\n\t\tmediaMessage._id = ID();\r\n\r\n\t\tSoundManager.play(enums.CONSTANTS.AUDIO[\"OUTGOING_MESSAGE\"], this.context);\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"MESSAGE_COMPOSED\"], [mediaMessage]);\r\n\r\n\t\tCometChat.sendMessage(mediaMessage)\r\n\t\t\t.then(message => {\r\n\t\t\t\tconst newMessageObj = { ...message, _id: mediaMessage._id };\r\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"MESSAGE_SENT\"], [newMessageObj]);\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconst newMessageObj = { ...mediaMessage, error: error };\r\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"ERROR_IN_SENDING_MESSAGE\"], [newMessageObj]);\r\n\t\t\t});\r\n\t};\r\n\r\n\tsendMessageOnEnter = event => {\r\n\t\tif (event.keyCode === 13 && !event.shiftKey) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.sendTextMessage();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n\r\n\tsendTextMessage = () => {\r\n\t\tif (this.state.emojiViewer) {\r\n\t\t\tthis.setState({ emojiViewer: false });\r\n\t\t}\r\n\r\n\t\tif (!this.state.messageInput.trim().length) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this.state.messageToBeEdited) {\r\n\t\t\tthis.editMessage();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.endTyping(null, null);\r\n\r\n\t\tlet { receiverId, receiverType } = this.getReceiverDetails();\r\n\t\tlet messageInput = this.state.messageInput.trim();\r\n\r\n\t\tlet textMessage = new CometChat.TextMessage(receiverId, messageInput, receiverType);\r\n\t\tif (this.props.parentMessageId) {\r\n\t\t\ttextMessage.setParentMessageId(this.props.parentMessageId);\r\n\t\t}\r\n\t\ttextMessage.setSender(this.loggedInUser);\r\n\t\ttextMessage.setReceiver(this.context.type);\r\n\t\ttextMessage.setText(messageInput);\r\n\t\ttextMessage._composedAt = getUnixTimestamp();\r\n\t\ttextMessage._id = ID();\r\n\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"MESSAGE_COMPOSED\"], [textMessage]);\r\n\t\tthis.setState({ messageInput: \"\", replyPreview: false });\r\n\r\n\t\tthis.messageInputRef.current.textContent = \"\";\r\n\t\tSoundManager.play(enums.CONSTANTS.AUDIO[\"OUTGOING_MESSAGE\"], this.context);\r\n\r\n\t\tCometChat.sendMessage(textMessage)\r\n\t\t\t.then(message => {\r\n\t\t\t\tconst newMessageObj = { ...message, _id: textMessage._id };\r\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"MESSAGE_SENT\"], [newMessageObj]);\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconst newMessageObj = { ...textMessage, error: error };\r\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"ERROR_IN_SENDING_MESSAGE\"], [newMessageObj]);\r\n\r\n\t\t\t\tif (error && error.hasOwnProperty(\"code\") && error.code === \"ERR_GUID_NOT_FOUND\") {\r\n\t\t\t\t\t//this.context.setDeletedGroupId(this.context.item.guid);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\teditMessage = () => {\r\n\t\tthis.endTyping(null, null);\r\n\r\n\t\tconst messageToBeEdited = this.props.messageToBeEdited;\r\n\r\n\t\tlet { receiverId, receiverType } = this.getReceiverDetails();\r\n\t\tlet messageText = this.state.messageInput.trim();\r\n\t\tlet textMessage = new CometChat.TextMessage(receiverId, messageText, receiverType);\r\n\t\ttextMessage.setId(messageToBeEdited.id);\r\n\r\n\t\tconst newMessage = Object.assign({}, textMessage, { messageFrom: messageToBeEdited.messageFrom });\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"MESSAGE_EDITED\"], newMessage);\r\n\r\n\t\tthis.setState({ messageInput: \"\" });\r\n\t\tthis.messageInputRef.current.textContent = \"\";\r\n\t\tSoundManager.play(enums.CONSTANTS.AUDIO[\"OUTGOING_MESSAGE\"], this.context);\r\n\r\n\t\tthis.closeEditPreview();\r\n\r\n\t\tCometChat.editMessage(textMessage)\r\n\t\t\t.then(message => {\r\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"MESSAGE_EDITED\"], { ...message });\r\n\t\t\t})\r\n\t\t\t.catch(error => this.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\"));\r\n\t};\r\n\r\n\tcloseEditPreview = () => {\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"CLEAR_EDIT_PREVIEW\"]);\r\n\t};\r\n\r\n\tstartTyping = (timer, metadata) => {\r\n\t\tlet typingInterval = timer || 5000;\r\n\r\n\t\t//if typing indicator feature is disabled\r\n\t\tif (this.state.enableTypingIndicator === false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this.isTyping) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet { receiverId, receiverType } = this.getReceiverDetails();\r\n\t\tlet typingMetadata = metadata || undefined;\r\n\r\n\t\tlet typingNotification = new CometChat.TypingIndicator(receiverId, receiverType, typingMetadata);\r\n\t\tCometChat.startTyping(typingNotification);\r\n\r\n\t\tthis.isTyping = setTimeout(() => {\r\n\t\t\tthis.endTyping(null, typingMetadata);\r\n\t\t}, typingInterval);\r\n\t};\r\n\r\n\tendTyping = (event, metadata) => {\r\n\t\t//fixing synthetic issue\r\n\t\tif (event) {\r\n\t\t\tevent.persist();\r\n\t\t}\r\n\r\n\t\t//if typing indicator is disabled for chat wigdet in dashboard\r\n\t\tif (this.state.enableTypingIndicator === false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet { receiverId, receiverType } = this.getReceiverDetails();\r\n\r\n\t\tlet typingMetadata = metadata || undefined;\r\n\r\n\t\tlet typingNotification = new CometChat.TypingIndicator(receiverId, receiverType, typingMetadata);\r\n\t\tCometChat.endTyping(typingNotification);\r\n\r\n\t\tclearTimeout(this.isTyping);\r\n\t\tthis.isTyping = null;\r\n\t};\r\n\r\n\ttoggleStickerPicker = () => {\r\n\t\tconst stickerViewer = this.state.stickerViewer;\r\n\t\tthis.setState({ stickerViewer: !stickerViewer, emojiViewer: false });\r\n\t};\r\n\r\n\ttoggleEmojiPicker = () => {\r\n\t\tconst emojiViewer = this.state.emojiViewer;\r\n\t\tthis.setState({ emojiViewer: !emojiViewer, stickerViewer: false });\r\n\t};\r\n\r\n\ttoggleCreatePoll = () => {\r\n\t\tconst createPoll = this.state.createPoll;\r\n\t\tthis.setState({ createPoll: !createPoll });\r\n\t};\r\n\r\n\ttoggleCollaborativeDocument = () => {\r\n\t\tconst { receiverId, receiverType } = this.getReceiverDetails();\r\n\t\tCometChat.callExtension(\"document\", \"POST\", \"v1/create\", {\r\n\t\t\treceiver: receiverId,\r\n\t\t\treceiverType: receiverType,\r\n\t\t})\r\n\t\t\t.then(response => {\r\n\t\t\t\t// Response with document url\r\n\t\t\t\tif (response && response.hasOwnProperty(\"document_url\")) {\r\n\t\t\t\t\tthis.context.setToastMessage(\"success\", \"DOCUMENT_SUCCESS\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.context.setToastMessage(\"error\", \"DOCUMENT_FAIL\");\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => this.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\"));\r\n\t};\r\n\r\n\ttoggleCollaborativeBoard = () => {\r\n\t\tconst { receiverId, receiverType } = this.getReceiverDetails();\r\n\t\tCometChat.callExtension(\"whiteboard\", \"POST\", \"v1/create\", {\r\n\t\t\treceiver: receiverId,\r\n\t\t\treceiverType: receiverType,\r\n\t\t})\r\n\t\t\t.then(response => {\r\n\t\t\t\t// Response with board_url\r\n\t\t\t\tif (response && response.hasOwnProperty(\"board_url\")) {\r\n\t\t\t\t\tthis.context.setToastMessage(\"success\", \"WHITEBOARD_SUCCESS\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.context.setToastMessage(\"error\", \"WHITEBOARD_FAIL\");\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => this.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\"));\r\n\t};\r\n\r\n\tcloseCreatePoll = () => {\r\n\t\tthis.toggleCreatePoll();\r\n\t\tthis.toggleFilePicker();\r\n\t};\r\n\r\n\tactionHandler = (action, message) => {\r\n\t\tswitch (action) {\r\n\t\t\tcase enums.ACTIONS[\"POLL_CREATED\"]:\r\n\t\t\t\tthis.toggleCreatePoll();\r\n\t\t\t\tthis.toggleFilePicker();\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"SEND_STICKER\"]:\r\n\t\t\t\tthis.sendSticker(message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"CLOSE_STICKER_KEYBOARD\"]:\r\n\t\t\t\tthis.toggleStickerPicker();\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tsendSticker = stickerMessage => {\r\n\t\tconst { receiverId, receiverType } = this.getReceiverDetails();\r\n\r\n\t\tconst customData = { sticker_url: stickerMessage.stickerUrl, sticker_name: stickerMessage.stickerName };\r\n\t\tconst customType = enums.CUSTOM_TYPE_STICKER;\r\n\r\n\t\tconst customMessage = new CometChat.CustomMessage(receiverId, receiverType, customType, customData);\r\n\t\tif (this.props.parentMessageId) {\r\n\t\t\tcustomMessage.setParentMessageId(this.props.parentMessageId);\r\n\t\t}\r\n\t\tcustomMessage.setSender(this.loggedInUser);\r\n\t\tcustomMessage.setReceiver(this.context.type);\r\n\t\tcustomMessage.setMetadata({ incrementUnreadCount: true });\r\n\t\tcustomMessage._composedAt = getUnixTimestamp();\r\n\t\tcustomMessage._id = ID();\r\n\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"MESSAGE_COMPOSED\"], [customMessage]);\r\n\t\tSoundManager.play(enums.CONSTANTS.AUDIO[\"OUTGOING_MESSAGE\"], this.context);\r\n\r\n\t\tCometChat.sendCustomMessage(customMessage)\r\n\t\t\t.then(message => {\r\n\t\t\t\tconst newMessageObj = { ...message, _id: customMessage._id };\r\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"MESSAGE_SENT\"], [newMessageObj]);\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconst newMessageObj = { ...customMessage, error: error };\r\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"ERROR_IN_SENDING_MESSAGE\"], [newMessageObj]);\r\n\t\t\t});\r\n\t};\r\n\r\n\tsendReplyMessage = messageInput => {\r\n\t\tlet { receiverId, receiverType } = this.getReceiverDetails();\r\n\r\n\t\tlet textMessage = new CometChat.TextMessage(receiverId, messageInput, receiverType);\r\n\t\tif (this.props.parentMessageId) {\r\n\t\t\ttextMessage.setParentMessageId(this.props.parentMessageId);\r\n\t\t}\r\n\t\ttextMessage.setSender(this.loggedInUser);\r\n\t\ttextMessage.setReceiver(this.context.type);\r\n\t\ttextMessage._composedAt = getUnixTimestamp();\r\n\t\ttextMessage._id = ID();\r\n\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"MESSAGE_COMPOSED\"], [textMessage]);\r\n\r\n\t\tSoundManager.play(enums.CONSTANTS.AUDIO[\"OUTGOING_MESSAGE\"], this.context);\r\n\t\tthis.setState({ replyPreview: null });\r\n\r\n\t\tCometChat.sendMessage(textMessage)\r\n\t\t\t.then(message => {\r\n\t\t\t\tconst newMessageObj = { ...message, _id: textMessage._id };\r\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"MESSAGE_SENT\"], [newMessageObj]);\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconst newMessageObj = { ...textMessage, error: error };\r\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"ERROR_IN_SENDING_MESSAGE\"], [newMessageObj]);\r\n\t\t\t});\r\n\t};\r\n\r\n\tclearReplyPreview = () => {\r\n\t\tthis.setState({ replyPreview: null });\r\n\t};\r\n\r\n\tstartLiveReaction = event => {\r\n\t\t//if a live reaction is already in progress, return\r\n\t\tif (this.animationInProgress === true) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this.timeout) {\r\n\t\t\tclearTimeout(this.timeout);\r\n\t\t}\r\n\r\n\t\t//fetch the interval from the constants\r\n\t\tconst liveReactionInterval = enums.CONSTANTS[\"LIVE_REACTION_INTERVAL\"];\r\n\r\n\t\t//mount the live reaction component\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"SEND_LIVE_REACTION\"]);\r\n\t\tthis.sendTransientMessage();\r\n\r\n\t\t//set the timer to stop the live reaction\r\n\t\tthis.timeout = setTimeout(this.stopLiveReaction, liveReactionInterval);\r\n\t};\r\n\r\n\tstopLiveReaction = () => {\r\n\t\t\r\n\t\t//unmount the live reaction component\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"STOP_LIVE_REACTION\"]);\r\n\r\n\t\t//set the animation flag to false\r\n\t\tthis.animationInProgress = false;\r\n\t};\r\n\t\r\n\t\r\n\tsendTransientMessage = () => {\r\n\t\t//fetching the metadata type from constants\r\n\t\tconst metadata = { type: enums.CONSTANTS[\"METADATA_TYPE_LIVEREACTION\"], reaction: this.props.reaction };\r\n\r\n\t\tconst receiverType = this?.context?.type === CometChat.ACTION_TYPE.TYPE_USER ? CometChat.ACTION_TYPE.TYPE_USER : CometChat.ACTION_TYPE.TYPE_GROUP;\r\n\t\tconst receiverId = this?.context?.type === CometChat.ACTION_TYPE.TYPE_USER ? this?.context?.item?.uid : this?.context?.item?.guid;\r\n\r\n\t\tlet transientMessage = new CometChat.TransientMessage(receiverId, receiverType, metadata);\r\n\t\tCometChat.sendTransientMessage(transientMessage);\r\n\t};\r\n\r\n\treactToMessages = emoji => {\r\n\r\n\t\t//close the emoji keyboard\r\n\t\tthis.toggleEmojiPicker();\r\n\r\n\t\t//message object data structure\r\n\t\tlet messageObject = { ...this.state.messageToReact };\r\n\t\tlet newMessageObject = {};\r\n\t\tlet reactionObject = {};\r\n\r\n\t\tconst userObject = {};\r\n\t\tif (this.loggedInUser.avatar && this.loggedInUser.avatar.length) {\r\n\t\t\tuserObject[\"name\"] = this.loggedInUser.name;\r\n\t\t\tuserObject[\"avatar\"] = this.loggedInUser.avatar;\r\n\t\t} else {\r\n\t\t\tuserObject[\"name\"] = this.loggedInUser.name;\r\n\t\t}\r\n\r\n\t\tconst emojiObject = {\r\n\t\t\t[emoji.colons]: { [this.loggedInUser.uid]: userObject },\r\n\t\t};\r\n\r\n\t\tconst reactionExtensionsData = checkMessageForExtensionsData(messageObject, \"reactions\");\r\n\t\t//if the message object has reactions extension data in metadata\r\n\t\tif (reactionExtensionsData) {\r\n\t\t\t//if the reactions metadata has the selected emoji/reaction\r\n\t\t\tif (reactionExtensionsData[emoji.colons]) {\r\n\t\t\t\t//if the reactions metadata has the selected emoji/reaction for the loggedin user\r\n\t\t\t\tif (reactionExtensionsData[emoji.colons][this.loggedInUser.uid]) {\r\n\t\t\t\t\treactionObject = {\r\n\t\t\t\t\t\t...messageObject[\"metadata\"][\"@injected\"][\"extensions\"][\"reactions\"],\r\n\t\t\t\t\t};\r\n\t\t\t\t\tdelete reactionObject[emoji.colons][this.loggedInUser.uid];\r\n\t\t\t\t} else {\r\n\t\t\t\t\treactionObject = {\r\n\t\t\t\t\t\t...messageObject[\"metadata\"][\"@injected\"][\"extensions\"][\"reactions\"],\r\n\t\t\t\t\t\t[emoji.colons]: {\r\n\t\t\t\t\t\t\t...messageObject[\"metadata\"][\"@injected\"][\"extensions\"][\"reactions\"][emoji.colons],\r\n\t\t\t\t\t\t\t[this.loggedInUser.uid]: userObject,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treactionObject = {\r\n\t\t\t\t\t...messageObject[\"metadata\"][\"@injected\"][\"extensions\"][\"reactions\"],\r\n\t\t\t\t\t...emojiObject,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (messageObject.hasOwnProperty(\"metadata\") === false) {\r\n\t\t\t\tmessageObject[\"metadata\"] = {};\r\n\t\t\t}\r\n\r\n\t\t\tif (messageObject[\"metadata\"].hasOwnProperty(\"@injected\") === false) {\r\n\t\t\t\tmessageObject[\"metadata\"][\"@injected\"] = {};\r\n\t\t\t}\r\n\r\n\t\t\tif (messageObject[\"metadata\"][\"@injected\"].hasOwnProperty(\"extensions\") === false) {\r\n\t\t\t\tmessageObject[\"metadata\"][\"@injected\"][\"extensions\"] = {};\r\n\t\t\t}\r\n\r\n\t\t\tif (messageObject[\"metadata\"][\"@injected\"][\"extensions\"].hasOwnProperty(\"reactions\") === false) {\r\n\t\t\t\tmessageObject[\"metadata\"][\"@injected\"][\"extensions\"][\"reactions\"] = {};\r\n\t\t\t}\r\n\r\n\t\t\treactionObject = {\r\n\t\t\t\t...emojiObject,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tconst metadatObject = {\r\n\t\t\tmetadata: {\r\n\t\t\t\t...messageObject[\"metadata\"],\r\n\t\t\t\t\"@injected\": {\r\n\t\t\t\t\t...messageObject[\"metadata\"][\"@injected\"],\r\n\t\t\t\t\textensions: {\r\n\t\t\t\t\t\t...messageObject[\"metadata\"][\"@injected\"][\"extensions\"],\r\n\t\t\t\t\t\treactions: {\r\n\t\t\t\t\t\t\t...reactionObject,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tnewMessageObject = {\r\n\t\t\t...messageObject,\r\n\t\t\tdata: {\r\n\t\t\t\t...messageObject,\r\n\t\t\t\t...metadatObject,\r\n\t\t\t},\r\n\t\t\t...metadatObject,\r\n\t\t};\r\n\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"MESSAGE_EDITED\"], newMessageObject);\r\n\r\n\t\tCometChat.callExtension(\"reactions\", \"POST\", \"v1/react\", {\r\n\t\t\tmsgId: this.state.messageToReact.id,\r\n\t\t\temoji: emoji.colons,\r\n\t\t})\r\n\t\t.then(response => {\r\n\t\t\t// Reaction failed\r\n\t\t\tif (!response || !response.success || response.success !== true) {\r\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\");\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(error => this.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\"));\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet liveReactionBtn = null;\r\n\t\tconst liveReactionText = Translator.translate(\"LIVE_REACTION\", this.context.language);\r\n\t\tif (enums.CONSTANTS[\"LIVE_REACTIONS\"].hasOwnProperty(this.props.reaction)) {\r\n\t\t\tconst reactionName = this.props.reaction;\r\n\t\t\tliveReactionBtn = (\r\n\t\t\t\t<div title={liveReactionText} css={reactionBtnStyle()} className=\"button__reactions\" onClick={this.startLiveReaction}>\r\n\t\t\t\t\t<img src={heartIcon} alt={reactionName} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet disabledState = false;\r\n\t\tif (this.context.item.blockedByMe) {\r\n\t\t\tdisabledState = true;\r\n\t\t}\r\n\r\n\t\tconst docText = Translator.translate(\"ATTACH_FILE\", this.context.language);\r\n\t\tlet docs = (\r\n\t\t\t<div\r\n\t\t\t\ttitle={docText}\r\n\t\t\t\tcss={fileItemStyle(docIcon, this.context)}\r\n\t\t\t\tclassName=\"filelist__item item__file\"\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tthis.openFileDialogue(\"file\");\r\n\t\t\t\t}}>\r\n\t\t\t\t<i></i>\r\n\t\t\t\t<input onChange={this.onFileChange} type=\"file\" id=\"file\" ref={this.fileUploaderRef} />\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tconst videoText = Translator.translate(\"ATTACH_VIDEO\", this.context.language);\r\n\t\tconst audioText = Translator.translate(\"ATTACH_AUDIO\", this.context.language);\r\n\t\tconst imageText = Translator.translate(\"ATTACH_IMAGE\", this.context.language);\r\n\t\tlet avp = (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div\r\n\t\t\t\t\ttitle={videoText}\r\n\t\t\t\t\tcss={fileItemStyle(videoIcon, this.context)}\r\n\t\t\t\t\tclassName=\"filelist__item item__video\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tthis.openFileDialogue(\"video\");\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<i></i>\r\n\t\t\t\t\t<input onChange={this.onVideoChange} accept=\"video/*\" type=\"file\" ref={this.videoUploaderRef} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\ttitle={audioText}\r\n\t\t\t\t\tcss={fileItemStyle(audioIcon, this.context)}\r\n\t\t\t\t\tclassName=\"filelist__item item__audio\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tthis.openFileDialogue(\"audio\");\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<i></i>\r\n\t\t\t\t\t<input onChange={this.onAudioChange} accept=\"audio/*\" type=\"file\" ref={this.audioUploaderRef} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\ttitle={imageText}\r\n\t\t\t\t\tcss={fileItemStyle(imageIcon, this.context)}\r\n\t\t\t\t\tclassName=\"filelist__item item__image\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tthis.openFileDialogue(\"image\");\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<i></i>\r\n\t\t\t\t\t<input onChange={this.onImageChange} accept=\"image/*\" type=\"file\" ref={this.imageUploaderRef} />\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\r\n\t\tconst pollText = Translator.translate(\"CREATE_POLL\", this.context.language);\r\n\t\tlet createPollBtn = (\r\n\t\t\t<div title={pollText} css={fileItemStyle(pollIcon, this.context)} className=\"filelist__item item__poll\" onClick={this.toggleCreatePoll}>\r\n\t\t\t\t<i></i>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tconst collaborativeDocText = Translator.translate(\"COLLABORATE_USING_DOCUMENT\", this.context.language);\r\n\t\tlet collaborativeDocBtn = (\r\n\t\t\t<div title={collaborativeDocText} css={fileItemStyle(documentIcon, this.context)} className=\"filelist__item item__document\" onClick={this.toggleCollaborativeDocument}>\r\n\t\t\t\t<i></i>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tconst collaborativeBoardText = Translator.translate(\"COLLABORATE_USING_WHITEBOARD\", this.context.language);\r\n\t\tlet collaborativeBoardBtn = (\r\n\t\t\t<div title={collaborativeBoardText} css={fileItemStyle(whiteboardIcon, this.context)} className=\"filelist__item item__whiteboard\" onClick={this.toggleCollaborativeBoard}>\r\n\t\t\t\t<i></i>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tconst emojiText = Translator.translate(\"EMOJI\", this.context.language);\r\n\t\tlet emojiBtn = (\r\n\t\t\t<div\r\n\t\t\t\ttitle={emojiText}\r\n\t\t\t\tcss={emojiButtonStyle(insertEmoticon, this.context)}\r\n\t\t\t\tclassName=\"button__emoji\"\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tthis.toggleEmojiPicker();\r\n\t\t\t\t\tthis.setState({ messageToReact: \"\" });\r\n\t\t\t\t}}>\r\n\t\t\t\t<i></i>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tconst StickerText = Translator.translate(\"STICKER\", this.context.language);\r\n\t\tlet stickerBtn = (\r\n\t\t\t<div title={StickerText} css={stickerBtnStyle(stickerIcon, this.context)} className=\"button__sticker\" onClick={this.toggleStickerPicker}>\r\n\t\t\t\t<i></i>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tconst sendMessageText = Translator.translate(\"SEND_MESSAGE\", this.context.language);\r\n\t\tlet sendBtn = (\r\n\t\t\t<div title={sendMessageText} css={sendButtonStyle(sendBlue, this.context)} className=\"button__send\" onClick={this.sendTextMessage}>\r\n\t\t\t\t<i></i>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\t//if uploading photos, videos feature is disabled\r\n\t\tif (this.state.enablePhotosVideos === false) {\r\n\t\t\tavp = null;\r\n\t\t}\r\n\r\n\t\t//if files upload are disabled for chat widget in dashboard\r\n\t\tif (this.state.enableFiles === false) {\r\n\t\t\tdocs = null;\r\n\t\t}\r\n\r\n\t\t//if polls feature is disabled\r\n\t\tif (this.state.enablePolls === false || this.props.parentMessageId) {\r\n\t\t\tcreatePollBtn = null;\r\n\t\t}\r\n\r\n\t\t//if collaborative_document are disabled for chat widget in dashboard\r\n\t\tif (this.state.enableCollaborativeDocument === false || this.props.parentMessageId) {\r\n\t\t\tcollaborativeDocBtn = null;\r\n\t\t}\r\n\r\n\t\t//if collaborative_document are disabled for chat widget in dashboard\r\n\t\tif (this.state.enableCollaborativeWhiteboard === false || this.props.parentMessageId) {\r\n\t\t\tcollaborativeBoardBtn = null;\r\n\t\t}\r\n\r\n\t\t//if emojis are disabled for chat widget in dashboard\r\n\t\tif (this.state.enableEmojis === false) {\r\n\t\t\temojiBtn = null;\r\n\t\t}\r\n\r\n\t\t//if live reactions is disabled for chat widget in dashboard\r\n\t\tif (this.state.enableLiveReaction === false || this.state.messageInput.length || this.props.parentMessageId) {\r\n\t\t\tliveReactionBtn = null;\r\n\t\t}\r\n\r\n\t\t//if stickers is disabled for chat widget in dashboard\r\n\t\tif (this.state.enableStickers === false) {\r\n\t\t\tstickerBtn = null;\r\n\t\t}\r\n\r\n\t\tif (!this.state.messageInput.length) {\r\n\t\t\tsendBtn = null;\r\n\t\t}\r\n\r\n\t\tconst attachText = Translator.translate(\"ATTACH\", this.context.language);\r\n\t\tlet attach = (\r\n\t\t\t<div css={stickyAttachmentStyle()} className=\"input__sticky__attachment\">\r\n\t\t\t\t<div css={stickyAttachButtonStyle(roundedPlus, this.context)} className=\"attachment__icon\" onClick={this.toggleFilePicker} title={attachText}>\r\n\t\t\t\t\t<i></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div css={filePickerStyle(this.state)} className=\"attachment__filepicker\" dir={Translator.getDirection(this.context.language)}>\r\n\t\t\t\t\t<div css={fileListStyle()} className=\"filepicker__filelist\">\r\n\t\t\t\t\t\t{avp}\r\n\t\t\t\t\t\t{docs}\r\n\t\t\t\t\t\t{createPollBtn}\r\n\t\t\t\t\t\t{collaborativeDocBtn}\r\n\t\t\t\t\t\t{collaborativeBoardBtn}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tif (avp === null && docs === null && createPollBtn === null && collaborativeDocBtn === null && collaborativeBoardBtn === null) {\r\n\t\t\tattach = null;\r\n\t\t}\r\n\r\n\t\tlet createPoll = null;\r\n\t\tif (this.state.createPoll) {\r\n\t\t\tcreatePoll = <CometChatCreatePoll close={this.closeCreatePoll} actionGenerated={this.actionHandler} />;\r\n\t\t}\r\n\r\n\t\tlet editPreview = null;\r\n\t\tif (this.state.messageToBeEdited) {\r\n\t\t\tlet messageText = this.state.messageToBeEdited.text;\r\n\r\n\t\t\t//xss extensions data\r\n\t\t\tconst xssData = checkMessageForExtensionsData(this.state.messageToBeEdited, \"xss-filter\");\r\n\t\t\tif (xssData && xssData.hasOwnProperty(\"sanitized_text\") && xssData.hasOwnProperty(\"hasXSS\") && xssData.hasXSS === \"yes\") {\r\n\t\t\t\tmessageText = xssData.sanitized_text;\r\n\t\t\t}\r\n\r\n\t\t\t//datamasking extensions data\r\n\t\t\tconst maskedData = checkMessageForExtensionsData(this.state.messageToBeEdited, \"data-masking\");\r\n\t\t\tif (maskedData && maskedData.hasOwnProperty(\"data\") && maskedData.data.hasOwnProperty(\"sensitive_data\") && maskedData.data.hasOwnProperty(\"message_masked\") && maskedData.data.sensitive_data === \"yes\") {\r\n\t\t\t\tmessageText = maskedData.data.message_masked;\r\n\t\t\t}\r\n\r\n\t\t\t//profanity extensions data\r\n\t\t\tconst profaneData = checkMessageForExtensionsData(this.state.messageToBeEdited, \"profanity-filter\");\r\n\t\t\tif (profaneData && profaneData.hasOwnProperty(\"profanity\") && profaneData.hasOwnProperty(\"message_clean\") && profaneData.profanity === \"yes\") {\r\n\t\t\t\tmessageText = profaneData.message_clean;\r\n\t\t\t}\r\n\r\n\t\t\teditPreview = (\r\n\t\t\t\t<div css={editPreviewContainerStyle(this.context, keyframes)}>\r\n\t\t\t\t\t<div css={previewHeadingStyle()}>\r\n\t\t\t\t\t\t<div css={previewTextStyle()}>{Translator.translate(\"EDIT_MESSAGE\", this.context.language)}</div>\r\n\t\t\t\t\t\t<span css={previewCloseStyle(closeIcon, this.context)} onClick={this.closeEditPreview}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>{messageText}</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet smartReplyPreview = null;\r\n\t\tif (this.state.replyPreview) {\r\n\t\t\tconst message = this.state.replyPreview;\r\n\r\n\t\t\tconst smartReplyData = checkMessageForExtensionsData(message, \"smart-reply\");\r\n\t\t\tif (smartReplyData && smartReplyData.hasOwnProperty(\"error\") === false) {\r\n\t\t\t\tconst options = [smartReplyData[\"reply_positive\"], smartReplyData[\"reply_neutral\"], smartReplyData[\"reply_negative\"]];\r\n\t\t\t\tsmartReplyPreview = <CometChatSmartReplyPreview options={options} clicked={this.sendReplyMessage} close={this.clearReplyPreview} />;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet stickerViewer = null;\r\n\t\tif (this.state.stickerViewer) {\r\n\t\t\tstickerViewer = <CometChatStickerKeyboard actionGenerated={this.actionHandler} />;\r\n\t\t}\r\n\r\n\t\tlet emojiViewer = null;\r\n\t\tif (this.state.emojiViewer) {\r\n\t\t\temojiViewer = <CometChatEmojiKeyboard emojiClicked={this.emojiClicked} lang={this.context.language} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={chatComposerStyle(this.context)} className=\"chat__composer\">\r\n\t\t\t\t{editPreview}\r\n\t\t\t\t{smartReplyPreview}\r\n\t\t\t\t{stickerViewer}\r\n\t\t\t\t{emojiViewer}\r\n\t\t\t\t<div css={composerInputStyle()} className=\"composer__input\">\r\n\t\t\t\t\t<div tabIndex=\"-1\" css={inputInnerStyle(this.props, this.state, this.context)} className=\"input__inner\">\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tcss={messageInputStyle(disabledState)}\r\n\t\t\t\t\t\t\tclassName=\"input__message-input\"\r\n\t\t\t\t\t\t\tcontentEditable=\"true\"\r\n\t\t\t\t\t\t\tplaceholder={Translator.translate(\"ENTER_YOUR_MESSAGE_HERE\", this.context.language)}\r\n\t\t\t\t\t\t\tdir={Translator.getDirection(this.context.language)}\r\n\t\t\t\t\t\t\tonInput={this.changeHandler}\r\n\t\t\t\t\t\t\tonBlur={event => this.endTyping(event)}\r\n\t\t\t\t\t\t\tonKeyDown={this.sendMessageOnEnter}\r\n\t\t\t\t\t\t\tref={this.messageInputRef}></div>\r\n\t\t\t\t\t\t<div css={inputStickyStyle(disabledState, attach, this.context)} className=\"input__sticky\">\r\n\t\t\t\t\t\t\t{attach}\r\n\t\t\t\t\t\t\t<div css={stickyButtonStyle(this.state)} className=\"input__sticky__buttons\">\r\n\t\t\t\t\t\t\t\t{stickerBtn}\r\n\t\t\t\t\t\t\t\t{emojiBtn}\r\n\t\t\t\t\t\t\t\t{sendBtn}\r\n\t\t\t\t\t\t\t\t{liveReactionBtn}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{createPoll}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatMessageComposer.defaultProps = {\r\n  theme: theme,\r\n  reaction: \"heart\"\r\n};\r\n\r\nCometChatMessageComposer.propTypes = {\r\n  theme: PropTypes.object,\r\n  reaction: PropTypes.string\r\n}\r\n\r\nexport { CometChatMessageComposer };\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAUCAYAAACXtf2DAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAFAAAAAAnxZisAAACpElEQVQ4Ea1VzUsVURQ/5868UrEg/AMy0NTMRQRBJfIQszKxgh5ByzbVIooiiDbZBwUtXAWJtGgRJW0MQsxnxfhRIbgpsqcQtajoA8uITGfu3Hs6Z+zJU3pq+n4wc+fee87vd+bcM2cQ5mB0Z+0WMuERQNiNgO+UgtYAgs7K7uffM01fVlevyc9391iAo5bsOkT1gPdvlvd4Q5l2mJ68bahdG2rTwvMmB9HV1gKP0WWA3oSWzlc86rsj9qm6mkOuwgsKsMQSgeErxpEYS5oQOpSLp0u7vA9iGwmkdsWLlaGuPKXKJw3TyU4GYizEYG+OFglXAt7gOWomzoRY5TsO+Na+8pEaqpJ97/FeIuFUjX++X+C4jb+ZPBsUi3C0Wvb5OSaRZ0MBi0xY01GxvfYApuprtjkE/ZZAZXeZpkrnczF2Ek9oaKtCi2c4ogXJRUKIFyJP2zmolHLUSZeAGjWXQq4RcpHwMTVxIeCwVEuuIWfGSPGIl/9OcqohnA7QVWUCeMg1PyJ1nCsIl7ZmVIcqqSo97xen6aK8UC4SleZB5VwS7ijs8p7e9sDQLflIlos8R4FPdLs9Gb8rXJEAq5K7YurEpLHeckTEd8rYp77G483QHNXmTOJLuwZ/ukof9I0dWIqI+PjWDFqHEps870c6EzMCslCSfPYVQtzvG9MpDos5E7GZJrc9gfX3buju/5Qml3GWgCyUed7YtwmdYJHrLqqom8r6vyDfT0whsG3bqrzV+6oeD36ZazdvkCN1NYe5nq8xSRHndpYvd14Igca5dZxdn+xtm7WZMZlXQOxe18c3ukQtLLJDc0cUSPsOiJ6AMqfKugdeRItZbgsKiN/Q5s2xwqLCYw7hOWl3/FO5oj+OtVYODwdZeJe2LD+mVDxe/D/efwCuAQs2cnkFkQAAAABJRU5ErkJggg==\"","import { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nexport class MessageHeaderManager {\r\n\r\n    userListenerId = \"head_user_\" + new Date().getTime();\r\n    msgListenerId = \"head_message_\" + new Date().getTime();\r\n    groupListenerId = \"head_group_\" + new Date().getTime();\r\n\r\n    attachListeners(callback) {\r\n        \r\n        CometChat.addUserListener(\r\n            this.userListenerId,\r\n            new CometChat.UserListener({\r\n                onUserOnline: onlineUser => {\r\n                    /* when someuser/friend comes online, user will be received here */\r\n                    callback(enums.USER_ONLINE, onlineUser);\r\n                },\r\n                onUserOffline: offlineUser => {\r\n                    /* when someuser/friend went offline, user will be received here */\r\n                    callback(enums.USER_OFFLINE, offlineUser);\r\n                }\r\n            })\r\n        );\r\n\r\n        CometChat.addMessageListener(\r\n            this.msgListenerId,\r\n            new CometChat.MessageListener({\r\n                onTypingStarted: typingIndicator => {\r\n                    callback(enums.TYPING_STARTED, typingIndicator);\r\n                },\r\n                onTypingEnded: typingIndicator => {\r\n                    callback(enums.TYPING_ENDED, typingIndicator);\r\n                }\r\n            })\r\n        );\r\n\r\n        CometChat.addGroupListener(\r\n            this.groupListenerId,\r\n            new CometChat.GroupListener({\r\n                onGroupMemberKicked: (message, kickedUser, kickedBy, kickedFrom) => {\r\n                    callback(enums.GROUP_MEMBER_KICKED, kickedFrom, kickedUser);\r\n                }, \r\n                onGroupMemberBanned: (message, bannedUser, bannedBy, bannedFrom) => {\r\n                    callback(enums.GROUP_MEMBER_BANNED, bannedFrom, bannedUser);\r\n                }, \r\n                onMemberAddedToGroup: (message, userAdded, userAddedBy, userAddedIn) => {\r\n                    callback(enums.GROUP_MEMBER_ADDED, userAddedIn);\r\n                }, \r\n                onGroupMemberLeft: (message, leavingUser, group) => {\r\n                    callback(enums.GROUP_MEMBER_LEFT, group, leavingUser);\r\n                }, \r\n                onGroupMemberJoined: (message, joinedUser, joinedGroup) => {\r\n                    callback(enums.GROUP_MEMBER_JOINED, joinedGroup);\r\n                }\r\n            })\r\n        );\r\n\r\n    }\r\n\r\n    removeListeners() {\r\n\r\n        CometChat.removeUserListener(this.userListenerId);\r\n        CometChat.removeMessageListener(this.msgListenerId);\r\n        CometChat.removeGroupListener(this.groupListenerId);\r\n    }\r\n}","import { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nexport const chatHeaderStyle = context => {\r\n\r\n\treturn {\r\n\t\tpadding: \"16px\",\r\n\t\twidth: \"100%\",\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.white}`,\r\n\t\tzIndex: \"1\",\r\n\t\tborderBottom: `1px solid ${context.theme.borderColor.primary}`,\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"row\",\r\n\t\tjustifyContent: \"space-between\",\r\n\t};\r\n};\r\n\r\nexport const chatDetailStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        width: \"calc(100% - 116px)\",\r\n    }\r\n}\r\n\r\nexport const chatSideBarBtnStyle = (img, props, context) => {\r\n\r\n    const displayValue = (props.hasOwnProperty(\"sidebar\") && props.sidebar === 0) ? { display: \"none!important\"} : {};\r\n\r\n    const mq = [...context.theme.breakPoints];\r\n\r\n    return {\r\n        cursor: \"pointer\",\r\n        display: \"none\",\r\n        mask: `url(${img}) center center no-repeat`,\r\n        backgroundColor: `${context.theme.primaryColor}`,\r\n        width: \"24px\",\r\n        height: \"24px\",\r\n        float: \"left\",\r\n        [`@media ${mq[1]}, ${mq[2]}`]: {\r\n\t\t\tdisplay: \"block\"\r\n\t\t},\r\n        ...displayValue\r\n    }\r\n}\r\n\r\nexport const chatThumbnailStyle = () => {\r\n\r\n    return {\r\n        display: \"inline-block\",\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        flexShrink: \"0\",\r\n        margin: \"0 16px\",\r\n    }\r\n}\r\n\r\nexport const chatUserStyle = context => {\r\n\r\n    const mq = [...context.theme.breakPoints];\r\n\r\n\treturn {\r\n\t\twidth: \"calc(100% - 50px)\",\r\n\t\tpadding: \"0\",\r\n\t\tflexGrow: \"1\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\t[`@media ${mq[1]}, ${mq[2]}`]: {\r\n\t\t\twidth: \"calc(100% - 80px)!important\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const chatNameStyle = (context) => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        fontSize: \"15px\",\r\n        fontWeight: \"600\",\r\n        lineHeight: \"22px\",\r\n        width: \"100%\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n        color: `${context.theme.primary}`,\r\n    }\r\n}\r\n\r\nexport const chatStatusStyle = (state, context) => {\r\n\r\n    let status = {};\r\n    if (context.type === CometChat.ACTION_TYPE.TYPE_USER) {\r\n\r\n        status = {\r\n            color: `${context.theme.color.blue}`,\r\n            textTransform: \"capitalize\",\r\n        };\r\n\r\n        if (state.presence === \"offline\") {\r\n            status = {\r\n                color: `${context.theme.color.helpText}`,\r\n                textTransform: \"capitalize\",\r\n            }\r\n        } \r\n\r\n        if (state.typing) {\r\n            status = {\r\n                color: `${context.theme.color.helpText}`,\r\n                textTransform: \"none\",\r\n                fontStyle: \"italic\",\r\n            };\r\n        }\r\n        \r\n    } else if (context.type === CometChat.ACTION_TYPE.TYPE_GROUP) {\r\n\r\n        status = {\r\n            color: `${context.theme.color.helpText}`,\r\n        }\r\n\r\n        if (state.typing) {\r\n            status = {\r\n                color: `${context.theme.color.helpText}`,\r\n                fontStyle: \"italic\",\r\n            };\r\n        }\r\n    }\r\n\r\n    return {\r\n        fontSize: \"13px\",\r\n        width: \"100%\",\r\n        ...status\r\n    }\r\n}\r\n\r\nexport const chatOptionWrapStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"center\",\r\n        width: \"auto\",\r\n    }\r\n}\r\n\r\nexport const chatOptionStyle = (img, context, ongoingCall) => {\r\n\r\n    const bgColor = (ongoingCall) ? {\r\n        backgroundColor: `${context.theme.secondaryTextColor}`\r\n    } : {\r\n        backgroundColor: `${context.theme.primaryColor}`\r\n    };\r\n    \r\n    return {\r\n        width: \"24px\",\r\n        height: \"24px\",\r\n        cursor: \"pointer\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        margin: \"0 0 0 16px\",\r\n        \"i\": {\r\n            width: \"24px\",\r\n            height: \"24px\",\r\n            display: \"inline-block\",\r\n            mask: `url(${img}) center center no-repeat`,\r\n            ...bgColor\r\n        }\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/menu.1a7aa5fb.svg\";","export default __webpack_public_path__ + \"static/media/audio-call.8e523a28.svg\";","export default __webpack_public_path__ + \"static/media/video-call.a438154e.svg\";","export default __webpack_public_path__ + \"static/media/info.c86c4d12.svg\";","import React from \"react\";\r\nimport dateFormat from \"dateformat\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { MessageHeaderManager } from \"./controller\";\r\n\r\nimport { CometChatAvatar, CometChatUserPresence } from \"../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport { \r\n  chatHeaderStyle, \r\n  chatDetailStyle, \r\n  chatSideBarBtnStyle, \r\n  chatThumbnailStyle,\r\n  chatUserStyle,\r\n  chatNameStyle,\r\n  chatStatusStyle,\r\n  chatOptionWrapStyle,\r\n  chatOptionStyle\r\n} from \"./style\";\r\n\r\nimport menuIcon from \"./resources/menu.svg\";\r\nimport audioCallIcon from \"./resources/audio-call.svg\";\r\nimport videoCallIcon from \"./resources/video-call.svg\";\r\nimport detailPaneIcon from \"./resources/info.svg\";\r\n\r\nclass CometChatMessageHeader extends React.Component {\r\n\titem;\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tstatus: \"\",\r\n\t\t\tpresence: \"offline\",\r\n\t\t\ttyping: null,\r\n\t\t\tenableGroupVoiceCall: false,\r\n\t\t\tenableGroupVideoCall: false,\r\n\t\t\tenableOneOnOneVoiceCall: false,\r\n\t\t\tenableOneOnOneVideoCall: false,\r\n\t\t\tenableUserPresence: false,\r\n\t\t\tenableAddGroupMembers: false,\r\n\t\t\tenableChangeScope: false,\r\n\t\t\tenableKickGroupMembers: false,\r\n\t\t\tenableBanGroupMembers: false,\r\n\t\t\tenableDeleteGroup: false,\r\n\t\t\tenableViewGroupMembers: false,\r\n\t\t\tenableLeaveGroup: false,\r\n\t\t\tenableSharedMedia: false,\r\n\t\t\tenableBlockUser: false,\r\n\t\t\tenableTypingIndicator: false,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tCometChat.getLoggedinUser()\r\n\t\t\t.then(user => (this.loggedInUser = user))\r\n\t\t\t.catch(error => this.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\"));\r\n\r\n\t\tthis.MessageHeaderManager = new MessageHeaderManager();\r\n\t\tthis.MessageHeaderManager.attachListeners(this.updateHeader);\r\n\r\n\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_USER) {\r\n\t\t\tthis.setStatusForUser();\r\n\t\t} else if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP) {\r\n\t\t\tthis.setStatusForGroup();\r\n\t\t}\r\n\r\n\t\tthis.item = this.context.item;\r\n\r\n\t\tthis.enableGroupVoiceCall();\r\n\t\tthis.enableGroupVideoCall();\r\n\t\tthis.enableOneOnOneVoiceCall();\r\n\t\tthis.enableOneOnOneVideoCall();\r\n\t\tthis.enableUserPresence();\r\n\t\tthis.enableAddGroupMembers();\r\n\t\tthis.enableChangeScope();\r\n\t\tthis.enableKickGroupMembers();\r\n\t\tthis.enableBanGroupMembers();\r\n\t\tthis.enableViewGroupMembers();\r\n\t\tthis.enableDeleteGroup();\r\n\t\tthis.enableLeaveGroup();\r\n\t\tthis.enableSharedMedia();\r\n\t\tthis.enableBlockUser();\r\n\t\tthis.enableTypingIndicator();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\r\n\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && (this.item !== this.context.item || prevProps.lang !== this.props.lang)) {\r\n\t\t\tthis.setStatusForUser();\r\n\t\t} else if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && (this.item !== this.context.item || prevProps.lang !== this.props.lang)) {\r\n\t\t\tthis.setStatusForGroup();\r\n\t\t}\r\n\r\n\t\tthis.item = this.context.item;\r\n\r\n\t\tthis.enableGroupVoiceCall();\r\n\t\tthis.enableGroupVideoCall();\r\n\t\tthis.enableOneOnOneVoiceCall();\r\n\t\tthis.enableOneOnOneVideoCall();\r\n\t\tthis.enableUserPresence();\r\n\t\tthis.enableAddGroupMembers();\r\n\t\tthis.enableChangeScope();\r\n\t\tthis.enableKickGroupMembers();\r\n\t\tthis.enableBanGroupMembers();\r\n\t\tthis.enableViewGroupMembers();\r\n\t\tthis.enableDeleteGroup();\r\n\t\tthis.enableLeaveGroup();\r\n\t\tthis.enableSharedMedia();\r\n\t\tthis.enableBlockUser();\r\n\t\tthis.enableTypingIndicator();\r\n\t}\r\n\r\n\tsetStatusForUser = () => {\r\n\t\tlet status = \"\";\r\n\t\tconst presence = this.context.item.status === CometChat.USER_STATUS.ONLINE ? CometChat.USER_STATUS.ONLINE : CometChat.USER_STATUS.OFFLINE;\r\n\r\n\t\tif (this.context.item.status === CometChat.USER_STATUS.OFFLINE && this.context.item.lastActiveAt) {\r\n\t\t\tconst lastActive = this.context.item.lastActiveAt * 1000;\r\n\t\t\tconst messageDate = dateFormat(lastActive, \"dS mmm yyyy, h:MM TT\");\r\n\r\n\t\t\tstatus = `${Translator.translate(\"LAST_ACTIVE_AT\", this.props.lang)}: ${messageDate}`;\r\n\t\t} else if (this.context.item.status === CometChat.USER_STATUS.OFFLINE) {\r\n\t\t\tstatus = Translator.translate(\"OFFLINE\", this.props.lang);\r\n\t\t} else if (this.context.item.status === CometChat.USER_STATUS.ONLINE) {\r\n\t\t\tstatus = Translator.translate(\"ONLINE\", this.props.lang);\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState({status: status, presence: presence});\r\n\t};\r\n\r\n\tsetStatusForGroup = () => {\r\n\t\tlet membersText = Translator.translate(\"MEMBERS\", this.props.lang);\r\n\t\tconst status = `${this.context.item.membersCount} ${membersText}`;\r\n\t\tthis.setState({status: status});\r\n\t};\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.MessageHeaderManager.removeListeners();\r\n\t\tthis.MessageHeaderManager = null;\r\n\t}\r\n\r\n\tupdateHeader = (key, item, groupUser) => {\r\n\t\tswitch (key) {\r\n\t\t\tcase enums.USER_ONLINE:\r\n\t\t\tcase enums.USER_OFFLINE: {\r\n\t\t\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.context.item.uid === item.uid) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t//if user presence feature is disabled\r\n\t\t\t\t\tif (this.state.enableUserPresence === false) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet status = \"\";\r\n\t\t\t\t\tif (item.status === CometChat.USER_STATUS.OFFLINE) {\r\n\t\t\t\t\t\tstatus = Translator.translate(\"OFFLINE\", this.context.language);\r\n\t\t\t\t\t} else if (item.status === CometChat.USER_STATUS.ONLINE) {\r\n\t\t\t\t\t\tstatus = Translator.translate(\"ONLINE\", this.context.language);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setState({status: status, presence: item.status});\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase enums.GROUP_MEMBER_KICKED:\r\n\t\t\tcase enums.GROUP_MEMBER_BANNED:\r\n\t\t\tcase enums.GROUP_MEMBER_LEFT:\r\n\t\t\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.context.item.guid === item.guid && this.loggedInUser?.uid !== groupUser?.uid) {\r\n\t\t\t\t\tlet membersCount = parseInt(item.membersCount);\r\n\t\t\t\t\tconst status = `${membersCount} ${Translator.translate(\"MEMBERS\", this.context.language)}`;\r\n\t\t\t\t\tthis.setState({status: status});\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_JOINED:\r\n\t\t\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.context.item.guid === item.guid) {\r\n\t\t\t\t\tlet membersCount = parseInt(item.membersCount);\r\n\t\t\t\t\tconst status = `${membersCount} ${Translator.translate(\"MEMBERS\", this.context.language)}`;\r\n\t\t\t\t\tthis.setState({status: status});\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_ADDED:\r\n\t\t\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.context.item.guid === item.guid) {\r\n\t\t\t\t\tlet membersCount = parseInt(item.membersCount);\r\n\t\t\t\t\tconst status = `${membersCount} ${Translator.translate(\"MEMBERS\", this.context.language)}`;\r\n\t\t\t\t\tthis.setState({status: status});\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.TYPING_STARTED:\r\n\t\t\t\tthis.onTypingStarted(item);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.TYPING_ENDED: \r\n\t\t\t\tthis.onTypingEnded(item);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tonTypingStarted = item => {\r\n\r\n\t\tconst showTyping = typingText => {\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * if metadata is available, show live reactions else show typing\r\n\t\t\t */\r\n\t\t\t// if (item.hasOwnProperty(\"metadata\") && item.metadata && item.metadata.hasOwnProperty(\"type\") && item.metadata.type === enums.CONSTANTS[\"METADATA_TYPE_LIVEREACTION\"]) {\r\n\t\t\t// \tthis.props.actionGenerated(enums.ACTIONS[\"SHOW_LIVE_REACTION\"], item);\r\n\t\t\t// } else {\r\n\r\n\t\t\t\tif (this.state.enableTypingIndicator === true) {\r\n\t\t\t\t\tthis.setState({typing: typingText});\r\n\t\t\t\t} \r\n\t\t\t//}\r\n\t\t};\r\n\r\n\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.context.type === item.receiverType && this.context.item.guid === item.receiverId) {\r\n\t\t\tconst typingText = `${item.sender.name} ${Translator.translate(\"IS_TYPING\", this.context.language)}`;\r\n\t\t\tshowTyping(typingText);\r\n\t\t} else if (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.context.type === item.receiverType && this.context.item.uid === item.sender.uid) {\r\n\t\t\tconst typingText = `${Translator.translate(\"TYPING\", this.context.language)}`;\r\n\t\t\tshowTyping(typingText);\r\n\t\t}\r\n\t};\r\n\r\n\tonTypingEnded = item => {\r\n\r\n\t\tconst endTyping = () => {\r\n\t\t\t/**\r\n\t\t\t * if metadata is available, end live reactions else end typing\r\n\t\t\t */\r\n\t\t\t// if (item.hasOwnProperty(\"metadata\") && item.metadata && item.metadata.hasOwnProperty(\"type\") && item.metadata.type === enums.CONSTANTS[\"METADATA_TYPE_LIVEREACTION\"]) {\r\n\t\t\t// \tthis.props.actionGenerated(enums.ACTIONS[\"STOP_LIVE_REACTION\"], item);\r\n\t\t\t// } else {\r\n\r\n\t\t\t\tif (this.state.enableTypingIndicator === true) {\r\n\t\t\t\t\tthis.setState({typing: null});\r\n\t\t\t\t} \r\n\t\t\t//}\r\n\t\t}\r\n\r\n\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.context.type === item.receiverType && this.context.item.guid === item.receiverId) {\r\n\t\t\t\r\n\t\t\tthis.setStatusForGroup();\r\n\t\t\tendTyping();\r\n\r\n\t\t} else if (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.context.type === item.receiverType && this.context.item.uid === item.sender.uid) {\r\n\r\n\t\t\tif (this.state.presence === CometChat.USER_STATUS.ONLINE) {\r\n\t\t\t\tthis.setState({status: Translator.translate(\"ONLINE\", this.context.language), presence: CometChat.USER_STATUS.ONLINE});\r\n\t\t\t} else {\r\n\t\t\t\tthis.setStatusForUser();\r\n\t\t\t}\r\n\r\n\t\t\tendTyping();\r\n\t\t}\r\n\t};\r\n\r\n\ttoggleTooltip = (event, flag) => {\r\n\t\tconst elem = event.target;\r\n\t\tconst scrollWidth = elem.scrollWidth;\r\n\t\tconst clientWidth = elem.clientWidth;\r\n\r\n\t\tif (scrollWidth <= clientWidth) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (flag) {\r\n\t\t\telem.setAttribute(\"title\", elem.textContent);\r\n\t\t} else {\r\n\t\t\telem.removeAttribute(\"title\");\r\n\t\t}\r\n\t};\r\n\r\n\tresetChat = () => {\r\n\t\tthis.context.setItem({});\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"TOGGLE_SIDEBAR\"]);\r\n\t};\r\n\r\n\t/**\r\n\t * if typing indicator feature is disabled\r\n\t */\r\n\tenableTypingIndicator = () => {\r\n\t\tthis.context.FeatureRestriction.isTypingIndicatorsEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableTypingIndicator) {\r\n\t\t\t\t\tthis.setState({enableTypingIndicator: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableTypingIndicator !== false) {\r\n\t\t\t\t\tthis.setState({enableTypingIndicator: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableGroupVoiceCall = () => {};\r\n\r\n\tenableGroupVideoCall = () => {\r\n\t\tthis.context.FeatureRestriction.isGroupVideoCallEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableGroupVideoCall) {\r\n\t\t\t\t\tthis.setState({enableGroupVideoCall: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableGroupVideoCall !== false) {\r\n\t\t\t\t\tthis.setState({enableGroupVideoCall: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableOneOnOneVoiceCall = () => {\r\n\t\tthis.context.FeatureRestriction.isOneOnOneAudioCallEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tconst combinedResponse = response && !this.context.item.blockedByMe;\r\n\t\t\t\tif (combinedResponse !== this.state.enableOneOnOneVoiceCall) {\r\n\t\t\t\t\tthis.setState({enableOneOnOneVoiceCall: combinedResponse});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableOneOnOneVoiceCall !== false) {\r\n\t\t\t\t\tthis.setState({enableOneOnOneVoiceCall: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableOneOnOneVideoCall = () => {\r\n\t\tthis.context.FeatureRestriction.isOneOnOneVideoCallEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tconst combinedResponse = response && !this.context.item.blockedByMe;\r\n\t\t\t\tif (combinedResponse !== this.state.enableOneOnOneVideoCall) {\r\n\t\t\t\t\tthis.setState({enableOneOnOneVideoCall: combinedResponse});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableOneOnOneVideoCall !== false) {\r\n\t\t\t\t\tthis.setState({enableOneOnOneVideoCall: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableUserPresence = () => {\r\n\t\tthis.context.FeatureRestriction.isUserPresenceEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableUserPresence) {\r\n\t\t\t\t\tthis.setState({enableUserPresence: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableUserPresence !== false) {\r\n\t\t\t\t\tthis.setState({enableUserPresence: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableAddGroupMembers = () => {\r\n\t\tthis.context.FeatureRestriction.isAddingGroupMembersEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableAddGroupMembers) {\r\n\t\t\t\t\tthis.setState({enableAddGroupMembers: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableAddGroupMembers !== false) {\r\n\t\t\t\t\tthis.setState({enableAddGroupMembers: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableChangeScope = () => {\r\n\t\tthis.context.FeatureRestriction.isChangingGroupMemberScopeEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableChangeScope) {\r\n\t\t\t\t\tthis.setState({enableChangeScope: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableChangeScope !== false) {\r\n\t\t\t\t\tthis.setState({enableChangeScope: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableKickGroupMembers = () => {\r\n\t\tthis.context.FeatureRestriction.isKickingGroupMembersEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableKickGroupMembers) {\r\n\t\t\t\t\tthis.setState({enableKickGroupMembers: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableKickGroupMembers !== false) {\r\n\t\t\t\t\tthis.setState({enableKickGroupMembers: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableBanGroupMembers = () => {\r\n\t\tthis.context.FeatureRestriction.isBanningGroupMembersEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableBanGroupMembers) {\r\n\t\t\t\t\tthis.setState({enableBanGroupMembers: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableBanGroupMembers !== false) {\r\n\t\t\t\t\tthis.setState({enableBanGroupMembers: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableDeleteGroup = () => {\r\n\t\tthis.context.FeatureRestriction.isGroupDeletionEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableDeleteGroup) {\r\n\t\t\t\t\tthis.setState({enableDeleteGroup: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableDeleteGroup !== false) {\r\n\t\t\t\t\tthis.setState({enableDeleteGroup: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableViewGroupMembers = () => {\r\n\t\tthis.context.FeatureRestriction.isViewingGroupMembersEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableViewGroupMembers) {\r\n\t\t\t\t\tthis.setState({enableViewGroupMembers: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableViewGroupMembers !== false) {\r\n\t\t\t\t\tthis.setState({enableViewGroupMembers: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableLeaveGroup = () => {\r\n\t\tthis.context.FeatureRestriction.isJoinLeaveGroupsEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableLeaveGroup) {\r\n\t\t\t\t\tthis.setState({enableLeaveGroup: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableLeaveGroup !== false) {\r\n\t\t\t\t\tthis.setState({enableLeaveGroup: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableSharedMedia = () => {\r\n\t\tthis.context.FeatureRestriction.isSharedMediaEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableSharedMedia) {\r\n\t\t\t\t\tthis.setState({enableSharedMedia: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableSharedMedia !== false) {\r\n\t\t\t\t\tthis.setState({enableSharedMedia: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableBlockUser = () => {\r\n\t\tthis.context.FeatureRestriction.isBlockUserEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableBlockUser) {\r\n\t\t\t\t\tthis.setState({enableBlockUser: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableBlockUser !== false) {\r\n\t\t\t\t\tthis.setState({enableBlockUser: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tinitiateAudioCall = () => {\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"INITIATE_AUDIO_CALL\"]);\r\n\t}\r\n\r\n\tinitiateVideoCall = () => {\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"INITIATE_VIDEO_CALL\"]);\r\n\t}\r\n\r\n\tviewDetail = () => {\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"VIEW_DETAIL\"]);\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\tlet avatar, presence;\r\n\t\tlet videoCallClassName = \"option__videocall-user\";\r\n\t\tlet audioCallClassName = \"option__audiocall-user\";\r\n\t\tlet viewDetailClassName = \"option__viewdetail-user\";\r\n\t\tlet chatWithClassName = \"chat__user\";\r\n\t\tlet chatNameClassName = \"user__name\";\r\n\t\tlet chatStatusClassName = \"user__status\";\r\n\r\n\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_USER) {\r\n\t\t\tavatar = <CometChatAvatar user={this.context.item} />;\r\n\t\t\tpresence = <CometChatUserPresence status={this.state.presence} borderColor={this.props.theme.borderColor.primary} />;\r\n\t\t} else if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP) {\r\n\t\t\tchatWithClassName = \"chat__group\";\r\n\t\t\tchatNameClassName = \"group__name\";\r\n\t\t\tchatStatusClassName = \"group__members\";\r\n\t\t\tvideoCallClassName = \"option__videocall-group\";\r\n\t\t\taudioCallClassName = \"option__audiocall-group\";\r\n\t\t\tviewDetailClassName = \"option__viewdetail-group\";\r\n\t\t\tavatar = <CometChatAvatar group={this.context.item} />;\r\n\t\t}\r\n\r\n\t\tlet typing = null;\r\n\t\tif(this.state.typing) {\r\n\t\t\ttyping = (\r\n\t\t\t\t<span css={chatStatusStyle(this.state, this.context)} className={chatStatusClassName}>\r\n\t\t\t\t\t{this.state.typing}\r\n\t\t\t\t</span>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet status = (\r\n\t\t\t<span css={chatStatusStyle(this.state, this.context)} className={chatStatusClassName}>\r\n\t\t\t\t{this.state.status}\r\n\t\t\t</span>\r\n\t\t);\r\n\r\n\t\tconst audioCallText = Translator.translate(\"AUDIO_CALL\", this.context.language);\r\n\t\tlet audioCallBtn = (\r\n\t\t\t<div className={audioCallClassName} css={chatOptionStyle(audioCallIcon, this.context, 0)} title={audioCallText} onClick={this.initiateAudioCall}>\r\n\t\t\t\t<i></i>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tif (this.context.checkIfCallIsOngoing()) {\r\n\t\t\tconst audioCallText = Translator.translate(\"YOU_ALREADY_ONGOING_CALL\", this.context.language);\r\n\t\t\taudioCallBtn = (\r\n\t\t\t\t<div className={audioCallClassName} css={chatOptionStyle(audioCallIcon, this.context, 1)} title={audioCallText}>\r\n\t\t\t\t\t<i></i>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst videoCallText = Translator.translate(\"VIDEO_CALL\", this.context.language);\r\n\t\tlet videoCallBtn = (\r\n\t\t\t<div className={videoCallClassName} css={chatOptionStyle(videoCallIcon, this.context, 0)} title={videoCallText} onClick={this.initiateVideoCall}>\r\n\t\t\t\t<i></i>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tif (this.context.checkIfCallIsOngoing()) {\r\n\t\t\tconst videoCallText = Translator.translate(\"YOU_ALREADY_ONGOING_CALL\", this.context.language);\r\n\t\t\tvideoCallBtn = (\r\n\t\t\t\t<div className={videoCallClassName} css={chatOptionStyle(videoCallIcon, this.context, 1)} title={videoCallText}>\r\n\t\t\t\t\t<i></i>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst viewDetailText = Translator.translate(\"VIEW_DETAIL\", this.context.language);\r\n\t\tlet viewDetailBtn = (\r\n\t\t\t<div className={viewDetailClassName} css={chatOptionStyle(detailPaneIcon, this.context, 0)} title={viewDetailText} onClick={this.viewDetail}>\r\n\t\t\t\t<i></i>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\t/**\r\n\t\t * If the chat window open is of users and block user and shared media feature is disabled, hide view detail button\r\n\t\t */\r\n\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_USER) {\r\n\t\t\tif (this.state.enableBlockUser === false && this.state.enableSharedMedia === false) {\r\n\t\t\t\tviewDetailBtn = null;\r\n\t\t\t}\r\n\t\t} else if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP) {\r\n\t\t\t/**\r\n\t\t\t * If the chat window open is of group\r\n\t\t\t */\r\n\t\t\tif (this.context.item?.scope === CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT) {\r\n\t\t\t\t/**\r\n\t\t\t\t * If the loggedin user scope is participant, leave group, view group members, and shared media feature is disabled, hide view detail button\r\n\t\t\t\t */\r\n\t\t\t\tif (this.state.enableLeaveGroup === false && this.state.enableSharedMedia === false && this.state.enableViewGroupMembers === false) {\r\n\t\t\t\t\tviewDetailBtn = null;\r\n\t\t\t\t}\r\n\t\t\t} else if (this.context.item?.scope === CometChat.GROUP_MEMBER_SCOPE.MODERATOR) {\r\n\t\t\t\t/**\r\n\t\t\t\t * If the loggedin user scope is moderator, leave group, view group members, kick & ban group members, changing scope of group members and shared media feature is disabled, hide view detail button\r\n\t\t\t\t */\r\n\t\t\t\tif (this.state.enableLeaveGroup === false && this.state.enableSharedMedia === false && this.state.enableViewGroupMembers === false && this.state.enableKickGroupMembers === false && this.state.enableBanGroupMembers === false && this.state.enableChangeScope === false) {\r\n\t\t\t\t\tviewDetailBtn = null;\r\n\t\t\t\t}\r\n\t\t\t} else if (this.context.item?.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN) {\r\n\t\t\t\t/**\r\n\t\t\t\t * If the loggedin user scope is admin, add group members, view group members, kick & ban group members, changing scope of group members, leave and delete group and shared media feature is disabled, hide view detail button\r\n\t\t\t\t */\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.state.enableLeaveGroup === false &&\r\n\t\t\t\t\tthis.state.enableSharedMedia === false &&\r\n\t\t\t\t\tthis.state.enableViewGroupMembers === false &&\r\n\t\t\t\t\tthis.state.enableKickGroupMembers === false &&\r\n\t\t\t\t\tthis.state.enableBanGroupMembers === false &&\r\n\t\t\t\t\tthis.state.enableChangeScope === false &&\r\n\t\t\t\t\tthis.state.enableDeleteGroup === false &&\r\n\t\t\t\t\tthis.state.enableAddGroupMembers === false\r\n\t\t\t\t) {\r\n\t\t\t\t\tviewDetailBtn = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//if audiocall feature is disabled\r\n\t\tif ((this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.state.enableOneOnOneVoiceCall === false) || (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.state.enableGroupVoiceCall === false)) {\r\n\t\t\taudioCallBtn = null;\r\n\t\t}\r\n\r\n\t\t//if videocall feature is disabled\r\n\t\tif ((this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.state.enableOneOnOneVideoCall === false) || (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.state.enableGroupVideoCall === false)) {\r\n\t\t\tvideoCallBtn = null;\r\n\t\t}\r\n\r\n\t\t//if user presence is disabled in chat widget\r\n\t\tif (this.state.enableUserPresence === false && this.context.type === CometChat.ACTION_TYPE.TYPE_USER) {\r\n\t\t\tstatus = null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={chatHeaderStyle(this.context)} className=\"chat__header\">\r\n\t\t\t\t<div css={chatDetailStyle()} className=\"chat__details\">\r\n\t\t\t\t\t<div css={chatSideBarBtnStyle(menuIcon, this.props, this.context)} className=\"chat__sidebar-menu\" onClick={this.resetChat}></div>\r\n\t\t\t\t\t<div css={chatThumbnailStyle()} className=\"chat__thumbnail\">\r\n\t\t\t\t\t\t{avatar}\r\n\t\t\t\t\t\t{presence}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div css={chatUserStyle(this.context)} className={chatWithClassName}>\r\n\t\t\t\t\t\t<h6 css={chatNameStyle(this.context)} className={chatNameClassName} onMouseEnter={event => this.toggleTooltip(event, true)} onMouseLeave={event => this.toggleTooltip(event, false)}>\r\n\t\t\t\t\t\t\t{this.context.item.name}\r\n\t\t\t\t\t\t</h6>\r\n\t\t\t\t\t\t{typing ? typing : status}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div css={chatOptionWrapStyle()} className=\"chat__options\">\r\n\t\t\t\t\t{videoCallBtn}\r\n\t\t\t\t\t{audioCallBtn}\r\n\t\t\t\t\t{viewDetailBtn}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatMessageHeader.defaultProps = {\r\n  theme: theme,\r\n  item: {},\r\n  type: \"\"\r\n};\r\n\r\nCometChatMessageHeader.propTypes = {\r\n  theme: PropTypes.object,\r\n  item: PropTypes.object,\r\n  type: PropTypes.string\r\n}\r\n\r\nexport { CometChatMessageHeader };\r\n","import { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport * as enums from \"../../../util/enums\";\r\n\r\nclass MessageFilter {\r\n\r\n\tcategories = {};\r\n\ttypes = null;\r\n\tcontext;\r\n\r\n\tconstructor(context) {\r\n\r\n        this.context = context;\r\n\r\n\t\tthis.categories = {\r\n\t\t\t[CometChat.CATEGORY_MESSAGE]: CometChat.CATEGORY_MESSAGE,\r\n\t\t\t[CometChat.CATEGORY_CUSTOM]: CometChat.CATEGORY_CUSTOM,\r\n\t\t\t[CometChat.CATEGORY_ACTION]: CometChat.CATEGORY_ACTION,\r\n\t\t\t[CometChat.CATEGORY_CALL]: CometChat.CATEGORY_CALL,\r\n\t\t};\r\n\r\n\t\tthis.types = {\r\n\t\t\t[CometChat.MESSAGE_TYPE.TEXT]: CometChat.MESSAGE_TYPE.TEXT,\r\n\t\t\t[CometChat.MESSAGE_TYPE.IMAGE]: CometChat.MESSAGE_TYPE.IMAGE,\r\n\t\t\t[CometChat.MESSAGE_TYPE.VIDEO]: CometChat.MESSAGE_TYPE.VIDEO,\r\n\t\t\t[CometChat.MESSAGE_TYPE.AUDIO]: CometChat.MESSAGE_TYPE.AUDIO,\r\n\t\t\t[CometChat.MESSAGE_TYPE.FILE]: CometChat.MESSAGE_TYPE.FILE,\r\n\t\t\t[enums.CUSTOM_TYPE_POLL]: enums.CUSTOM_TYPE_POLL,\r\n\t\t\t[enums.CUSTOM_TYPE_STICKER]: enums.CUSTOM_TYPE_STICKER,\r\n\t\t\t[enums.CUSTOM_TYPE_DOCUMENT]: enums.CUSTOM_TYPE_DOCUMENT,\r\n\t\t\t[enums.CUSTOM_TYPE_WHITEBOARD]: enums.CUSTOM_TYPE_WHITEBOARD,\r\n\t\t\t[enums.CUSTOM_TYPE_MEETING]: enums.CUSTOM_TYPE_MEETING,\r\n\t\t\t[CometChat.ACTION_TYPE.TYPE_GROUP_MEMBER]: CometChat.ACTION_TYPE.TYPE_GROUP_MEMBER,\r\n\t\t\t[CometChat.CALL_TYPE.AUDIO]: CometChat.CALL_TYPE.AUDIO,\r\n\t\t\t[CometChat.CALL_TYPE.VIDEO]: CometChat.CALL_TYPE.VIDEO,\r\n\t\t};\r\n\t}\r\n\r\n\tgetCategories = () => {\r\n\r\n\t\tconst categories = {...this.categories};\r\n\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tthis.context.FeatureRestriction.isGroupActionMessagesEnabled()\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\tif (response === false) {\r\n\t\t\t\t\t\tdelete categories[CometChat.CATEGORY_ACTION];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn categories;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tdelete categories[CometChat.CATEGORY_ACTION];\r\n\t\t\t\t\treturn categories;\r\n\t\t\t\t})\r\n\t\t\t\t.then(categories => {\r\n\t\t\t\t\tthis.context.FeatureRestriction.isCallActionMessagesEnabled()\r\n\t\t\t\t\t\t.then(response => {\r\n\t\t\t\t\t\t\tif (response === false) {\r\n\t\t\t\t\t\t\t\tdelete categories[CometChat.CATEGORY_CALL];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresolve(categories);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\t\tdelete categories[CometChat.CATEGORY_CALL];\r\n\t\t\t\t\t\t\tresolve(categories);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\tgetTypes = () => {\r\n\r\n        const types = {...this.types};\r\n        return new Promise(resolve => resolve(types));\r\n\t};\r\n}\r\n\r\nexport default MessageFilter;","import { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport MessageFilter from \"./MessageFilter\";\r\n\r\nexport class MessageListManager {\r\n\r\n    item = {};\r\n    type = \"\";\r\n    parentMessageId = null;\r\n    messageRequest = null;\r\n    limit = 30;\r\n    \r\n    msgListenerId = \"message_\" + new Date().getTime();\r\n    groupListenerId = \"group_\" + new Date().getTime();\r\n    callListenerId = \"call_\" + new Date().getTime(); \r\n\r\n    constructor(context, item, type, parentMessageId) {\r\n\r\n        this.item = item;\r\n        this.type = type;\r\n        this.parentMessageId = parentMessageId;\r\n        this.context = context;\r\n    }\r\n\r\n    initializeMessageRequest = () => {\r\n\r\n        return new Promise(resolve => {\r\n\r\n            let categories = {};\r\n            let types = {};\r\n\r\n            let messageFilterManager = new MessageFilter(this.context);\r\n\r\n            messageFilterManager\r\n                .getCategories()\r\n                .then(categoryList => categories = Object.keys(categoryList))\r\n                .then(() => messageFilterManager.getTypes())\r\n                .then(typeList => types = Object.keys(typeList))\r\n                .then(() => this.context.FeatureRestriction.isHideDeletedMessagesEnabled())\r\n                .then(hideDeletedMessages => {\r\n                    if (this.type === CometChat.ACTION_TYPE.TYPE_USER) {\r\n                        if (this.parentMessageId) {\r\n                            this.messageRequest = new CometChat.MessagesRequestBuilder().setUID(this.item.uid).setParentMessageId(this.parentMessageId).setCategories(categories).setTypes(types).hideDeletedMessages(hideDeletedMessages).setLimit(this.limit).build();\r\n                        } else {\r\n                            this.messageRequest = new CometChat.MessagesRequestBuilder().setUID(this.item.uid).setCategories(categories).setTypes(types).hideReplies(true).hideDeletedMessages(hideDeletedMessages).setLimit(this.limit).build();\r\n                        }\r\n                        resolve(this.messageRequest);\r\n                    } else if (this.type === CometChat.ACTION_TYPE.TYPE_GROUP) {\r\n                        if (this.parentMessageId) {\r\n                            this.messageRequest = new CometChat.MessagesRequestBuilder().setGUID(this.item.guid).setParentMessageId(this.parentMessageId).setCategories(categories).setTypes(types).hideDeletedMessages(hideDeletedMessages).setLimit(this.limit).build();\r\n                        } else {\r\n                            this.messageRequest = new CometChat.MessagesRequestBuilder().setGUID(this.item.guid).setCategories(categories).setTypes(types).hideReplies(true).hideDeletedMessages(hideDeletedMessages).setLimit(this.limit).build();\r\n                        }\r\n                        resolve(this.messageRequest);\r\n                    }\r\n                });\r\n\r\n        });\r\n    }\r\n\r\n    fetchPreviousMessages() {\r\n        return this.messageRequest.fetchPrevious();\r\n    }\r\n\r\n    attachListeners(callback) {\r\n        \r\n        CometChat.addMessageListener(\r\n            this.msgListenerId,\r\n            new CometChat.MessageListener({\r\n                onTextMessageReceived: textMessage => {\r\n                    callback(enums.TEXT_MESSAGE_RECEIVED, textMessage);\r\n                },\r\n                onMediaMessageReceived: mediaMessage => {\r\n                    callback(enums.MEDIA_MESSAGE_RECEIVED, mediaMessage);\r\n                },\r\n                onCustomMessageReceived: customMessage => {\r\n                    callback(enums.CUSTOM_MESSAGE_RECEIVED, customMessage);\r\n                },\r\n                onMessagesDelivered: messageReceipt => {\r\n                    callback(enums.MESSAGE_DELIVERED, messageReceipt);\r\n                },\r\n                onMessagesRead: messageReceipt => {\r\n                    callback(enums.MESSAGE_READ, messageReceipt);\r\n                },\r\n                onMessageDeleted: deletedMessage => {\r\n                    callback(enums.MESSAGE_DELETED, deletedMessage);\r\n                },\r\n                onMessageEdited: editedMessage => {\r\n                    callback(enums.MESSAGE_EDITED, editedMessage);\r\n                },\r\n                onTransientMessageReceived: transientMessage => {\r\n                    callback(enums.TRANSIENT_MESSAGE_RECEIVED, transientMessage);\r\n                }\r\n            })\r\n        );\r\n\r\n        CometChat.addGroupListener(\r\n            this.groupListenerId,\r\n            new CometChat.GroupListener({\r\n                onGroupMemberScopeChanged: (message, changedUser, newScope, oldScope, changedGroup) => {\r\n                    callback(enums.GROUP_MEMBER_SCOPE_CHANGED, message, changedGroup, {\"user\": changedUser, \"scope\": newScope});\r\n                }, \r\n                onGroupMemberKicked: (message, kickedUser, kickedBy, kickedFrom) => {\r\n                    callback(enums.GROUP_MEMBER_KICKED, message, kickedFrom, {\"user\": kickedUser, \"hasJoined\": false});\r\n                }, \r\n                onGroupMemberBanned: (message, bannedUser, bannedBy, bannedFrom) => {\r\n                    callback(enums.GROUP_MEMBER_BANNED, message, bannedFrom, {\"user\": bannedUser});\r\n                }, \r\n                onGroupMemberUnbanned: (message, unbannedUser, unbannedBy, unbannedFrom) => {\r\n                    callback(enums.GROUP_MEMBER_UNBANNED, message, unbannedFrom, {\"user\": unbannedUser});\r\n                }, \r\n                onMemberAddedToGroup: (message, userAdded, userAddedBy, userAddedIn) => {\r\n                    callback(enums.GROUP_MEMBER_ADDED, message, userAddedIn, {\"user\": userAdded, \"hasJoined\": true});\r\n                }, \r\n                onGroupMemberLeft: (message, leavingUser, group) => {\r\n                    callback(enums.GROUP_MEMBER_LEFT, message, group, {\"user\": leavingUser});\r\n                }, \r\n                onGroupMemberJoined: (message, joinedUser, joinedGroup) => {\r\n                    callback(enums.GROUP_MEMBER_JOINED, message, joinedGroup, {\"user\": joinedUser});\r\n                }\r\n            })\r\n        );\r\n        \r\n        CometChat.addCallListener(\r\n            this.callListenerId,\r\n            new CometChat.CallListener({\r\n                onIncomingCallReceived: call => {\r\n                  callback(enums.INCOMING_CALL_RECEIVED, call);\r\n                },\r\n                onIncomingCallCancelled: call => {\r\n                    callback(enums.INCOMING_CALL_CANCELLED, call);\r\n                },\r\n                onOutgoingCallAccepted: call => {\r\n                    callback(enums.OUTGOING_CALL_ACCEPTED, call);\r\n                },\r\n                onOutgoingCallRejected: call => {\r\n                  callback(enums.OUTGOING_CALL_REJECTED, call);\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    removeListeners() {\r\n\r\n        CometChat.removeMessageListener(this.msgListenerId);\r\n        CometChat.removeGroupListener(this.groupListenerId);\r\n        CometChat.removeCallListener(this.callListenerId);\r\n    }\r\n}","export const chatListStyle = context => {\r\n\r\n\treturn {\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.white}`,\r\n\t\tzIndex: \"1\",\r\n\t\twidth: \"100%\",\r\n\t\tflex: \"1 1 0\",\r\n\t\torder: \"2\",\r\n\t\tposition: \"relative\",\r\n\t};\r\n};\r\n\r\nexport const listWrapperStyle = () => {\r\n\r\n    return {\r\n        boxSizing: \"border-box\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        height: \"100%\",\r\n        overflowX: \"hidden\",\r\n        overflowY: \"scroll\",\r\n        position: \"absolute\",\r\n        top: \"0\",\r\n        transition: \"background .3s ease-out .1s\",\r\n        width: \"100%\",\r\n        zIndex: \"100\",\r\n        paddingTop: \"16px\"\r\n    }\r\n}\r\n\r\nexport const messageDateContainerStyle = () => {\r\n\r\n    return {\r\n        marginBottom: \"16px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        height: \"35px\",\r\n    }\r\n}\r\n\r\nexport const messageDateStyle = context => {\r\n\r\n\treturn {\r\n\t\tpadding: \"8px 12px\",\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.secondary}`,\r\n\t\tcolor: `${context.theme.color.primary}`,\r\n\t\tborderRadius: \"10px\",\r\n\t};\r\n};\r\n\r\nexport const decoratorMessageStyle = () => {\r\n\r\n    return {\r\n        overflow: \"hidden\",\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n    }\r\n}\r\n\r\nexport const decoratorMessageTxtStyle = context => {\r\n\r\n\treturn {\r\n\t\tmargin: \"0\",\r\n\t\theight: \"36px\",\r\n\t\tcolor: `${context.theme.color.secondary}`,\r\n\t\tfontSize: \"20px!important\",\r\n\t\tfontWeight: \"600\",\r\n\t\tlineHeight: \"30px\",\r\n\t};\r\n};","import React from \"react\";\r\nimport dateFormat from \"dateformat\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { MessageListManager } from \"./controller\";\r\n\r\nimport { \r\n  CometChatSenderTextMessageBubble, CometChatReceiverTextMessageBubble,\r\n  CometChatSenderImageMessageBubble, CometChatReceiverImageMessageBubble,\r\n  CometChatSenderFileMessageBubble, CometChatReceiverFileMessageBubble,\r\n  CometChatSenderAudioMessageBubble, CometChatReceiverAudioMessageBubble,\r\n  CometChatSenderVideoMessageBubble, CometChatReceiverVideoMessageBubble,\r\n  CometChatSenderDirectCallBubble, CometChatReceiverDirectCallBubble,\r\n  CometChatDeleteMessageBubble, CometChatActionMessageBubble\r\n} from \"../\"\r\n\r\nimport {\r\n  CometChatSenderPollMessageBubble, CometChatReceiverPollMessageBubble,\r\n  CometChatSenderStickerBubble, CometChatReceiverStickerMessageBubble,\r\n  CometChatSenderDocumentBubble, CometChatReceiverDocumentBubble,\r\n  CometChatSenderWhiteboardBubble, CometChatReceiverWhiteboardBubble,\r\n} from \"../Extensions\"\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport { getMessageDate } from \"../../../util/common\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport { \r\n\tchatListStyle,\r\n\tlistWrapperStyle,\r\n\tmessageDateContainerStyle,\r\n\tmessageDateStyle,\r\n\tdecoratorMessageStyle,\r\n\tdecoratorMessageTxtStyle\r\n} from \"./style\";\r\n\r\nclass CometChatMessageList extends React.PureComponent {\r\n\tloggedInUser = null;\r\n\tlastScrollTop = 0;\r\n\ttimes = 0;\r\n\titem = {};\r\n\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\t\tthis.state = {\r\n\t\t\tonItemClick: null,\r\n\t\t\tloggedInUser: null,\r\n\t\t\tdecoratorMessage: \"LOADING\",\r\n\t\t};\r\n\r\n\t\tthis.messagesEnd = React.createRef();\t\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tCometChat.getLoggedinUser()\r\n\t\t\t.then(user => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tloggedInUser: user,\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch(error => this.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\"));\r\n\t\t\r\n\t\tif (Object.keys(this.context.item).length === 0 && this.context.type.trim().length === 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.item = this.context.type === CometChat.ACTION_TYPE.TYPE_USER || CometChat.ACTION_TYPE.TYPE_GROUP ? this.context.item : {};\r\n\r\n\t\tif (this.props.parentMessageId) {\r\n\t\t\tthis.MessageListManager = new MessageListManager(this.context, this.context.item, this.context.type, this.props.parentMessageId);\r\n\t\t} else {\r\n\t\t\tthis.MessageListManager = new MessageListManager(this.context, this.context.item, this.context.type);\r\n\t\t}\r\n\r\n\t\t\r\n\t\tthis.MessageListManager.initializeMessageRequest().then(() => {\r\n\t\t\tthis.messageHandler(this.context.item, enums.ACTIONS[\"MESSAGES_INITIAL_FETCH\"]);\r\n\t\t\tthis.MessageListManager.attachListeners(this.messageUpdated);\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\r\n\t\tconst ifChatWindowChanged = () => {\r\n\t\t\tlet output = false;\r\n\r\n\t\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && (this.context.item.uid !== this.item.uid || this.context.item.blockedByMe !== this.item.blockedByMe)) {\r\n\t\t\t\toutput = true;\r\n\t\t\t} else if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.context.item.guid !== this.item.guid) {\r\n\t\t\t\toutput = true;\r\n\t\t\t} else if (prevProps.parentMessageId !== this.props.parentMessageId) {\r\n\t\t\t\toutput = true;\r\n\t\t\t}\r\n\t\t\treturn output;\r\n\t\t};\r\n\r\n\t\tif (ifChatWindowChanged() === true) {\r\n\t\t\tthis.messageCount = 0;\r\n\t\t\tthis.setState({ decoratorMessage: \"LOADING\" });\r\n\r\n\t\t\tthis.MessageListManager?.removeListeners();\r\n\r\n\t\t\tif (this.props.parentMessageId) {\r\n\t\t\t\tthis.MessageListManager = new MessageListManager(this.context, this.context.item, this.context.type, this.props.parentMessageId);\r\n\t\t\t} else {\r\n\t\t\t\tthis.MessageListManager = new MessageListManager(this.context, this.context.item, this.context.type);\r\n\t\t\t}\r\n\r\n\t\t\tthis.MessageListManager.initializeMessageRequest().then(() => {\r\n\t\t\t\tthis.messageHandler(this.context.item, enums.ACTIONS[\"MESSAGES_INITIAL_FETCH\"]);\r\n\t\t\t\tthis.MessageListManager?.attachListeners(this.messageUpdated);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst previousMessageStr = JSON.stringify(prevProps.messages);\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.messages);\r\n\r\n\t\tif (previousMessageStr !== currentMessageStr) {\r\n\t\t\tif (this.props.scrollToBottom) {\r\n\t\t\t\tthis.scrollToBottom();\r\n\t\t\t} else {\r\n\t\t\t\tthis.scrollToBottom(this.lastScrollTop);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.item = this.context.type === CometChat.ACTION_TYPE.TYPE_USER || CometChat.ACTION_TYPE.TYPE_GROUP ? this.context.item : {};\r\n\t\tif (this.context.leftGroupId.trim().length) {\r\n\t\t\tthis.item = {};\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.MessageListManager?.removeListeners();\r\n\t\tthis.MessageListManager = null;\r\n\t}\r\n\r\n\tscrollToBottom = (scrollHeight = 0) => {\r\n\r\n\t\tif (this.messagesEnd) {\r\n\t\t\tthis.messagesEnd.scrollTop = this.messagesEnd.scrollHeight - scrollHeight;\r\n\t\t}\r\n\t};\r\n\r\n\tmessageHandler = (item, actionGenerated = enums.ACTIONS[\"MESSAGES_FETCHED\"]) => {\r\n\t\tthis.fetchMessages()\r\n\t\t\t.then(messageList => {\r\n\t\t\t\tif (messageList.length === 0) {\r\n\t\t\t\t\tthis.setState({ decoratorMessage: \"NO_MESSAGES_FOUND\" });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ decoratorMessage: \"\" });\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//updating messagecount variable\r\n\t\t\t\tthis.messageCount = messageList.length;\r\n\r\n\t\t\t\tmessageList.forEach(message => {\r\n\t\t\t\t\t//if the sender of the message is not the loggedin user\r\n\t\t\t\t\tif (message.getSender().getUid() !== this.state.loggedInUser?.uid) {\r\n\t\t\t\t\t\t//mark the message as delivered\r\n\t\t\t\t\t\tthis.markMessageAsDelivered(message);\r\n\r\n\t\t\t\t\t\t//mark the message as read\r\n\t\t\t\t\t\tif (message.hasOwnProperty(\"readAt\") === false) {\r\n\t\t\t\t\t\t\tCometChat.markAsRead(message);\r\n\t\t\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"MESSAGE_READ\"], message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.lastScrollTop = this.messagesEnd.scrollHeight;\r\n\r\n\t\t\t\t//abort(don't return messagelist), when the chat window changes\r\n\t\t\t\tif ((item.hasOwnProperty(\"uid\") && this.context.item.hasOwnProperty(\"uid\") && item.uid === this.context.item.uid) || (item.hasOwnProperty(\"guid\") && this.context.item.hasOwnProperty(\"guid\") && item.guid === this.context.item.guid)) {\r\n\t\t\t\t\tthis.props.actionGenerated(actionGenerated, messageList);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.props.messages.length === 0) {\r\n\t\t\t\t\tthis.setState({ decoratorMessage: \"SOMETHING_WRONG\" });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (error && error.hasOwnProperty(\"code\") && error.code === \"ERR_GUID_NOT_FOUND\") {\r\n\t\t\t\t\t//this.context.setDeletedGroupId(this.context.item.guid);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tfetchMessages = () => {\r\n\t\tconst promise = new Promise((resolve, reject) => {\r\n\t\t\tthis.MessageListManager.fetchPreviousMessages()\r\n\t\t\t\t.then(messageList => {\r\n\t\t\t\t\tresolve(messageList);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => reject(error));\r\n\t\t});\r\n\r\n\t\treturn promise;\r\n\t};\r\n\r\n\t//callback for listener functions\r\n\tmessageUpdated = (key, message, group, options) => {\r\n\r\n\t\tswitch (key) \r\n\t\t{\r\n\t\t\tcase enums.MESSAGE_DELETED:\r\n\t\t\t\tthis.onMessageDeleted(message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.MESSAGE_EDITED:\r\n\t\t\t\tthis.onMessageEdited(message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.MESSAGE_DELIVERED:\r\n\t\t\tcase enums.MESSAGE_READ:\r\n\t\t\t\tthis.onMessageReadAndDelivered(message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.TEXT_MESSAGE_RECEIVED:\r\n\t\t\tcase enums.MEDIA_MESSAGE_RECEIVED:\r\n\t\t\t\tthis.onMessageReceived(message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CUSTOM_MESSAGE_RECEIVED:\r\n\t\t\t\tthis.onCustomMessageReceived(message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_SCOPE_CHANGED:\r\n\t\t\tcase enums.GROUP_MEMBER_JOINED:\r\n\t\t\tcase enums.GROUP_MEMBER_LEFT:\r\n\t\t\tcase enums.GROUP_MEMBER_ADDED:\r\n\t\t\tcase enums.GROUP_MEMBER_KICKED:\r\n\t\t\tcase enums.GROUP_MEMBER_BANNED:\r\n\t\t\tcase enums.GROUP_MEMBER_UNBANNED:\r\n\t\t\t\tthis.onGroupUpdated(key, message, group, options);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.INCOMING_CALL_RECEIVED:\r\n\t\t\tcase enums.INCOMING_CALL_CANCELLED:\r\n\t\t\tcase enums.OUTGOING_CALL_ACCEPTED:\r\n\t\t\tcase enums.OUTGOING_CALL_REJECTED:\r\n\t\t\t\tthis.onCallUpdated(key, message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.TRANSIENT_MESSAGE_RECEIVED:\r\n\t\t\t\tthis.onTransientMessageReceived(key, message);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tonMessageDeleted = message => {\r\n\t\tif (this.context.type === CometChat.RECEIVER_TYPE.GROUP && message.getReceiverType() === CometChat.RECEIVER_TYPE.GROUP && message.getReceiverId() === this.context.item.guid) {\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"ON_MESSAGE_DELETED\"], [message]);\r\n\t\t} else if (this.context.type === CometChat.RECEIVER_TYPE.USER && message.getReceiverType() === CometChat.RECEIVER_TYPE.USER && message.getSender().uid === this.context.item.uid) {\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"ON_MESSAGE_DELETED\"], [message]);\r\n\t\t}\r\n\t};\r\n\r\n\tonMessageEdited = message => {\r\n\t\tconst messageList = [...this.props.messages];\r\n\t\tconst updateEditedMessage = message => {\r\n\t\t\tlet messageKey = messageList.findIndex(m => m.id === message.id);\r\n\r\n\t\t\tif (messageKey > -1) {\r\n\t\t\t\tconst messageObj = messageList[messageKey];\r\n\t\t\t\tconst newMessageObj = Object.assign({}, messageObj, message);\r\n\r\n\t\t\t\tmessageList.splice(messageKey, 1, newMessageObj);\r\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"ON_MESSAGE_EDITED\"], messageList, newMessageObj);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (this.context.type === CometChat.RECEIVER_TYPE.GROUP && message.getReceiverType() === CometChat.RECEIVER_TYPE.GROUP && message.getReceiverId() === this.context.item.guid) {\r\n\t\t\tupdateEditedMessage(message);\r\n\t\t} else if (this.context.type === CometChat.RECEIVER_TYPE.USER && message.getReceiverType() === CometChat.RECEIVER_TYPE.USER && this.state.loggedInUser?.uid === message.getReceiverId() && message.getSender().uid === this.context.item.uid) {\r\n\t\t\tupdateEditedMessage(message);\r\n\t\t} else if (this.context.type === CometChat.RECEIVER_TYPE.USER && message.getReceiverType() === CometChat.RECEIVER_TYPE.USER && this.state.loggedInUser?.uid === message.getSender().uid && message.getReceiverId() === this.context.item.uid) {\r\n\t\t\tupdateEditedMessage(message);\r\n\t\t}\r\n\t};\r\n\r\n\tonMessageReadAndDelivered = message => {\r\n\r\n\t\t//read receipts\r\n\t\tif (message.getReceiverType() === CometChat.RECEIVER_TYPE.USER && message.getSender().getUid() === this.context.item.uid && message.getReceiver() === this.state.loggedInUser?.uid) {\r\n\t\t\tlet messageList = [...this.props.messages];\r\n\r\n\t\t\tif (message.getReceiptType() === \"delivery\") {\r\n\t\t\t\t//search for message\r\n\r\n\t\t\t\tlet messageKey = messageList.findIndex(m => m.id === message.messageId);\r\n\r\n\t\t\t\tif (messageKey > -1) {\r\n\t\t\t\t\tlet messageObj = messageList[messageKey];\r\n\t\t\t\t\tlet newMessageObj = Object.assign({}, messageObj, { deliveredAt: message.getDeliveredAt() });\r\n\r\n\t\t\t\t\tmessageList.splice(messageKey, 1, newMessageObj);\r\n\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"ON_MESSAGE_READ_DELIVERED\"], messageList);\r\n\t\t\t\t}\r\n\t\t\t} else if (message.getReceiptType() === \"read\") {\r\n\t\t\t\t//search for message\r\n\t\t\t\tlet messageKey = messageList.findIndex(m => m.id === message.messageId);\r\n\r\n\t\t\t\tif (messageKey > -1) {\r\n\t\t\t\t\tlet messageObj = { ...messageList[messageKey] };\r\n\t\t\t\t\tlet newMessageObj = Object.assign({}, messageObj, { readAt: message.getReadAt() });\r\n\r\n\t\t\t\t\tmessageList.splice(messageKey, 1, newMessageObj);\r\n\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"ON_MESSAGE_READ_DELIVERED\"], messageList);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (message.getReceiverType() === CometChat.RECEIVER_TYPE.GROUP && message.getReceiver() === this.context.item.guid) {\r\n\t\t\t//not implemented\r\n\t\t}\r\n\t};\r\n\r\n\treInitializeMessageBuilder = () => {\r\n\t\tif (this.props.hasOwnProperty(\"parentMessageId\") === false) {\r\n\t\t\tthis.messageCount = 0;\r\n\t\t}\r\n\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"REFRESHING_MESSAGES\"], []);\r\n\t\tthis.setState({ decoratorMessage: \"LOADING\" });\r\n\t\tthis.MessageListManager.removeListeners();\r\n\r\n\t\tif (this.props.parentMessageId) {\r\n\t\t\tthis.MessageListManager = new MessageListManager(this.context, this.context.item, this.context.type, this.props.parentMessageId);\r\n\t\t} else {\r\n\t\t\tthis.MessageListManager = new MessageListManager(this.context, this.context.item, this.context.type);\r\n\t\t}\r\n\r\n\t\tthis.MessageListManager.initializeMessageRequest().then(() => {\r\n\t\t\tthis.messageHandler(this.context.item, enums.ACTIONS[\"MESSAGES_REFRESHED\"]);\r\n\t\t\tthis.MessageListManager.attachListeners(this.messageUpdated);\r\n\t\t});\r\n\t};\r\n\r\n\t//mark the message as delivered\r\n\tmarkMessageAsDelivered = message => {\r\n\r\n\t\tif (message.sender?.uid !== this.state.loggedInUser?.uid && message.hasOwnProperty(\"deliveredAt\") === false) {\r\n\t\t\tCometChat.markAsDelivered(message);\r\n\t\t}\r\n\t};\r\n\r\n\tmarkMessageAsRead = (message, type) => {\r\n\t\tif (message.hasOwnProperty(\"readAt\") === false) {\r\n\t\t\tCometChat.markAsRead(message);\r\n\t\t}\r\n\t};\r\n\r\n\tonMessageReceived = message => {\r\n\r\n\t\t//mark the message as delivered\r\n\t\tthis.markMessageAsDelivered(message);\r\n\r\n\t\t/**\r\n\t\t * message receiver is chat window group\r\n\t\t */\r\n\t\tif (this.context.type === CometChat.RECEIVER_TYPE.GROUP && message.getReceiverType() === CometChat.RECEIVER_TYPE.GROUP && message.getReceiverId() === this.context.item.guid) {\r\n\t\t\tthis.messageReceivedHandler(message, CometChat.RECEIVER_TYPE.GROUP);\r\n\t\t} else if (this.context.type === CometChat.RECEIVER_TYPE.USER && message.getReceiverType() === CometChat.RECEIVER_TYPE.USER) {\r\n\t\t\t/**\r\n\t\t\t * If the message sender is chat window user and message receiver is logged-in user\r\n\t\t\t * OR\r\n\t\t\t * If the message sender is logged-in user and message receiver is chat window user\r\n\t\t\t */\r\n\t\t\tif ((message.getSender().uid === this.context.item.uid && message.getReceiverId() === this.state.loggedInUser?.uid) || (message.getSender().uid === this.state.loggedInUser?.uid && message.getReceiverId() === this.context.item.uid)) {\r\n\t\t\t\tthis.messageReceivedHandler(message, CometChat.RECEIVER_TYPE.USER);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tmessageReceivedHandler = (message, type) => {\r\n\t\t//handling dom lag - increment count only for main message list\r\n\t\tif (message.hasOwnProperty(\"parentMessageId\") === false && this.props.hasOwnProperty(\"parentMessageId\") === false) {\r\n\t\t\t++this.messageCount;\r\n\t\t\t//if the user has not scrolled in chat window(scroll is at the bottom of the chat window)\r\n\t\t\tif (this.messagesEnd.scrollHeight - this.messagesEnd.scrollTop - this.messagesEnd.clientHeight <= 1) {\r\n\t\t\t\tif (this.messageCount > enums.CONSTANTS[\"MAX_MESSAGE_COUNT\"]) {\r\n\t\t\t\t\tthis.reInitializeMessageBuilder();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.markMessageAsRead(message, type);\r\n\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"MESSAGE_RECEIVED\"], [message]);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t//if the user has scrolled up in chat window\r\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"NEW_MESSAGES\"], [message]);\r\n\t\t\t}\r\n\t\t} else if (message.hasOwnProperty(\"parentMessageId\") === true && this.props.hasOwnProperty(\"parentMessageId\") === true) {\r\n\t\t\tif (message.parentMessageId === this.props.parentMessageId) {\r\n\t\t\t\tthis.markMessageAsRead(message, type);\r\n\t\t\t}\r\n\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"MESSAGE_RECEIVED\"], [message]);\r\n\t\t} else {\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"MESSAGE_RECEIVED\"], [message]);\r\n\t\t}\r\n\t};\r\n\r\n\t//polls, stickers, collaborative document, collaborative whiteboard\r\n\tonCustomMessageReceived = message => {\r\n\t\t//mark the message as delivered\r\n\t\tthis.markMessageAsDelivered(message);\r\n\r\n\t\t//new messages\r\n\t\tif (\r\n\t\t\tthis.context.type === CometChat.RECEIVER_TYPE.GROUP &&\r\n\t\t\tmessage.getReceiverType() === CometChat.RECEIVER_TYPE.GROUP &&\r\n\t\t\tthis.state.loggedInUser?.uid === message.getSender().uid &&\r\n\t\t\tmessage.getReceiverId() === this.context.item.guid &&\r\n\t\t\t(message.type === enums.CUSTOM_TYPE_POLL || message.type === enums.CUSTOM_TYPE_DOCUMENT || message.type === enums.CUSTOM_TYPE_WHITEBOARD)\r\n\t\t) {\r\n\t\t\t//showing polls, collaborative document and whiteboard for sender (custom message received listener for sender)\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"CUSTOM_MESSAGE_RECEIVED\"], [message]);\r\n\t\t} else if (this.context.type === CometChat.RECEIVER_TYPE.GROUP && message.getReceiverType() === CometChat.RECEIVER_TYPE.GROUP && message.getReceiverId() === this.context.item.guid) {\r\n\t\t\tthis.customMessageReceivedHandler(message, CometChat.RECEIVER_TYPE.GROUP);\r\n\t\t} else if (this.context.type === CometChat.RECEIVER_TYPE.USER && message.getReceiverType() === CometChat.RECEIVER_TYPE.USER && message.getSender().uid === this.context.item.uid) {\r\n\t\t\tthis.customMessageReceivedHandler(message, CometChat.RECEIVER_TYPE.USER);\r\n\t\t} else if (\r\n\t\t\tthis.context.type === CometChat.RECEIVER_TYPE.USER &&\r\n\t\t\tmessage.getReceiverType() === CometChat.RECEIVER_TYPE.USER &&\r\n\t\t\tthis.state.loggedInUser?.uid === message.getSender().uid &&\r\n\t\t\tmessage.getReceiverId() === this.context.item.uid &&\r\n\t\t\t(message.type === enums.CUSTOM_TYPE_POLL || message.type === enums.CUSTOM_TYPE_DOCUMENT || message.type === enums.CUSTOM_TYPE_WHITEBOARD)\r\n\t\t) {\r\n\t\t\t//showing polls, collaborative document and whiteboard for sender (custom message received listener for sender)\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"CUSTOM_MESSAGE_RECEIVED\"], [message]);\r\n\t\t}\r\n\t};\r\n\r\n\tcustomMessageReceivedHandler = (message, type) => {\r\n\t\t//handling dom lag - increment count only for main message list\r\n\t\tif (message.hasOwnProperty(\"parentMessageId\") === false && this.props.hasOwnProperty(\"parentMessageId\") === false) {\r\n\t\t\t++this.messageCount;\r\n\r\n\t\t\t//if the user has not scrolled in chat window(scroll is at the bottom of the chat window)\r\n\t\t\tif (this.messagesEnd.scrollHeight - this.messagesEnd.scrollTop - this.messagesEnd.clientHeight <= 1) {\r\n\t\t\t\tif (this.messageCount > enums.CONSTANTS[\"MAX_MESSAGE_COUNT\"]) {\r\n\t\t\t\t\tthis.reInitializeMessageBuilder();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.markMessageAsRead(message, type);\r\n\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"CUSTOM_MESSAGE_RECEIVED\"], [message]);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t//if the user has scrolled in chat window\r\n\r\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"NEW_MESSAGES\"], [message]);\r\n\t\t\t}\r\n\t\t} else if (message.hasOwnProperty(\"parentMessageId\") === true && this.props.hasOwnProperty(\"parentMessageId\") === true) {\r\n\t\t\tif (message.parentMessageId === this.props.parentMessageId) {\r\n\t\t\t\tthis.markMessageAsRead(message, type);\r\n\t\t\t}\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"CUSTOM_MESSAGE_RECEIVED\"], [message]);\r\n\t\t} else {\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"CUSTOM_MESSAGE_RECEIVED\"], [message]);\r\n\t\t}\r\n\t};\r\n\r\n\tonCallUpdated = (key, message) => {\r\n\t\tif (this.context.type === CometChat.RECEIVER_TYPE.GROUP && message.getReceiverType() === CometChat.RECEIVER_TYPE.GROUP && message.getReceiverId() === this.context.item.guid) {\r\n\t\t\tthis.props.actionGenerated(key, message);\r\n\t\t} else if (this.context.type === CometChat.RECEIVER_TYPE.USER && message.getReceiverType() === CometChat.RECEIVER_TYPE.USER && message.getSender().uid === this.context.item.uid) {\r\n\t\t\tthis.props.actionGenerated(key, message);\r\n\t\t}\r\n\t};\r\n\r\n\tonTransientMessageReceived = (key, message) => {\r\n\r\n\t\tif (this.context.type === CometChat.RECEIVER_TYPE.GROUP && message.getReceiverType() === CometChat.RECEIVER_TYPE.GROUP && message.getReceiverId() === this.context.item.guid) {\r\n\t\t\tthis.props.actionGenerated(key, message);\r\n\t\t} else if (this.context.type === CometChat.RECEIVER_TYPE.USER && message.getReceiverType() === CometChat.RECEIVER_TYPE.USER && message.getSender().uid === this.context.item.uid) {\r\n\t\t\tthis.props.actionGenerated(key, message);\r\n\t\t}\r\n\t};\r\n\r\n\tonGroupUpdated = (key, message, group, options) => {\r\n\t\tif (this.context.type === CometChat.RECEIVER_TYPE.GROUP && message.getReceiverType() === CometChat.RECEIVER_TYPE.GROUP && message.getReceiverId() === this.context.item.guid) {\r\n\t\t\tthis.props.actionGenerated(key, message, null, group, options);\r\n\t\t}\r\n\t};\r\n\r\n\thandleScroll = e => {\r\n\r\n\t\tconst scrollTop = e.currentTarget.scrollTop;\r\n\t\tconst scrollHeight = e.currentTarget.scrollHeight;\r\n\t\tconst clientHeight = e.currentTarget.clientHeight;\r\n\r\n\t\tthis.lastScrollTop = scrollHeight - scrollTop;\r\n\r\n\t\tif (this.lastScrollTop === clientHeight) {\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"CLEAR_UNREAD_MESSAGES\"]);\r\n\t\t}\r\n\r\n\t\tconst top = Math.round(scrollTop) === 0;\r\n\t\tif (top && this.props.messages.length) {\r\n\t\t\tthis.messageHandler(this.context.item);\r\n\t\t}\r\n\t};\r\n\r\n\tgetSenderMessageComponent = message => {\r\n\r\n\t\tlet component;\r\n\t\tconst messageKey = message._id ? message._id : message.id;\r\n\r\n\t\tif (message.hasOwnProperty(\"deletedAt\")) {\r\n\t\t\tcomponent = <CometChatDeleteMessageBubble key={messageKey} message={message} />;\r\n\t\t} else {\r\n\t\t\tswitch (message.type) {\r\n\t\t\t\tcase CometChat.MESSAGE_TYPE.TEXT:\r\n\t\t\t\t\tcomponent = <CometChatSenderTextMessageBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase CometChat.MESSAGE_TYPE.IMAGE:\r\n\t\t\t\t\tcomponent = <CometChatSenderImageMessageBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase CometChat.MESSAGE_TYPE.FILE:\r\n\t\t\t\t\tcomponent = <CometChatSenderFileMessageBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase CometChat.MESSAGE_TYPE.VIDEO:\r\n\t\t\t\t\tcomponent = <CometChatSenderVideoMessageBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase CometChat.MESSAGE_TYPE.AUDIO:\r\n\t\t\t\t\tcomponent = <CometChatSenderAudioMessageBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn component;\r\n\t};\r\n\r\n\tgetReceiverMessageComponent = message => {\r\n\r\n\t\tlet component;\r\n\t\tconst messageKey = message._id ? message._id : message.id;\r\n\r\n\t\tif (message.hasOwnProperty(\"deletedAt\")) {\r\n\t\t\tcomponent = <CometChatDeleteMessageBubble key={messageKey} message={message} />;\r\n\t\t} else {\r\n\t\t\tswitch (message.type) {\r\n\t\t\t\tcase CometChat.MESSAGE_TYPE.TEXT:\r\n\t\t\t\t\tcomponent = message.text ? <CometChatReceiverTextMessageBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} /> : null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase CometChat.MESSAGE_TYPE.IMAGE:\r\n\t\t\t\t\tcomponent = message.data.url ? <CometChatReceiverImageMessageBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} /> : null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase CometChat.MESSAGE_TYPE.FILE:\r\n\t\t\t\t\tcomponent = message.data.attachments ? <CometChatReceiverFileMessageBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} /> : null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase CometChat.MESSAGE_TYPE.AUDIO:\r\n\t\t\t\t\tcomponent = message.data.url ? <CometChatReceiverAudioMessageBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} /> : null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase CometChat.MESSAGE_TYPE.VIDEO:\r\n\t\t\t\t\tcomponent = message.data.url ? <CometChatReceiverVideoMessageBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} /> : null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn component;\r\n\t};\r\n\r\n\tgetSenderCustomMessageComponent = message => {\r\n\r\n\t\tlet component;\r\n\t\tconst messageKey = message._id ? message._id : message.id;\r\n\r\n\t\tif (message.hasOwnProperty(\"deletedAt\")) {\r\n\t\t\tcomponent = <CometChatDeleteMessageBubble key={messageKey} message={message} />;\r\n\t\t} else {\r\n\t\t\tswitch (message.type) {\r\n\t\t\t\tcase enums.CUSTOM_TYPE_POLL:\r\n\t\t\t\t\tcomponent = <CometChatSenderPollMessageBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase enums.CUSTOM_TYPE_STICKER:\r\n\t\t\t\t\tcomponent = <CometChatSenderStickerBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase enums.CUSTOM_TYPE_DOCUMENT:\r\n\t\t\t\t\tcomponent = <CometChatSenderDocumentBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase enums.CUSTOM_TYPE_WHITEBOARD:\r\n\t\t\t\t\tcomponent = <CometChatSenderWhiteboardBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase enums.CUSTOM_TYPE_MEETING:\r\n\t\t\t\t\tcomponent = <CometChatSenderDirectCallBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn component;\r\n\t};\r\n\r\n\tgetReceiverCustomMessageComponent = message => {\r\n\r\n\t\tlet component;\r\n\t\tconst messageKey = message._id ? message._id : message.id;\r\n\t\t\r\n\t\tif (message.hasOwnProperty(\"deletedAt\")) {\r\n\t\t\tcomponent = <CometChatDeleteMessageBubble key={messageKey} message={message} />;\r\n\t\t} else {\r\n\t\t\tswitch (message.type) {\r\n\t\t\t\tcase enums.CUSTOM_TYPE_POLL:\r\n\t\t\t\t\tcomponent = <CometChatReceiverPollMessageBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase enums.CUSTOM_TYPE_STICKER:\r\n\t\t\t\t\tcomponent = <CometChatReceiverStickerMessageBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase enums.CUSTOM_TYPE_DOCUMENT:\r\n\t\t\t\t\tcomponent = <CometChatReceiverDocumentBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase enums.CUSTOM_TYPE_WHITEBOARD:\r\n\t\t\t\t\tcomponent = <CometChatReceiverWhiteboardBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase enums.CUSTOM_TYPE_MEETING:\r\n\t\t\t\t\tcomponent = <CometChatReceiverDirectCallBubble key={messageKey} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn component;\r\n\t};\r\n\r\n\tgetActionMessageComponent = message => {\r\n\r\n\t\tconst messageKey = message._id ? message._id : message.id;\r\n\t\treturn <CometChatActionMessageBubble key={messageKey} message={message} />;\r\n\t};\r\n\r\n\tgetComponent = (message, key) => {\r\n\t\tlet component;\r\n\r\n\t\tswitch (message.category) {\r\n\t\t\tcase CometChat.CATEGORY_ACTION:\r\n\t\t\tcase CometChat.CATEGORY_CALL:\r\n\t\t\t\tcomponent = this.getActionMessageComponent(message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.CATEGORY_MESSAGE:\r\n\t\t\t\tif (this.state.loggedInUser?.uid === message.sender?.uid) {\r\n\t\t\t\t\tcomponent = this.getSenderMessageComponent(message);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcomponent = this.getReceiverMessageComponent(message);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.CATEGORY_CUSTOM:\r\n\t\t\t\tif (this.state.loggedInUser?.uid === message.sender?.uid) {\r\n\t\t\t\t\tcomponent = this.getSenderCustomMessageComponent(message);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcomponent = this.getReceiverCustomMessageComponent(message);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn component;\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\tlet messageContainer = null;\r\n\t\tif (this.state.decoratorMessage.length !== 0 && this.props.messages.length === 0) {\r\n\t\t\tmessageContainer = (\r\n\t\t\t\t<div css={decoratorMessageStyle()} className=\"messages__decorator-message\">\r\n\t\t\t\t\t<p css={decoratorMessageTxtStyle(this.context)} className=\"decorator-message\">\r\n\t\t\t\t\t\t{Translator.translate(this.state.decoratorMessage, this.props.lang)}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet cDate = null;\r\n\t\tconst messages = this.props.messages.map((message, key) => {\r\n\t\t\tlet dateSeparator = null;\r\n\r\n\t\t\tconst dateField = message._composedAt || message.sentAt;\r\n\r\n\t\t\tconst messageDate = message.sentAt * 1000;\r\n\t\t\tconst messageSentDate = dateFormat(messageDate, \"dd/mm/yyyy\");\r\n\r\n\t\t\tif (cDate !== messageSentDate) {\r\n\t\t\t\tdateSeparator = (\r\n\t\t\t\t\t<div css={messageDateContainerStyle()} className=\"message__date\">\r\n\t\t\t\t\t\t<span css={messageDateStyle(this.context)}>{getMessageDate(dateField, this.context.language)}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tcDate = messageSentDate;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<React.Fragment key={key}>\r\n\t\t\t\t\t{dateSeparator}\r\n\t\t\t\t\t{this.getComponent(message, key)}\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"chat__list\" css={chatListStyle(this.context)}>\r\n\t\t\t\t{messageContainer}\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"list__wrapper\"\r\n\t\t\t\t\tcss={listWrapperStyle()}\r\n\t\t\t\t\tref={el => {\r\n\t\t\t\t\t\tthis.messagesEnd = el;\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonScroll={this.handleScroll}>\r\n\t\t\t\t\t{messages}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatMessageList.defaultProps = {\r\n  theme: theme\r\n};\r\n\r\nCometChatMessageList.propTypes = {\r\n  theme: PropTypes.object\r\n}\r\n\r\nexport { CometChatMessageList };","import { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nexport class SharedMediaManager {\r\n\r\n    mediaMessageListenerId = new Date().getTime();\r\n    mediaMessageRequest = null;\r\n\r\n    constructor(item, type, messagetype) {\r\n\r\n        if(type === \"user\") {\r\n\r\n            this.mediaMessageRequest = new CometChat.MessagesRequestBuilder()\r\n            .setUID(item.uid)\r\n            .setLimit(10).setCategory(\"message\").setType(messagetype).build();\r\n\r\n        } else {\r\n\r\n            this.mediaMessageRequest = new CometChat.MessagesRequestBuilder()\r\n            .setGUID(item.guid)\r\n            .setLimit(10).setCategory(\"message\").setType(messagetype).build();\r\n        }\r\n    }\r\n\r\n    fetchPreviousMessages() {\r\n        return this.mediaMessageRequest.fetchPrevious();\r\n    }\r\n    \r\n    attachListeners(callback) {\r\n\r\n        CometChat.addMessageListener(\r\n            this.msgListenerId,\r\n            new CometChat.MessageListener({\r\n                onMediaMessageReceived: mediaMessage => {\r\n                    callback(enums.MEDIA_MESSAGE_RECEIVED, mediaMessage);\r\n                },\r\n                onMessageDeleted: deletedMessage => {\r\n                    callback(enums.MESSAGE_DELETED, deletedMessage);\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    removeListeners() {\r\n        CometChat.removeMessageListener(this.mediaMessageListenerId);\r\n    }\r\n\r\n}","export const sectionStyle = (props) => {\r\n\r\n    const containerHeightProp = (props.containerHeight) ? {\r\n        height: `calc(100% - ${props.containerHeight})`\r\n    } : {\r\n        height: \"calc(100% - 20px)\"\r\n    };\r\n\r\n    \r\n    return {\r\n        width: \"100%\",\r\n        ...containerHeightProp\r\n    }\r\n}\r\n\r\nexport const sectionHeaderStyle = (props) => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        width: \"100%\",\r\n        fontSize: \"12px\",\r\n        fontWeight: \"500!important\",\r\n        lineHeight: \"20px\",\r\n        color: `${props.theme.color.secondary}`,\r\n        textTransform: \"uppercase\",\r\n    }\r\n}\r\n\r\nexport const sectionContentStyle = () => {\r\n\r\n    return {\r\n        width: \"100%\",\r\n        margin: \"6px 0\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        height: \"calc(100% - 20px)\"\r\n    }\r\n}\r\n\r\nexport const mediaBtnStyle = () => {\r\n\r\n    return {\r\n        borderRadius: \"8px\",\r\n        backgroundColor: \"rgba(20, 20, 20, 0.08)\",\r\n        width: \"100%\",\r\n        padding: \"2px\",\r\n        margin: \"6px 0\",\r\n        clear: \"both\",\r\n    }\r\n}\r\n\r\nexport const buttonStyle = (state, type) => {\r\n\r\n    const activeBtn = (state.messagetype === type) ? {\r\n        backgroundColor : \"#fff\",\r\n        boxShadow: \"rgba(20, 20, 20, 0.04) 0 3px 1px, rgba(20, 20, 20, 0.12) 0 3px 8px\",\r\n        borderRadius: \"7px\",\r\n        \"&::before\": {\r\n            display: \"none\",\r\n        }\r\n    } : {};\r\n\r\n    return {\r\n        display: \"inline-block\",\r\n        width: \"33.33%\",\r\n        float: \"left\",\r\n        fontSize: \"13px\",\r\n        fontWeight: \"500\",\r\n        lineHeight: \"18px\",\r\n        padding: \"5px\",\r\n        position: \"relative\",\r\n        textAlign: \"center\",\r\n        cursor: \"pointer\",\r\n        ...activeBtn,\r\n        \"&:before\": {\r\n            \"`content`\": \"\",\r\n            position: \"absolute\",\r\n            display: \"block\",\r\n            width: \"2px\",\r\n            height: \"16px\",\r\n            backgroundColor: \"rgba(20, 20, 20, 0.12)\",\r\n            right: \"-2px\",\r\n            top: \"6px\",\r\n        },\r\n        \"&:last-of-type::before\": {\r\n            display: \"none\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const mediaItemStyle = () => {\r\n\r\n    return {\r\n        height: \"calc(100% - 45px)\",\r\n        overflowY: \"auto\",\r\n        overflowX: \"hidden\",\r\n        display: \"flex\",\r\n        flexWrap: \"wrap\",\r\n        fontSize: \"14px\",\r\n    }\r\n}\r\n\r\nexport const itemStyle = (state, props, img, context) => {\r\n\r\n    let itemTypeStyle = {};\r\n    let bgColor = `${props.theme.backgroundColor.lightGrey}`;\r\n\r\n    if (state.messagetype === \"image\") {\r\n\r\n        itemTypeStyle = {\r\n            height: \"120px\",\r\n            width: \"120px\",\r\n            backgroundColor: bgColor,\r\n            \"> img\": {\r\n                display: \"block\",\r\n                width: \"100%\",\r\n                height: \"100%\",\r\n                objectFit: \"contain\",\r\n            }\r\n        }\r\n        \r\n    } else if (state.messagetype === \"video\") {\r\n\r\n        itemTypeStyle = {\r\n            \"> video\": {\r\n                height: \"120px\",\r\n                width: \"120px\",\r\n                margin: \"auto\",\r\n            }\r\n        }\r\n\r\n    } else if (state.messagetype === \"file\") {\r\n\r\n        itemTypeStyle = {\r\n            backgroundColor: bgColor,\r\n            \"> a\": {\r\n                maxWidth: \"100%\",\r\n                maxHeight: \"100%\",\r\n                margin: \"auto\",\r\n                display: \"flex\",\r\n                padding: \"8px\",\r\n                \"&:hover, &:visited\": {\r\n                    color: `${props.theme.secondaryTextColor}`,\r\n                },\r\n                \"> i\": {\r\n                    width: \"30px\",\r\n                    height: \"24px\",\r\n                    display: \"inline-block\",\r\n                    mask: `url(${img}) left center no-repeat`,\r\n\t\t            backgroundColor: `${context.theme.secondaryTextColor}`,\r\n                },\r\n                \"> span\": {\r\n                    fontSize: \"13px\",\r\n                    color: `${props.theme.secondaryTextColor}`,\r\n                    whiteSpace: \"pre-wrap\",\r\n                    wordWrap: \"break-word\",\r\n                    textAlign: \"left\",\r\n                    width: \"calc(100% - 30px)\"\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    return {\r\n        margin: \"0.5rem\",\r\n        textAlign: \"center\",\r\n        flex: \"1 0 auto\",\r\n        ...itemTypeStyle,\r\n        \"@for $i from 1 through 36\": {\r\n            \"&:nth-of-type(#{$i})\": {\r\n            maxWidth: \"100%\",\r\n            }\r\n        }\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/file-upload.842b59e4.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\n\r\nimport { SharedMediaManager } from \"./controller\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n    sectionStyle,\r\n    sectionHeaderStyle,\r\n    sectionContentStyle,\r\n    mediaBtnStyle,\r\n    buttonStyle,\r\n    mediaItemStyle,\r\n    itemStyle,\r\n\r\n} from \"./style\";\r\n\r\nimport fileIcon from \"./resources/file-upload.svg\";\r\n\r\nclass CometChatSharedMediaView extends React.Component {\r\n\r\n    static contextType = CometChatContext;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this._isMounted = false;\r\n        this.state = {\r\n            messagetype: \"image\",\r\n            messageList: []\r\n        }\r\n\r\n        this.messageContainer = React.createRef();\r\n\r\n        CometChat.getLoggedinUser().then(user => this.loggedInUser = user).catch(error => {\r\n            console.error(error);\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        this._isMounted = true;\r\n        this.SharedMediaManager = new SharedMediaManager(this.context.item, this.context.type, this.state.messagetype);\r\n        this.getMessages(true);\r\n        this.SharedMediaManager.attachListeners(this.messageUpdated);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n\r\n        if(prevState.messagetype !== this.state.messagetype) {\r\n\r\n            this.SharedMediaManager = null;\r\n            this.SharedMediaManager = new SharedMediaManager(this.context.item, this.context.type, this.state.messagetype);\r\n            this.getMessages(true);\r\n            this.SharedMediaManager.attachListeners(this.messageUpdated);\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.SharedMediaManager.removeListeners();\r\n        this.SharedMediaManager = null;\r\n        this._isMounted = false;\r\n    }\r\n\r\n    //callback for listener functions\r\n    messageUpdated = (key, message) => {\r\n\r\n        switch(key) {\r\n\r\n            case enums.MESSAGE_DELETED:\r\n              this.messageDeleted(message);\r\n              break;\r\n            case enums.MEDIA_MESSAGE_RECEIVED:\r\n              this.messageReceived(message);\r\n              break;\r\n            default:\r\n              break;\r\n        }\r\n    }\r\n\r\n    messageDeleted = (deletedMessage) => {\r\n  \r\n        const messageType = deletedMessage.data.type;\r\n        if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP\r\n        && deletedMessage.getReceiverType() === CometChat.RECEIVER_TYPE.GROUP\r\n        && deletedMessage.getReceiver().guid === this.context.item.guid\r\n        && messageType === this.state.messagetype) {\r\n\r\n            const messageList = [...this.state.messageList];\r\n            const filteredMessages = messageList.filter(message => message.id !== deletedMessage.id);\r\n            this.setState({ messageList: filteredMessages, scrollToBottom: false });\r\n        }\r\n    }\r\n    \r\n    //message is received or composed & sent\r\n    messageReceived = (message) => {\r\n\r\n        const messageType = message.data.type;\r\n        if (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP\r\n        && message.getReceiverType() === CometChat.RECEIVER_TYPE.GROUP\r\n        && message.getReceiver().guid === this.context.item.guid\r\n        && messageType === this.state.messagetype) {\r\n\r\n            let messages = [...this.state.messageList];\r\n            messages = messages.concat(message);\r\n            this.setState({ messageList: messages, scrollToBottom: true });\r\n        }\r\n    }\r\n\r\n    getMessages = (scrollToBottom = false) => {\r\n        \r\n        this.SharedMediaManager.fetchPreviousMessages().then(messages => {\r\n    \r\n            const messageList = [...messages, ...this.state.messageList];\r\n            if (this._isMounted) {\r\n\r\n                this.setState({messageList: messageList});\r\n                if(scrollToBottom) {\r\n                    this.scrollToBottom();\r\n                }\r\n            } \r\n    \r\n        }).catch(error => {\r\n\r\n            const errorCode = (error && error.hasOwnProperty(\"code\")) ? error.code : \"ERROR\";\r\n            this.context.setToastMessage(\"error\", errorCode);\r\n        });\r\n    }\r\n\r\n    scrollToBottom = () => {\r\n      \r\n        if (this.messageContainer) {\r\n            this.messageContainer.scrollTop = this.messageContainer.scrollHeight;\r\n        }\r\n    }\r\n\r\n    handleScroll = (e) => {\r\n\r\n        const top = Math.round(e.currentTarget.scrollTop) === 0;\r\n        if (top && this.state.messageList.length) {\r\n            this.getMessages();\r\n        }\r\n    }\r\n\r\n    mediaClickHandler = (type) => {\r\n        this.setState({messagetype: type, messageList: []});\r\n    }\r\n\r\n    render() {\r\n\r\n        const template = (message, key) => {\r\n\r\n            if(this.state.messagetype === \"image\" && message.data.url) {\r\n\r\n                return (\r\n                    <div id={message.id} key={key} css={itemStyle(this.state, this.props, fileIcon, this.context)} className=\"item item__image\">\r\n                        <img src={message.data.url} alt={Translator.translate(\"SHARED_MEDIA\", this.props.lang)} />\r\n                    </div>\r\n                );\r\n\r\n            } else if (this.state.messagetype === \"video\" && message.data.url) {\r\n\r\n                return (\r\n                    <div id={message.id} key={key} css={itemStyle(this.state, this.props, fileIcon, this.context)} className=\"item item__video\">\r\n                        <video src={message.data.url} />\r\n                    </div>\r\n                );\r\n\r\n            } else if (this.state.messagetype === \"file\" && message.data.attachments) {\r\n\r\n                return (\r\n                    <div id={message.id} key={key} css={itemStyle(this.state, this.props, fileIcon, this.context)} className=\"item item__file\">\r\n                        <a href={message.data.attachments[0].url} \r\n                        target=\"_blank\" \r\n                        rel=\"noopener noreferrer\">\r\n                            <i></i>\r\n                           <span>{message.data.attachments[0].name}</span>\r\n                        </a>\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n\r\n        const messages = [...this.state.messageList];\r\n        const messageList = messages.map((message, key) => {\r\n            return (template(message, key));\r\n        });\r\n\r\n        return (\r\n            <div css={sectionStyle(this.props)} className=\"section section__sharedmedia\">\r\n                <h6 css={sectionHeaderStyle(this.props)} className=\"section__header\">{Translator.translate(\"SHARED_MEDIA\", this.props.lang)}</h6>\r\n                <div css={sectionContentStyle(this.props)} data-id=\"sharedmedia\" className=\"section__content\">\r\n                    <div css={mediaBtnStyle()} className=\"media__button\">\r\n                        <span css={buttonStyle(this.state, \"image\")} onClick={() => this.mediaClickHandler(\"image\")}>{Translator.translate(\"PHOTOS\", this.props.lang)}</span>\r\n                        <span css={buttonStyle(this.state, \"video\")} onClick={() => this.mediaClickHandler(\"video\")}>{Translator.translate(\"VIDEOS\", this.props.lang)}</span>\r\n                        <span css={buttonStyle(this.state, \"file\")} onClick={() => this.mediaClickHandler(\"file\")}>{Translator.translate(\"DOCS\", this.props.lang)}</span>\r\n                    </div>\r\n                    <div css={mediaItemStyle()} className=\"media_items\" \r\n                    ref={el => this.messageContainer = el}\r\n                    onScroll={this.handleScroll}>{(messageList.length) ? messageList : Translator.translate(\"NO_RECORDS_FOUND\", this.props.lang)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatSharedMediaView.defaultProps = {\r\n    lang: Translator.getDefaultLanguage(),\r\n    theme: theme\r\n};\r\n\r\nCometChatSharedMediaView.propTypes = {\r\n    lang: PropTypes.string,\r\n    theme: PropTypes.object\r\n}\r\n\r\nexport { CometChatSharedMediaView };","import {CometChat} from \"@cometchat-pro/chat\";\r\n\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nexport class UserDetailManager {\r\n\tuserListenerId = \"user_detail_\" + new Date().getTime();\r\n\r\n\tattachListeners(callback) {\r\n\t\tCometChat.addUserListener(\r\n\t\t\tthis.userListenerId,\r\n\t\t\tnew CometChat.UserListener({\r\n\t\t\t\tonUserOnline: onlineUser => {\r\n\t\t\t\t\t/* when someuser/friend comes online, user will be received here */\r\n\t\t\t\t\tcallback(enums.USER_ONLINE, onlineUser);\r\n\t\t\t\t},\r\n\t\t\t\tonUserOffline: offlineUser => {\r\n\t\t\t\t\t/* when someuser/friend went offline, user will be received here */\r\n\t\t\t\t\tcallback(enums.USER_OFFLINE, offlineUser);\r\n\t\t\t\t},\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tCometChat.removeUserListener(this.userListenerId);\r\n\t}\r\n}","import {CometChat} from \"@cometchat-pro/chat\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nexport const userDetailStyle = context => {\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\theight: \"100%\",\r\n\t\tposition: \"relative\",\r\n\t\tboxSizing: \"border-box\",\r\n\t\tfontFamily: `${context.theme.fontFamily}`,\r\n\t\t\"*\": {\r\n\t\t\tboxSizing: \"border-box\",\r\n\t\t\tfontFamily: `${context.theme.fontFamily}`,\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const headerStyle = context => {\r\n\treturn {\r\n\t\tpadding: \"16px\",\r\n\t\tposition: \"relative\",\r\n\t\tborderBottom: `1px solid ${context.theme.borderColor.primary}`,\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"flex-start\",\r\n\t\talignItems: \"center\",\r\n\t\theight: \"69px\",\r\n\t};\r\n};\r\n\r\nexport const headerCloseStyle = (img, context) => {\r\n\t\r\n\tconst mq = [...context.theme.breakPoints];\r\n\r\n\treturn {\r\n\t\tcursor: \"pointer\",\r\n\t\tdisplay: \"none\",\r\n\t\tmask: `url(${img}) center center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.primaryColor}`,\r\n\t\twidth: \"24px\",\r\n\t\theight: \"24px\",\r\n\t\t[`@media ${mq[1]}, ${mq[2]}, ${mq[3]}, ${mq[4]}`]: {\r\n\t\t\tdisplay: \"block\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const headerTitleStyle = () => {\r\n\treturn {\r\n\t\tmargin: \"0\",\r\n\t\tfontWeight: \"700\",\r\n\t\tfontSize: \"20px\",\r\n\t};\r\n};\r\n\r\nexport const sectionStyle = () => {\r\n\treturn {\r\n\t\tmargin: \"0\",\r\n\t\tpadding: \"16px 16px 0 16px\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tjustifyContent: \"space-between\",\r\n\t\talignItems: \"flex-start\",\r\n\t};\r\n};\r\n\r\nexport const actionSectionStyle = context => {\r\n\treturn {\r\n\t\twidth: \"100%\",\r\n\t\t\"> div\": {\r\n\t\t\tfontWeight: \"600\",\r\n\t\t\tcursor: \"pointer\",\r\n\t\t\tfontSize: \"12px\",\r\n\t\t},\r\n\t\t\".item__link\": {\r\n\t\t\tcolor: `${context.theme.color.blue}`,\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const privacySectionStyle = context => {\r\n\treturn {\r\n\t\twidth: \"100%\",\r\n\t\t\"> div\": {\r\n\t\t\tcolor: `${context.theme.color.red}`,\r\n\t\t\tfontWeight: \"600\",\r\n\t\t\tcursor: \"pointer\",\r\n\t\t\tfontSize: \"12px\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const mediaSectionStyle = () => {\r\n\treturn {\r\n\t\theight: \"calc(100% - 255px)\",\r\n\t\twidth: \"100%\",\r\n\t\tmargin: \"0\",\r\n\t\tpadding: \"16px 16px 0 16px\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tjustifyContent: \"space-between\",\r\n\t\talignItems: \"flex-start\",\r\n\t};\r\n};\r\n\r\nexport const sectionHeaderStyle = context => {\r\n\treturn {\r\n\t\tmargin: \"0\",\r\n\t\twidth: \"100%\",\r\n\t\tfontSize: \"12px\",\r\n\t\tfontWeight: \"500!important\",\r\n\t\tlineHeight: \"20px\",\r\n\t\tcolor: `${context.theme.color.secondary}`,\r\n\t\ttextTransform: \"uppercase\",\r\n\t};\r\n};\r\n\r\nexport const sectionContentStyle = () => {\r\n\treturn {\r\n\t\twidth: \"100%\",\r\n\t\tmargin: \"6px 0\",\r\n\t};\r\n};\r\n\r\nexport const contentItemStyle = () => {\r\n\treturn {\r\n\t\t\"width\": 100 % \"\",\r\n\t\t\"&:not(:first-of-type):not(:last-of-type)\": {\r\n\t\t\tpadding: \"6px 0\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const itemLinkStyle = context => {\r\n\treturn {\r\n\t\tfontSize: \"15px\",\r\n\t\tlineHeight: \"20px\",\r\n\t\tfontWeight: \"600\",\r\n\t\tdisplay: \"inline-block\",\r\n\t\tcolor: `${context.theme.color.red}`,\r\n\t};\r\n};\r\n\r\nexport const userInfoSectionStyle = () => {\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"flex-start\",\r\n\t};\r\n};\r\n\r\nexport const userThumbnailStyle = () => {\r\n\treturn {\r\n\t\twidth: \"35px\",\r\n\t\theight: \"35px\",\r\n\t\tdisplay: \"inline-block\",\r\n\t\tflexShrink: \"0\",\r\n\t\tmargin: \"0 16px 0 0\",\r\n\t};\r\n};\r\n\r\nexport const userNameStyle = () => {\r\n\treturn {\r\n\t\tmargin: \"0\",\r\n\t\tfontSize: \"15px\",\r\n\t\tfontWeight: \"600\",\r\n\t\tlineHeight: \"22px\",\r\n\t\twidth: \"100%\",\r\n\t\toverflow: \"hidden\",\r\n\t\ttextOverflow: \"ellipsis\",\r\n\t\twhiteSpace: \"nowrap\",\r\n\t};\r\n};\r\n\r\nexport const userStatusStyle = () => {\r\n\treturn {\r\n\t\twidth: \"calc(100% - 50px)\",\r\n\t};\r\n};\r\n\r\nexport const userPresenceStyle = (context, state) => {\r\n\t\r\n\tlet status = state.status ? state.status.toLowerCase() : \"\";\r\n\tlet compareTo = Translator.translate((CometChat.USER_STATUS.ONLINE).toUpperCase(), context.language).toLowerCase();\r\n\tstatus = status === compareTo ? { color: `${context.theme.color.blue}` } : { color: `${context.theme.color.helpText}` };\r\n\r\n\treturn {\r\n\t\twidth: \"calc(100% - 50px)\",\r\n\t\ttextTransform: \"capitalize\",\r\n\t\tfontSize: \"13px\",\r\n\t\tfontWeight: \"400\",\r\n\t\tlineHeight: \"20px\",\r\n\t\t...status,\r\n\t};\r\n};\r\n","export default __webpack_public_path__ + \"static/media/back.12d0392f.svg\";","import React from \"react\";\r\nimport dateFormat from \"dateformat\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatAvatar, CometChatToastNotification } from \"../../Shared/\";\r\nimport { CometChatSharedMediaView } from \"../../Shared/CometChatSharedMediaView/index.js\";\r\n\r\nimport { UserDetailManager } from \"./controller\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport {\r\n\tuserDetailStyle,\r\n\theaderStyle,\r\n\theaderCloseStyle,\r\n\theaderTitleStyle,\r\n\tsectionStyle,\r\n\tactionSectionStyle,\r\n\tmediaSectionStyle,\r\n\tprivacySectionStyle,\r\n\tsectionHeaderStyle,\r\n\tsectionContentStyle,\r\n\tcontentItemStyle,\r\n\titemLinkStyle,\r\n\tuserInfoSectionStyle,\r\n\tuserThumbnailStyle,\r\n\tuserNameStyle,\r\n\tuserStatusStyle,\r\n\tuserPresenceStyle,\r\n} from \"./style\";\r\n\r\nimport navigateIcon from \"./resources/back.svg\";\r\n\r\nclass CometChatUserDetails extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis._isMounted = false;\r\n\t\tthis.state = {\r\n\t\t\tloggedInUser: null,\r\n\t\t\tstatus: null,\r\n\t\t\tenableSharedMedia: false,\r\n\t\t\tenableBlockUser: false,\r\n\t\t\tenableViewProfile: false,\r\n\t\t\tenableUserPresence: false,\r\n\t\t};\r\n\r\n\t\tthis.toastRef = React.createRef();\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tCometChat.getLoggedinUser()\r\n\t\t\t.then(user => {\r\n\t\t\t\tif (this._isMounted) {\r\n\t\t\t\t\tthis.setState({ loggedInUser: user });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => this.toastRef.setError(\"SOMETHING_WRONG\"));\r\n\r\n\t\tthis._isMounted = true;\r\n\t\tthis.toastRef = React.createRef();\r\n\r\n\t\tthis.UserDetailManager = new UserDetailManager();\r\n\t\tthis.UserDetailManager.attachListeners(this.updateUser);\r\n\r\n\t\tthis.setStatusForUser();\r\n\t\tthis.enableSharedMedia();\r\n\t\tthis.enableBlockUser();\r\n\t\tthis.enableViewProfile();\r\n\t\tthis.enableUserPresence();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tthis.enableSharedMedia();\r\n\t\tthis.enableBlockUser();\r\n\t\tthis.enableViewProfile();\r\n\t\tthis.enableUserPresence();\r\n\r\n\t\tif (prevProps.lang !== this.props.lang) {\r\n\t\t\tthis.setStatusForUser();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis._isMounted = false;\r\n\t\tthis.UserDetailManager.removeListeners();\r\n\t\tthis.UserDetailManager = null;\r\n\t}\r\n\r\n\tenableUserPresence = () => {\r\n\t\tthis.context.FeatureRestriction.isUserPresenceEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableUserPresence && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableUserPresence: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableUserPresence !== false) {\r\n\t\t\t\t\tthis.setState({ enableUserPresence: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tupdateUser = (key, user) => {\r\n\t\tswitch (key) {\r\n\t\t\tcase enums.USER_ONLINE:\r\n\t\t\tcase enums.USER_OFFLINE: {\r\n\t\t\t\tif (this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.context.item.uid === user.uid) {\r\n\t\t\t\t\t//if user presence feature is disabled\r\n\t\t\t\t\tif (this.state.enableUserPresence === false) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet status = \"\";\r\n\t\t\t\t\tif (user.status === CometChat.USER_STATUS.OFFLINE) {\r\n\t\t\t\t\t\tstatus = Translator.translate(\"OFFLINE\", this.props.lang);\r\n\t\t\t\t\t} else if (user.status === CometChat.USER_STATUS.ONLINE) {\r\n\t\t\t\t\t\tstatus = Translator.translate(\"ONLINE\", this.props.lang);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setState({ status: status });\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tsetStatusForUser = () => {\r\n\t\tlet status = null;\r\n\t\tif (this.context.item.status === CometChat.USER_STATUS.OFFLINE && this.context.item.lastActiveAt) {\r\n\t\t\tconst lastActive = this.context.item.lastActiveAt * 1000;\r\n\t\t\tconst messageDate = dateFormat(lastActive, \"dS mmm yyyy, h:MM TT\");\r\n\r\n\t\t\tstatus = `${Translator.translate(\"LAST_ACTIVE_AT\", this.props.lang)}: ${messageDate}`;\r\n\t\t} else if (this.context.item.status === CometChat.USER_STATUS.OFFLINE) {\r\n\t\t\tstatus = Translator.translate(\"OFFLINE\", this.props.lang);\r\n\t\t} else if (this.context.item.status === CometChat.USER_STATUS.ONLINE) {\r\n\t\t\tstatus = Translator.translate(\"ONLINE\", this.props.lang);\r\n\t\t}\r\n\r\n\t\tthis.setState({ status: status });\r\n\t};\r\n\r\n\tenableSharedMedia = () => {\r\n\t\tthis.context.FeatureRestriction.isSharedMediaEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableSharedMedia && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableSharedMedia: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableSharedMedia !== false && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableSharedMedia: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableBlockUser = () => {\r\n\t\tthis.context.FeatureRestriction.isBlockUserEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableBlockUser && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableBlockUser: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableBlockUser !== false && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableBlockUser: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableViewProfile = () => {\r\n\t\tthis.context.FeatureRestriction.isViewProfileEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableViewProfile && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableViewProfile: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableViewProfile !== false && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableViewProfile: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tblockUser = () => {\r\n\t\tlet uid = this.context.item.uid;\r\n\t\tlet usersList = [uid];\r\n\t\tCometChat.blockUsers(usersList)\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response && response.hasOwnProperty(uid) && response[uid].hasOwnProperty(\"success\") && response[uid][\"success\"] === true) {\r\n\r\n\t\t\t\t\tconst newType = CometChat.ACTION_TYPE.TYPE_USER;\r\n\t\t\t\t\tconst newItem = Object.assign({}, this.context.item, { blockedByMe: true });\r\n\t\t\t\t\tthis.context.setTypeAndItem(newType, newItem);\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.toastRef.setError(\"SOMETHING_WRONG\");\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => this.toastRef.setError(\"SOMETHING_WRONG\"));\r\n\t};\r\n\r\n\tunblockUser = () => {\r\n\t\tlet uid = this.context.item.uid;\r\n\t\tlet usersList = [uid];\r\n\t\tCometChat.unblockUsers(usersList)\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response && response.hasOwnProperty(uid) && response[uid].hasOwnProperty(\"success\") && response[uid][\"success\"] === true) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst newType = CometChat.ACTION_TYPE.TYPE_USER;\r\n\t\t\t\t\tconst newItem = Object.assign({}, this.context.item, { blockedByMe: false });\r\n\t\t\t\t\tthis.context.setTypeAndItem(newType, newItem);\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.toastRef.setError(\"SOMETHING_WRONG\");\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => this.toastRef.setError(\"SOMETHING_WRONG\"));\r\n\t};\r\n\r\n\tviewProfile = () => {\r\n\t\tconst profileLink = this.context.item.link;\r\n\t\twindow.open(profileLink, \"\", \"fullscreen=yes, scrollbars=auto\");\r\n\t};\r\n\r\n\tcloseDetailView = () => {\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"CLOSE_USER_DETAIL\"]);\r\n\t};\r\n\r\n\trender() {\r\n\t\tif (this.state.loggedInUser === null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tlet viewProfile = null;\r\n\t\tif (this.state.enableViewProfile === true && this.context.item.hasOwnProperty(\"link\") && this.context.item.link && this.context.item.link.trim().length) {\r\n\t\t\tviewProfile = (\r\n\t\t\t\t<div css={sectionStyle()} className=\"detailpane__section\">\r\n\t\t\t\t\t<div css={actionSectionStyle(this.context)} className=\"section section__viewprofile\">\r\n\t\t\t\t\t\t<h6 css={sectionHeaderStyle(this.props)} className=\"section__header\">\r\n\t\t\t\t\t\t\t{Translator.translate(\"ACTIONS\", this.context.language)}\r\n\t\t\t\t\t\t</h6>\r\n\t\t\t\t\t\t<div css={sectionContentStyle()} className=\"section__content\">\r\n\t\t\t\t\t\t\t<div css={contentItemStyle()} className=\"content__item\">\r\n\t\t\t\t\t\t\t\t<div css={itemLinkStyle(this.context)} className=\"item__link\" onClick={this.viewProfile}>\r\n\t\t\t\t\t\t\t\t\t{Translator.translate(\"VIEW_PROFILE\", this.context.language)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet blockUserText;\r\n\t\tif (this.context.item.blockedByMe) {\r\n\t\t\tblockUserText = (\r\n\t\t\t\t<div css={itemLinkStyle(this.context)} className=\"item__link\" onClick={this.unblockUser}>\r\n\t\t\t\t\t{Translator.translate(\"UNBLOCK_USER\", this.context.language)}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tblockUserText = (\r\n\t\t\t\t<div css={itemLinkStyle(this.context)} className=\"item__link\" onClick={this.blockUser}>\r\n\t\t\t\t\t{Translator.translate(\"BLOCK_USER\", this.context.language)}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet blockUserView = (\r\n\t\t\t<div css={sectionStyle()} className=\"detailpane__section\">\r\n\t\t\t\t<div css={privacySectionStyle(this.context)} className=\"section section__privacy\">\r\n\t\t\t\t\t<h6 css={sectionHeaderStyle(this.context)} className=\"section__header\">\r\n\t\t\t\t\t\t{Translator.translate(\"OPTIONS\", this.context.language)}\r\n\t\t\t\t\t</h6>\r\n\t\t\t\t\t<div css={sectionContentStyle()} className=\"section__content\">\r\n\t\t\t\t\t\t<div css={contentItemStyle()} className=\"content__item\">\r\n\t\t\t\t\t\t\t{blockUserText}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\t//if block/unblock user feature is disabled\r\n\t\tif (this.state.enableBlockUser === false) {\r\n\t\t\tblockUserView = null;\r\n\t\t}\r\n\r\n\t\tlet sharedmediaView = (\r\n\t\t\t<div css={mediaSectionStyle()} className=\"detailpane__section\">\r\n\t\t\t\t<CometChatSharedMediaView theme={this.props.theme} lang={this.context.language} />\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\t//if shared media feature is disabled\r\n\t\tif (this.state.enableSharedMedia === false) {\r\n\t\t\tsharedmediaView = null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={userDetailStyle(this.context)} className=\"detailpane detailpane--user\">\r\n\t\t\t\t<div css={headerStyle(this.context)} className=\"detailpane__header\">\r\n\t\t\t\t\t<div css={headerCloseStyle(navigateIcon, this.context)} className=\"header__close\" onClick={this.closeDetailView}></div>\r\n\t\t\t\t\t<h4 css={headerTitleStyle()} className=\"header__title\">\r\n\t\t\t\t\t\t{Translator.translate(\"DETAILS\", this.context.language)}\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div css={sectionStyle()} className=\"detailpane__section\">\r\n\t\t\t\t\t<div css={userInfoSectionStyle()} className=\"section section__userinfo\">\r\n\t\t\t\t\t\t<div css={userThumbnailStyle()} className=\"user__thumbnail\">\r\n\t\t\t\t\t\t\t<CometChatAvatar user={this.context.item} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div css={userStatusStyle()} className=\"user__status\">\r\n\t\t\t\t\t\t\t<h6 css={userNameStyle()}>{this.context.item.name}</h6>\r\n\t\t\t\t\t\t\t<span css={userPresenceStyle(this.context, this.state)}>{this.state.status}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<CometChatToastNotification ref={el => (this.toastRef = el)} lang={this.props.lang} />\r\n\t\t\t\t{viewProfile}\r\n\t\t\t\t{blockUserView}\r\n\t\t\t\t{sharedmediaView}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatUserDetails.defaultProps = {\r\n\ttheme: theme,\r\n};\r\n\r\nCometChatUserDetails.propTypes = {\r\n\ttheme: PropTypes.object,\r\n};\r\n\r\nexport { CometChatUserDetails };\r\n","import { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport {UIKitSettings} from \"../../../util/UIKitSettings\";\r\n\r\nexport class UserListManager {\r\n\r\n    userRequest = null;\r\n    userListenerId = \"userlist_\" + new Date().getTime();\r\n\r\n    constructor(context, searchKey) {\r\n\r\n        this.context = context;\r\n        this.searchKey = searchKey;\r\n    }\r\n\r\n    initializeUsersRequest = () => {\r\n\r\n        const userListMode = this.context.UIKitSettings.userListMode;\r\n\t\tconst userListModeOptions = UIKitSettings.userListFilterOptions;\r\n\r\n        return new Promise((resolve, reject) => {\r\n            if (userListMode === userListModeOptions[\"ALL\"]) {\r\n                if (this.searchKey) {\r\n                    this.usersRequest = new CometChat.UsersRequestBuilder().setLimit(30).setSearchKeyword(this.searchKey).build();\r\n                } else {\r\n                    this.usersRequest = new CometChat.UsersRequestBuilder().setLimit(30).build();\r\n                }\r\n\r\n                return resolve(this.usersRequest);\r\n            } else if (userListMode === userListModeOptions[\"FRIENDS\"]) {\r\n                if (this.searchKey) {\r\n                    this.usersRequest = new CometChat.UsersRequestBuilder().setLimit(30).friendsOnly(true).setSearchKeyword(this.searchKey).build();\r\n                } else {\r\n                    this.usersRequest = new CometChat.UsersRequestBuilder().setLimit(30).friendsOnly(true).build();\r\n                }\r\n\r\n                return resolve(this.usersRequest);\r\n            } else {\r\n                return reject({message: \"Invalid filter for userlist\"});\r\n            }\r\n        });\r\n    }\r\n\r\n    fetchNextUsers() {\r\n        return this.usersRequest.fetchNext();\r\n    }\r\n\r\n    attachListeners(callback) {\r\n        \r\n        CometChat.addUserListener(\r\n            this.userListenerId,\r\n            new CometChat.UserListener({\r\n                onUserOnline: onlineUser => {\r\n                    /* when someuser/friend comes online, user will be received here */\r\n                    callback(onlineUser);\r\n                },\r\n                onUserOffline: offlineUser => {\r\n                    /* when someuser/friend went offline, user will be received here */\r\n                    callback(offlineUser);\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    removeListeners() {\r\n\r\n        CometChat.removeUserListener(this.userListenerId);\r\n    }\r\n}","export const contactWrapperStyle = (props, theme) => {\r\n\r\n    const borderStyle = (props._parent === \"\") ? {\r\n        border: `1px solid ${theme.borderColor.primary}`\r\n    } : {};\r\n\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        height: \"100%\",\r\n        boxSizing: \"border-box\",\r\n        ...borderStyle,\r\n        \"*\": {\r\n            boxSizing: \"border-box\",\r\n            \"::-webkit-scrollbar\": {\r\n                width: \"8px\",\r\n                height: \"4px\",\r\n            },\r\n            \"::-webkit-scrollbar-track\": {\r\n                background: \"#ffffff00\"\r\n            },\r\n            \"::-webkit-scrollbar-thumb\": {\r\n                background: \"#ccc\",\r\n                \"&:hover\": {\r\n                    background: \"#aaa\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const contactHeaderStyle = theme => {\r\n\r\n\treturn {\r\n\t\tpadding: \"16px\",\r\n\t\tposition: \"relative\",\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tborderBottom: `1px solid ${theme.borderColor.primary}`,\r\n\t\theight: \"70px\",\r\n\t};\r\n};\r\n\r\nexport const contactHeaderCloseStyle = (img, theme) => {\r\n\r\n\tconst mq = [...theme.breakPoints];\r\n\r\n\treturn {\r\n\t\tcursor: \"pointer\",\r\n\t\tdisplay: \"none\",\r\n\t\tmask: `url(${img}) left center no-repeat`,\r\n\t\tbackgroundColor: `${theme.secondaryTextColor}`,\r\n\t\theight: \"24px\",\r\n\t\twidth: \"33%\",\r\n\t\t[`@media ${mq[1]}, ${mq[2]}`]: {\r\n\t\t\tdisplay: \"block!important\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const contactHeaderTitleStyle = (props) => {\r\n\r\n    const alignment = (props.hasOwnProperty(\"enableCloseMenu\") && props.enableCloseMenu.length > 0) ? {\r\n        width: \"33%\",\r\n        textAlign: \"center\"\r\n    } : {};\r\n\r\n    return {\r\n        margin: \"0\",\r\n        fontWeight: \"700\",\r\n        display: \"inline-block\",\r\n        width: \"100%\",\r\n        textAlign: \"left\",\r\n        fontSize: \"22px\",\r\n        lineHeight: \"26px\",\r\n        ...alignment,\r\n        \"&[dir=rtl]\": {\r\n            textAlign: \"right\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const contactSearchStyle = () => {\r\n    \r\n    return {\r\n        margin: \"16px\",\r\n        position: \"relative\",\r\n        borderRadius: \"8px\",\r\n\t\tboxShadow: \"rgba(20, 20, 20, 0.04) 0 0 0 1px inset\",\r\n        backgroundColor: \"rgba(20, 20, 20, 0.04)\",\r\n        height: \"35px\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\"\r\n    }\r\n}\r\n\r\nexport const contactSearchButtonStyle = (img, theme) => {\r\n\r\n\treturn {\r\n\t\twidth: \"30px\",\r\n\t\theight: \"100%\",\r\n\t\tpadding: \"8px 0 8px 8px\",\r\n\t\tcursor: \"default\",\r\n\t\tmask: `url(${img}) 10px center no-repeat`,\r\n\t\tbackgroundColor: `${theme.secondaryTextColor}!important`,\r\n\t};\r\n};\r\n\r\nexport const contactSearchInputStyle = (props) => {\r\n\r\n    return {\r\n        width: \"calc(100% - 30px)\",\r\n        padding: \"8px\",\r\n        fontSize: \"15px\",\r\n        fontWeight: \"400\",\r\n        lineHeight: \"20px\",\r\n        outline: \"none\",\r\n        border: \"none\",\r\n        height: \"100%\",\r\n        color: props.theme.color.search,\r\n        backgroundColor: \"transparent\",\r\n    }\r\n}\r\n\r\nexport const contactMsgStyle = () => {\r\n\r\n    return {\r\n        overflow: \"hidden\",\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n    }\r\n}\r\n\r\nexport const contactMsgTxtStyle = theme => {\r\n\r\n\treturn {\r\n\t\tmargin: \"0\",\r\n\t\tminHeight: \"36px\",\r\n\t\tcolor: `${theme.color.secondary}`,\r\n\t\tfontSize: \"20px!important\",\r\n\t\tfontWeight: \"600\",\r\n\t\tlineHeight: \"30px\",\r\n\t\twordWrap: \"break-word\",\r\n\t\tpadding: \"0 16px\",\r\n\t};\r\n};\r\n\r\nexport const contactListStyle = () => {\r\n    \r\n    return {\r\n        height: \"calc(100% - 125px)\",\r\n        overflowY: \"auto\",\r\n        margin: \"0\",\r\n        padding: \"0\"\r\n    }\r\n}\r\n\r\nexport const contactAlphabetStyle = (props) => {\r\n    \r\n    return {\r\n        padding: \"0 16px\",\r\n        margin: \"5px 0\",\r\n        width: \"100%\",\r\n        fontSize: \"12px\",\r\n        fontWeight: \"500\",\r\n        lineHeight: \"20px\",\r\n        color: `${props.theme.color.tertiary}`\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/search.01c171e6.svg\";","export default __webpack_public_path__ + \"static/media/back.12d0392f.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { UserListManager } from \"./controller\";\r\n\r\nimport { CometChatUserListItem } from \"../../Users\";\r\n\r\nimport { CometChatContextProvider, CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport { \r\n  contactWrapperStyle, \r\n  contactHeaderStyle, \r\n  contactHeaderCloseStyle, \r\n  contactHeaderTitleStyle,\r\n  contactSearchStyle,\r\n  contactSearchButtonStyle,\r\n  contactSearchInputStyle,\r\n  contactMsgStyle,\r\n  contactMsgTxtStyle,\r\n  contactListStyle,\r\n  contactAlphabetStyle\r\n} from \"./style\";\r\n\r\nimport searchIcon from \"./resources/search.svg\";\r\nimport navigateIcon from \"./resources/back.svg\";\r\n\r\nclass CometChatUserList extends React.PureComponent {\r\n\r\n\titem;\r\n\ttimeout;\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tuserlist: [],\r\n\t\t\tenableSearchUser: false,\r\n\t\t\tdecoratorMessage: Translator.translate(\"LOADING\", props.lang),\r\n\t\t};\r\n\r\n\t\tthis.contextProviderRef = React.createRef();\r\n\t\tthis.userListRef = React.createRef();\r\n\r\n\t\tCometChat.getLoggedinUser()\r\n\t\t\t.then(user => (this.loggedInUser = user))\r\n\t\t\t.catch(error => this.setState({ decoratorMessage: Translator.translate(\"SOMETHING_WRONG\", this.props.lang) }));\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tthis.item = (this.getContext().type === CometChat.ACTION_TYPE.TYPE_USER) ? this.getContext().item : null;\r\n\t\tthis.toggleUserSearch();\r\n\r\n\t\tthis.UserListManager = new UserListManager(this.getContext())\r\n\t\tthis.UserListManager.initializeUsersRequest()\r\n\t\t\t.then(response => {\r\n\t\t\t\tthis.getUsers();\r\n\t\t\t\tthis.UserListManager.attachListeners(this.userUpdated);\r\n\t\t\t})\r\n\t\t\t.catch(error => this.setState({ decoratorMessage: Translator.translate(\"SOMETHING_WRONG\", this.props.lang) }));\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\r\n\t\t//if user is blocked/unblocked, update userlist\r\n\t\tif (this.item \r\n\t\t&& Object.keys(this.item).length\r\n\t\t&& this.getContext().type === CometChat.ACTION_TYPE.TYPE_USER && this.item.uid === this.getContext().item.uid\r\n\t\t&& this.item.blockedByMe !== this.getContext().item.blockedByMe) {\r\n\r\n\t\t\tlet userlist = [...this.state.userlist];\r\n\r\n\t\t\t\t//search for user\r\n\t\t\t\tlet userKey = userlist.findIndex(u => u.uid === this.getContext().item.uid);\r\n\t\t\t\tif(userKey > -1) {\r\n\r\n\t\t\t\tlet userObject = { ...userlist[userKey] };\r\n\t\t\t\tlet newUserObject = Object.assign({}, userObject, { blockedByMe: this.getContext().item.blockedByMe });\r\n\t\t\t\t\r\n\t\t\t\tuserlist.splice(userKey, 1, newUserObject);\r\n\t\t\t\tthis.setState({ userlist: userlist });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.item = (this.getContext().type === CometChat.ACTION_TYPE.TYPE_USER) ? this.getContext().item : null;\r\n\t\tthis.toggleUserSearch();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\r\n\t\tthis.UserListManager.removeListeners();\r\n\t\tthis.UserListManager = null;\r\n\t}\r\n\r\n\ttoggleUserSearch = () => {\r\n\r\n\t\tthis.getContext().FeatureRestriction.isUserSearchEnabled().then(response => {\r\n\r\n\t\t\t/**\r\n\t\t\t* Don't update state if the response has the same value\r\n\t\t\t*/\r\n\t\t\tif (response !== this.state.enableSearchUser) {\r\n\t\t\t\tthis.setState({enableSearchUser: response});\r\n\t\t\t}\r\n\r\n\t\t}).catch(error => {\r\n\r\n\t\t\tif (this.state.enableSearchUser !== false) {\r\n\t\t\t\tthis.setState({enableSearchUser: false});\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tuserUpdated = (user) => {\r\n\t\t\r\n\t\tlet userlist = [...this.state.userlist];\r\n\r\n\t\t//search for user\r\n\t\tlet userKey = userlist.findIndex(u => u.uid === user.uid);\r\n\t\t\r\n\t\t//if found in the list, update user object\r\n\t\tif(userKey > -1) {\r\n\r\n\t\t\tlet userObj = {...userlist[userKey]};\r\n\t\t\tlet newUserObj = {...userObj, ...user};\r\n\t\t\tuserlist.splice(userKey, 1, newUserObj);\r\n\r\n\t\t\tthis.setState({ userlist: userlist });\r\n\t\t}\r\n\t}\r\n\r\n\thandleScroll = (e) => {\r\n\r\n\t\tconst bottom =\r\n\t\tMath.round(e.currentTarget.scrollHeight - e.currentTarget.scrollTop) === Math.round(e.currentTarget.clientHeight);\r\n\t\tif (bottom) this.getUsers();\r\n\t}\r\n\r\n\thandleClick = (user) => {\r\n\r\n\t\tif(!this.props.onItemClick)\r\n\t\t\treturn;\r\n\r\n\t\tthis.props.onItemClick(user, CometChat.ACTION_TYPE.TYPE_USER);\r\n\t}\r\n\r\n  \thandleMenuClose = () => {\r\n\r\n\t\tif(!this.props.actionGenerated) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"TOGGLE_SIDEBAR\"]);\r\n  \t}\r\n  \r\n \tsearchUsers = (e) => {\r\n\r\n\t\tif (this.timeout) {\r\n\t\t\tclearTimeout(this.timeout);\r\n\t\t}\r\n\r\n\t\tlet val = e.target.value;\r\n\t\tthis.UserListManager = new UserListManager(this.getContext(), val);\r\n\t\tthis.UserListManager.initializeUsersRequest()\r\n\t\t\t.then(response => {\r\n\t\t\t\tthis.timeout = setTimeout(() => {\r\n\t\t\t\t\tthis.setState({ userlist: [], decoratorMessage: Translator.translate(\"LOADING\", this.props.lang) }, () => this.getUsers());\r\n\t\t\t\t}, 500);\r\n\t\t\t})\r\n\t\t\t.catch(error => this.setState({ decoratorMessage: Translator.translate(\"SOMETHING_WRONG\", this.props.lang) }));\r\n  \t}\r\n\r\n\tgetUsers = () => {\r\n\r\n\t\tthis.UserListManager.fetchNextUsers()\r\n\t\t\t.then(userList => {\r\n\r\n\t\t\t\tif (userList.length === 0) {\r\n\t\t\t\t\tif (this.state.userlist.length === 0) {\r\n\t\t\t\t\t\tthis.setState({ decoratorMessage: Translator.translate(\"NO_USERS_FOUND\", this.props.lang) });\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ userlist: [...this.state.userlist, ...userList], decoratorMessage: \"\" });\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\t.catch(error => this.setState({ decoratorMessage: Translator.translate(\"SOMETHING_WRONG\", this.props.lang) }));\r\n\t}\r\n\r\n\tgetContext = () => {\r\n\r\n\t\tif (this.props._parent.length) {\r\n\t\t\treturn this.context;\r\n\t\t} else {\r\n\t\t\treturn this.contextProviderRef.state;\r\n\t\t}\r\n\t}\r\n\r\n  \trender() {\r\n\r\n\t\tlet messageContainer = null;\r\n\t\tif (this.state.decoratorMessage.length !== 0) {\r\n\t\t\tmessageContainer = (\r\n\t\t\t\t<div css={contactMsgStyle()} className=\"contacts__decorator-message\">\r\n\t\t\t\t\t<p css={contactMsgTxtStyle(theme)} className=\"decorator-message\">\r\n\t\t\t\t\t\t{this.state.decoratorMessage}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst userList = [...this.state.userlist];\r\n\t\tlet currentLetter = \"\";\r\n\t\t\r\n\t\tconst users = userList.map(user => {\r\n\t\t\r\n\t\t\tconst chr = user.name[0].toUpperCase();\r\n\t\t\tlet firstChar = null;\r\n\t\t\tif (chr !== currentLetter) {\r\n\t\t\t\tcurrentLetter = chr;\r\n\t\t\t\tfirstChar = (<div css={contactAlphabetStyle(this.props)} className=\"contacts__list__alphabet-filter\">{currentLetter}</div>);\r\n\t\t\t} else {\r\n\t\t\t\tfirstChar = null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet selectedUser = (this.getContext().type === CometChat.ACTION_TYPE.TYPE_USER && this.getContext().item.uid === user.uid) ? user : null;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<React.Fragment key={user.uid}>\r\n\t\t\t\t\t{firstChar}\r\n\t\t\t\t\t<CometChatUserListItem user={user} selectedUser={selectedUser} clickHandler={this.handleClick} />\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\r\n\t\t});\r\n\r\n\t\tlet closeBtn = <div css={contactHeaderCloseStyle(navigateIcon, theme)} className=\"header__close\" onClick={this.handleMenuClose}></div>;\r\n\t\tif (this.getContext() && Object.keys(this.getContext().item).length === 0) {\r\n\t\t\tcloseBtn = null;\r\n\t\t}\r\n\r\n\t\tlet searchUser = null;\r\n\t\tif (this.state.enableSearchUser) {\r\n\t\t\tsearchUser = (\r\n\t\t\t\t<div css={contactSearchStyle()} className=\"contacts__search\">\r\n\t\t\t\t\t<button type=\"button\" className=\"search__button\" css={contactSearchButtonStyle(searchIcon, theme)} />\r\n\t\t\t\t\t<input type=\"text\" autoComplete=\"off\" css={contactSearchInputStyle(this.props)} className=\"search__input\" placeholder={Translator.translate(\"SEARCH\", this.props.lang)} onChange={this.searchUsers} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst userListTemplate = (\r\n\t\t\t<div css={contactWrapperStyle(this.props, theme)} className=\"contacts\">\r\n\t\t\t\t<div css={contactHeaderStyle(theme)} className=\"contacts__header\">\r\n\t\t\t\t\t{closeBtn}\r\n\t\t\t\t\t<h4 css={contactHeaderTitleStyle(this.props)} className=\"header__title\" dir={Translator.getDirection(this.props.lang)}>\r\n\t\t\t\t\t\t{Translator.translate(\"USERS\", this.props.lang)}\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t\t<div></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{searchUser}\r\n\t\t\t\t{messageContainer}\r\n\t\t\t\t<div css={contactListStyle()} className=\"contacts__list\" onScroll={this.handleScroll} ref={el => (this.userListRef = el)}>\r\n\t\t\t\t\t{users}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tlet userListWrapper = (userListTemplate);\r\n\t\tif (this.props._parent === \"\") {\r\n\t\t\tuserListWrapper = (\r\n\t\t\t\t<CometChatContextProvider ref={el => (this.contextProviderRef = el)}>\r\n\t\t\t\t\t{userListTemplate}\r\n\t\t\t\t</CometChatContextProvider>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (userListWrapper);\r\n  \t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatUserList.defaultProps = {\r\n\tlang: Translator.getDefaultLanguage(),\r\n\ttheme: theme,\r\n\tonItemClick: () => {},\r\n\t_parent: \"\"\r\n};\r\n\r\nCometChatUserList.propTypes = {\r\n\tlang: PropTypes.string,\r\n\ttheme: PropTypes.object,\r\n\tonItemClick: PropTypes.func,\r\n\t_parent: PropTypes.string\r\n}\r\n\r\nexport { CometChatUserList };\r\n","export const listItem = (props, context) => {\r\n\r\n    const selectedState = (props.selectedUser && props.selectedUser.uid === props.user.uid) ? {\r\n        backgroundColor: `${context.theme.backgroundColor.primary}`\r\n    } : {};\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"left\",\r\n        alignItems: \"center\",\r\n        cursor: \"pointer\",\r\n        width: \"100%\",\r\n        padding: \"8px 16px\",\r\n        ...selectedState,\r\n        '&:hover': {\r\n            backgroundColor: `${context.theme.backgroundColor.primary}`\r\n        }\r\n    }\r\n}\r\n\r\nexport const itemThumbnailStyle = () => {\r\n    \r\n    return {\r\n        display: \"inline-block\",\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        flexShrink: \"0\"\r\n    }\r\n}\r\n\r\nexport const itemDetailStyle = () => {\r\n    \r\n    return {\r\n        width: \"calc(100% - 45px)\",\r\n        flexGrow: 1,\r\n        paddingLeft: \"16px\",\r\n        \"&[dir=rtl]\": {\r\n            paddingRight: \"16px\",\r\n            paddingLeft: \"0\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const itemNameStyle = (context) => { \r\n    \r\n    return {\r\n        fontSize: \"15px\",\r\n        fontWeight: \"600\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n        width: \"100%\",\r\n        margin: \"5px 0 0 0\",\r\n        lineHeight: \"22px\",\r\n        color: `${context.theme.color.primary}`\r\n    }\r\n};\r\n\r\nexport const itemDescStyle = context => {\r\n\treturn {\r\n\t\tmarginTop: \"10px\",\r\n\t\tborderBottom: `1px solid ${context.theme.borderColor.primary}`,\r\n\t};\r\n};\r\n\r\n","/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatAvatar, CometChatUserPresence } from \"../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport { listItem, itemThumbnailStyle, itemDetailStyle, itemNameStyle, itemDescStyle } from \"./style\";\r\nimport { useContext } from \"react\";\r\n\r\nconst CometChatUserListItem = (props) => {\r\n\r\n\tconst context = useContext(CometChatContext);\r\n\r\n\tlet userPresence = (<CometChatUserPresence status={props.user.status} />);\r\n\r\n  \tconst toggleTooltip = (event, flag) => {\r\n\r\n\t\tconst elem = event.target;\r\n\r\n\t\tconst scrollWidth = elem.scrollWidth;\r\n\t\tconst clientWidth = elem.clientWidth;\r\n\r\n\t\tif(scrollWidth <= clientWidth) {\r\n\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(flag) {\r\n\t\t\telem.setAttribute(\"title\", elem.textContent);\r\n\t\t} else {\r\n\t\t\telem.removeAttribute(\"title\");\r\n\t\t}\r\n\t} \r\n  \r\n\treturn (\r\n\t\t<div css={listItem(props, context)} onClick={() => props.clickHandler(props.user)} className=\"list__item\">\r\n\t\t\t<div css={itemThumbnailStyle()} className=\"list__item__thumbnail\">\r\n\t\t\t\t<CometChatAvatar user={props.user} />\r\n\t\t\t\t{userPresence}\r\n\t\t\t</div>\r\n\t\t\t<div css={itemDetailStyle()} className=\"list__item__details\" dir={Translator.getDirection(context.language)}>\r\n\t\t\t\t<div css={itemNameStyle(context)} className=\"item__details__name\"  \r\n\t\t\t\tonMouseEnter={event => toggleTooltip(event, true)} \r\n\t\t\t\tonMouseLeave={event => toggleTooltip(event, false)}>{props.user.name}</div>\r\n\t\t\t\t<div css={itemDescStyle(context)} className=\"item__details__desc\"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatUserListItem.defaultProps = {\r\n\ttheme: theme,\r\n\tuser: {},\r\n};\r\n\r\nCometChatUserListItem.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tuser: PropTypes.shape(CometChat.User),\r\n};\r\n\r\nexport { CometChatUserListItem };\r\n","export const userScreenStyle = (props) => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n        boxSizing: \"border-box\",\r\n        fontFamily: `${props.theme.fontFamily}`,\r\n        border: `1px solid ${props.theme.borderColor.primary}`,\r\n        \"*\": {\r\n            boxSizing: \"border-box\",\r\n            fontFamily: `${props.theme.fontFamily}`,\r\n            \"::-webkit-scrollbar\": {\r\n                width: \"8px\",\r\n                height: \"4px\",\r\n            },\r\n            \"::-webkit-scrollbar-track\": {\r\n                background: \"#ffffff00\"\r\n            },\r\n            \"::-webkit-scrollbar-thumb\": {\r\n                background: \"#ccc\",\r\n                \"&:hover\": {\r\n                    background: \"#aaa\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const userScreenSidebarStyle = (state, props) => {\r\n\r\n    const sidebarView = (state.sidebarview) ? {\r\n        left: \"0\",\r\n        boxShadow: \"rgba(0, 0, 0, .4) -30px 0 30px 30px\"\r\n    } : {};\r\n\r\n    const mq = [...props.theme.breakPoints];\r\n\r\n    return {\r\n\r\n        width: \"280px\",\r\n        borderRight: `1px solid ${props.theme.borderColor.primary}`,\r\n        height: \"100%\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        \"> .contacts\": {\r\n            height: \"calc(100% - 5px)\",\r\n        },\r\n        [`@media ${mq[0]}`]: {\r\n            position: \"absolute!important\",\r\n            left: \"-100%\",\r\n            top: \"0\",\r\n            bottom: \"0\",\r\n            width: \"100%!important\",\r\n            zIndex: \"2\",\r\n            backgroundColor: `${props.theme.backgroundColor.white}`,\r\n            transition: \"all .3s ease-out\",\r\n            ...sidebarView\r\n        }\r\n    }\r\n}\r\n\r\nexport const userScreenMainStyle = (state, props) => {\r\n\r\n    const mq = [...props.theme.breakPoints];\r\n\r\n    return {\r\n        width: \"calc(100% - 280px)\",\r\n        height: \"100%\",\r\n        order: \"2\",\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        [`@media ${mq[1]}, ${mq[2]}`]: {\r\n            width: \"100%!important\",\r\n        }\r\n    }\r\n}","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { CometChatUserList } from \"../\";\r\nimport { CometChatMessages } from \"../../Messages\";\r\nimport { CometChatIncomingCall } from \"../../Calls\";\r\n\r\nimport { CometChatContextProvider } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n\tuserScreenStyle,\r\n\tuserScreenSidebarStyle,\r\n\tuserScreenMainStyle,\r\n} from \"./style\"\r\n\r\nclass CometChatUserListWithMessages extends React.Component {\r\n\r\n  \tloggedInUser = null;\r\n\r\n  \tconstructor(props) {\r\n\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tsidebarview: false,\r\n\t\t}\r\n\r\n\t\tthis.contextProviderRef = React.createRef();\r\n  \t}\r\n  \r\n\tcomponentDidMount() {\r\n\r\n\t\tif (this.props.chatWithUser.length === 0) {\r\n\t\t\tthis.toggleSideBar();\r\n\t\t}\r\n\t}\r\n\r\n\titemClicked = (user, type) => {\r\n\r\n\t\tthis.contextProviderRef.setTypeAndItem(type, user);\r\n\t\tthis.toggleSideBar()\r\n\t}\r\n\r\n\tactionHandler = (action) => {\r\n\t\t\r\n\t\tswitch(action) {\r\n\t\t\tcase enums.ACTIONS[\"TOGGLE_SIDEBAR\"]:\r\n\t\t\t\tthis.toggleSideBar();\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleSideBar = () => {\r\n\r\n\t\tconst sidebarview = this.state.sidebarview;\r\n\t\tthis.setState({ sidebarview: !sidebarview });\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\tlet messageScreen = (\r\n\t\t<CometChatMessages\r\n\t\t_parent=\"userscreen\"\r\n\t\tactionGenerated={this.actionHandler} />);\r\n\r\n\t\treturn (\r\n\t\t\t<CometChatContextProvider ref={el => (this.contextProviderRef = el)} user={this.props.chatWithUser} language={this.props.lang}>\r\n\t\t\t\t<div css={userScreenStyle(this.props)} className=\"cometchat cometchat--contacts\" dir={Translator.getDirection(this.props.lang)}>\r\n\t\t\t\t\t<div css={userScreenSidebarStyle(this.state, this.props)} className=\"contacts__sidebar\">\r\n\t\t\t\t\t\t<CometChatUserList _parent=\"ulwm\" theme={this.props.theme} lang={this.props.lang} onItemClick={this.itemClicked} actionGenerated={this.actionHandler} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div css={userScreenMainStyle(this.state, this.props)} className=\"contacts__main\">\r\n\t\t\t\t\t\t{messageScreen}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<CometChatIncomingCall theme={this.props.theme} lang={this.props.lang} actionGenerated={this.actionHandler} />\r\n\t\t\t\t</div>\r\n\t\t\t</CometChatContextProvider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatUserListWithMessages.defaultProps = {\r\n\tlang: Translator.getDefaultLanguage(),\r\n\ttheme: theme,\r\n\tchatWithUser: \"\",\r\n};\r\n\r\nCometChatUserListWithMessages.propTypes = {\r\n\tlang: PropTypes.string,\r\n\ttheme: PropTypes.object,\r\n\tchatWithUser: PropTypes.string,\r\n}\r\n\r\nexport { CometChatUserListWithMessages };","export const modalWrapperStyle = (context) => {\r\n\r\n    const mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n    return {\r\n        minWidth: \"350px\",\r\n        minHeight: \"350px\",\r\n        width: \"40%\",\r\n        height: \"40%\",\r\n        overflow: \"hidden\",\r\n        backgroundColor: `${context.theme.backgroundColor.white}`,\r\n        position: \"fixed\",\r\n        left: \"50%\",\r\n        top: \"50%\",\r\n        transform: \"translate(-50%, -50%)\",\r\n        zIndex: \"4\",\r\n        margin: \"0 auto\",\r\n        boxShadow: \"rgba(20, 20, 20, 0.2) 0 16px 32px, rgba(20, 20, 20, 0.04) 0 0 0 1px\",\r\n        borderRadius: \"12px\",\r\n        display: \"block\",\r\n        [mq[0]]: {\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n        },\r\n        [mq[1]]: {\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n        },\r\n        [mq[2]]: {\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const modalCloseStyle = (img, context) => {\r\n\r\n    return {\r\n        position: \"absolute\",\r\n        width: \"32px\",\r\n        height: \"32px\",\r\n        borderRadius: \"50%\",\r\n        top: \"16px\",\r\n        right: \"16px\",\r\n        mask: `url(${img}) center center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.primaryColor}`,\r\n        cursor: \"pointer\",\r\n    }\r\n}\r\n\r\nexport const modalBodyStyle = () => {\r\n\r\n    return {\r\n        padding: \"24px\",\r\n        height: \"100%\",\r\n        width: \"100%\"\r\n    }\r\n}\r\n\r\nexport const modalErrorStyle = context => {\r\n\treturn {\r\n\t\tfontSize: \"12px\",\r\n\t\tcolor: `${context.theme.color.red}`,\r\n\t\ttextAlign: \"center\",\r\n\t\tmargin: \"8px 0\",\r\n\t\twidth: \"100%\",\r\n\t};\r\n};\r\n\r\nexport const modalTableStyle = (props) => {\r\n\r\n    return {\r\n        borderCollapse: \"collapse\",\r\n        margin: \"0\",\r\n        padding: \"0\",\r\n        width: \"100%\",\r\n        height: \"90%\",\r\n        \"tr\": {\r\n            display: \"table\",\r\n            width: \"100%\",\r\n            tableLayout: \"fixed\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const tableCaptionStyle = () => {\r\n\r\n    return {\r\n        fontSize: \"20px\",\r\n        marginBottom: \"15px\",\r\n        fontWeight: \"bold\",\r\n        textAlign: \"left\",\r\n    }\r\n}\r\n\r\nexport const tableBodyStyle = () => {\r\n\r\n    return {\r\n        height: \"calc(100% - 40px)\",\r\n        overflowY: \"auto\",\r\n        display: \"block\",\r\n        \"tr\": {\r\n            \"td\": {\r\n                padding: \"8px 0\",\r\n                fontSize: \"14px\",\r\n                \"input\": {\r\n                    width: \"100%\",\r\n                    border: \"none\",\r\n                    padding: \"8px 16px\",\r\n                    fontSize: \"14px\",\r\n                    outline: \"none\",\r\n                },\r\n                \"select\": {\r\n                    outline: \"none\",\r\n                    padding: \"8px 16px\",\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const tableFootStyle = (context, state, img) => {\r\n\r\n    const loadingState = (state.creatingGroup) ? {\r\n        disabled: \"true\",\r\n        pointerEvents: \"none\",\r\n        background: `url(${img}) no-repeat right 10px center ${context.theme.primaryColor}`,\r\n    } : {};\r\n\r\n    const textMargin = (state.creatingGroup) ? { marginRight: \"24px\", } : {};\r\n\r\n    return {\r\n        display: \"inline-block\",\r\n        \"button\": {\r\n            cursor: \"pointer\",\r\n            padding: \"8px 16px\",\r\n            backgroundColor: `${context.theme.primaryColor}`,\r\n            borderRadius: \"5px\",\r\n            color: `${context.theme.color.white}`,\r\n            fontSize: \"14px\",\r\n            outline: \"0\",\r\n            border: \"0\",\r\n            ...loadingState,\r\n            \"span\": {\r\n                ...textMargin\r\n            }\r\n        },\r\n        \"tr\": {\r\n            border: \"none\",\r\n            \"td\": {\r\n                textAlign: \"center\",\r\n            }\r\n        },\r\n    }\r\n}\r\n\r\nexport const inputStyle = (context) => {\r\n\r\n    return {\r\n        display: \"block\",\r\n        width: \"100%\",\r\n        border: '0',\r\n        boxShadow: \"rgba(20, 20, 20, 0.04) 0 0 0 1px inset\",\r\n        borderRadius: \"8px\",\r\n        backgroundColor: `${context.theme.backgroundColor.grey}`,\r\n        color: `${context.theme.color.helpText}`,\r\n        fontSize: \"14px\",\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/creating.446449d0.svg\";","export default __webpack_public_path__ + \"static/media/close.6d1416b0.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatBackdrop } from \"../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n    modalWrapperStyle,\r\n    modalCloseStyle,\r\n    modalBodyStyle,\r\n    modalTableStyle,\r\n    tableCaptionStyle,\r\n    tableBodyStyle,\r\n    inputStyle,\r\n    tableFootStyle,\r\n\tmodalErrorStyle,\r\n} from \"./style\";\r\n\r\nimport creatingIcon from \"./resources/creating.svg\";\r\nimport closeIcon from \"./resources/close.svg\";\r\n\r\nclass CometChatCreateGroup extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\terrorMessage: \"\",\r\n\t\t\tpasswordInput: false,\r\n\t\t\tname: \"\",\r\n\t\t\ttype: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\tcreatingGroup: false,\r\n\t\t\tenablePublicGroup: false,\r\n\t\t\tenablePasswordGroup: false,\r\n\t\t\tenablePrivateGroup: false,\r\n\t\t};\r\n\t}\r\n\r\n    componentDidMount() {\r\n\r\n        this.enablePublicGroup();\r\n        this.enablePasswordGroup();\r\n        this.enablePrivateGroup();\r\n    }\r\n\r\n    componentDidUpdate() {\r\n\r\n        this.enablePublicGroup();\r\n        this.enablePasswordGroup();\r\n        this.enablePrivateGroup();\r\n    }\r\n\r\n\tenablePublicGroup = () => {\r\n\t\tthis.context.FeatureRestriction.isPublicGroupEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enablePublicGroup) {\r\n\t\t\t\t\tthis.setState({enablePublicGroup: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enablePublicGroup !== false) {\r\n\t\t\t\t\tthis.setState({enablePublicGroup: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenablePasswordGroup = () => {\r\n\t\tthis.context.FeatureRestriction.isPasswordGroupEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enablePasswordGroup) {\r\n\t\t\t\t\tthis.setState({enablePasswordGroup: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enablePasswordGroup !== false) {\r\n\t\t\t\t\tthis.setState({enablePasswordGroup: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenablePrivateGroup = () => {\r\n\t\tthis.context.FeatureRestriction.isPrivateGroupEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enablePrivateGroup) {\r\n\t\t\t\t\tthis.setState({enablePrivateGroup: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enablePrivateGroup !== false) {\r\n\t\t\t\t\tthis.setState({enablePrivateGroup: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tpasswordChangeHandler = event => {\r\n\t\tthis.setState({password: event.target.value});\r\n\t};\r\n\r\n\tnameChangeHandler = event => {\r\n\t\tthis.setState({name: event.target.value});\r\n\t};\r\n\r\n\ttypeChangeHandler = event => {\r\n\t\tconst type = event.target.value;\r\n\t\tthis.setState({type});\r\n\r\n\t\tif (type === CometChat.GROUP_TYPE.PASSWORD) {\r\n\t\t\tthis.setState({passwordInput: true});\r\n\t\t} else {\r\n\t\t\tthis.setState({passwordInput: false});\r\n\t\t}\r\n\t};\r\n\r\n\tvalidate = () => {\r\n\t\tconst groupName = this.state.name.trim();\r\n\t\tconst groupType = this.state.type.trim();\r\n\r\n\t\tif (!groupName) {\r\n\t\t\tthis.setState({ errorMessage: Translator.translate(\"INVALID_GROUP_NAME\", this.context.language) });\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (!groupType) {\r\n\t\t\tthis.setState({ errorMessage: Translator.translate(\"INVALID_GROUP_TYPE\", this.context.language) });\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet password = \"\";\r\n\t\tif (groupType === CometChat.GROUP_TYPE.PASSWORD) {\r\n\t\t\tpassword = this.state.password;\r\n\r\n\t\t\tif (!password.length) {\r\n\t\t\t\tthis.setState({ errorMessage: Translator.translate(\"INVALID_PASSWORD\", this.context.language) });\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\tcreateGroup = () => {\r\n\r\n\t\tif (!this.validate()) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.setState({ creatingGroup: true });\r\n\r\n\t\tconst groupType = this.state.type.trim();\r\n\r\n\t\tconst password = this.state.password;\r\n\t\tconst guid = \"group_\" + new Date().getTime();\r\n\t\tconst name = this.state.name.trim();\r\n\t\tlet type = CometChat.GROUP_TYPE.PUBLIC;\r\n\r\n\t\tswitch (groupType) {\r\n\t\t\tcase \"public\":\r\n\t\t\t\ttype = CometChat.GROUP_TYPE.PUBLIC;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"private\":\r\n\t\t\t\ttype = CometChat.GROUP_TYPE.PRIVATE;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"password\":\r\n\t\t\t\ttype = CometChat.GROUP_TYPE.PASSWORD;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tconst group = new CometChat.Group(guid, name, type, password);\r\n\t\tCometChat.createGroup(group)\r\n\t\t\t.then(newGroup => {\r\n\t\t\t\tthis.setState({ creatingGroup: false });\r\n\r\n\t\t\t\tif (typeof newGroup === \"object\" && Object.keys(newGroup).length) {\r\n\t\t\t\t\tthis.context.setToastMessage(\"success\", \"GROUP_CREATION_SUCCESS\");\r\n\t\t\t\t\tthis.setState({ name: \"\", type: \"\", password: \"\", passwordInput: \"\" });\r\n\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"GROUP_CREATED\"], newGroup);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ errorMessage: Translator.translate(\"SOMETHING_WRONG\", this.context.language) });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tthis.setState({ creatingGroup: false, errorMessage: Translator.translate(\"SOMETHING_WRONG\", this.context.language) });\r\n\t\t\t});\r\n\t};\r\n\r\n\tpopulateGroupType = () => {};\r\n\r\n\trender() {\r\n\r\n        const groupTypes = {};\r\n        let groupTypeSelect = null;\r\n\r\n        if (this.state.enablePublicGroup === true) {\r\n            groupTypes[CometChat.GROUP_TYPE.PUBLIC] = Translator.translate(\"PUBLIC\", this.context.language);\r\n        }\r\n\r\n        if (this.state.enablePasswordGroup === true) {\r\n            groupTypes[CometChat.GROUP_TYPE.PASSWORD] = Translator.translate(\"PASSWORD_PROTECTED\", this.context.language);\r\n        }\r\n\r\n        if (this.state.enablePrivateGroup === true) {\r\n            groupTypes[CometChat.GROUP_TYPE.PRIVATE] = Translator.translate(\"PRIVATE\", this.context.language);\r\n        }\r\n\r\n        const groupTypeKeys = Object.keys(groupTypes);\r\n        if (groupTypeKeys.length) {\r\n\r\n            const groupTypeListOptions = groupTypeKeys.map(groupTypeKey => {\r\n                return (\r\n                    <option value={groupTypeKey} key={groupTypeKey}>\r\n                        {groupTypes[groupTypeKey]}\r\n                    </option>\r\n                );\r\n            });\r\n\r\n            if (groupTypeKeys.length > 1) {\r\n                groupTypeSelect = (\r\n                    <tr>\r\n                        <td>\r\n                            <select css={inputStyle(this.props)} className=\"grouptype\" onChange={this.typeChangeHandler} value={this.state.type} tabIndex=\"2\">\r\n                                <option value=\"\">{Translator.translate(\"SELECT_GROUP_TYPE\", this.context.language)}</option>\r\n                                {groupTypeListOptions}\r\n                            </select>\r\n                        </td>\r\n                    </tr>\r\n                );\r\n            } else {\r\n                groupTypeSelect = (\r\n                    <tr>\r\n                        <td>\r\n                            <select css={inputStyle(this.props)} className=\"grouptype\" onChange={this.typeChangeHandler} value={this.state.type} tabIndex=\"2\">\r\n                                {groupTypeListOptions}\r\n                            </select>\r\n                        </td>\r\n                    </tr>\r\n                );\r\n            }\r\n        }\r\n\r\n\t\tlet password = null;\r\n\t\tif (this.state.passwordInput) {\r\n\t\t\tpassword = (\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<input autoComplete=\"off\" css={inputStyle(this.context)} placeholder={Translator.translate(\"ENTER_GROUP_PASSWORD\", this.context.language)} type=\"password\" tabIndex=\"3\" onChange={this.passwordChangeHandler} value={this.state.password} />\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst createText = this.state.creatingGroup ? Translator.translate(\"CREATING\", this.context.language) : Translator.translate(\"CREATE\", this.context.language);\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<CometChatBackdrop show={true} clicked={this.props.close} />\r\n\t\t\t\t<div css={modalWrapperStyle(this.context)} className=\"modal__creategroup\">\r\n\t\t\t\t\t<span css={modalCloseStyle(closeIcon, this.context)} className=\"modal__close\" onClick={this.props.close} title={Translator.translate(\"CLOSE\", this.context.language)}></span>\r\n\t\t\t\t\t<div css={modalBodyStyle()} className=\"modal__body\">\r\n\t\t\t\t\t\t<table css={modalTableStyle(this.props)}>\r\n\t\t\t\t\t\t\t<caption css={tableCaptionStyle()} className=\"modal__title\"> {Translator.translate(\"CREATE_GROUP\", this.context.language)} </caption>\r\n\t\t\t\t\t\t\t<tbody css={tableBodyStyle()} className=\"modal__search\">\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<td><div css={modalErrorStyle(this.context)}>{this.state.errorMessage}</div></td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<input autoComplete=\"off\" css={inputStyle(this.props)} className=\"search__input\" placeholder={Translator.translate(\"ENTER_GROUP_NAME\", this.context.language)} type=\"text\" tabIndex=\"1\" onChange={this.nameChangeHandler} value={this.state.name} />\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t{groupTypeSelect}\r\n\t\t\t\t\t\t\t\t{password}\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t<tfoot css={tableFootStyle(this.context, this.state, creatingIcon)}>\r\n\t\t\t\t\t\t\t\t<tr className=\"creategroup\">\r\n\t\t\t\t\t\t\t\t\t<td><button type=\"button\" tabIndex=\"4\" onClick={this.createGroup}><span>{createText}</span></button></td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</tfoot>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport { CometChatCreateGroup };","import { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nexport class GroupDetailManager {\r\n\r\n    guid = null;\r\n    groupMemberRequest = null;\r\n    bannedGroupMemberRequest = null;\r\n\r\n    userListenerId = \"group_detail_user_\" + new Date().getTime();\r\n    groupListenerId = \"group_detail_group_\" + new Date().getTime();\r\n\r\n    constructor(guid) {\r\n        this.guid = guid;\r\n        this.groupMemberRequest = new CometChat.GroupMembersRequestBuilder(guid).setLimit(10).build();\r\n        this.bannedGroupMemberRequest = new CometChat.BannedMembersRequestBuilder(guid).setLimit(10).build();\r\n    }\r\n\r\n    fetchNextGroupMembers() {\r\n        return this.groupMemberRequest.fetchNext();\r\n    }\r\n\r\n    fetchNextBannedGroupMembers() {\r\n        return this.bannedGroupMemberRequest.fetchNext();\r\n    }\r\n\r\n    attachListeners(callback) {\r\n\r\n        CometChat.addGroupListener(\r\n            this.groupListenerId,\r\n            new CometChat.GroupListener({\r\n                onGroupMemberScopeChanged: (message, changedUser, newScope, oldScope, changedGroup) => {\r\n                    callback(enums.GROUP_MEMBER_SCOPE_CHANGED, message, changedGroup, {\"user\": changedUser, \"scope\": newScope});\r\n                }, \r\n                onGroupMemberKicked: (message, kickedUser, kickedBy, kickedFrom) => {\r\n                    callback(enums.GROUP_MEMBER_KICKED, message, kickedFrom, {\"user\": kickedUser, \"hasJoined\": false});\r\n                }, \r\n                onGroupMemberBanned: (message, bannedUser, bannedBy, bannedFrom) => {\r\n                    callback(enums.GROUP_MEMBER_BANNED, message, bannedFrom, {\"user\": bannedUser});\r\n                }, \r\n                onGroupMemberUnbanned: (message, unbannedUser, unbannedBy, unbannedFrom) => {\r\n                    callback(enums.GROUP_MEMBER_UNBANNED, message, unbannedFrom, {\"user\": unbannedUser, \"hasJoined\": false});\r\n                }, \r\n                onMemberAddedToGroup: (message, userAdded, userAddedBy, userAddedIn) => {\r\n                    callback(enums.GROUP_MEMBER_ADDED, message, userAddedIn, {\"user\": userAdded, \"hasJoined\": true});\r\n                }, \r\n                onGroupMemberLeft: (message, leavingUser, group) => {\r\n                    callback(enums.GROUP_MEMBER_LEFT, message, group, {\"user\": leavingUser});\r\n                }, \r\n                onGroupMemberJoined: (message, joinedUser, joinedGroup) => {\r\n                    callback(enums.GROUP_MEMBER_JOINED, message, joinedGroup, {\"user\": joinedUser});\r\n                }\r\n            })\r\n        );\r\n\r\n        CometChat.addUserListener(\r\n            this.userListenerId,\r\n            new CometChat.UserListener({\r\n                onUserOnline: onlineUser => {\r\n                    /* when someuser/friend comes online, user will be received here */\r\n                    callback(enums.USER_ONLINE, null, {guid: this.guid}, {\"user\": onlineUser});\r\n                },\r\n                onUserOffline: offlineUser => {\r\n                    /* when someuser/friend went offline, user will be received here */\r\n                    callback(enums.USER_OFFLINE, null, {guid: this.guid}, {\"user\": offlineUser});\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    removeListeners() {\r\n\r\n        CometChat.removeUserListener(this.userListenerId);\r\n        CometChat.removeGroupListener(this.groupListenerId);\r\n    }\r\n}","export const detailStyle = (context) => {\r\n\r\n    return {\r\n        height: \"100%\",\r\n        position: \"relative\",\r\n        boxSizing: \"border-box\",\r\n        fontFamily: `${context.theme.fontFamily}`,\r\n        \"*\": {\r\n            boxSizing: \"border-box\",\r\n            fontFamily: `${context.theme.fontFamily}`,\r\n        }\r\n    }\r\n}\r\n\r\nexport const headerStyle = (context) => {\r\n\r\n    return {\r\n        padding: \"16px\",\r\n        position: \"relative\",\r\n        borderBottom: `1px solid ${context.theme.borderColor.primary}`,\r\n        display: \"flex\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"center\",\r\n        height: \"69px\",\r\n    }\r\n}\r\n\r\nexport const headerCloseStyle = (img, context) => {\r\n\r\n    const mq = [...context.theme.breakPoints];\r\n\r\n    return {\r\n        cursor: \"pointer\",\r\n        display: \"none\",\r\n        mask: `url(${img}) center center no-repeat`,\r\n        backgroundColor: `${context.theme.primaryColor}`,\r\n        width: \"24px\",\r\n        height: \"24px\",\r\n        [`@media ${mq[1]}, ${mq[2]}, ${mq[3]}, , ${mq[4]}`]: {\r\n            display: \"block\"\r\n        },\r\n    }\r\n}\r\n\r\nexport const headerTitleStyle = () => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        fontWeight: \"700\",\r\n        fontSize: \"22px\",\r\n        lineHeight: \"26px\"\r\n    }\r\n}\r\n\r\nexport const detailPaneStyle = () => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        padding: \"16px\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"flex-start\",\r\n        height: \"calc(100% - 70px)\"\r\n    }\r\n}\r\n\r\nexport const sectionStyle = () => {\r\n\r\n    return {\r\n        width: \"100%\",\r\n    }\r\n}\r\n\r\nexport const sectionHeaderStyle = (context) => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        width: \"100%\",\r\n        fontSize: \"12px\",\r\n        fontWeight: \"500\",\r\n        lineHeight: \"20px\",\r\n        color: `${context.theme.color.secondary}`,\r\n        textTransform: \"uppercase\",\r\n    }\r\n}\r\n\r\nexport const sectionContentStyle = () => {\r\n\r\n    return {\r\n        width: \"100%\",\r\n        margin: \"6px 0\",\r\n        '&:not(:last-of-type)': {\r\n            marginBottom: \"16px\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const contentItemStyle = () => {\r\n\r\n    return {\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        clear: \"both\",\r\n        width: \"100%\",\r\n        padding:\" 6px 0\",\r\n        '&:first-of-type': {\r\n            paddingTop: \"0\",\r\n        },\r\n        '&:last-of-type': {\r\n            paddingBottom: \"0\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const itemLinkStyle = (context, deleteLink) => {\r\n\r\n    const deleteCss = (deleteLink) ? {\r\n        color: `${context.theme.color.red}`,\r\n    } : {\r\n        color: `${context.theme.color.primary}`,\r\n    };\r\n\r\n    return {\r\n        fontSize: \"15px\",\r\n        lineHeight: \"20px\",\r\n        display: \"inline-block\",\r\n        cursor: \"pointer\",\r\n        fontWeight: \"600\",\r\n        ...deleteCss\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/back.12d0392f.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { GroupDetailManager } from \"./controller\";\r\n\r\nimport { CometChatConfirmDialog, CometChatToastNotification } from \"../../Shared\";\r\nimport { \r\n\tCometChatViewGroupMemberList, \r\n\tCometChatAddGroupMemberList, \r\n\tCometChatBanGroupMemberList, \r\n\tCometChatTransferOwnershipMemberList\r\n} from \"../../Groups\";\r\n\r\nimport { CometChatSharedMediaView } from \"../../Shared/CometChatSharedMediaView/index.js\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport {\r\n    detailStyle,\r\n    headerStyle,\r\n    headerCloseStyle,\r\n    headerTitleStyle,\r\n    detailPaneStyle,\r\n    sectionStyle,\r\n    sectionHeaderStyle,\r\n    sectionContentStyle,\r\n    contentItemStyle,\r\n    itemLinkStyle\r\n} from \"./style\";\r\n\r\nimport navigateIcon from \"./resources/back.svg\";\r\n\r\nclass CometChatGroupDetails extends React.Component {\r\n\titem;\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\r\n\t\tthis._isMounted = false;\r\n\r\n\t\tthis.state = {\r\n\t\t\tloggedInUser: null,\r\n\t\t\tmemberlist: [],\r\n\t\t\tbannedmemberlist: [],\r\n\t\t\tadministratorslist: [],\r\n\t\t\tmoderatorslist: [],\r\n\t\t\tviewMember: false,\r\n\t\t\taddMember: false,\r\n\t\t\tbanMember: false,\r\n\t\t\taddAdministrator: false,\r\n\t\t\taddModerator: false,\r\n\t\t\tenableAddGroupMembers: false,\r\n\t\t\tenableChangeScope: false,\r\n\t\t\tenableKickGroupMembers: false,\r\n\t\t\tenableBanGroupMembers: false,\r\n\t\t\tenableDeleteGroup: false,\r\n\t\t\tenableViewGroupMembers: false,\r\n\t\t\tenableLeaveGroup: false,\r\n\t\t\tenableSharedMedia: false,\r\n\t\t\tshowDeleteConfirmDialog: false,\r\n\t\t\tshowLeaveGroupConfirmDialog: false,\r\n\t\t\tshowTransferOwnershipConfirmDialog: false,\r\n\t\t\ttransferOwnership: false,\r\n\t\t};\r\n\r\n\t\tthis.toastRef = React.createRef();\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tCometChat.getLoggedinUser()\r\n\t\t\t.then(user => {\r\n\t\t\t\tif (this._isMounted) {\r\n\t\t\t\t\tthis.setState({ loggedInUser: user });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => this.toastRef.setError(\"SOMETHING_WRONG\"));\r\n\r\n\t\tthis._isMounted = true;\r\n\t\tthis.context.clearGroupMembers();\r\n\r\n\t\tthis.item = this.context.item;\r\n\r\n\t\tconst guid = this.context.item.guid;\r\n\t\tthis.GroupDetailManager = new GroupDetailManager(guid);\r\n\t\tthis.getGroupMembers();\r\n\t\tthis.getBannedGroupMembers();\r\n\t\tthis.GroupDetailManager.attachListeners(this.groupUpdated);\r\n\r\n\t\tthis.enableAddGroupMembers();\r\n\t\tthis.enableChangeScope();\r\n\t\tthis.enableKickGroupMembers();\r\n\t\tthis.enableBanGroupMembers();\r\n\t\tthis.enableViewGroupMembers();\r\n\t\tthis.enableDeleteGroup();\r\n\t\tthis.enableLeaveGroup();\r\n\t\tthis.enableSharedMedia();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tif (this.item.guid !== this.context.item.guid) {\r\n\t\t\tthis.context.clearGroupMembers();\r\n\r\n\t\t\tconst guid = this.context.item.guid;\r\n\t\t\tthis.GroupDetailManager.removeListeners();\r\n\t\t\tthis.GroupDetailManager = new GroupDetailManager(guid);\r\n\t\t\tthis.getGroupMembers();\r\n\t\t\tthis.getBannedGroupMembers();\r\n\t\t\tthis.GroupDetailManager.attachListeners(this.groupUpdated);\r\n\t\t}\r\n\r\n\t\tthis.item = this.context.item;\r\n\t\tthis.enableAddGroupMembers();\r\n\t\tthis.enableChangeScope();\r\n\t\tthis.enableKickGroupMembers();\r\n\t\tthis.enableBanGroupMembers();\r\n\t\tthis.enableViewGroupMembers();\r\n\t\tthis.enableDeleteGroup();\r\n\t\tthis.enableLeaveGroup();\r\n\t\tthis.enableSharedMedia();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.GroupDetailManager.removeListeners();\r\n\t\tthis.GroupDetailManager = null;\r\n\t\tthis._isMounted = false;\r\n\t}\r\n\r\n\tenableAddGroupMembers = () => {\r\n\t\tthis.context.FeatureRestriction.isAddingGroupMembersEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableAddGroupMembers && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableAddGroupMembers: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableAddGroupMembers !== false && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableAddGroupMembers: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableChangeScope = () => {\r\n\t\tthis.context.FeatureRestriction.isChangingGroupMemberScopeEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableChangeScope && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableChangeScope: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableChangeScope !== false && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableChangeScope: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableKickGroupMembers = () => {\r\n\t\tthis.context.FeatureRestriction.isKickingGroupMembersEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableKickGroupMembers && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableKickGroupMembers: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableKickGroupMembers !== false && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableKickGroupMembers: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableBanGroupMembers = () => {\r\n\t\tthis.context.FeatureRestriction.isBanningGroupMembersEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableBanGroupMembers && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableBanGroupMembers: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableBanGroupMembers !== false && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableBanGroupMembers: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableDeleteGroup = () => {\r\n\t\tthis.context.FeatureRestriction.isGroupDeletionEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableDeleteGroup && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableDeleteGroup: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableDeleteGroup !== false && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableDeleteGroup: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableViewGroupMembers = () => {\r\n\t\tthis.context.FeatureRestriction.isViewingGroupMembersEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableViewGroupMembers && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableViewGroupMembers: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableViewGroupMembers !== false && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableViewGroupMembers: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableLeaveGroup = () => {\r\n\t\tthis.context.FeatureRestriction.isJoinLeaveGroupsEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableLeaveGroup && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableLeaveGroup: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableLeaveGroup !== false && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableLeaveGroup: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableSharedMedia = () => {\r\n\t\tthis.context.FeatureRestriction.isSharedMediaEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableSharedMedia && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableSharedMedia: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableSharedMedia !== false && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableSharedMedia: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableBlockUser = () => {\r\n\t\tthis.context.FeatureRestriction.isBlockUserEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableBlockUser && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableBlockUser: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableBlockUser !== false && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ enableBlockUser: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tgroupUpdated = (key, message, group, options) => {\r\n\t\tconst guid = this.context.item.guid;\r\n\t\tif (guid !== group.guid) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tswitch (key) {\r\n\t\t\tcase enums.USER_ONLINE:\r\n\t\t\tcase enums.USER_OFFLINE:\r\n\t\t\t\tthis.updateGroupMemberPresence(options.user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_ADDED:\r\n\t\t\tcase enums.GROUP_MEMBER_JOINED:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst member = options.user;\r\n\t\t\t\t\tconst updatedMember = Object.assign({}, member, { scope: CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT });\r\n\r\n\t\t\t\t\tthis.addParticipants([updatedMember], false);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_LEFT:\r\n\t\t\tcase enums.GROUP_MEMBER_KICKED:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst member = options.user;\r\n\t\t\t\t\tthis.removeParticipants(key, member, false);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_BANNED:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst member = options.user;\r\n\t\t\t\t\t//this.setAvatar(member);\r\n\t\t\t\t\tthis.banMembers([member]);\r\n\t\t\t\t\tthis.removeParticipants(key, member, false);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_UNBANNED:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst member = options.user;\r\n\t\t\t\t\tthis.unbanMembers([member]);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_SCOPE_CHANGED:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst member = options.user;\r\n\t\t\t\t\tconst updatedMember = Object.assign({}, member, { scope: options[\"scope\"] });\r\n\t\t\t\t\tthis.updateParticipants(updatedMember);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n    Updating group members presence\r\n    */\r\n\tupdateGroupMemberPresence = member => {\r\n\t\tlet memberlist = [...this.context.groupMembers];\r\n\t\t//search for user\r\n\t\tlet memberKey = memberlist.findIndex((m, k) => m.uid === member.uid);\r\n\t\t//if found in the list, update user object\r\n\t\tif (memberKey > -1) {\r\n\t\t\tlet memberObj = memberlist[memberKey];\r\n\t\t\tlet newMemberObj = Object.assign({}, memberObj, member);\r\n\t\t\tmemberlist.splice(memberKey, 1, newMemberObj);\r\n\r\n\t\t\tthis.context.updateGroupMembers(memberlist);\r\n\t\t}\r\n\r\n\t\tlet bannedmemberlist = [...this.context.bannedGroupMembers];\r\n\t\t//search for user\r\n\t\tlet bannedMemberKey = bannedmemberlist.findIndex((m, k) => m.uid === member.uid);\r\n\t\t//if found in the list, update user object\r\n\t\tif (bannedMemberKey > -1) {\r\n\t\t\tlet bannedMemberObj = bannedmemberlist[bannedMemberKey];\r\n\t\t\tlet newBannedMemberObj = Object.assign({}, bannedMemberObj, member);\r\n\t\t\tbannedmemberlist.splice(bannedMemberKey, 1, newBannedMemberObj);\r\n\r\n\t\t\tthis.updateBannedGroupMembers(bannedmemberlist);\r\n\t\t}\r\n\t};\r\n\r\n\tgetGroupMembers = () => {\r\n\t\tconst administratorslist = [],\r\n\t\t\tmoderatorslist = [];\r\n\t\tthis.GroupDetailManager.fetchNextGroupMembers()\r\n\t\t\t.then(groupMembers => {\r\n\t\t\t\tgroupMembers.forEach(member => {\r\n\t\t\t\t\tif (member.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN) {\r\n\t\t\t\t\t\tadministratorslist.push(member);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (member.scope === CometChat.GROUP_MEMBER_SCOPE.MODERATOR) {\r\n\t\t\t\t\t\tmoderatorslist.push(member);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.context.setAllGroupMembers(groupMembers, administratorslist, moderatorslist);\r\n\t\t\t})\r\n\t\t\t.catch(error => this.toastRef.setError(\"SOMETHING_WRONG\"));\r\n\t};\r\n\r\n\tgetBannedGroupMembers = () => {\r\n\t\tif (this.context.item.scope === CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.GroupDetailManager.fetchNextBannedGroupMembers()\r\n\t\t\t.then(bannedMembers => {\r\n\t\t\t\tthis.context.setBannedGroupMembers(bannedMembers);\r\n\t\t\t})\r\n\t\t\t.catch(error => this.toastRef.setError(\"SOMETHING_WRONG\"));\r\n\t};\r\n\r\n\tdeleteGroup = () => {\r\n\t\tthis.setState({ showDeleteConfirmDialog: true, showLeaveGroupConfirmDialog: false, showTransferOwnershipConfirmDialog: false });\r\n\t};\r\n\r\n\tonDeleteConfirm = e => {\r\n\t\tconst optionSelected = e.target.value;\r\n\t\tthis.setState({ showDeleteConfirmDialog: false });\r\n\r\n\t\tif (optionSelected === \"no\") {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst guid = this.context.item.guid;\r\n\t\tCometChat.deleteGroup(guid)\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response) {\r\n\t\t\t\t\tthis.context.setToastMessage(\"success\", \"GROUP_DELETION_SUCCESS\");\r\n\t\t\t\t\tthis.context.setDeletedGroupId(guid);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.toastRef.setError(\"SOMETHING_WRONG\");\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => this.toastRef.setError(\"SOMETHING_WRONG\"));\r\n\t};\r\n\r\n\tonLeaveConfirm = e => {\r\n\t\tconst optionSelected = e.target.value;\r\n\t\tthis.setState({ showLeaveGroupConfirmDialog: false });\r\n\r\n\t\tif (optionSelected === \"no\") {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst guid = this.context.item.guid;\r\n\t\tCometChat.leaveGroup(guid)\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response) {\r\n\t\t\t\t\tthis.context.setLeftGroupId(guid);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.toastRef.setError(\"SOMETHING_WRONG\");\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => this.toastRef.setError(\"SOMETHING_WRONG\"));\r\n\t};\r\n\r\n\tonTransferConfirm = e => {\r\n\t\tconst optionSelected = e.target.value;\r\n\t\tthis.setState({ showTransferOwnershipConfirmDialog: false });\r\n\t\tif (optionSelected === \"no\") {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.setState({ transferOwnership: true });\r\n\t};\r\n\r\n\tleaveGroup = () => {\r\n\t\t/**\r\n\t\t * If loggeduser is the owner of the group; ask him to transfer ownership before leaving the group else show leave group confirmtion dialog\r\n\t\t */\r\n\t\tif (this.context.item?.owner === this.state.loggedInUser?.uid) {\r\n\t\t\tthis.setState({ showTransferOwnershipConfirmDialog: true, showDeleteConfirmDialog: false, showLeaveGroupConfirmDialog: false });\r\n\t\t} else {\r\n\t\t\tthis.setState({ showLeaveGroupConfirmDialog: true, showTransferOwnershipConfirmDialog: false, showDeleteConfirmDialog: false });\r\n\t\t}\r\n\t};\r\n\r\n\tclickHandler = (action, flag) => {\r\n\t\tswitch (action) {\r\n\t\t\tcase \"viewmember\":\r\n\t\t\t\tthis.setState({ viewMember: flag });\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"addmember\":\r\n\t\t\t\tthis.setState({ addMember: flag });\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"banmember\":\r\n\t\t\t\tthis.setState({ banMember: flag });\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"transferownership\":\r\n\t\t\t\tthis.setState({ transferOwnership: flag });\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tmembersActionHandler = (action, members) => {\r\n\t\tswitch (action) {\r\n\t\t\tcase enums.ACTIONS[\"FETCH_GROUP_MEMBERS\"]:\r\n\t\t\t\tthis.getGroupMembers();\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"FETCH_BANNED_GROUP_MEMBERS\"]:\r\n\t\t\t\tthis.getBannedGroupMembers();\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"UNBAN_GROUP_MEMBER_SUCCESS\"]:\r\n\t\t\t\tthis.unbanMembers(members);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"ADD_GROUP_MEMBER_SUCCESS\"]:\r\n\t\t\t\tthis.addParticipants(members);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"BAN_GROUPMEMBER_SUCCESS\"]:\r\n\t\t\tcase enums.ACTIONS[\"KICK_GROUPMEMBER_SUCCESS\"]:\r\n\t\t\t\tthis.removeParticipants(action, members);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"SCOPECHANGE_GROUPMEMBER_SUCCESS\"]:\r\n\t\t\t\tthis.updateParticipants(members);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"OWNERSHIP_TRANSFERRED\"]:\r\n\t\t\t\tthis.updateOwnership(members);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tbanMembers = members => {\r\n\t\tthis.context.setBannedGroupMembers(members);\r\n\t};\r\n\r\n\tunbanMembers = members => {\r\n\t\tconst bannedMembers = [...this.context.bannedGroupMembers];\r\n\t\tconst unbannedMembers = [];\r\n\r\n\t\tconst filteredBannedMembers = bannedMembers.filter(bannedmember => {\r\n\t\t\tconst found = members.find(member => bannedmember.uid === member.uid);\r\n\t\t\tif (found) {\r\n\t\t\t\tunbannedMembers.push(found);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"UNBAN_GROUP_MEMBER_SUCCESS\"], unbannedMembers);\r\n\t\tthis.context.updateBannedGroupMembers(filteredBannedMembers);\r\n\t};\r\n\r\n\taddParticipants = (members, triggerUpdate = true) => {\r\n\t\tthis.context.setGroupMembers(members);\r\n\t\t\r\n\t\tif (triggerUpdate) {\r\n\t\t\tconst newItem = { ...this.context.item, membersCount: this.context.groupMembers.length };\r\n\t\t\tthis.context.setItem(newItem);\r\n\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"ADD_GROUP_MEMBER_SUCCESS\"], members);\r\n\t\t}\r\n\t};\r\n\r\n\tremoveParticipants = (action, member, triggerUpdate = true) => {\r\n\r\n\t\tconst groupmembers = [...this.context.groupMembers];\r\n\t\tconst filteredMembers = groupmembers.filter(groupmember => {\r\n\t\t\tif (groupmember.uid === member.uid) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tthis.context.updateGroupMembers(filteredMembers);\r\n\r\n\t\tif (triggerUpdate) {\r\n\t\t\t\r\n\t\t\tconst newItem = { ...this.context.item, membersCount: filteredMembers.length };\r\n\t\t\tthis.context.setItem(newItem);\r\n\r\n\t\t\t//if group member is banned, update banned member list in context api\r\n\t\t\tif(action === enums.ACTIONS[\"BAN_GROUPMEMBER_SUCCESS\"]) {\r\n\t\t\t\tthis.context.setBannedGroupMembers([member]);\r\n\t\t\t}\r\n\r\n\t\t\tthis.props.actionGenerated(action, [member]);\r\n\t\t}\r\n\t};\r\n\r\n\tupdateParticipants = updatedMember => {\r\n\t\tconst memberlist = [...this.context.groupMembers];\r\n\r\n\t\tconst memberKey = memberlist.findIndex(member => member.uid === updatedMember.uid);\r\n\t\tif (memberKey > -1) {\r\n\t\t\tconst memberObj = memberlist[memberKey];\r\n\t\t\tconst newMemberObj = Object.assign({}, memberObj, updatedMember, { scope: updatedMember[\"scope\"] });\r\n\r\n\t\t\tmemberlist.splice(memberKey, 1, newMemberObj);\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"SCOPECHANGE_GROUPMEMBER_SUCCESS\"], [newMemberObj]);\r\n\t\t\tthis.context.updateGroupMembers(memberlist);\r\n\t\t}\r\n\t};\r\n\r\n\tupdateOwnership = uid => {\r\n\t\tconst item = { ...this.context.item, owner: uid };\r\n\t\tconst type = CometChat.RECEIVER_TYPE.GROUP;\r\n\r\n\t\tthis.setState({ transferOwnership: false });\r\n\t\tthis.context.setTypeAndItem(type, item);\r\n\t};\r\n\r\n\tcloseGroupDetail = () => {\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"CLOSE_GROUP_DETAIL\"]);\r\n\t};\r\n\r\n\trender() {\r\n\t\tif (this.state.loggedInUser === null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tlet viewMembersBtn = (\r\n\t\t\t<div css={contentItemStyle()} className=\"content__item\">\r\n\t\t\t\t<div css={itemLinkStyle(this.context, 0)} className=\"item__link\" onClick={() => this.clickHandler(\"viewmember\", true)}>\r\n\t\t\t\t\t{Translator.translate(\"VIEW_MEMBERS\", this.context.language)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tlet addMembersBtn = null,\r\n\t\t\tdeleteGroupBtn = null,\r\n\t\t\tbannedMembersBtn = null;\r\n\t\tif (this.context.item.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN) {\r\n\t\t\taddMembersBtn = (\r\n\t\t\t\t<div css={contentItemStyle()} className=\"content__item\">\r\n\t\t\t\t\t<div css={itemLinkStyle(this.context, 0)} className=\"item__link\" onClick={() => this.clickHandler(\"addmember\", true)}>\r\n\t\t\t\t\t\t{Translator.translate(\"ADD_MEMBERS\", this.context.language)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tdeleteGroupBtn = (\r\n\t\t\t\t<div css={contentItemStyle()} className=\"content__item\">\r\n\t\t\t\t\t<span css={itemLinkStyle(this.context, 1)} className=\"item__link\" onClick={this.deleteGroup}>\r\n\t\t\t\t\t\t{Translator.translate(\"DELETE_AND_EXIT\", this.context.language)}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (this.context.item.scope !== CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT) {\r\n\t\t\tbannedMembersBtn = (\r\n\t\t\t\t<div css={contentItemStyle()} className=\"content__item\">\r\n\t\t\t\t\t<div css={itemLinkStyle(this.context, 0)} className=\"item__link\" onClick={() => this.clickHandler(\"banmember\", true)}>\r\n\t\t\t\t\t\t{Translator.translate(\"BANNED_MEMBERS\", this.context.language)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet leaveGroupBtn = (\r\n\t\t\t<div css={contentItemStyle()} className=\"content__item\">\r\n\t\t\t\t<span css={itemLinkStyle(this.context, 0)} className=\"item__link\" onClick={this.leaveGroup}>\r\n\t\t\t\t\t{Translator.translate(\"LEAVE_GROUP\", this.context.language)}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tlet sharedmediaView = <CometChatSharedMediaView containerHeight=\"225px\" lang={this.context.language} />;\r\n\r\n\t\tif (this.context.item.scope === CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT) {\r\n\t\t\t//if viewing group membersfeature is disabled\r\n\t\t\tif (this.state.enableViewGroupMembers === false) {\r\n\t\t\t\tviewMembersBtn = null;\r\n\t\t\t}\r\n\t\t} else if (this.context.item.scope === CometChat.GROUP_MEMBER_SCOPE.MODERATOR || this.context.item.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN) {\r\n\t\t\tif (this.state.enableViewGroupMembers === false && this.state.enableKickGroupMembers === false && this.state.enableBanGroupMembers === false && this.state.enableChangeScope === false) {\r\n\t\t\t\t//if viewing, kicking/banning, promoting/demoting group membersare feature is disabled\r\n\t\t\t\tviewMembersBtn = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//if adding group members feature is disabled\r\n\t\tif (this.state.enableAddGroupMembers === false) {\r\n\t\t\taddMembersBtn = null;\r\n\t\t}\r\n\r\n\t\t//if kicking/banning/unbanning group members feature is disabled\r\n\t\tif (this.state.enableBanGroupMembers === false) {\r\n\t\t\tbannedMembersBtn = null;\r\n\t\t}\r\n\r\n\t\t//if deleting group feature is disabled\r\n\t\tif (this.state.enableDeleteGroup === false) {\r\n\t\t\tdeleteGroupBtn = null;\r\n\t\t}\r\n\r\n\t\t//if leaving group feature is disabled\r\n\t\tif (this.state.enableLeaveGroup === false || this.context?.item?.membersCount === 1) {\r\n\t\t\tleaveGroupBtn = null;\r\n\t\t}\r\n\r\n\t\t//if viewing shared media group feature is disabled\r\n\t\tif (this.state.enableSharedMedia === false) {\r\n\t\t\tsharedmediaView = null;\r\n\t\t}\r\n\r\n\t\tlet members = (\r\n\t\t\t<div css={sectionStyle()} className=\"section section__members\">\r\n\t\t\t\t<h6 css={sectionHeaderStyle(this.context)} className=\"section__header\">\r\n\t\t\t\t\t{Translator.translate(\"MEMBERS\", this.context.language)}\r\n\t\t\t\t</h6>\r\n\t\t\t\t<div css={sectionContentStyle()} className=\"section__content\">\r\n\t\t\t\t\t{viewMembersBtn}\r\n\t\t\t\t\t{addMembersBtn}\r\n\t\t\t\t\t{bannedMembersBtn}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tlet options = (\r\n\t\t\t<div css={sectionStyle()} className=\"section section__options\">\r\n\t\t\t\t<h6 css={sectionHeaderStyle(this.context)} className=\"section__header\">\r\n\t\t\t\t\t{Translator.translate(\"OPTIONS\", this.context.language)}\r\n\t\t\t\t</h6>\r\n\t\t\t\t<div css={sectionContentStyle()} className=\"section__content\">\r\n\t\t\t\t\t{leaveGroupBtn}\r\n\t\t\t\t\t{deleteGroupBtn}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tif (viewMembersBtn === null && addMembersBtn === null && bannedMembersBtn === null) {\r\n\t\t\tmembers = null;\r\n\t\t}\r\n\r\n\t\tif (leaveGroupBtn === null && deleteGroupBtn === null) {\r\n\t\t\toptions = null;\r\n\t\t}\r\n\r\n\t\tlet viewMembers = null;\r\n\t\tif (this.state.viewMember) {\r\n\t\t\tviewMembers = (\r\n\t\t\t\t<CometChatViewGroupMemberList\r\n\t\t\t\t\tloggedinuser={this.state.loggedInUser}\r\n\t\t\t\t\tlang={this.props.lang}\r\n\t\t\t\t\tenableChangeScope={this.state.enableChangeScope}\r\n\t\t\t\t\tenableKickGroupMembers={this.state.enableKickGroupMembers}\r\n\t\t\t\t\tenableBanGroupMembers={this.state.enableBanGroupMembers}\r\n\t\t\t\t\tclose={() => this.clickHandler(\"viewmember\", false)}\r\n\t\t\t\t\tactionGenerated={this.membersActionHandler}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet addMembers = null;\r\n\t\tif (this.state.addMember) {\r\n\t\t\taddMembers = <CometChatAddGroupMemberList close={() => this.clickHandler(\"addmember\", false)} actionGenerated={this.membersActionHandler} />;\r\n\t\t}\r\n\r\n\t\tlet bannedMembers = null;\r\n\t\tif (this.state.banMember) {\r\n\t\t\tbannedMembers = <CometChatBanGroupMemberList loggedinuser={this.state.loggedInUser} close={() => this.clickHandler(\"banmember\", false)} actionGenerated={this.membersActionHandler} />;\r\n\t\t}\r\n\r\n\t\tlet showDeleteConfirmDialog = null;\r\n\t\tif (this.state.showDeleteConfirmDialog) {\r\n\t\t\tshowDeleteConfirmDialog = (\r\n\t\t\t\t<CometChatConfirmDialog {...this.props} onClick={this.onDeleteConfirm} message={Translator.translate(\"DELETE_CONFIRM\", this.context.language)} confirmButtonText={Translator.translate(\"DELETE\", this.context.language)} cancelButtonText={Translator.translate(\"CANCEL\", this.context.language)} />\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet showLeaveGroupConfirmDialog = null;\r\n\t\tif (this.state.showLeaveGroupConfirmDialog) {\r\n\t\t\tshowLeaveGroupConfirmDialog = (\r\n\t\t\t\t<CometChatConfirmDialog {...this.props} onClick={this.onLeaveConfirm} message={Translator.translate(\"LEAVE_CONFIRM\", this.context.language)} confirmButtonText={Translator.translate(\"LEAVE\", this.context.language)} cancelButtonText={Translator.translate(\"CANCEL\", this.context.language)} />\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet showTransferOwnershipConfirmDialog = null;\r\n\t\tif (this.state.showTransferOwnershipConfirmDialog) {\r\n\t\t\tshowTransferOwnershipConfirmDialog = (\r\n\t\t\t\t<CometChatConfirmDialog\r\n\t\t\t\t\t{...this.props}\r\n\t\t\t\t\tonClick={this.onTransferConfirm}\r\n\t\t\t\t\tmessage={Translator.translate(\"TRANSFER_CONFIRM\", this.context.language)}\r\n\t\t\t\t\tconfirmButtonText={Translator.translate(\"TRANSFER\", this.context.language)}\r\n\t\t\t\t\tcancelButtonText={Translator.translate(\"CANCEL\", this.context.language)}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet transferOwnership = null;\r\n\t\tif (this.state.transferOwnership) {\r\n\t\t\ttransferOwnership = <CometChatTransferOwnershipMemberList roles={this.roles} loggedinuser={this.state.loggedInUser} actionGenerated={this.membersActionHandler} close={() => this.clickHandler(\"transferownership\", false)} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={detailStyle(this.context)} className=\"detailpane\">\r\n\t\t\t\t<div css={headerStyle(this.context)} className=\"detailpane__header\">\r\n\t\t\t\t\t<div css={headerCloseStyle(navigateIcon, this.context)} className=\"header__close\" onClick={this.closeGroupDetail}></div>\r\n\t\t\t\t\t<h4 css={headerTitleStyle()} className=\"header__title\">\r\n\t\t\t\t\t\t{Translator.translate(\"DETAILS\", this.context.language)}\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div css={detailPaneStyle()} className=\"detailpane__section\">\r\n\t\t\t\t\t{members}\r\n\t\t\t\t\t{options}\r\n\t\t\t\t\t{sharedmediaView}\r\n\t\t\t\t</div>\r\n\t\t\t\t{viewMembers}\r\n\t\t\t\t{addMembers}\r\n\t\t\t\t{bannedMembers}\r\n\t\t\t\t{transferOwnership}\r\n\t\t\t\t{showDeleteConfirmDialog}\r\n\t\t\t\t{showLeaveGroupConfirmDialog}\r\n\t\t\t\t{showTransferOwnershipConfirmDialog}\r\n\t\t\t\t<CometChatToastNotification ref={el => (this.toastRef = el)} lang={this.props.lang} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatGroupDetails.defaultProps = {\r\n    lang: Translator.getDefaultLanguage(),\r\n    theme: theme\r\n};\r\n\r\nCometChatGroupDetails.propTypes = {\r\n    lang: PropTypes.string,\r\n    theme: PropTypes.object\r\n}\r\n\r\nexport { CometChatGroupDetails };\r\n","import { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nexport class GroupListManager {\r\n\r\n    groupRequest = null;\r\n    groupListenerId = \"grouplist_\" + new Date().getTime();\r\n\r\n    constructor(searchKey) {\r\n\r\n        if (searchKey) {\r\n            this.groupRequest = new CometChat.GroupsRequestBuilder().setLimit(30).setSearchKeyword(searchKey).build();\r\n        } else {\r\n            this.groupRequest = new CometChat.GroupsRequestBuilder().setLimit(30).build();\r\n        }\r\n    }\r\n\r\n    fetchNextGroups() {\r\n        return this.groupRequest.fetchNext();\r\n    }\r\n\r\n    attachListeners(callback) {\r\n\r\n        CometChat.addGroupListener(\r\n            this.groupListenerId,\r\n            new CometChat.GroupListener({\r\n                onGroupMemberScopeChanged: (message, changedUser, newScope, oldScope, changedGroup) => {\r\n                    callback(enums.GROUP_MEMBER_SCOPE_CHANGED, message, changedGroup, {\"user\": changedUser, \"scope\": newScope});\r\n                }, \r\n                onGroupMemberKicked: (message, kickedUser, kickedBy, kickedFrom) => {\r\n                    callback(enums.GROUP_MEMBER_KICKED, message, kickedFrom, {\"user\": kickedUser, \"hasJoined\": false});\r\n                }, \r\n                onGroupMemberBanned: (message, bannedUser, bannedBy, bannedFrom) => {\r\n                    callback(enums.GROUP_MEMBER_BANNED, message, bannedFrom, {\"user\": bannedUser, \"hasJoined\": false});\r\n                }, \r\n                onGroupMemberUnbanned: (message, unbannedUser, unbannedBy, unbannedFrom) => {\r\n                    callback(enums.GROUP_MEMBER_UNBANNED, message, unbannedFrom, {\"user\": unbannedUser, \"hasJoined\": false});\r\n                }, \r\n                onMemberAddedToGroup: (message, userAdded, userAddedBy, userAddedIn) => {\r\n                    callback(enums.GROUP_MEMBER_ADDED, message, userAddedIn, {\"user\": userAdded, \"hasJoined\": true});\r\n                }, \r\n                onGroupMemberLeft: (message, leavingUser, group) => {\r\n                    callback(enums.GROUP_MEMBER_LEFT, message, group, {\"user\": leavingUser});\r\n                }, \r\n                onGroupMemberJoined: (message, joinedUser, joinedGroup) => {\r\n                    callback(enums.GROUP_MEMBER_JOINED, message, joinedGroup, {\"user\": joinedUser});\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    removeListeners() {\r\n        CometChat.removeGroupListener(this.groupListenerId);\r\n    }\r\n}","export const groupWrapperStyle = (props, theme) => {\r\n    \r\n    const borderStyle = (props._parent === \"\") ? {\r\n        border: `1px solid ${theme.borderColor.primary}`\r\n    } : {};\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        height: \"100%\",\r\n        boxSizing: \"border-box\",\r\n        ...borderStyle,\r\n        \"*\": {\r\n            boxSizing: \"border-box\",\r\n            \"::-webkit-scrollbar\": {\r\n                width: \"8px\",\r\n                height: \"4px\",\r\n            },\r\n            \"::-webkit-scrollbar-track\": {\r\n                background: \"#ffffff00\"\r\n            },\r\n            \"::-webkit-scrollbar-thumb\": {\r\n                background: \"#ccc\",\r\n                \"&:hover\": {\r\n                    background: \"#aaa\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const groupHeaderStyle = theme => {\r\n\r\n\treturn {\r\n\t\tpadding: \"16px\",\r\n\t\tposition: \"relative\",\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"space-between\",\r\n\t\talignItems: \"center\",\r\n\t\tborderBottom: `1px solid ${theme.borderColor.primary}`,\r\n\t\theight: \"70px\",\r\n\t};\r\n};\r\n\r\nexport const groupHeaderCloseStyle = (img, theme) => {\r\n\r\n\tconst mq = [...theme.breakPoints];\r\n\r\n\treturn {\r\n\t\tcursor: \"pointer\",\r\n\t\tdisplay: \"none\",\r\n\t\tmask: `url(${img}) left center no-repeat`,\r\n\t\tbackgroundColor: `${theme.primaryColor}`,\r\n\t\theight: \"24px\",\r\n\t\twidth: \"33%\",\r\n\t\t[`@media ${mq[0]}`]: {\r\n\t\t\tdisplay: \"block!important\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const groupHeaderTitleStyle = (props) => {\r\n\r\n    const alignment = (props.hasOwnProperty(\"enableCloseMenu\") && props.enableCloseMenu.length > 0) ? {\r\n        width: \"33%\",\r\n        textAlign: \"center\"\r\n    } : {};\r\n\r\n    return {\r\n        margin: \"0\",\r\n        display: \"inline-block\",\r\n        width: \"100%\",\r\n        textAlign: \"left\",\r\n        fontSize: \"22px\",\r\n        fontWeight: \"700\",\r\n        lineHeight: \"26px\",\r\n        ...alignment,\r\n        \"&[dir=rtl]\": {\r\n            textAlign: \"right\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const groupAddStyle = (img, theme) => {\r\n\r\n\treturn {\r\n\t\theight: \"24px\",\r\n\t\tcursor: \"pointer\",\r\n\t\ti: {\r\n\t\t\tdisplay: \"inline-block\",\r\n\t\t\twidth: \"24px\",\r\n\t\t\theight: \"24px\",\r\n\t\t\tmask: `url(${img}) center center no-repeat`,\r\n\t\t\tbackgroundColor: `${theme.primaryColor}`,\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const groupSearchStyle = () => {\r\n    \r\n    return {\r\n        margin: \"16px\",\r\n        position: \"relative\",\r\n        borderRadius: \"8px\",\r\n\t\tboxShadow: \"rgba(20, 20, 20, 0.04) 0 0 0 1px inset\",\r\n        backgroundColor: \"rgba(20, 20, 20, 0.04)\",\r\n        height: \"35px\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\"\r\n    }\r\n}\r\n\r\nexport const groupSearchButtonStyle = (img, context) => {\r\n\r\n\treturn {\r\n\t\twidth: \"30px\",\r\n\t\theight: \"100%\",\r\n\t\tpadding: \"8px 0 8px 8px\",\r\n\t\tcursor: \"default\",\r\n\t\tmask: `url(${img}) 10px center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.secondaryTextColor}!important`,\r\n\t};\r\n};\r\n\r\nexport const groupSearchInputStyle = (props) => {\r\n\r\n    return {\r\n        width: \"calc(100% - 30px)\",\r\n        height: \"100%\",\r\n        padding: \"8px\",\r\n        fontSize: \"15px\",\r\n        fontWeight: \"400\",\r\n        lineHeight: \"20px\",\r\n        outline: \"none\",\r\n        border: \"none\",\r\n        color: props.theme.color.search,\r\n        backgroundColor: \"transparent\",\r\n    };\r\n}\r\n\r\nexport const groupMsgStyle = () => {\r\n    \r\n    return {\r\n        overflow: \"hidden\",\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        position: \"absolute\",\r\n        top: \"50%\"\r\n    }\r\n}\r\n\r\nexport const groupMsgTxtStyle = theme => {\r\n\r\n\treturn {\r\n\t\tmargin: \"0\",\r\n\t\tminHeight: \"36px\",\r\n\t\tcolor: `${theme.color.secondary}`,\r\n\t\tfontSize: \"20px!important\",\r\n\t\tfontWeight: \"600\",\r\n\t\tlineHeight: \"30px\",\r\n\t\twordWrap: \"break-word\",\r\n\t\tpadding: \"0 16px\",\r\n\t};\r\n};\r\n\r\nexport const groupListStyle = () => {\r\n\r\n    return {\r\n        height: \"calc(100% - 125px)\",\r\n        overflowY: \"auto\",\r\n        margin: \"0\",\r\n        padding: \"0\"\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/search.01c171e6.svg\";","export default __webpack_public_path__ + \"static/media/back.12d0392f.svg\";","export default __webpack_public_path__ + \"static/media/create.d5c803a2.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { GroupListManager } from \"./controller\";\r\n\r\nimport { CometChatCreateGroup, CometChatGroupListItem }  from \"../../Groups\";\r\nimport { CometChatToastNotification } from \"../../Shared\";\r\n\r\nimport { CometChatContextProvider, CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n  groupWrapperStyle,\r\n  groupHeaderStyle,\r\n  groupHeaderCloseStyle,\r\n  groupHeaderTitleStyle,\r\n  groupAddStyle,\r\n  groupSearchStyle,\r\n  groupSearchButtonStyle,\r\n  groupSearchInputStyle,\r\n  groupMsgStyle,\r\n  groupMsgTxtStyle,\r\n  groupListStyle\r\n} from \"./style\";\r\n\r\nimport searchIcon from \"./resources/search.svg\";\r\nimport navigateIcon from \"./resources/back.svg\";\r\nimport addIcon from \"./resources/create.svg\";\r\n\r\nclass CometChatGroupList extends React.PureComponent {\r\n\titem;\r\n\ttimeout;\r\n\tloggedInUser = null;\r\n\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tgrouplist: [],\r\n\t\t\tcreateGroup: false,\r\n\t\t\tenableSearchGroup: false,\r\n\t\t\tenableCreateGroup: false,\r\n\t\t\tenableJoinGroup: false,\r\n\t\t\tdecoratorMessage: Translator.translate(\"LOADING\", props.lang),\r\n\t\t};\r\n\r\n\t\tthis.contextProviderRef = React.createRef();\r\n\t\tthis.groupListRef = React.createRef();\r\n\t\tthis.toastRef = React.createRef();\r\n\r\n\t\tCometChat.getLoggedinUser()\r\n\t\t\t.then(user => (this.loggedInUser = user))\r\n\t\t\t.catch(error => this.setState({ decoratorMessage: Translator.translate(\"SOMETHING_WRONG\", props.lang) }));\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.item = this.getContext().type === CometChat.ACTION_TYPE.TYPE_GROUP ? this.getContext().item : null;\r\n\t\tthis.enableSearchGroup();\r\n\t\tthis.enableCreateGroup();\r\n\t\tthis.enableJoinGroup();\r\n\r\n\t\tthis.GroupListManager = new GroupListManager();\r\n\t\tthis.getGroups();\r\n\t\tthis.GroupListManager.attachListeners(this.groupUpdated);\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\t//if group detail(membersCount) is updated, update grouplist\r\n\t\tif (this.item && Object.keys(this.item).length && this.getContext().type === CometChat.ACTION_TYPE.TYPE_GROUP && this.item.guid === this.getContext().item.guid && this.item.membersCount !== this.getContext().item.membersCount) {\r\n\t\t\tconst groups = [...this.state.grouplist];\r\n\r\n\t\t\tlet groupKey = groups.findIndex(group => group.guid === this.getContext().item.guid);\r\n\t\t\tif (groupKey > -1) {\r\n\t\t\t\tconst groupObj = groups[groupKey];\r\n\t\t\t\tlet newGroupObj = Object.assign({}, groupObj, {membersCount: this.getContext().item.membersCount});\r\n\r\n\t\t\t\tgroups.splice(groupKey, 1, newGroupObj);\r\n\t\t\t\tthis.setState({grouplist: groups});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//upon user deleting a group, remove group from group list\r\n\t\tif (this.getContext().deletedGroupId.trim().length) {\r\n\t\t\tconst guid = this.getContext().deletedGroupId.trim();\r\n\r\n\t\t\tconst groups = [...this.state.grouplist];\r\n\t\t\tconst groupKey = groups.findIndex(group => group.guid === guid);\r\n\r\n\t\t\tif (groupKey > -1) {\r\n\t\t\t\tgroups.splice(groupKey, 1);\r\n\t\t\t\tthis.setState({grouplist: groups});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.item = this.getContext().type === CometChat.ACTION_TYPE.TYPE_GROUP ? this.getContext().item : null;\r\n\t\tthis.enableSearchGroup();\r\n\t\tthis.enableCreateGroup();\r\n\t\tthis.enableJoinGroup();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.GroupListManager = null;\r\n\t}\r\n\r\n\t/**\r\n\t * if search group feature is disabled\r\n\t */\r\n\tenableSearchGroup = () => {\r\n\t\tthis.getContext()\r\n\t\t\t.FeatureRestriction.isGroupSearchEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableSearchGroup) {\r\n\t\t\t\t\tthis.setState({enableSearchGroup: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableSearchGroup !== false) {\r\n\t\t\t\t\tthis.setState({enableSearchGroup: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * if create group feature is disabled\r\n\t */\r\n\tenableCreateGroup = () => {\r\n\t\tthis.getContext()\r\n\t\t\t.FeatureRestriction.isGroupCreationEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableCreateGroup) {\r\n\t\t\t\t\tthis.setState({enableCreateGroup: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableCreateGroup !== false) {\r\n\t\t\t\t\tthis.setState({enableCreateGroup: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * if join group feature is disabled\r\n\t */\r\n\tenableJoinGroup = () => {\r\n\t\tthis.getContext()\r\n\t\t\t.FeatureRestriction.isJoinLeaveGroupsEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableJoinGroup) {\r\n\t\t\t\t\tthis.setState({enableJoinGroup: response});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableJoinGroup !== false) {\r\n\t\t\t\t\tthis.setState({enableJoinGroup: false});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tgroupUpdated = (key, message, group, options) => {\r\n\t\tswitch (key) {\r\n\t\t\tcase enums.GROUP_MEMBER_SCOPE_CHANGED:\r\n\t\t\t\tthis.updateMemberChanged(group, options);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_KICKED:\r\n\t\t\tcase enums.GROUP_MEMBER_BANNED:\r\n\t\t\tcase enums.GROUP_MEMBER_LEFT:\r\n\t\t\t\tthis.updateMemberRemoved(group, options);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_ADDED:\r\n\t\t\t\tthis.updateMemberAdded(group, options);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_JOINED:\r\n\t\t\t\tthis.updateMemberJoined(group, options);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tupdateMemberRemoved = (group, options) => {\r\n\t\tlet grouplist = [...this.state.grouplist];\r\n\r\n\t\t//search for group\r\n\t\tlet groupKey = grouplist.findIndex(g => g.guid === group.guid);\r\n\r\n\t\tif (groupKey > -1) {\r\n\t\t\tif (options && this.loggedInUser.uid === options.user.uid) {\r\n\t\t\t\tlet groupObj = {...grouplist[groupKey]};\r\n\t\t\t\tlet membersCount = parseInt(group.membersCount);\r\n\t\t\t\tlet hasJoined = group.hasJoined;\r\n\r\n\t\t\t\tlet newgroupObj = Object.assign({}, groupObj, {membersCount: membersCount, hasJoined: hasJoined});\r\n\r\n\t\t\t\tgrouplist.splice(groupKey, 1, newgroupObj);\r\n\t\t\t\tthis.setState({grouplist: grouplist});\r\n\t\t\t} else {\r\n\t\t\t\tlet groupObj = {...grouplist[groupKey]};\r\n\t\t\t\tlet membersCount = parseInt(group.membersCount);\r\n\r\n\t\t\t\tlet newgroupObj = Object.assign({}, groupObj, {membersCount: membersCount});\r\n\r\n\t\t\t\tgrouplist.splice(groupKey, 1, newgroupObj);\r\n\t\t\t\tthis.setState({grouplist: grouplist});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tupdateMemberAdded = (group, options) => {\r\n\t\tlet grouplist = [...this.state.grouplist];\r\n\r\n\t\t//search for group\r\n\t\tlet groupKey = grouplist.findIndex(g => g.guid === group.guid);\r\n\r\n\t\tif (groupKey > -1) {\r\n\t\t\tlet groupObj = {...grouplist[groupKey]};\r\n\r\n\t\t\tlet membersCount = parseInt(group.membersCount);\r\n\r\n\t\t\tlet scope = group.hasOwnProperty(\"scope\") ? group.scope : \"\";\r\n\t\t\tlet hasJoined = group.hasOwnProperty(\"hasJoined\") ? group.hasJoined : false;\r\n\r\n\t\t\tif (options && this.loggedInUser.uid === options.user.uid) {\r\n\t\t\t\tscope = CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT;\r\n\t\t\t\thasJoined = true;\r\n\t\t\t}\r\n\r\n\t\t\tlet newgroupObj = Object.assign({}, groupObj, {membersCount: membersCount, scope: scope, hasJoined: hasJoined});\r\n\r\n\t\t\tgrouplist.splice(groupKey, 1, newgroupObj);\r\n\t\t\tthis.setState({grouplist: grouplist});\r\n\t\t} else {\r\n\t\t\tlet groupObj = {...group};\r\n\r\n\t\t\tlet scope = groupObj.hasOwnProperty(\"scope\") ? groupObj.scope : \"\";\r\n\t\t\tlet hasJoined = groupObj.hasOwnProperty(\"hasJoined\") ? groupObj.hasJoined : false;\r\n\t\t\tlet membersCount = parseInt(groupObj.membersCount);\r\n\r\n\t\t\tif (options && this.loggedInUser.uid === options.user.uid) {\r\n\t\t\t\tscope = CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT;\r\n\t\t\t\thasJoined = true;\r\n\t\t\t}\r\n\r\n\t\t\tlet newgroupObj = Object.assign({}, groupObj, {membersCount: membersCount, scope: scope, hasJoined: hasJoined});\r\n\r\n\t\t\tgrouplist.unshift(newgroupObj);\r\n\t\t\tthis.setState({grouplist: grouplist});\r\n\t\t}\r\n\t};\r\n\r\n\tupdateMemberJoined = (group, options) => {\r\n\t\tlet grouplist = [...this.state.grouplist];\r\n\r\n\t\t//search for group\r\n\t\tlet groupKey = grouplist.findIndex(g => g.guid === group.guid);\r\n\r\n\t\tif (groupKey > -1) {\r\n\t\t\tlet groupObj = {...grouplist[groupKey]};\r\n\r\n\t\t\tlet scope = groupObj.scope;\r\n\t\t\tlet membersCount = parseInt(group.membersCount);\r\n\r\n\t\t\tif (options && this.loggedInUser.uid === options.user.uid) {\r\n\t\t\t\tscope = CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT;\r\n\t\t\t}\r\n\r\n\t\t\tlet newgroupObj = Object.assign({}, groupObj, {membersCount: membersCount, scope: scope});\r\n\r\n\t\t\tgrouplist.splice(groupKey, 1, newgroupObj);\r\n\t\t\tthis.setState({grouplist: grouplist});\r\n\t\t}\r\n\t};\r\n\r\n\tupdateMemberChanged = (group, options) => {\r\n\t\tlet grouplist = [...this.state.grouplist];\r\n\r\n\t\t//search for group\r\n\t\tlet groupKey = grouplist.findIndex(g => g.guid === group.guid);\r\n\r\n\t\tif (groupKey > -1) {\r\n\t\t\tlet groupObj = {...grouplist[groupKey]};\r\n\t\t\tif (options && this.loggedInUser.uid === options.user.uid) {\r\n\t\t\t\tlet newgroupObj = Object.assign({}, groupObj, {scope: options.scope});\r\n\r\n\t\t\t\tgrouplist.splice(groupKey, 1, newgroupObj);\r\n\t\t\t\tthis.setState({grouplist: grouplist});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\thandleScroll = e => {\r\n\t\tconst bottom = Math.round(e.currentTarget.scrollHeight - e.currentTarget.scrollTop) === Math.round(e.currentTarget.clientHeight);\r\n\t\tif (bottom) this.getGroups();\r\n\t};\r\n\r\n\thandleClick = group => {\r\n\r\n\t\tif (!this.props.onItemClick) return;\r\n\r\n\t\tif (group.hasJoined === false) {\r\n\r\n\t\t\t//if join group feature is disabled\r\n\t\t\tif (this.state.enableJoinGroup === false) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tlet password = \"\";\r\n\t\t\tif (group.type === CometChat.GROUP_TYPE.PASSWORD) {\r\n\t\t\t\tpassword = prompt(Translator.translate(\"ENTER_YOUR_PASSWORD\", this.props.lang));\r\n\t\t\t}\r\n\r\n\t\t\tconst guid = group.guid;\r\n\t\t\tconst groupType = group.type;\r\n\r\n\t\t\tCometChat.joinGroup(guid, groupType, password)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\tif (typeof response === \"object\" && Object.keys(response).length) {\r\n\t\t\t\t\t\tconst groups = [...this.state.grouplist];\r\n\r\n\t\t\t\t\t\tlet groupKey = groups.findIndex((g, k) => g.guid === guid);\r\n\t\t\t\t\t\tif (groupKey > -1) {\r\n\t\t\t\t\t\t\tconst groupObj = groups[groupKey];\r\n\t\t\t\t\t\t\tconst newGroupObj = Object.assign({}, groupObj, response, { scope: CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT });\r\n\r\n\t\t\t\t\t\t\tgroups.splice(groupKey, 1, newGroupObj);\r\n\t\t\t\t\t\t\tthis.setState({ grouplist: groups });\r\n\r\n\t\t\t\t\t\t\tthis.props.onItemClick(newGroupObj, CometChat.ACTION_TYPE.TYPE_GROUP);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.toastRef.setError(\"SOMETHING_WRONG\");\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\r\n\t\t\t\t\tif (error.hasOwnProperty(\"code\") && error.code && error.code === \"ERR_WRONG_GROUP_PASS\") {\r\n\t\t\t\t\t\tthis.toastRef.setError(\"WRONG_PASSWORD\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.toastRef.setError(\"SOMETHING_WRONG\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\t\t} else {\r\n\t\t\tthis.props.onItemClick(group, CometChat.ACTION_TYPE.TYPE_GROUP);\r\n\t\t}\r\n\t};\r\n\r\n\thandleMenuClose = () => {\r\n\t\tif (!this.props.actionGenerated) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"TOGGLE_SIDEBAR\"]);\r\n\t};\r\n\r\n\tsearchGroup = e => {\r\n\t\tif (this.timeout) {\r\n\t\t\tclearTimeout(this.timeout);\r\n\t\t}\r\n\r\n\t\tlet val = e.target.value;\r\n\t\tthis.timeout = setTimeout(() => {\r\n\t\t\t\r\n\t\t\tthis.setState({ grouplist: [], decoratorMessage: Translator.translate(\"LOADING\", this.props.lang) });\r\n\r\n\t\t\tthis.GroupListManager = new GroupListManager(val);\r\n\t\t\tthis.getGroups();\r\n\t\t}, 500);\r\n\t};\r\n\r\n\tgetGroups = () => {\r\n\t\tthis.GroupListManager.fetchNextGroups()\r\n\t\t\t.then(groupList => {\r\n\r\n\t\t\t\tif (groupList.length === 0) {\r\n\r\n\t\t\t\t\tif (this.state.grouplist.length === 0) {\r\n\t\t\t\t\t\tthis.setState({ decoratorMessage: Translator.translate(\"NO_GROUPS_FOUND\", this.props.lang) });\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ grouplist: [...this.state.grouplist, ...groupList], decoratorMessage: \"\" });\r\n\t\t\t\t}\r\n\r\n\t\t\t})\r\n\t\t\t.catch(error => this.setState({ decoratorMessage: Translator.translate(\"SOMETHING_WRONG\", this.props.lang) }));\r\n\t};\r\n\r\n\tcreateGroupHandler = flag => {\r\n\t\tthis.setState({createGroup: flag});\r\n\t};\r\n\r\n\tcreateGroupActionHandler = (action, group) => {\r\n\t\tif (action === enums.ACTIONS[\"GROUP_CREATED\"]) {\r\n\t\t\tthis.handleClick(group);\r\n\r\n\t\t\tconst groupList = [...this.state.grouplist];\r\n\t\t\tgroupList.unshift(group);\r\n\r\n\t\t\tthis.setState({grouplist: groupList, createGroup: false});\r\n\t\t}\r\n\t};\r\n\r\n\tgetContext = () => {\r\n\t\tif (this.props._parent.length) {\r\n\t\t\treturn this.context;\r\n\t\t} else {\r\n\t\t\treturn this.contextProviderRef.state;\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet messageContainer = null;\r\n\r\n\t\tif (this.state.decoratorMessage.length !== 0) {\r\n\t\t\tmessageContainer = (\r\n\t\t\t\t<div css={groupMsgStyle()} className=\"groups__decorator-message\">\r\n\t\t\t\t\t<p css={groupMsgTxtStyle(theme)} className=\"decorator-message\">\r\n\t\t\t\t\t\t{this.state.decoratorMessage}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst groups = this.state.grouplist.map(group => {\r\n\t\t\tlet selectedGroup = this.getContext().type === CometChat.ACTION_TYPE.TYPE_GROUP && this.getContext().item.guid === group.guid ? group : null;\r\n\r\n\t\t\treturn <CometChatGroupListItem key={group.guid} group={group} selectedGroup={selectedGroup} clickHandler={this.handleClick} />;\r\n\t\t});\r\n\r\n\t\tlet createGroupBtn = (\r\n\t\t\t<div css={groupAddStyle(addIcon, theme)} title={Translator.translate(\"CREATE_GROUP\", this.props.lang)} onClick={() => this.createGroupHandler(true)}>\r\n\t\t\t\t<i></i>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\t//if create group feature is disabled\r\n\t\tif (this.state.enableCreateGroup === false) {\r\n\t\t\tcreateGroupBtn = null;\r\n\t\t}\r\n\r\n\t\tlet closeBtn = <div css={groupHeaderCloseStyle(navigateIcon, theme)} className=\"header__close\" onClick={this.handleMenuClose}></div>;\r\n\t\tif (this.getContext() && Object.keys(this.getContext().item).length === 0) {\r\n\t\t\tcloseBtn = null;\r\n\t\t}\r\n\r\n\t\tlet searchGroup = null;\r\n\t\tif (this.state.enableSearchGroup) {\r\n\t\t\tsearchGroup = (\r\n\t\t\t\t<div css={groupSearchStyle()} className=\"groups__search\">\r\n\t\t\t\t\t<button type=\"button\" className=\"search__button\" css={groupSearchButtonStyle(searchIcon, this.getContext())} />\r\n\t\t\t\t\t<input type=\"text\" autoComplete=\"off\" css={groupSearchInputStyle(this.props)} className=\"search__input\" placeholder={Translator.translate(\"SEARCH\", this.props.lang)} onChange={this.searchGroup} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet createGroup = null;\r\n\t\tif(this.state.createGroup) {\r\n\t\t\tcreateGroup = <CometChatCreateGroup theme={this.props.theme} close={() => this.createGroupHandler(false)} actionGenerated={this.createGroupActionHandler} />;\t\r\n\t\t}\r\n\r\n\t\tconst groupListTemplate = (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div css={groupWrapperStyle(this.props, theme)} className=\"groups\">\r\n\t\t\t\t\t<div css={groupHeaderStyle(theme)} className=\"groups__header\">\r\n\t\t\t\t\t\t{closeBtn}\r\n\t\t\t\t\t\t<h4 css={groupHeaderTitleStyle(this.props)} className=\"header__title\" dir={Translator.getDirection(this.props.lang)}>\r\n\t\t\t\t\t\t\t{Translator.translate(\"GROUPS\", this.props.lang)}\r\n\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t{createGroupBtn}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{searchGroup}\r\n\t\t\t\t\t{messageContainer}\r\n\t\t\t\t\t<div css={groupListStyle()} className=\"groups__list\" onScroll={this.handleScroll} ref={el => (this.groupListRef = el)}>\r\n\t\t\t\t\t\t{groups}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{createGroup}\r\n\t\t\t\t<CometChatToastNotification ref={el => (this.toastRef = el)} lang={this.props.lang} />\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\r\n\t\tlet groupListWrapper = groupListTemplate;\r\n\t\t//if used as a standalone component, add errorboundary and context provider\r\n\t\tif (this.props._parent === \"\") {\r\n\t\t\tgroupListWrapper = <CometChatContextProvider ref={el => (this.contextProviderRef = el)}>{groupListTemplate}</CometChatContextProvider>;\r\n\t\t}\r\n\r\n\t\treturn groupListWrapper;\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatGroupList.defaultProps = {\r\n\tlang: Translator.getDefaultLanguage(),\r\n\ttheme: theme,\r\n\tonItemClick: () => {},\r\n\t_parent: \"\"\r\n};\r\n\r\nCometChatGroupList.propTypes = {\r\n\tlang: PropTypes.string,\r\n\ttheme: PropTypes.object,\r\n\tonItemClick: PropTypes.func,\r\n\t_parent: PropTypes.string\r\n}\r\n\r\nexport { CometChatGroupList };\r\n","export const listItem = (props, context) => {\r\n\r\n    const selectedState = (props.selectedGroup && props.selectedGroup.guid === props.group.guid) ? {\r\n        backgroundColor: `${context.theme.backgroundColor.primary}`\r\n    } : {};\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"left\",\r\n        alignItems: \"center\",\r\n        cursor: \"pointer\",\r\n        width: \"100%\",\r\n        padding: \"8px 16px\",\r\n        ...selectedState,\r\n        '&:hover': {\r\n            backgroundColor: `${context.theme.backgroundColor.primary}`\r\n        }\r\n    }\r\n}\r\n\r\nexport const listItemName = context => {\r\n\treturn {\r\n\t\tfontSize: \"15px\",\r\n\t\tfontWeight: \"600\",\r\n\t\tmaxWidth: \"calc(100% - 30px)\",\r\n\t\toverflow: \"hidden\",\r\n\t\ttextOverflow: \"ellipsis\",\r\n\t\twhiteSpace: \"nowrap\",\r\n\t\tmargin: \"0\",\r\n\t\tlineHeight: \"22px\",\r\n\t\tcolor: `${context.theme.color.primary}`,\r\n\t};\r\n};\r\n\r\nexport const listItemIcon = () => {\r\n\r\n    return {\r\n        width: \"24px\",\r\n        height: \"auto\",\r\n        margin: \"0 8px\",\r\n    }\r\n}\r\n\r\nexport const itemIconStyle = (img, context) => {\r\n\r\n    return {\r\n        display: \"inline-block\",\r\n        width: \"24px\",\r\n        height: \"24px\",\r\n        mask: `url(${img}) center center no-repeat`,\r\n        backgroundColor: `${context.theme.secondaryTextColor}`,\r\n    };\r\n}\r\n\r\nexport const itemThumbnailStyle = () => {\r\n\r\n    return {\r\n        display: \"inline-block\",\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const itemDetailStyle = () => {\r\n\r\n    return {\r\n        width: \"calc(100% - 70px)\",\r\n        flexGrow: \"1\",\r\n        paddingLeft: \"16px\",\r\n        \"&[dir=rtl]\": {\r\n            paddingRight: \"16px\",\r\n            paddingLeft: \"0\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const itemNameWrapperStyle = () => { \r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        width: \"100%\",\r\n        margin: \"0\",\r\n    }\r\n}\r\n\r\nexport const itemDescStyle = (context) => { \r\n\r\n    return {\r\n        borderBottom: `1px solid ${context.theme.borderColor.primary}`,\r\n        padding: \"0 0 5px 0\",\r\n        fontSize: \"13px\",\r\n        fontWeight: \"400\",\r\n        lineHeight: \"20px\",\r\n        color: `${context.theme.color.helpText}`,\r\n        \"&:hover\": {\r\n            borderBottom: `1px solid ${context.theme.borderColor.primary}`,\r\n        }\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/password-protected-group.f9e3ddd9.svg\";","export default __webpack_public_path__ + \"static/media/private-group.01b98fbc.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatAvatar } from \"../../Shared\";\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n\tlistItem,\r\n\tlistItemIcon,\r\n\titemIconStyle,\r\n\titemThumbnailStyle,\r\n\titemDetailStyle,\r\n\titemNameWrapperStyle,\r\n\titemDescStyle,\r\n\tlistItemName  \r\n} from \"./style\";\r\n\r\nimport shieldIcon from \"./resources/password-protected-group.svg\";\r\nimport lockIcon from \"./resources/private-group.svg\";\r\n\r\nclass CometChatGroupListItem extends React.PureComponent {\r\n\r\n\tstatic contextType = CometChatContext;\r\n\t\r\n\ttoggleTooltip = (event, flag) => {\r\n\r\n\t\tconst elem = event.target;\r\n\r\n\t\tconst scrollWidth = elem.scrollWidth;\r\n\t\tconst clientWidth = elem.clientWidth;\r\n\r\n\t\tif (scrollWidth <= clientWidth) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (flag) {\r\n\t\t\telem.setAttribute(\"title\", elem.textContent);\r\n\t\t} else {\r\n\t\t\telem.removeAttribute(\"title\");\r\n\t\t}\r\n\t}\r\n\r\n\tclickHandler = () => {\r\n\t\tthis.props.clickHandler(this.props.group);\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\tlet groupTypeIcon = null;\r\n\t\tif (this.props.group.type === CometChat.GROUP_TYPE.PRIVATE) {\r\n\r\n\t\t\tgroupTypeIcon = (<i css={itemIconStyle(shieldIcon, this.context)} title={Translator.translate(\"PRIVATE_GROUP\", this.context.language)}></i>);\r\n\r\n\t\t} else if (this.props.group.type === CometChat.GROUP_TYPE.PASSWORD) {\r\n\r\n\t\t\tgroupTypeIcon = (<i css={itemIconStyle(lockIcon, this.context)} title={Translator.translate(\"PROTECTED_GROUP\", this.context.language)}></i>);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={listItem(this.props, this.context)} className=\"list__item\" onClick={this.clickHandler}>\r\n\t\t\t\t<div css={itemThumbnailStyle()} className=\"list__item__thumbnail\">\r\n\t\t\t\t\t<CometChatAvatar group={this.props.group} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div css={itemDetailStyle()} className=\"list__item__details\" dir={Translator.getDirection(this.context.language)}>\r\n\t\t\t\t\t<div css={itemNameWrapperStyle()} className=\"item__details__name\" onMouseEnter={event => this.toggleTooltip(event, true)} onMouseLeave={event => this.toggleTooltip(event, false)}>\r\n\t\t\t\t\t\t<p css={listItemName(this.context)}>{this.props.group.name}</p>\r\n\t\t\t\t\t\t<div css={listItemIcon()}>{groupTypeIcon}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div css={itemDescStyle(this.context)} className=\"item__details__desc\">{`${this.props.group.membersCount} ${Translator.translate(\"MEMBERS\", this.context.language)}`}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatGroupListItem.defaultProps = {\r\n\ttheme: theme,\r\n\tgroup: {},\r\n\tselectedGroup: {},\r\n\tclickHandler: () => { }\r\n};\r\n\r\nCometChatGroupListItem.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tselectedGroup: PropTypes.oneOfType([PropTypes.object, PropTypes.shape(CometChat.Group)]),\r\n\tgroup: PropTypes.oneOfType([PropTypes.object, PropTypes.shape(CometChat.Group)]),\r\n\tclickHandler: PropTypes.func\r\n}\r\n\r\nexport { CometChatGroupListItem };\r\n","export const modalWrapperStyle = (context) => {\r\n\r\n    const mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n\r\n    return {\r\n        minWidth: \"350px\",\r\n        minHeight: \"450px\",\r\n        width: \"50%\",\r\n        height: \"40%\",\r\n        overflow: \"hidden\",\r\n        backgroundColor: `${context.theme.backgroundColor.white}`,\r\n        position: \"fixed\",\r\n        left: \"50%\",\r\n        top: \"50%\",\r\n        transform: \"translate(-50%, -50%)\",\r\n        zIndex: \"1002\",\r\n        margin: \"0 auto\",\r\n        boxShadow: \"rgba(20, 20, 20, 0.2) 0 16px 32px, rgba(20, 20, 20, 0.04) 0 0 0 1px\",\r\n        borderRadius: \"12px\",\r\n        display: \"block\",\r\n        [mq[1]]: {\r\n            width: \"100%\",\r\n            height: \"100%\"\r\n        },\r\n        [mq[2]]: {\r\n            width: \"100%\",\r\n            height: \"100%\"\r\n        },\r\n        [mq[3]]: {\r\n            width: \"100%\",\r\n            height: \"100%\"\r\n        }\r\n    }\r\n}\r\n\r\nexport const modalCloseStyle = (img, context) => {\r\n\r\n    return {\r\n        position: \"absolute\",\r\n        width: \"32px\",\r\n        height: \"32px\",\r\n        borderRadius: \"50%\",\r\n        top: \"16px\",\r\n        right: \"16px\",\r\n        mask: `url(${img}) center center no-repeat`,\r\n        backgroundColor: `${context.theme.primaryColor}`,\r\n        cursor: \"pointer\",\r\n    }\r\n}\r\n\r\nexport const modalBodyStyle = () => {\r\n\r\n    return {\r\n        padding: \"24px\",\r\n        height: \"100%\",\r\n        width: \"100%\"\r\n    }\r\n}\r\n\r\nexport const modalCaptionStyle = (dir) => {\r\n\r\n    const textAlignStyle = (dir === \"rtl\") ? {\r\n        textAlign: \"right\",\r\n        paddingRight: \"32px\",\r\n    } : {\r\n        textAlign: \"left\",\r\n    };\r\n\r\n    return {\r\n        fontSize: \"20px\",\r\n        marginBottom: \"16px\",\r\n        fontWeight: \"bold\",\r\n        ...textAlignStyle,\r\n        width: \"100%\",\r\n    }\r\n}\r\n\r\nexport const modalErrorStyle = context => {\r\n\treturn {\r\n\t\tfontSize: \"12px\",\r\n\t\tcolor: `${context.theme.color.red}`,\r\n\t\ttextAlign: \"center\",\r\n\t\tpadding: \"8px 0\",\r\n\t\twidth: \"100%\",\r\n        height: \"31px\"\r\n\t};\r\n};\r\n\r\nexport const modalListStyle = () => {\r\n\r\n    return {\r\n        width: \"100%\",\r\n        height: \"calc(100% - 70px)\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"flex-start\",\r\n    }\r\n}\r\n\r\nexport const listHeaderStyle = (context) => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"center\",\r\n        fontWeight: \"bold\",\r\n        padding: \"8px\",\r\n        width: \"100%\",\r\n        border: `1px solid ${context.theme.borderColor.primary}`,\r\n    }\r\n}\r\n\r\nexport const listStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"flex-start\",\r\n        width: \"100%\",\r\n        height: \"calc(100% - 33px)\",\r\n        overflowY: \"auto\",\r\n    }\r\n}\r\n\r\nexport const nameColumnStyle = (context, editAccess) => {\r\n\r\n    const mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n\r\n    const widthProp = (editAccess === null) ? {\r\n\r\n        width: \"calc(100% - 180px)\",\r\n        [mq[1]]: {\r\n            width: \"calc(100% - 140px)\",\r\n        },\r\n        [mq[2]]: {\r\n            width: \"calc(100% - 180px)\",\r\n        }\r\n\r\n    } : {\r\n        width: \"calc(100% - 260px)\",\r\n        [mq[1]]: {\r\n            width: \"calc(100% - 220px)\",\r\n        },\r\n        [mq[2]]: {\r\n            width: \"calc(100% - 260px)\",\r\n        },\r\n        [mq[3]]: {\r\n            width: \"calc(100% - 240px)\",\r\n        }\r\n    };\r\n\r\n    return {\r\n        ...widthProp\r\n    }\r\n}\r\n\r\nexport const scopeColumnStyle = (context) => {\r\n\r\n    const mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n\r\n    return {\r\n        width: \"180px\",\r\n        marginRight: \"8px\",\r\n        [mq[1]]: {\r\n            width: \"140px\"\r\n        },\r\n        [mq[2]]: {\r\n            width: \"180px\",\r\n        },\r\n        [mq[3]]: {\r\n            width: \"120px\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const actionColumnStyle = (context) => {\r\n\r\n    const mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n\r\n    return {\r\n        width: \"70px\",\r\n        [mq[1]]: {\r\n            width: \"40px\"\r\n        },\r\n        [mq[2]]: {\r\n            width: \"40px\"\r\n        }\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/close.6d1416b0.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatViewGroupMemberListItem } from \"../../Groups\";\r\nimport { CometChatBackdrop } from \"../../Shared\";\r\n\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n    modalWrapperStyle,\r\n    modalCloseStyle,\r\n    modalBodyStyle,\r\n    modalCaptionStyle,\r\n    modalListStyle,\r\n    listHeaderStyle,\r\n    listStyle,\r\n    nameColumnStyle,\r\n    scopeColumnStyle,\r\n    actionColumnStyle,\r\n    modalErrorStyle\r\n} from \"./style\";\r\n\r\nimport clearIcon from \"./resources/close.svg\";\r\n\r\nclass CometChatViewGroupMemberList extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\t\tthis._isMounted = false;\r\n\t\tconst chatWindow = context.UIKitSettings.chatWindow;\r\n\t\tthis.mq = chatWindow.matchMedia(this.context.theme.breakPoints[1]);\r\n\r\n\t\tthis.state = {\r\n\t\t\tuserColumnTitle: \"\",\r\n\t\t\terrorMessage: \"\",\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.updateUserColumnTitle();\r\n\t}\r\n    \r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (prevProps.lang !== this.props.lang) {\r\n\t\t\tthis.updateUserColumnTitle();\r\n\t\t}\r\n\t}\r\n\r\n\tupdateUserColumnTitle = () => {\r\n\t\tlet userColumnTitle = Translator.translate(\"NAME\", this.props.lang);\r\n\t\tif (this.mq.matches) {\r\n\t\t\tuserColumnTitle = Translator.translate(\"AVATAR\", this.props.lang);\r\n\t\t}\r\n\r\n\t\tthis.setState({ userColumnTitle });\r\n\t};\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis._isMounted = false;\r\n\t}\r\n\r\n\thandleScroll = e => {\r\n\t\tconst bottom = Math.round(e.currentTarget.scrollHeight - e.currentTarget.scrollTop) === Math.round(e.currentTarget.clientHeight);\r\n\t\tif (bottom) {\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"FETCH_GROUP_MEMBERS\"]);\r\n\t\t}\r\n\t};\r\n\r\n\tupdateMembers = (action, member, scope) => {\r\n\t\tswitch (action) {\r\n\t\t\tcase enums.ACTIONS[\"BAN_GROUP_MEMBER\"]:\r\n\t\t\t\tthis.banMember(member);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"KICK_GROUP_MEMBER\"]:\r\n\t\t\t\tthis.kickMember(member);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"CHANGE_SCOPE_GROUP_MEMBER\"]:\r\n\t\t\t\tthis.changeScope(member, scope);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tbanMember = memberToBan => {\r\n\t\tconst guid = this.context.item.guid;\r\n\t\tCometChat.banGroupMember(guid, memberToBan.uid)\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response) {\r\n\t\t\t\t\tthis.context.setToastMessage(\"success\", \"BAN_GROUPMEMBER_SUCCESS\");\r\n\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"BAN_GROUPMEMBER_SUCCESS\"], memberToBan);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ errorMessage: Translator.translate(\"SOMETHING_WRONG\", this.context.language) });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => this.setState({ errorMessage: Translator.translate(\"SOMETHING_WRONG\", this.context.language) }));\r\n\t};\r\n\r\n\tkickMember = memberToKick => {\r\n\t\tconst guid = this.context.item.guid;\r\n\t\tCometChat.kickGroupMember(guid, memberToKick.uid)\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response) {\r\n\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"KICK_GROUPMEMBER_SUCCESS\"], memberToKick);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ errorMessage: Translator.translate(\"SOMETHING_WRONG\", this.context.language) });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => this.setState({ errorMessage: Translator.translate(\"SOMETHING_WRONG\", this.context.language) }));\r\n\t};\r\n\r\n\tchangeScope = (member, scope) => {\r\n\t\tconst guid = this.context.item.guid;\r\n\t\tCometChat.updateGroupMemberScope(guid, member.uid, scope)\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response) {\r\n\t\t\t\t\tthis.context.setToastMessage(\"success\", \"SCOPECHANGE_GROUPMEMBER_SUCCESS\");\r\n\t\t\t\t\tconst updatedMember = Object.assign({}, member, { scope: scope });\r\n\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"SCOPECHANGE_GROUPMEMBER_SUCCESS\"], updatedMember);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({ errorMessage: Translator.translate(\"SOMETHING_WRONG\", this.context.language) });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => this.setState({ errorMessage: Translator.translate(\"SOMETHING_WRONG\", this.context.language) }));\r\n\t};\r\n\r\n\tsetUserColumnTitle = editAccess => {\r\n\t\tif (this._isMounted) {\r\n\t\t\tif (editAccess !== null && this.mq.matches) {\r\n\t\t\t\tthis.setState({ userColumnTitle: Translator.translate(\"AVATAR\", this.context.language) });\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ userColumnTitle: Translator.translate(\"NAME\", this.context.language) });\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst membersList = [...this.context.groupMembers];\r\n\r\n\t\tconst groupMembers = membersList.map((member, key) => {\r\n\t\t\treturn (\r\n\t\t\t\t<CometChatViewGroupMemberListItem\r\n\t\t\t\t\tloggedinuser={this.props.loggedinuser}\r\n\t\t\t\t\ttheme={this.props.theme}\r\n\t\t\t\t\tkey={key}\r\n\t\t\t\t\tmember={member}\r\n\t\t\t\t\tenableChangeScope={this.props.enableChangeScope}\r\n\t\t\t\t\tenableBanGroupMembers={this.props.enableBanGroupMembers}\r\n\t\t\t\t\tenableKickGroupMembers={this.props.enableKickGroupMembers}\r\n\t\t\t\t\tactionGenerated={this.updateMembers}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\tlet editAccess = null;\r\n\t\tif (this.context.item.scope !== CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT) {\r\n\t\t\teditAccess = (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<div css={actionColumnStyle(this.context)} className=\"ban\">\r\n\t\t\t\t\t\t{Translator.translate(\"BAN\", this.context.language)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div css={actionColumnStyle(this.context)} className=\"kick\">\r\n\t\t\t\t\t\t{Translator.translate(\"KICK\", this.context.language)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\r\n\t\t\tif (this.props.enableKickGroupMembers === false && this.props.enableBanGroupMembers === false) {\r\n\t\t\t\teditAccess = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.mq.addListener(editAccess => this.setUserColumnTitle(editAccess));\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<CometChatBackdrop show={true} clicked={this.props.close} />\r\n\t\t\t\t<div css={modalWrapperStyle(this.context)} className=\"modal__viewmembers\">\r\n\t\t\t\t\t<span css={modalCloseStyle(clearIcon, this.context)} className=\"modal__close\" onClick={this.props.close} title={Translator.translate(\"CLOSE\", this.context.language)}></span>\r\n\t\t\t\t\t<div css={modalBodyStyle()} className=\"modal__body\">\r\n\t\t\t\t\t\t<div css={modalCaptionStyle(Translator.getDirection(this.context.language))} className=\"modal__title\">\r\n\t\t\t\t\t\t\t{Translator.translate(\"GROUP_MEMBERS\", this.context.language)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div css={modalErrorStyle(this.context)} className=\"modal__error\">\r\n\t\t\t\t\t\t\t{this.state.errorMessage}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div css={modalListStyle()} className=\"modal__content\">\r\n\t\t\t\t\t\t\t<div css={listHeaderStyle(this.context)} className=\"content__header\">\r\n\t\t\t\t\t\t\t\t<div css={nameColumnStyle(this.context, editAccess)} className=\"name\">\r\n\t\t\t\t\t\t\t\t\t{this.state.userColumnTitle}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div css={scopeColumnStyle(this.context)} className=\"scope\">\r\n\t\t\t\t\t\t\t\t\t{Translator.translate(\"SCOPE\", this.context.language)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{editAccess}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div css={listStyle()} className=\"content__list\" onScroll={this.handleScroll}>\r\n\t\t\t\t\t\t\t\t{groupMembers}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatViewGroupMemberList.defaultProps = {\r\n\ttheme: theme,\r\n\tuserColumnTitle: \"\",\r\n\tenableChangeScope: false,\r\n\tenableKickGroupMembers: false,\r\n\tenableBanGroupMembers: false\r\n};\r\n\r\nCometChatViewGroupMemberList.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tuserColumnTitle: PropTypes.string,\r\n\tenableChangeScope: PropTypes.bool,\r\n\tenableKickGroupMembers: PropTypes.bool,\r\n\tenableBanGroupMembers: PropTypes.bool\r\n};\r\n\r\nexport { CometChatViewGroupMemberList };","export const modalRowStyle = (context) => {\r\n\r\n    return {\r\n        borderLeft: `1px solid ${context.theme.borderColor.primary}`,\r\n        borderRight: `1px solid ${context.theme.borderColor.primary}`,\r\n        borderBottom: `1px solid ${context.theme.borderColor.primary}`,\r\n        display: \"flex\",\r\n        width: \"100%\",\r\n        fontSize: \"14px\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"center\",\r\n        padding: \"8px\",\r\n    }\r\n}\r\n\r\nexport const nameColumnStyle = (context, participantView) => {\r\n\r\n    const mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n\r\n    const widthProp = (participantView) ? {\r\n\r\n        width: \"calc(100% - 180px)\",\r\n        [mq[1]]: {\r\n            width: \"calc(100% - 140px)\",\r\n        },\r\n        [mq[2]]: {\r\n            width: \"calc(100% - 180px)\",\r\n        }\r\n\r\n    } : {\r\n        width: \"calc(100% - 260px)\",\r\n        [mq[1]]: {\r\n            width: \"calc(100% - 220px)\",\r\n        },\r\n        [mq[2]]: {\r\n            width: \"calc(100% - 260px)\",\r\n        },\r\n        [mq[3]]: {\r\n            width: \"calc(100% - 240px)\",\r\n        }\r\n    };\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"center\",\r\n        ...widthProp\r\n    }\r\n}\r\n\r\nexport const avatarStyle = (context, participantView) => {\r\n\r\n    const mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n\r\n    const marginProp = (participantView) ? {\r\n        marginRight: \"8px\",\r\n    } : {\r\n        marginRight: \"8px\",\r\n        [mq[1]]: {\r\n            marginRight: \"0\",\r\n        }\r\n    };\r\n\r\n    return {\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        flexShrink: \"0\",\r\n        ...marginProp\r\n    }\r\n}\r\n\r\nexport const nameStyle = (context, participantView) => {\r\n\r\n    const mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n\r\n    const widthProp = (participantView) ? {\r\n        width: \"100%\"\r\n    } : {\r\n        width: \"calc(100% - 50px)\"\r\n    };\r\n\r\n    const displayProp = (participantView) ? {\r\n        display: \"inline\",\r\n        [mq[1]]: {\r\n            display: \"inline\"\r\n        }\r\n\r\n    } : {\r\n        display: \"inline\",\r\n        [mq[1]]: {\r\n            display: \"none\"\r\n        }\r\n    }\r\n    \r\n    return {\r\n        margin: \"8px 0\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n        ...widthProp,\r\n        ...displayProp\r\n    }\r\n}\r\n\r\nexport const scopeColumnStyle = (context) => {\r\n\r\n    const mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"flex-start\",\r\n        width: \"180px\",\r\n        \"img\": {\r\n            width: \"24px\",\r\n            height: \"24px\",\r\n            cursor: \"pointer\",\r\n        },\r\n        [mq[1]]: {\r\n            width: \"140px\"\r\n        },\r\n        [mq[2]]: {\r\n            width: \"180px\",\r\n        },\r\n        [mq[3]]: {\r\n            width: \"120px\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const scopeWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        width: \"100%\",\r\n        transition: \"opacity .1s linear\",\r\n        \"img\": {\r\n            margin: \"0px 4px\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const scopeSelectionStyle = () => {\r\n\r\n    return {\r\n        width: \"65%\",\r\n        border: \"0\",\r\n        boxShadow: \"rgba(20, 20, 20, 0.04) 0 0 0 1px inset\",\r\n        borderRadius: \"8px\",\r\n        backgroundColor: `rgba(20, 20, 20, 0.04)`,\r\n        padding: \"8px\",\r\n        color: `rgba(20, 20, 20, 0.6)`,\r\n        float: \"left\",\r\n    }\r\n}\r\n\r\nexport const scopeIconStyle = (img, context) => {\r\n\r\n    return {\r\n        width: \"24px\",\r\n        height: \"24px\",\r\n        display: \"inline-block\",\r\n        cursor: \"pointer\",\r\n        mask: `url(${img}) center center no-repeat`,\r\n        backgroundColor: `${context.theme.secondaryTextColor}`,\r\n    };\r\n}\r\n\r\nexport const roleStyle = () => {\r\n\r\n    return {\r\n        fontSize: \"12px\",\r\n        maxWidth: \"calc(100% - 20px)\"\r\n    }\r\n}\r\n\r\nexport const actionColumnStyle = (context) => {\r\n\r\n    const mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n\r\n    return {\r\n        width: \"70px\",\r\n        [mq[1]]: {\r\n            width: \"40px\"\r\n        },\r\n        [mq[2]]: {\r\n            width: \"40px\"\r\n        }\r\n    }\r\n}\r\n\r\nexport const banIconStyle = (img, context) => {\r\n\r\n    return {\r\n        width: \"24px\",\r\n        height: \"24px\",\r\n        display: \"inline-block\",\r\n        cursor: \"pointer\",\r\n        mask: `url(${img}) center center no-repeat`,\r\n        backgroundColor: `${context.theme.secondaryTextColor}`,\r\n    };\r\n}\r\n\r\nexport const kickIconStyle = (img, context) => {\r\n\treturn {\r\n\t\twidth: \"24px\",\r\n\t\theight: \"24px\",\r\n\t\tdisplay: \"inline-block\",\r\n\t\tcursor: \"pointer\",\r\n\t\tbackground: `url(${img}) center center no-repeat`,\r\n\t};\r\n};","export default __webpack_public_path__ + \"static/media/edit.42654a69.svg\";","export default __webpack_public_path__ + \"static/media/done.25ee38ec.svg\";","export default __webpack_public_path__ + \"static/media/close.6d1416b0.svg\";","export default __webpack_public_path__ + \"static/media/ban-member.f569c120.svg\";","export default __webpack_public_path__ + \"static/media/delete.1b7009e4.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatAvatar, CometChatUserPresence } from \"../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n    modalRowStyle,\r\n    nameColumnStyle,\r\n    avatarStyle,\r\n    nameStyle,\r\n    roleStyle,\r\n    scopeColumnStyle,\r\n    scopeIconStyle,\r\n    actionColumnStyle,\r\n    banIconStyle,\r\n    kickIconStyle,\r\n    scopeWrapperStyle,\r\n    scopeSelectionStyle\r\n} from \"./style\";\r\n\r\nimport scopeIcon from \"./resources/edit.svg\";\r\nimport doneIcon from \"./resources/done.svg\";\r\nimport clearIcon from \"./resources/close.svg\";\r\nimport banIcon from \"./resources/ban-member.svg\";\r\nimport kickIcon from \"./resources/delete.svg\";\r\n\r\nclass CometChatViewGroupMemberListItem extends React.Component {\r\n\r\n    static contextType = CometChatContext;\r\n\r\n    constructor(props, context) {\r\n\r\n        super(props, context);\r\n\r\n        this.changeScopeDropDown = (\r\n            <select \r\n            className=\"members-scope-select\"\r\n            onChange={this.scopeChangeHandler}\r\n            defaultValue={this.props.member.scope}></select>\r\n        )\r\n\r\n        this.state = {\r\n            showChangeScope: false,\r\n            scope: null\r\n        }\r\n\r\n        this.roles = context.roles;\r\n    }\r\n\r\n    toggleChangeScope = (flag) => {\r\n        this.setState({ showChangeScope: flag });\r\n    }\r\n\r\n    scopeChangeHandler = (event) => {\r\n        this.setState({scope: event.target.value});\r\n    }\r\n\r\n    updateMemberScope = () => {\r\n        this.props.actionGenerated(enums.ACTIONS[\"CHANGE_SCOPE_GROUP_MEMBER\"], this.props.member, this.state.scope);\r\n        this.toggleChangeScope();\r\n    }\r\n\r\n    toggleTooltip = (event, flag) => {\r\n\r\n        const elem = event.currentTarget;\r\n        \r\n        if (elem.classList.contains(\"name\")) {\r\n\r\n            const scrollWidth = elem.scrollWidth;\r\n            const clientWidth = elem.clientWidth;\r\n            \r\n            if (scrollWidth <= clientWidth) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if(flag) {\r\n            elem.setAttribute(\"title\", this.props.member.name);\r\n        } else {\r\n            elem.removeAttribute(\"title\");\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        let editClassName = \"\";\r\n    \r\n        let name = this.props.member.name;\r\n        let scope = <span css={roleStyle()}>{this.context.roles[this.props.member.scope]}</span>;\r\n        let changescope = null;\r\n        let ban = (<i css={banIconStyle(banIcon, this.context)} title={Translator.translate(\"BAN\", this.context.language)} onClick={() => { this.props.actionGenerated(enums.ACTIONS[\"BAN_GROUP_MEMBER\"], this.props.member)}}></i>);\r\n        let kick = (<i css={kickIconStyle(kickIcon, this.context)} title={Translator.translate(\"KICK\", this.context.language)} onClick={() => { this.props.actionGenerated(enums.ACTIONS[\"KICK_GROUP_MEMBER\"], this.props.member)}}></i>);\r\n        \r\n\r\n        if(this.state.showChangeScope) {\r\n\r\n            let options = (\r\n                <React.Fragment>\r\n                    <option value={CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT}>{this.context.roles[CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT]}</option>\r\n                    <option value={CometChat.GROUP_MEMBER_SCOPE.MODERATOR}>{this.context.roles[CometChat.GROUP_MEMBER_SCOPE.MODERATOR]}</option>\r\n                    <option value={CometChat.GROUP_MEMBER_SCOPE.ADMIN}>{this.context.roles[CometChat.GROUP_MEMBER_SCOPE.ADMIN]}</option>\r\n                </React.Fragment>\r\n            );\r\n\r\n            if (this.context.item.scope === CometChat.GROUP_MEMBER_SCOPE.MODERATOR\r\n                && this.props.member.scope === CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT) {\r\n\r\n                options = (\r\n                    <React.Fragment>\r\n                        <option value={CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT}>{this.context.roles[CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT]}</option>\r\n                        <option value={CometChat.GROUP_MEMBER_SCOPE.MODERATOR}>{this.context.roles[CometChat.GROUP_MEMBER_SCOPE.MODERATOR]}</option>\r\n                    </React.Fragment>\r\n                );\r\n            }\r\n\r\n            changescope = (\r\n                <div css={scopeWrapperStyle()} className=\"scope__wrapper\">\r\n                    <select css={scopeSelectionStyle()} className=\"scope__select\" onChange={this.scopeChangeHandler} defaultValue={this.props.member.scope}>\r\n                        {options}\r\n                    </select>\r\n                    <i css={scopeIconStyle(doneIcon, this.context)} title={Translator.translate(\"CHANGE_SCOPE\", this.context.language)} onClick={this.updateMemberScope}></i>\r\n                    <i css={scopeIconStyle(clearIcon, this.context)} title={Translator.translate(\"CHANGE_SCOPE\", this.context.language)} onClick={() => this.toggleChangeScope(false)}></i>\r\n                </div>\r\n            );\r\n\r\n        } else {\r\n\r\n            if (this.context.item.scope === CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT) {\r\n                changescope = scope;\r\n            } else {\r\n                changescope = (\r\n                    <React.Fragment>\r\n                        {scope}\r\n                        <i css={scopeIconStyle(scopeIcon, this.context)} title={Translator.translate(\"CHANGE_SCOPE\", this.context.language)} onClick={() => this.toggleChangeScope(true)}></i>\r\n                    </React.Fragment>\r\n                );\r\n            }\r\n        }\r\n\r\n        //disable change scope, kick, ban of group owner\r\n        if (this.context.item.owner === this.props.member.uid) {\r\n            scope = (<span css={roleStyle()}>{Translator.translate(\"OWNER\", this.context.language)}</span>);\r\n            changescope = scope;\r\n            ban = null;\r\n            kick = null;\r\n        }\r\n\r\n        //disable change scope, kick, ban of self\r\n        if (this.props.loggedinuser.uid === this.props.member.uid) {\r\n            name = Translator.translate(\"YOU\", this.context.language);\r\n            changescope = scope;\r\n            ban = null;\r\n            kick = null;\r\n        }\r\n\r\n        //if the loggedin user is moderator, don't allow to change scope, ban, kick group moderators or administrators\r\n        if (this.context.item.scope === CometChat.GROUP_MEMBER_SCOPE.MODERATOR \r\n        && (this.props.member.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN || this.props.member.scope === CometChat.GROUP_MEMBER_SCOPE.MODERATOR)) {\r\n            changescope = scope;\r\n            ban = null;\r\n            kick = null;\r\n        }\r\n\r\n        //if the loggedin user is administrator but not group owner, don't allow to change scope, ban, kick group administrators\r\n        if (this.context.item.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN\r\n        && this.context.item.owner !== this.props.loggedinuser.uid \r\n        && this.props.member.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN) {\r\n            changescope = scope;\r\n            ban = null;\r\n            kick = null;\r\n        }\r\n        \r\n        let editAccess = null;\r\n        //if the loggedin user is participant, don't show the option to change scope, ban, or kick group members\r\n        if (this.context.item.scope === CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT) {\r\n            editAccess = null;\r\n            editClassName = \"true\";\r\n        } else {\r\n\r\n            editAccess = (\r\n                <React.Fragment>\r\n                    <div css={actionColumnStyle(this.context)} className=\"ban\">{ban}</div>\r\n                    <div css={actionColumnStyle(this.context)} className=\"kick\">{kick}</div>\r\n                </React.Fragment>\r\n            );\r\n\r\n            /**\r\n             * if kick and ban feature is disabled\r\n             */\r\n            if (this.props.enableBanGroupMembers === false && this.props.enableKickGroupMembers === false) {\r\n                editAccess = null;\r\n            } else if (this.props.enableBanGroupMembers === false) { //if ban feature is disabled\r\n                editAccess = (\r\n                    <div css={actionColumnStyle(this.context)} className=\"kick\">{kick}</div>\r\n                );\r\n            } else if (this.props.enableKickGroupMembers === false) { //if kick feature is disabled\r\n                editAccess = (\r\n                    <div css={actionColumnStyle(this.context)} className=\"ban\">{ban}</div>\r\n                );\r\n            }\r\n\r\n            /**\r\n             * if promote_demote_members feature is disabled\r\n             */\r\n            if (this.props.enableChangeScope === false) {\r\n                changescope = scope;\r\n            }\r\n        }\r\n\r\n        let userPresence = (\r\n            <CometChatUserPresence status={this.props.member.status} />\r\n        );\r\n        \r\n        return (\r\n            <div css={modalRowStyle(this.context)} className=\"content__row\">\r\n                <div css={nameColumnStyle(this.context, editClassName)} className=\"userinfo\">\r\n                    <div css={avatarStyle(this.context, editClassName)} className=\"thumbnail\"\r\n                    onMouseEnter={event => this.toggleTooltip(event, true)}\r\n                    onMouseLeave={event => this.toggleTooltip(event, false)}>\r\n                        <CometChatAvatar user={this.props.member} />\r\n                        {userPresence}\r\n                    </div>\r\n                    <div css={nameStyle(this.context, editClassName)} className=\"name\"\r\n                    onMouseEnter={event => this.toggleTooltip(event, true)}\r\n                    onMouseLeave={event => this.toggleTooltip(event, false)}>{name}</div>\r\n                </div>\r\n                <div css={scopeColumnStyle(this.context)} className=\"scope\">{changescope}</div>\r\n                {editAccess}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatViewGroupMemberListItem.defaultProps = {\r\n\tloggedinuser: {},\r\n\tenableChangeScope: false,\r\n};\r\n\r\nCometChatViewGroupMemberListItem.propTypes = {\r\n\tloggedinuser: PropTypes.shape(CometChat.User),\r\n\tenableChangeScope: PropTypes.bool\r\n};\r\n\r\nexport { CometChatViewGroupMemberListItem };","import { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport {UIKitSettings} from \"../../../util/UIKitSettings\";\r\n\r\nexport class AddMembersManager {\r\n\tmembersRequest = null;\r\n\tuserListenerId = new Date().getTime();\r\n\r\n\tconstructor(context, searchKey) {\r\n\r\n\t\tthis.context = context;\r\n\t\tthis.searchKey = searchKey;\r\n\t}\r\n\r\n\tinitializeMembersRequest = () => {\r\n\r\n\t\tconst userListMode = this.context.UIKitSettings.userListMode;\r\n\t\tconst userListModeOptions = UIKitSettings.userListFilterOptions;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tif (userListMode === userListModeOptions[\"ALL\"]) {\r\n\r\n\t\t\t\tif (this.searchKey) {\r\n\t\t\t\t\tthis.membersRequest = new CometChat.UsersRequestBuilder().setLimit(30).setSearchKeyword(this.searchKey).build();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.membersRequest = new CometChat.UsersRequestBuilder().setLimit(30).build();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn resolve(this.membersRequest);\r\n\t\t\t} else if (userListMode === userListModeOptions[\"FRIENDS\"]) {\r\n\r\n\t\t\t\tif (this.searchKey) {\r\n\t\t\t\t\tthis.membersRequest = new CometChat.UsersRequestBuilder().setLimit(30).friendsOnly(true).setSearchKeyword(this.searchKey).build();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.membersRequest = new CometChat.UsersRequestBuilder().setLimit(30).friendsOnly(true).build();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn resolve(this.membersRequest);\r\n\t\t\t} else {\r\n\t\t\t\treturn reject({message: \"Invalid filter for userlist\"});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tfetchNextUsers() {\r\n\t\treturn this.membersRequest.fetchNext();\r\n\t}\r\n\r\n\tattachListeners(callback) {\r\n\t\tCometChat.addUserListener(\r\n\t\t\tthis.userListenerId,\r\n\t\t\tnew CometChat.UserListener({\r\n\t\t\t\tonUserOnline: onlineUser => {\r\n\t\t\t\t\t/* when someuser/friend comes online, user will be received here */\r\n\t\t\t\t\tcallback(onlineUser);\r\n\t\t\t\t},\r\n\t\t\t\tonUserOffline: offlineUser => {\r\n\t\t\t\t\t/* when someuser/friend went offline, user will be received here */\r\n\t\t\t\t\tcallback(offlineUser);\r\n\t\t\t\t},\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tCometChat.removeUserListener(this.userListenerId);\r\n\t}\r\n}","export const modalWrapperStyle = (context) => {\r\n\r\n    const mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n\r\n    return {\r\n        minWidth: \"350px\",\r\n        minHeight: \"450px\",\r\n        width: \"40%\",\r\n        height: \"40%\",\r\n        overflow: \"hidden\",\r\n        backgroundColor: `${context.theme.backgroundColor.white}`,\r\n        position: \"fixed\",\r\n        left: \"50%\",\r\n        top: \"50%\",\r\n        transform: \"translate(-50%, -50%)\",\r\n        zIndex: \"1002\",\r\n        margin: \"0 auto\",\r\n        boxShadow: \"rgba(20, 20, 20, 0.2) 0 16px 32px, rgba(20, 20, 20, 0.04) 0 0 0 1px\",\r\n        borderRadius: \"12px\",\r\n        display: \"block\",\r\n        [mq[0]]: {\r\n            width: \"100%\",\r\n            height: \"100%\"\r\n        },\r\n        [mq[1]]: {\r\n            width: \"100%\",\r\n            height: \"100%\"\r\n        },\r\n        [mq[2]]: {\r\n            width: \"100%\",\r\n            height: \"100%\"\r\n        }\r\n    }\r\n}\r\n\r\nexport const modalCloseStyle = (img, context) => {\r\n\r\n    return {\r\n        position: \"absolute\",\r\n        width: \"32px\",\r\n        height: \"32px\",\r\n        borderRadius: \"50%\",\r\n        top: \"16px\",\r\n        right: \"16px\",\r\n        mask: `url(${img}) center center no-repeat`,\r\n        backgroundColor: `${context.theme.primaryColor}`,\r\n        cursor: \"pointer\",\r\n    }\r\n}\r\n\r\nexport const modalBodyStyle = () => {\r\n\r\n    return {\r\n        padding: \"24px\",\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"flex-start\",\r\n    }\r\n}\r\n\r\nexport const modalCaptionStyle = (dir) => {\r\n\r\n    const textAlignStyle = (dir === \"rtl\") ? {\r\n        textAlign: \"right\",\r\n        paddingRight: \"32px\",\r\n    } : { \r\n        textAlign: \"left\", \r\n    };\r\n\r\n    return {\r\n        fontSize: \"20px\",\r\n        marginBottom: \"16px\",\r\n        fontWeight: \"bold\",\r\n        ...textAlignStyle,\r\n        width: \"100%\",\r\n    }\r\n}\r\n\r\nexport const modalErrorStyle = (context) => {\r\n\r\n    return {\r\n        fontSize: \"12px\",\r\n        color: `${context.theme.color.red}`,\r\n        textAlign: \"center\",\r\n        margin: \"8px 0\",\r\n        width: \"100%\",\r\n    };\r\n}\r\n\r\nexport const modalSearchStyle = () => {\r\n\treturn {\r\n\t\tfontWeight: \"normal\",\r\n\t\tmarginBottom: \"16px\",\r\n\t\twidth: \"100%\",\r\n        height: \"35px\",\r\n\t\tborderRadius: \"8px\",\r\n\t\tboxShadow: \"rgba(20, 20, 20, 0.04) 0 0 0 1px inset\",\r\n\t\tbackgroundColor: \"rgba(20, 20, 20, 0.04)\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n\t};\r\n};\r\n\r\nexport const searchButtonStyle = (img, context) => {\r\n\r\n    return {\r\n        width: \"30px\",\r\n        height: \"100%\",\r\n        padding: \"8px\",\r\n        cursor: \"default\",\r\n        mask: `url(${img}) 10px center no-repeat`,\r\n        backgroundColor: `${context.theme.secondaryTextColor}!important`,\r\n    }\r\n}\r\n\r\nexport const searchInputStyle = () => {\r\n\r\n    return {\r\n        width: \"calc(100% - 30px)\",\r\n        height: \"100%\",\r\n        padding: \"8px\",\r\n        fontSize: \"15px\",\r\n        outline: \"none\",\r\n        border: \"none\",\r\n        backgroundColor: \"transparent\",\r\n    };\r\n}\r\n\r\nexport const modalListStyle = (context) => {\r\n\r\n    const mq = [...context.theme.breakPoints];\r\n\r\n    return {\r\n        height: \"calc(100% - 125px)\",\r\n        overflowY: \"auto\",\r\n        display: \"flex\",\r\n        width: \"100%\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"flex-start\",\r\n        [`@media ${mq[1]}, ${mq[2]}`]: {\r\n            height: \"100%\"\r\n        }\r\n    }\r\n}\r\n\r\nexport const modalFootStyle = (props, state, img, context) => {\r\n\r\n    const loadingState = (state.addingMembers) ? {\r\n        disabled: \"true\",\r\n        pointerEvents: \"none\",\r\n        background: `url(${img}) ${context.theme.primaryColor} no-repeat right 10px center`,\r\n    } : {};\r\n\r\n    const textMargin = state.addingMembers ? { marginRight: \"24px\" } : {};\r\n    \r\n    return {\r\n        margin: \"24px auto 0 auto\",\r\n        \"button\": {\r\n            cursor: \"pointer\",\r\n            padding: \"8px 16px\",\r\n            backgroundColor: `${context.theme.primaryColor}`,\r\n            borderRadius: \"5px\",\r\n            color: \"white\",\r\n            fontSize: \"14px\",\r\n            outline: \"0\",\r\n            border: \"0\",\r\n            ...loadingState,\r\n            \"span\": {\r\n                ...textMargin\r\n            }\r\n        },\r\n    }\r\n}\r\n\r\nexport const contactMsgStyle = () => {\r\n\r\n    return {\r\n        overflow: \"hidden\",\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        height: \"55%\",\r\n    }\r\n}\r\n\r\nexport const contactMsgTxtStyle = context => {\r\n\treturn {\r\n\t\tmargin: \"0\",\r\n\t\theight: \"30px\",\r\n\t\tcolor: `${context.theme.color.secondary}`,\r\n\t\tfontSize: \"20px!important\",\r\n\t\tfontWeight: \"600\",\r\n\t};\r\n};","export default __webpack_public_path__ + \"static/media/adding.446449d0.svg\";","export default __webpack_public_path__ + \"static/media/search.01c171e6.svg\";","export default __webpack_public_path__ + \"static/media/close.6d1416b0.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { AddMembersManager } from \"./controller\";\r\n\r\nimport { CometChatAddGroupMemberListItem } from \"../\";\r\nimport { CometChatBackdrop } from \"../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport {\r\n    modalWrapperStyle,\r\n    modalCloseStyle,\r\n    modalBodyStyle,\r\n    modalCaptionStyle,\r\n    modalSearchStyle,\r\n    searchButtonStyle,\r\n    searchInputStyle,\r\n    modalListStyle,\r\n    modalFootStyle,\r\n    contactMsgStyle,\r\n    contactMsgTxtStyle,\r\n    modalErrorStyle\r\n} from \"./style\";\r\n\r\nimport addingIcon from \"./resources/adding.svg\";\r\nimport searchIcon from \"./resources/search.svg\";\r\nimport clearIcon from \"./resources/close.svg\";\r\n\r\nclass CometChatAddGroupMemberList extends React.Component {\r\n\r\n    static contextType = CometChatContext;\r\n\r\n    constructor(props, context) {\r\n        super(props, context);\r\n\r\n        this.state = {\r\n            userlist: [],\r\n            membersToAdd: [],\r\n            filteredlist: [],\r\n            addingMembers: false,\r\n            decoratorMessage: Translator.translate(\"LOADING\", context.language),\r\n            errorMessage: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        this.AddMembersManager = new AddMembersManager(this.context);\r\n        this.AddMembersManager.initializeMembersRequest().then(() => {\r\n\r\n            this.getUsers();\r\n            this.AddMembersManager.attachListeners(this.userUpdated);\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n\r\n        this.AddMembersManager.removeListeners();\r\n        this.AddMembersManager = null;\r\n    }\r\n\r\n    userUpdated = (user) => {\r\n        \r\n        let userlist = [...this.state.userlist];\r\n  \r\n        //search for user\r\n        let userKey = userlist.findIndex((u, k) => u.uid === user.uid);\r\n      \r\n        //if found in the list, update user object\r\n        if(userKey > -1) {\r\n\r\n            let userObj = userlist[userKey];\r\n            let newUserObj = Object.assign({}, userObj, user);\r\n            userlist.splice(userKey, 1, newUserObj);\r\n    \r\n            this.setState({ userlist: userlist });\r\n        }\r\n    }\r\n\r\n    handleScroll = (e) => {\r\n      const bottom =\r\n        Math.round(e.currentTarget.scrollHeight - e.currentTarget.scrollTop) === Math.round(e.currentTarget.clientHeight);\r\n      if (bottom) this.getUsers();\r\n    }\r\n    \r\n    searchUsers = (e) => {\r\n  \r\n        if (this.timeout) {\r\n            clearTimeout(this.timeout);\r\n        }\r\n\r\n        let val = e.target.value;\r\n        \r\n        this.AddMembersManager = new AddMembersManager(this.context, val);\r\n        this.AddMembersManager.initializeMembersRequest().then(() => {\r\n\r\n            this.timeout = setTimeout(() => {\r\n                this.setState({ userlist: [], membersToAdd: [], membersToRemove: [], filteredlist: [], decoratorMessage: Translator.translate(\"LOADING\", this.context.language) }, () => this.getUsers());\r\n            }, 500);\r\n\t\t\t\t\t\t\t\r\n        });\r\n    }\r\n  \r\n    getUsers = () => {\r\n  \r\n        this.AddMembersManager.fetchNextUsers()\r\n            .then(userList => {\r\n                const filteredUserList = userList.filter(user => {\r\n                    const found = this.context.groupMembers.find(member => user.uid === member.uid);\r\n                    const foundbanned = this.context.bannedGroupMembers.find(member => user.uid === member.uid);\r\n                    if (found || foundbanned) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                });\r\n\r\n                if (filteredUserList.length === 0) {\r\n                    this.setState({ decoratorMessage: Translator.translate(\"NO_USERS_FOUND\", this.context.language) });\r\n                }\r\n\r\n                this.setState({ userlist: [...this.state.userlist, ...userList], filteredlist: [...this.state.filteredlist, ...filteredUserList] });\r\n            })\r\n            .catch(error => this.setState({ decoratorMessage: Translator.translate(\"SOMETHING_WRONG\", this.context.language) }));\r\n    }\r\n\r\n    membersUpdated = (user, userState) => {\r\n\r\n        if(userState) {\r\n\r\n            const members = [...this.state.membersToAdd];\r\n            members.push(user);\r\n            this.setState({membersToAdd: [...members]});\r\n\r\n        } else {\r\n\r\n            const membersToAdd = [...this.state.membersToAdd];\r\n            const IndexFound = membersToAdd.findIndex(member => member.uid === user.uid);\r\n            if(IndexFound > -1) {\r\n                membersToAdd.splice(IndexFound, 1);\r\n                this.setState({membersToAdd: [...membersToAdd]})\r\n            }\r\n        }\r\n    }\r\n\r\n    updateMembers = () => {\r\n        \r\n        const guid = this.context.item.guid;\r\n        const membersList = [];\r\n\r\n        this.state.membersToAdd.forEach(newmember => {\r\n            //if a selected member is already part of the member list, don't add\r\n            const IndexFound = this.context.groupMembers.findIndex(member => member.uid === newmember.uid);\r\n            if(IndexFound === -1) {\r\n                \r\n                const newMember = new CometChat.GroupMember(newmember.uid, CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT);\r\n                membersList.push(newMember);\r\n\r\n                newmember[\"type\"] = \"add\";\r\n            }\r\n        });\r\n\r\n        if(membersList.length) {\r\n\r\n            this.setState({ addingMembers: true });\r\n\r\n            const membersToAdd = [];\r\n            CometChat.addMembersToGroup(guid, membersList, []).then(response => {\r\n\r\n                if (Object.keys(response).length) {\r\n                        \r\n                    for (const member in response) {\r\n\r\n                        if(response[member] === \"success\") {\r\n\r\n                            const found = this.state.userlist.find(user => user.uid === member);\r\n                            found[\"scope\"] = CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT;\r\n                            membersToAdd.push(found);\r\n                        }\r\n                    }\r\n\r\n                    this.props.actionGenerated(enums.ACTIONS[\"ADD_GROUP_MEMBER_SUCCESS\"], membersToAdd);\r\n                }\r\n                this.setState({ addingMembers: false });\r\n                this.props.close();\r\n\r\n            }).catch(error => {\r\n                \r\n                this.setState({ addingMembers: false, errorMessage: Translator.translate(\"SOMETHING_WRONG\", this.context.language) });\r\n                \r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        const createText = this.state.addingMembers ? Translator.translate(\"ADDING\", this.context.language) : Translator.translate(\"ADD\", this.context.language);\r\n        let addGroupMemberBtn = (\r\n            <div css={modalFootStyle(this.props, this.state, addingIcon, this.context)} className=\"modal__addmembers\">\r\n                <button type=\"button\" onClick={this.updateMembers}><span>{createText}</span></button>\r\n            </div>\r\n        );\r\n\r\n        let messageContainer = null;\r\n        if (this.state.filteredlist.length === 0) {\r\n\r\n            messageContainer = (\r\n                <div css={contactMsgStyle()} className=\"members__decorator-message\">\r\n                    <p css={contactMsgTxtStyle(this.context)} className=\"decorator-message\">{this.state.decoratorMessage}</p>\r\n                </div>\r\n            );\r\n            addGroupMemberBtn = null;\r\n        }\r\n\r\n        let currentLetter = \"\";\r\n        const filteredUserList = [...this.state.filteredlist];\r\n        const users = filteredUserList.map(user => {\r\n\r\n            const chr = user.name[0].toUpperCase();\r\n            let firstLetter = null;\r\n            if(chr !== currentLetter) {\r\n                currentLetter = chr;\r\n                firstLetter = currentLetter;\r\n            }\r\n\r\n            return (\r\n                <React.Fragment key={user.uid}>\r\n                    <CometChatAddGroupMemberListItem \r\n                    theme={this.props.theme}\r\n                    firstLetter={firstLetter}\r\n                    user={user}\r\n                    changed={this.membersUpdated} />\r\n                </React.Fragment>\r\n            )\r\n        });\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <CometChatBackdrop show={true} clicked={this.props.close} />\r\n                <div css={modalWrapperStyle(this.context)} className=\"modal__addmembers\">\r\n                    <span css={modalCloseStyle(clearIcon, this.context)} className=\"modal__close\" onClick={this.props.close} title={Translator.translate(\"CLOSE\", this.context.language)}></span>\r\n                    <div css={modalBodyStyle()} className=\"modal__body\">\r\n                        <div css={modalCaptionStyle(Translator.getDirection(this.context.language))} className=\"modal__title\">{Translator.translate(\"USERS\", this.context.language)}</div>\r\n                        <div css={modalErrorStyle(this.context)} className=\"modal__error\">{this.state.errorMessage}</div>\r\n                        <div css={modalSearchStyle()} className=\"modal__search\">\r\n                            <button type=\"button\" className=\"search__button\" css={searchButtonStyle(searchIcon, this.context)} />\r\n                            <input\r\n                            type=\"text\"\r\n                            autoComplete=\"off\"\r\n                            css={searchInputStyle()}\r\n                            className=\"search__input\"\r\n                            placeholder={Translator.translate(\"SEARCH\", this.context.language)}\r\n                            onChange={this.searchUsers} />\r\n                        </div>\r\n                        {messageContainer}\r\n                        <div css={modalListStyle(this.context)} onScroll={this.handleScroll} className=\"modal__content\">{users}</div>\r\n                        {addGroupMemberBtn}\r\n                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatAddGroupMemberList.defaultProps = {\r\n    theme: theme\r\n};\r\n\r\nCometChatAddGroupMemberList.propTypes = {\r\n    theme: PropTypes.object\r\n}\r\n\r\nexport { CometChatAddGroupMemberList };\r\n","export const modalRowStyle = (theme) => {\r\n\r\n    return {\r\n        border: `1px solid ${theme.borderColor.primary}`,\r\n        display: \"flex\",\r\n        width: \"100%\",\r\n        fontSize: \"14px\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"center\",\r\n        \"&:not(:last-child)\": {\r\n            borderBottom: \"none\"\r\n        }\r\n    }\r\n}\r\n\r\nexport const modalColumnStyle = () => {\r\n\r\n    return {\r\n        padding: \"8px\",\r\n        width: \"calc(100% - 50px)\",\r\n    }\r\n}\r\n\r\nexport const avatarStyle = () => {\r\n\r\n    return {\r\n        display: \"inline-block\",\r\n        float: \"left\",\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        marginRight: \"8px\",\r\n    }\r\n}\r\n\r\nexport const nameStyle = () => {\r\n\r\n    return {\r\n        margin: \"10px\",\r\n        width: \"calc(100% - 50px)\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n    }\r\n}\r\n\r\nexport const selectionColumnStyle = () => {\r\n\r\n    return {\r\n        padding: \"8px\",\r\n        width: \"50px\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n    }\r\n}\r\n\r\nexport const selectionBoxStyle = (inactiveStateImg, activeStateImg, theme) => {\r\n\r\n    return {\r\n        display: \"none\",\r\n        \" + label\": {\r\n            display: \"block\",\r\n            cursor: \"pointer\",\r\n            userSelect: \"none\",\r\n            padding: \"8px\",\r\n            width: \"100%\",\r\n            mask: `url(${inactiveStateImg}) center center no-repeat`,\r\n            backgroundColor: `${theme.secondaryTextColor}`,\r\n        },\r\n        \"&:checked + label\": {\r\n            width: \"100%\",\r\n            mask: `url(${activeStateImg}) center center no-repeat`,\r\n            backgroundColor: `${theme.secondaryTextColor}`,\r\n        }\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/group-member-unselect.2beae61f.svg\";","export default __webpack_public_path__ + \"static/media/group-member-select.2447daf5.svg\";","import { useState, useContext } from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { CometChatAvatar, CometChatUserPresence } from \"../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport {\r\n\tmodalRowStyle,\r\n\tmodalColumnStyle,\r\n\tavatarStyle,\r\n\tnameStyle,\r\n\tselectionColumnStyle,\r\n\tselectionBoxStyle\r\n} from \"./style\";\r\n\r\nimport inactiveIcon from \"./resources/group-member-unselect.svg\";\r\nimport activeIcon from \"./resources/group-member-select.svg\";\r\n\r\nconst CometChatAddGroupMemberListItem = (props) => {\r\n\r\n\tconst { groupMembers, theme } = useContext(CometChatContext);\r\n\r\n\tconst [checked, setChecked] = useState(() => {\r\n\t\tconst found = groupMembers.find(member => member.uid === props.user.uid);\r\n\t\tconst value = (found) ? true : false;\r\n\r\n\t\treturn value;\r\n\t});\r\n\r\n\tconst handleCheck = (event) => {\r\n\r\n\t\tconst value = (checked === true) ? false : true;\r\n\t\tsetChecked(value);\r\n\t\tprops.changed(props.user, value);\r\n\t}\r\n\r\n\tconst toggleTooltip = (event, flag) => {\r\n\r\n\t\tconst elem = event.currentTarget;\r\n\t\tconst nameContainer = elem.lastChild;\r\n\r\n\t\tconst scrollWidth = nameContainer.scrollWidth;\r\n\t\tconst clientWidth = nameContainer.clientWidth;\r\n\t\t\r\n\t\tif(scrollWidth <= clientWidth) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(flag) {\r\n\t\t\tnameContainer.setAttribute(\"title\", nameContainer.textContent);\r\n\t\t} else {\r\n\t\t\tnameContainer.removeAttribute(\"title\");\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div css={modalRowStyle(theme)}>\r\n\t\t\t<div css={modalColumnStyle()} className=\"userinfo\" onMouseEnter={event => toggleTooltip(event, true)} onMouseLeave={event => toggleTooltip(event, false)}>\r\n\t\t\t\t<div css={avatarStyle()} className=\"avatar\">\r\n\t\t\t\t\t<CometChatAvatar user={props.user} />\r\n\t\t\t\t\t<CometChatUserPresence status={props.user.status} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div css={nameStyle()} className=\"name\">\r\n\t\t\t\t\t{props.user.name}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div css={selectionColumnStyle()} className=\"selection\">\r\n\t\t\t\t<input css={selectionBoxStyle(inactiveIcon, activeIcon, theme)} type=\"checkbox\" checked={checked} id={props.user.uid + \"sel\"} onChange={handleCheck} />\r\n\t\t\t\t<label htmlFor={props.user.uid + \"sel\"}>&nbsp;</label>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatAddGroupMemberListItem.defaultProps = {\r\n\ttheme: theme\r\n};\r\n\r\nCometChatAddGroupMemberListItem.propTypes = {\r\n\ttheme: PropTypes.object\r\n}\r\n\r\nexport { CometChatAddGroupMemberListItem };","export const modalWrapperStyle = (context) => {\r\n\r\n    const mq = context.theme.breakPoints.map(x => `${x}`);\r\n\r\n    return {\r\n        minWidth: \"350px\",\r\n        minHeight: \"450px\",\r\n        width: \"40%\",\r\n        height: \"40%\",\r\n        overflow: \"hidden\",\r\n        backgroundColor: `${context.theme.backgroundColor.white}`,\r\n        position: \"fixed\",\r\n        left: \"50%\",\r\n        top: \"50%\",\r\n        transform: \"translate(-50%, -50%)\",\r\n        zIndex: \"1002\",\r\n        margin: \"0 auto\",\r\n        boxShadow: \"rgba(20, 20, 20, 0.2) 0 16px 32px, rgba(20, 20, 20, 0.04) 0 0 0 1px\",\r\n        borderRadius: \"12px\",\r\n        display: \"block\",\r\n        [`@media ${mq[1]}, ${mq[2]}`]: {\r\n            width: \"100%\",\r\n            height: \"100%\"\r\n        }\r\n    }\r\n}\r\n\r\nexport const modalCloseStyle = (img, context) => {\r\n\r\n    return {\r\n        position: \"absolute\",\r\n        width: \"32px\",\r\n        height: \"32px\",\r\n        borderRadius: \"50%\",\r\n        top: \"16px\",\r\n        right: \"16px\",\r\n        mask: `url(${img}) center center no-repeat`,\r\n        backgroundColor: `${context.theme.primaryColor}`,\r\n        cursor: \"pointer\",\r\n    }\r\n}\r\n\r\nexport const modalBodyStyle = () => {\r\n\r\n    return {\r\n        padding: \"24px\",\r\n        height: \"100%\",\r\n        width: \"100%\"\r\n    }\r\n}\r\n\r\nexport const modalCaptionStyle = (dir) => {\r\n\r\n    const textAlignStyle = (dir === \"rtl\") ? {\r\n        textAlign: \"right\",\r\n        paddingRight: \"32px\",\r\n    } : {\r\n        textAlign: \"left\",\r\n    };\r\n\r\n    return {\r\n        fontSize: \"20px\",\r\n        marginBottom: \"8px\",\r\n        fontWeight: \"bold\",\r\n        ...textAlignStyle,\r\n        width: \"100%\",\r\n    }\r\n}\r\n\r\nexport const modalErrorStyle = context => {\r\n\r\n\treturn {\r\n\t\tfontSize: \"12px\",\r\n\t\tcolor: `${context.theme.color.red}`,\r\n\t\ttextAlign: \"center\",\r\n\t\tpadding: \"8px 0\",\r\n\t\twidth: \"100%\",\r\n\t\theight: \"31px\",\r\n\t};\r\n};\r\n\r\nexport const modalListStyle = () => {\r\n\r\n    return {\r\n        width: \"100%\",\r\n        height: \"calc(100% - 70px)\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"flex-start\",\r\n    }\r\n}\r\n\r\nexport const listHeaderStyle = (context) => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"center\",\r\n        fontWeight: \"bold\",\r\n        padding: \"8px\",\r\n        width: \"100%\",\r\n        border: `1px solid ${context.theme.borderColor.primary}`,\r\n    };\r\n}\r\n\r\nexport const nameColumnStyle = (context) => {\r\n\r\n    const mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n\r\n    return {\r\n        width: \"calc(100% - 220px)\",\r\n        [mq[0]]: {\r\n            width: \"calc(100% - 185px)\",\r\n        },\r\n        [mq[1]]: {\r\n            width: \"calc(100% - 185px)\",\r\n        },\r\n        [mq[2]]: {\r\n            width: \"calc(100% - 185px)\",\r\n        },\r\n    };\r\n}\r\n\r\nexport const roleColumnStyle = context => {\r\n\r\n\tconst mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n\r\n\treturn {\r\n\t\twidth: \"150px\",\r\n\t\t[mq[0]]: {\r\n\t\t\twidth: \"115px\",\r\n\t\t},\r\n\t\t[mq[1]]: {\r\n\t\t\twidth: \"115px\",\r\n\t\t},\r\n\t\t[mq[2]]: {\r\n\t\t\twidth: \"115px\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const actionColumnStyle = () => {\r\n\r\n    return {\r\n        width: \"70px\"\r\n    }\r\n}\r\n\r\nexport const listStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"flex-start\",\r\n        width: \"100%\",\r\n        height: \"calc(100% - 33px)\",\r\n        overflowY: \"auto\",        \r\n    }\r\n}\r\n\r\nexport const contactMsgStyle = () => {\r\n\r\n    return {\r\n        overflow: \"hidden\",\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        height: \"55%\",\r\n    }\r\n}\r\n\r\nexport const contactMsgTxtStyle = (context) => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        height: \"30px\",\r\n        color: `${context.theme.color.secondary}`,\r\n        fontSize: \"20px!important\",\r\n        fontWeight: \"600\"\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/close.6d1416b0.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatBanGroupMemberListItem } from \"../\";\r\nimport { CometChatBackdrop } from \"../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport {\r\n    modalWrapperStyle,\r\n    modalCloseStyle,\r\n    modalBodyStyle,\r\n    contactMsgStyle,\r\n    contactMsgTxtStyle,\r\n    modalErrorStyle,\r\n    modalCaptionStyle,\r\n    modalListStyle,\r\n    listHeaderStyle,\r\n    nameColumnStyle,\r\n    roleColumnStyle,\r\n    actionColumnStyle,\r\n    listStyle,\r\n} from \"./style\";\r\n\r\nimport clearIcon from \"./resources/close.svg\";\r\n\r\nclass CometChatBanGroupMemberList extends React.Component {\r\n\r\n    static contextType = CometChatContext;\r\n\r\n    constructor(props) {\r\n\r\n        super(props);\r\n\r\n        this.state = {\r\n            membersToBan: [],\r\n            membersToUnBan: [],\r\n            decoratorMessage: Translator.translate(\"LOADING\", Translator.getDefaultLanguage()),\r\n            errorMessage: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        if (this.context.bannedGroupMembers.length === 0) {\r\n            this.setState({ decoratorMessage: Translator.translate(\"NO_BANNED_MEMBERS_FOUND\", this.context.language) });\r\n        } else {\r\n            this.setState({ decoratorMessage: \"\" });\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        \r\n        if (this.context.bannedGroupMembers.length === 0 && this.state.decoratorMessage === \"\") {\r\n            this.setState({ decoratorMessage: Translator.translate(\"NO_BANNED_MEMBERS_FOUND\", this.context.language) });\r\n        } else if (this.context.bannedGroupMembers.length && this.state.decoratorMessage.length) {\r\n            this.setState({ decoratorMessage: \"\" });\r\n        }\r\n    }\r\n\r\n    unbanMember = (memberToUnBan) => {\r\n\r\n        const guid = this.context.item.guid;\r\n        CometChat.unbanGroupMember(guid, memberToUnBan.uid).then(response => {\r\n            \r\n            if(response) {\r\n                this.props.actionGenerated(enums.ACTIONS[\"UNBAN_GROUP_MEMBER_SUCCESS\"], [memberToUnBan]);\r\n            } else {\r\n                this.setState({ errorMessage: Translator.translate(\"SOMETHING_WRONG\", this.context.language) });\r\n            }\r\n\r\n        }).catch(error => this.setState({ errorMessage: Translator.translate(\"SOMETHING_WRONG\", this.context.language) }));\r\n    }\r\n\r\n    updateMembers = (action, member) => {\r\n\r\n        switch(action) {\r\n            case enums.ACTIONS[\"UNBAN_GROUP_MEMBER\"]:\r\n                this.unbanMember(member);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    handleScroll = (e) => {\r\n\r\n        const bottom = Math.round(e.currentTarget.scrollHeight - e.currentTarget.scrollTop) === Math.round(e.currentTarget.clientHeight);\r\n        if (bottom) {\r\n            this.props.actionGenerated(enums.ACTIONS[\"FETCH_BANNED_GROUP_MEMBERS\"]);\r\n        }\r\n    }\r\n    \r\n    render() {\r\n        \r\n        const membersList = [...this.context.bannedGroupMembers];\r\n        const bannedMembers = membersList.map((member, key) => {\r\n\r\n            return (\r\n                <CometChatBanGroupMemberListItem \r\n                key={member.uid} \r\n                member={member}\r\n                loggedinuser={this.props.loggedinuser}\r\n                actionGenerated={this.updateMembers} />);\r\n\r\n        });\r\n\r\n        let messageContainer = null;\r\n        if (this.state.decoratorMessage.length !== 0) {\r\n\r\n            messageContainer = (\r\n                <div css={contactMsgStyle()} className=\"bannedmembers__decorator-message\">\r\n                    <p css={contactMsgTxtStyle(this.context)} className=\"decorator-message\">{this.state.decoratorMessage}</p>\r\n                </div>\r\n            );\r\n        }\r\n        \r\n        return (\r\n            <React.Fragment>\r\n                <CometChatBackdrop show={true} clicked={this.props.close} />\r\n                <div css={modalWrapperStyle(this.context)} className=\"modal__bannedmembers\">\r\n                    <span css={modalCloseStyle(clearIcon, this.context)} className=\"modal__close\" onClick={this.props.close} title={Translator.translate(\"CLOSE\", this.context.language)}></span>\r\n\r\n                    <div css={modalBodyStyle()} className=\"modal__body\">\r\n                        <div css={modalCaptionStyle(Translator.getDirection(this.context.language))} className=\"modal__title\">\r\n                            {Translator.translate(\"BANNED_MEMBERS\", this.context.language)}\r\n                        </div>\r\n                        <div css={modalErrorStyle(this.context)} className=\"modal__error\">\r\n                            {this.state.errorMessage}\r\n                        </div>\r\n\r\n                        <div css={modalListStyle()} className=\"modal__content\">\r\n                            <div css={listHeaderStyle(this.context)} className=\"content__header\">\r\n                                <div css={nameColumnStyle(this.props)} className=\"name\">\r\n                                    {Translator.translate(\"NAME\", this.context.language)}\r\n                                </div>\r\n                                <div css={roleColumnStyle(this.context)} className=\"role\">\r\n                                    {Translator.translate(\"SCOPE\", this.context.language)}\r\n                                </div>\r\n                                <div css={actionColumnStyle(this.context)} className=\"unban\">\r\n                                    {Translator.translate(\"UNBAN\", this.context.language)}\r\n                                </div>\r\n                            </div>\r\n                            {messageContainer}\r\n                            <div css={listStyle(this.props)} className=\"content__list\" onScroll={this.handleScroll}>\r\n                                {bannedMembers}\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatBanGroupMemberList.defaultProps = {\r\n    theme: theme\r\n};\r\n\r\nCometChatBanGroupMemberList.propTypes = {\r\n    theme: PropTypes.object\r\n}\r\n\r\nexport { CometChatBanGroupMemberList };\r\n","export const modalRowStyle = (context) => {\r\n\r\n    return {\r\n        borderLeft: `1px solid ${context.theme.borderColor.primary}`,\r\n        borderRight: `1px solid ${context.theme.borderColor.primary}`,\r\n        borderBottom: `1px solid ${context.theme.borderColor.primary}`,\r\n        display: \"flex\",\r\n        width: \"100%\",\r\n        fontSize: \"14px\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"center\",\r\n        padding: \"8px\",\r\n    };\r\n}\r\n\r\nexport const userStyle = context => {\r\n    \r\n\tconst mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n\r\n\treturn {\r\n\t\twidth: \"calc(100% - 220px)\",\r\n\t\t[mq[0]]: {\r\n\t\t\twidth: \"calc(100% - 185px)\",\r\n\t\t},\r\n\t\t[mq[1]]: {\r\n\t\t\twidth: \"calc(100% - 185px)\",\r\n\t\t},\r\n\t\t[mq[2]]: {\r\n\t\t\twidth: \"calc(100% - 185px)\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const avatarStyle = () => {\r\n\r\n    return {\r\n        display: \"inline-block\",\r\n        float: \"left\",\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        marginRight: \"8px\",\r\n    }\r\n}\r\n\r\nexport const nameStyle = () => {\r\n\r\n    return {\r\n        margin: \"10px 0 0 0\",\r\n        width: \"calc(100% - 50px)\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\"\r\n    }\r\n}\r\n\r\nexport const roleStyle = (context) => {\r\n\r\n    const mq = context.theme.breakPoints.map(x => `${x}`);\r\n\r\n    return {\r\n        width: \"150px\",\r\n        fontSize: \"12px\",\r\n        [`@media ${mq[1]}, ${mq[2]}`]: {\r\n            width: \"115px\"\r\n        }\r\n    }\r\n}\r\n\r\nexport const actionStyle = (img, context) => {\r\n\r\n    return {\r\n        width: \"70px\",\r\n        \"i\": {\r\n            width: \"24px\",\r\n            height: \"24px\",\r\n            cursor: \"pointer\",\r\n            mask: `url(${img}) center center no-repeat`,\r\n            backgroundColor: `${context.theme.secondaryTextColor}`,\r\n            display: \"inline-block\"\r\n        },\r\n    };\r\n}","export default __webpack_public_path__ + \"static/media/ban-member.f569c120.svg\";","import { useContext } from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatAvatar, CometChatUserPresence } from \"../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport {\r\n    modalRowStyle,\r\n    userStyle,\r\n    avatarStyle,\r\n    nameStyle,\r\n    roleStyle,\r\n    actionStyle\r\n} from \"./style\";\r\n\r\nimport unban from \"./resources/ban-member.svg\";\r\n\r\nconst CometChatBanGroupMemberListItem = (props) => {\r\n\r\n    const context = useContext(CometChatContext);\r\n\r\n    let name = props.member.name;\r\n    let scope = context.roles[props.member.scope];\r\n    let unBan = (<i title={Translator.translate(\"UNBAN\", context.language)} onClick={() => { props.actionGenerated(enums.ACTIONS[\"UNBAN_GROUP_MEMBER\"], props.member)}} />);\r\n\r\n    //if the loggedin user is moderator, don't allow unban of banned moderators or administrators\r\n    if (context.item.scope === CometChat.GROUP_MEMBER_SCOPE.MODERATOR \r\n    && (props.member.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN || props.member.scope === CometChat.GROUP_MEMBER_SCOPE.MODERATOR)) {\r\n        unBan = null;\r\n    }\r\n\r\n    //if the loggedin user is administrator, don't allow unban of banned administrators\r\n    if (context.item.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN && props.member.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN) {\r\n        if (context.item.owner !== props.loggedinuser.uid) {\r\n            unBan = null;\r\n        }\r\n    }\r\n\r\n    const toggleTooltip = (event, flag) => {\r\n\r\n        const elem = event.currentTarget;\r\n        const nameContainer = elem.lastChild;\r\n    \r\n        const scrollWidth = nameContainer.scrollWidth;\r\n        const clientWidth = nameContainer.clientWidth;\r\n        \r\n        if(scrollWidth <= clientWidth) {\r\n          return false;\r\n        }\r\n    \r\n        if(flag) {\r\n          nameContainer.setAttribute(\"title\", nameContainer.textContent);\r\n        } else {\r\n          nameContainer.removeAttribute(\"title\");\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <div css={modalRowStyle(context)}>\r\n            <div css={userStyle(context)} className=\"userinfo\"\r\n            onMouseEnter={event => toggleTooltip(event, true)}\r\n            onMouseLeave={event => toggleTooltip(event, false)}>\r\n                <div css={avatarStyle()} className=\"avatar\">\r\n                    <CometChatAvatar user={props.member} />\r\n                    <CometChatUserPresence\r\n                    status={props.member.status}\r\n                    borderColor={props.theme.borderColor.primary} />\r\n                </div>\r\n                <div css={nameStyle()} className=\"name\">{name}</div>\r\n            </div>\r\n            <div css={roleStyle(context)} className=\"role\">{scope}</div>\r\n            <div css={actionStyle(unban, context)} className=\"unban\">{unBan}</div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatBanGroupMemberListItem.defaultProps = {\r\n    theme: theme\r\n};\r\n\r\nCometChatBanGroupMemberListItem.propTypes = {\r\n    theme: PropTypes.object\r\n}\r\n\r\nexport { CometChatBanGroupMemberListItem };\r\n","export const groupScreenStyle = (props) => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n        boxSizing: \"border-box\",\r\n        fontFamily: `${props.theme.fontFamily}`,\r\n        border: `1px solid ${props.theme.borderColor.primary}`,\r\n        \"*\": {\r\n            boxSizing: \"border-box\",\r\n            fontFamily: `${props.theme.fontFamily}`,\r\n            \"::-webkit-scrollbar\": {\r\n                width: \"8px\",\r\n                height: \"4px\",\r\n            },\r\n            \"::-webkit-scrollbar-track\": {\r\n                background: \"#ffffff00\"\r\n            },\r\n            \"::-webkit-scrollbar-thumb\": {\r\n                background: \"#ccc\",\r\n                \"&:hover\": {\r\n                    background: \"#aaa\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const groupScreenSidebarStyle = (state, props) => {\r\n\r\n    const sidebarView = (state.sidebarview) ? {\r\n        left: \"0\",\r\n        boxShadow: \"rgba(0, 0, 0, .4) -30px 0 30px 30px\"\r\n    } : {};\r\n\r\n    const mq = [...props.theme.breakPoints];\r\n\r\n    return {\r\n\r\n        width: \"280px\",\r\n        borderRight: `1px solid ${props.theme.borderColor.primary}`,\r\n        height: \"100%\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        \".groups\": {\r\n            height: \"calc(100% - 5px)\",\r\n        },\r\n        [`@media ${mq[0]}`]: {\r\n            position: \"absolute!important\",\r\n            left: \"-100%\",\r\n            top: \"0\",\r\n            bottom: \"0\",\r\n            width: \"100%!important\",\r\n            zIndex: \"2\",\r\n            backgroundColor: `${props.theme.backgroundColor.white}`,\r\n            transition: \"all .3s ease-out\",\r\n            ...sidebarView\r\n        }\r\n    }\r\n}\r\n\r\nexport const groupScreenMainStyle = (state, props) => {\r\n\r\n    const mq = [...props.theme.breakPoints];\r\n\r\n    return {\r\n        width: \"calc(100% - 280px)\",\r\n        height: \"100%\",\r\n        order: \"2\",\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        [`@media ${mq[1]}, ${mq[2]}`]: {\r\n            width: \"100%\",\r\n        }\r\n    }\r\n}","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatGroupList } from \"../\";\r\nimport { CometChatMessages } from \"../../Messages\";\r\nimport { CometChatIncomingDirectCall } from \"../../Calls\";\r\n\r\nimport { CometChatContextProvider } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n\tgroupScreenStyle,\r\n\tgroupScreenSidebarStyle,\r\n\tgroupScreenMainStyle,\r\n} from \"./style\"\r\n\r\nclass CometChatGroupListWithMessages extends React.Component {\r\n\r\n\tloggedInUser = null;\r\n\r\n\tconstructor(props) {\r\n\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tsidebarview: false,\r\n\t\t}\r\n\r\n\t\tthis.groupListRef = React.createRef();\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tif (this.props.chatWithGroup.length === 0) {\r\n\t\t\tthis.toggleSideBar();\r\n\t\t}\r\n\t}\r\n\r\n\titemClicked = (group, type) => {\r\n\t\t\r\n\t\tthis.contextProviderRef.setTypeAndItem(type, group);\r\n\t\tthis.toggleSideBar()\r\n\t}\r\n\r\n\tactionHandler = (action, item, count, ...otherProps) => {\r\n\t\t\r\n\t\tswitch(action) {\r\n\t\t\tcase enums.ACTIONS[\"TOGGLE_SIDEBAR\"]:\r\n\t\t\t\tthis.toggleSideBar();\r\n\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_SCOPE_CHANGED:\r\n\t\t\tcase enums.GROUP_MEMBER_KICKED:\r\n\t\t\tcase enums.GROUP_MEMBER_BANNED:\r\n\t\t\t\tthis.groupUpdated(action, item, count, ...otherProps);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleSideBar = () => {\r\n\r\n\t\tconst sidebarview = this.state.sidebarview;\r\n\t\tthis.setState({ sidebarview: !sidebarview });\r\n\t}\r\n\r\n\t/**\r\n\t If the logged in user is banned, kicked or scope changed, update the chat window accordingly\r\n\t*/\r\n\tgroupUpdated = (key, message, group, options) => {\r\n\t\t\r\n\t\tswitch(key) {\r\n\t\t\tcase enums.GROUP_MEMBER_BANNED:\r\n\t\t\tcase enums.GROUP_MEMBER_KICKED: {\r\n\r\n\t\t\t\tif (this.contextProviderRef.type === CometChat.ACTION_TYPE.TYPE_GROUP\r\n\t\t\t\t&& this.contextProviderRef.item.guid === group.guid\r\n\t\t\t\t&& options.user.uid === this.loggedInUser.uid) {\r\n\r\n\t\t\t\t\tthis.contextProviderRef.setItem({});\r\n\t\t\t\t\tthis.contextProviderRef.setType(\"\");\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase enums.GROUP_MEMBER_SCOPE_CHANGED: {\r\n\t\t\t\t\r\n\t\t\t\tif (this.contextProviderRef.type === CometChat.ACTION_TYPE.TYPE_GROUP\r\n\t\t\t\t&& this.contextProviderRef.item.guid === group.guid\r\n\t\t\t\t&& options.user.uid === this.loggedInUser.uid) {\r\n\r\n\t\t\t\t\tconst newObject = Object.assign({}, this.contextProviderRef.item, {\"scope\": options[\"scope\"]})\r\n\t\t\t\t\tthis.contextProviderRef.setItem(newObject);\r\n\t\t\t\t\tthis.contextProviderRef.setType(CometChat.ACTION_TYPE.TYPE_GROUP);\r\n\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\tlet messageScreen = (\r\n\t\t\t<CometChatMessages\r\n\t\t\ttheme={this.props.theme}\r\n\t\t\tlang={this.props.lang}\r\n\t\t\t_parent=\"groups\"\r\n\t\t\tactionGenerated={this.actionHandler} />\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<CometChatContextProvider ref={el => (this.contextProviderRef = el)} group={this.props.chatWithGroup} language={this.props.lang}>\r\n\t\t\t\t<div css={groupScreenStyle(this.props)} className=\"cometchat cometchat--groups\">\r\n\t\t\t\t\t<div css={groupScreenSidebarStyle(this.state, this.props)} className=\"groups__sidebar\">\r\n\t\t\t\t\t\t<CometChatGroupList ref={el => (this.groupListRef = el)} _parent=\"glwm\" theme={this.props.theme} lang={this.props.lang} onItemClick={this.itemClicked} actionGenerated={this.actionHandler} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div css={groupScreenMainStyle(this.state, this.props)} className=\"groups__main\">\r\n\t\t\t\t\t\t{messageScreen}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<CometChatIncomingDirectCall theme={this.props.theme} lang={this.props.lang} actionGenerated={this.actionHandler} />\r\n\t\t\t\t</div>\r\n\t\t\t</CometChatContextProvider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatGroupListWithMessages.defaultProps = {\r\n\tlang: Translator.getDefaultLanguage(),\r\n\ttheme: theme,\r\n\tchatWithGroup: \"\",\r\n};\r\n\r\nCometChatGroupListWithMessages.propTypes = {\r\n\tlang: PropTypes.string,\r\n\ttheme: PropTypes.object,\r\n\tchatWithGroup: PropTypes.string,\r\n}\r\n\r\nexport { CometChatGroupListWithMessages };","export const modalWrapperStyle = (props, context) => {\r\n\r\n\tconst mq = [`@media (min-width : 320px) and (max-width: 767px)`];\r\n\treturn {\r\n\t\tminWidth: \"350px\",\r\n\t\tminHeight: \"450px\",\r\n\t\twidth: \"40%\",\r\n\t\theight: \"40%\",\r\n\t\toverflow: \"hidden\",\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.white}`,\r\n\t\tposition: \"fixed\",\r\n\t\tleft: \"50%\",\r\n\t\ttop: \"50%\",\r\n\t\ttransform: \"translate(-50%, -50%)\",\r\n\t\tzIndex: \"1002\",\r\n\t\tmargin: \"0 auto\",\r\n\t\tboxShadow: \"rgba(20, 20, 20, 0.2) 0 16px 32px, rgba(20, 20, 20, 0.04) 0 0 0 1px\",\r\n\t\tborderRadius: \"12px\",\r\n\t\tdisplay: \"block\",\r\n\t\t[mq[0]]: {\r\n\t\t\twidth: \"100%\",\r\n\t\t\theight: \"100%\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const modalCloseStyle = (img, context) => {\r\n\treturn {\r\n\t\tposition: \"absolute\",\r\n\t\twidth: \"32px\",\r\n\t\theight: \"32px\",\r\n\t\tborderRadius: \"50%\",\r\n\t\ttop: \"16px\",\r\n\t\tright: \"16px\",\r\n\t\tmask: `url(${img}) center center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.primaryColor}`,\r\n\t\tcursor: \"pointer\",\r\n\t};\r\n};\r\n\r\nexport const modalBodyStyle = () => {\r\n\treturn {\r\n\t\tpadding: \"24px\",\r\n\t\theight: \"100%\",\r\n\t\twidth: \"100%\",\r\n\t};\r\n};\r\n\r\nexport const modalCaptionStyle = dir => {\r\n\tconst textAlignStyle =\r\n\t\tdir === \"rtl\" ? {\r\n\t\t\ttextAlign: \"right\",\r\n\t\t\tpaddingRight: \"32px\",\r\n\t\t}\r\n\t\t: {\r\n\t\t\ttextAlign: \"left\",\r\n\t\t};\r\n\r\n\treturn {\r\n\t\tfontSize: \"20px\",\r\n\t\tmarginBottom: \"8px\",\r\n\t\tfontWeight: \"bold\",\r\n\t\t...textAlignStyle,\r\n\t\twidth: \"100%\",\r\n\t};\r\n};\r\n\r\nexport const modalErrorStyle = context => {\r\n\treturn {\r\n\t\tfontSize: \"12px\",\r\n\t\tcolor: `${context.theme.color.red}`,\r\n\t\ttextAlign: \"center\",\r\n\t\tpadding: \"8px 0\",\r\n\t\theight: \"31px\",\r\n\t\twidth: \"100%\",\r\n\t};\r\n};\r\n\r\nexport const modalListStyle = (context) => {\r\n\treturn {\r\n\t\twidth: \"100%\",\r\n\t\theight: \"calc(100% - 120px)\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tjustifyContent: \"flex-start\",\r\n\t\talignItems: \"flex-start\",\r\n\t};\r\n};\r\n\r\nexport const listHeaderStyle = context => {\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"row\",\r\n\t\tjustifyContent: \"flex-start\",\r\n\t\talignItems: \"center\",\r\n\t\tfontWeight: \"bold\",\r\n\t\tpadding: \"8px\",\r\n\t\twidth: \"100%\",\r\n\t\tborder: `1px solid ${context.theme.borderColor.primary}`,\r\n\t};\r\n};\r\n\r\nexport const listStyle = () => {\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tjustifyContent: \"flex-start\",\r\n\t\talignItems: \"flex-start\",\r\n\t\twidth: \"100%\",\r\n\t\theight: \"calc(100% - 100px)\",\r\n\t\toverflowY: \"auto\",\r\n\t};\r\n};\r\n\r\nexport const nameColumnStyle = (props, context) => {\r\n\r\n\tconst mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n\treturn {\r\n\t\twidth: \"calc(100% - 180px)\",\r\n\t\t[mq[1]]: {\r\n\t\t\twidth: \"calc(100% - 140px)\",\r\n\t\t},\r\n\t\t[mq[2]]: {\r\n\t\t\twidth: \"calc(100% - 180px)\",\r\n\t\t},\r\n\t\t[mq[3]]: {\r\n\t\t\twidth: \"calc(100% - 120px)\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const scopeColumnStyle = (context) => {\r\n\r\n\tconst mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n\treturn {\r\n\t\twidth: \"180px\",\r\n\t\t[mq[1]]: {\r\n\t\t\twidth: \"140px\",\r\n\t\t},\r\n\t\t[mq[2]]: {\r\n\t\t\twidth: \"180px\",\r\n\t\t},\r\n\t\t[mq[3]]: {\r\n\t\t\twidth: \"120px\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\n\r\n\r\nexport const modalFootStyle = (state, context, img) => {\r\n\r\n\tconst btnState = !state.newGroupOwner || state.transferringOwnership ? { \r\n\t\tdisabled: \"true\",\r\n\t\tpointerEvents: \"none\",\r\n\t} : {};\r\n\r\n\tconst loadingState = state.transferringOwnership ? {\r\n\t\tbackground: `url(${img}) no-repeat right 10px center ${context.theme.backgroundColor.blue}`,\r\n\t} : {};\r\n\r\n\tconst textMargin = state.transferringOwnership ? { marginRight: \"24px\" } : {};\r\n\r\n\treturn {\r\n\t\tpaddingTop: \"24px\",\r\n\t\ttextAlign: \"center\",\r\n\t\tbutton: {\r\n\t\t\tcursor: \"pointer\",\r\n\t\t\tpadding: \"8px 16px\",\r\n\t\t\tbackgroundColor: `${context.theme.backgroundColor.blue}`,\r\n\t\t\tborderRadius: \"5px\",\r\n\t\t\tcolor: `${context.theme.color.white}`,\r\n\t\t\tfontSize: \"14px\",\r\n\t\t\toutline: \"0\",\r\n\t\t\tborder: \"0\",\r\n\t\t\t...btnState,\r\n\t\t\t...loadingState,\r\n\t\t\tspan: {\r\n\t\t\t\t...textMargin,\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n};","export default __webpack_public_path__ + \"static/media/close.6d1416b0.svg\";","export default __webpack_public_path__ + \"static/media/transferring.446449d0.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatTransferOwnershipMemberListItem } from \"../\";\r\nimport { CometChatBackdrop } from \"../../Shared\";\r\n\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n    modalWrapperStyle,\r\n    modalCloseStyle,\r\n    modalBodyStyle,\r\n    modalCaptionStyle,\r\n    modalListStyle,\r\n    listHeaderStyle,\r\n    listStyle,\r\n    nameColumnStyle,\r\n    scopeColumnStyle,\r\n\tmodalFootStyle,\r\n\tmodalErrorStyle\r\n} from \"./style\";\r\n\r\nimport clearIcon from \"./resources/close.svg\";\r\nimport transferIcon from \"./resources/transferring.svg\";\r\n\r\nclass CometChatTransferOwnershipMemberList extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\r\n\t\tthis._isMounted = false;\r\n\t\tconst chatWindow = context.UIKitSettings.chatWindow;\r\n\t\tthis.mq = chatWindow.matchMedia(context.theme.breakPoints[1]);\r\n\r\n\t\tlet userColumnTitle = Translator.translate(\"NAME\", context.language);\r\n\t\tif (this.mq.matches) {\r\n\t\t\tuserColumnTitle = Translator.translate(\"AVATAR\", context.language);\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\tuserColumnTitle: userColumnTitle,\r\n\t\t\tnewGroupOwner: null,\r\n\t\t\ttransferringOwnership: false,\r\n\t\t\terrorMessage: \"\",\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis._isMounted = false;\r\n\t}\r\n\r\n\thandleScroll = e => {\r\n\t\tconst bottom = Math.round(e.currentTarget.scrollHeight - e.currentTarget.scrollTop) === Math.round(e.currentTarget.clientHeight);\r\n\t\tif (bottom) {\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"FETCH_GROUP_MEMBERS\"]);\r\n\t\t}\r\n\t};\r\n\r\n\tupdateMembers = (action, member, scope) => {\r\n\t\tswitch (action) {\r\n\t\t\tcase enums.ACTIONS[\"CHANGE_OWNERSHIP_GROUP_MEMBER\"]:\r\n\t\t\t\tthis.changeOwnership(member, scope);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tupdateGroupOwner = member => {\r\n\t\tthis.setState({ newGroupOwner: member?.uid });\r\n\t};\r\n\r\n\ttransferOwnership = () => {\r\n\r\n\t\tconst guid = this.context?.item?.guid;\r\n\t\tconst uid = this.state.newGroupOwner;\r\n\r\n\t\tif (!guid || !uid) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.setState({ transferringOwnership: true });\r\n\t\tCometChat.transferGroupOwnership(guid, uid).then(response => {\r\n\t\t\tthis.setState({ transferringOwnership: false });\r\n\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"OWNERSHIP_TRANSFERRED\"], uid);\r\n\r\n\t\t}).catch(error => {\r\n\t\t\tthis.setState({ transferringOwnership: false, errorMessage: Translator.translate(\"SOMETHING_WRONG\", this.context.language) });\r\n\t\t});\r\n\t};\r\n\r\n\tchangeOwnership = () => {};\r\n\r\n\tsetUserColumnTitle = editAccess => {\r\n\t\tif (this._isMounted) {\r\n\t\t\tif (editAccess !== null && this.mq.matches) {\r\n\t\t\t\tthis.setState({ userColumnTitle: Translator.translate(\"AVATAR\", this.context.language) });\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ userColumnTitle: Translator.translate(\"NAME\", this.context.language) });\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\tconst memberList = [...this.context.groupMembers];\r\n\t\tconst groupMembers = memberList\r\n\t\t\t.filter(member => member?.uid !== this.props?.loggedinuser?.uid)\r\n\t\t\t.map(member => {\r\n\t\t\t\treturn <CometChatTransferOwnershipMemberListItem loggedinuser={this.props.loggedinuser} key={member?.uid} checked={this.updateGroupOwner} member={member} actionGenerated={this.updateMembers} />;\r\n\t\t\t});\r\n\r\n\t\tlet transferBtn = null;\r\n\t\tif(memberList.length) {\r\n\r\n\t\t\tconst transferText = this.state.transferringOwnership ? Translator.translate(\"TRANSFERRING\", this.context.language) : Translator.translate(\"TRANSFER\", this.context.language);\r\n\t\t\ttransferBtn = (\r\n\t\t\t\t<div css={modalFootStyle(this.state, this.context, transferIcon)} className=\"modal__transferownership\">\r\n\t\t\t\t\t<button type=\"button\" onClick={this.transferOwnership}>\r\n\t\t\t\t\t\t<span>{transferText}</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<CometChatBackdrop show={true} clicked={this.props.close} />\r\n\t\t\t\t<div css={modalWrapperStyle(this.props, this.context)} className=\"modal__groupmembers\">\r\n\t\t\t\t\t<span css={modalCloseStyle(clearIcon, this.context)} className=\"modal__close\" onClick={this.props.close} title={Translator.translate(\"CLOSE\", this.context.language)}></span>\r\n\t\t\t\t\t<div css={modalBodyStyle()} className=\"modal__body\">\r\n\t\t\t\t\t\t<div css={modalCaptionStyle(Translator.getDirection(this.context.language))} className=\"modal__title\">{Translator.translate(\"GROUP_MEMBERS\", this.context.language)}</div>\r\n\t\t\t\t\t\t<div css={modalErrorStyle(this.context)} className=\"modal__error\">{this.state.errorMessage}</div>\r\n\t\t\t\t\t\t<div css={modalListStyle(this.context)} className=\"modal__content\">\r\n\t\t\t\t\t\t\t<div css={listHeaderStyle(this.context)} className=\"content__header\">\r\n\t\t\t\t\t\t\t\t<div css={nameColumnStyle(this.props, this.context)} className=\"name\">\r\n\t\t\t\t\t\t\t\t\t{this.state.userColumnTitle}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div css={scopeColumnStyle(this.context)} className=\"scope\">\r\n\t\t\t\t\t\t\t\t\t{Translator.translate(\"SCOPE\", this.context.language)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div css={listStyle()} className=\"content__list\" onScroll={this.handleScroll}>\r\n\t\t\t\t\t\t\t\t{groupMembers}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{transferBtn}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport { CometChatTransferOwnershipMemberList };\r\n","export const modalRowStyle = (props, context) => {\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\twidth: \"100%\",\r\n\t\tfontSize: \"14px\",\r\n\t\tpadding: \"8px\",\r\n\t\tflexDirection: \"row\",\r\n\t\tjustifyContent: \"flex-start\",\r\n\t\talignItems: \"center\",\r\n\t\tborderLeft: `1px solid ${context.theme.borderColor.primary}`,\r\n\t\tborderRight: `1px solid ${context.theme.borderColor.primary}`,\r\n\t\tborderBottom: `1px solid ${context.theme.borderColor.primary}`,\r\n\t};\r\n};\r\n\r\nexport const modalColumnStyle = context => {\r\n\r\n\tconst mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n\treturn {\r\n\t\twidth: \"calc(100% - 180px)\",\r\n\t\t[mq[1]]: {\r\n\t\t\twidth: \"calc(100% - 140px)\",\r\n\t\t},\r\n\t\t[mq[2]]: {\r\n\t\t\twidth: \"calc(100% - 180px)\",\r\n\t\t},\r\n\t\t[mq[3]]: {\r\n\t\t\twidth: \"calc(100% - 120px)\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const avatarStyle = () => {\r\n\treturn {\r\n\t\tdisplay: \"inline-block\",\r\n\t\tfloat: \"left\",\r\n\t\twidth: \"36px\",\r\n\t\theight: \"36px\",\r\n\t\tmarginRight: \"8px\",\r\n\t};\r\n};\r\n\r\nexport const nameStyle = () => {\r\n\treturn {\r\n\t\tmargin: \"10px\",\r\n\t\twidth: \"calc(100% - 50px)\",\r\n\t\toverflow: \"hidden\",\r\n\t\ttextOverflow: \"ellipsis\",\r\n\t\twhiteSpace: \"nowrap\",\r\n\t};\r\n};\r\n\r\nexport const selectionColumnStyle = context => {\r\n\r\n\tconst mq = context.theme.breakPoints.map(x => `@media ${x}`);\r\n\treturn {\r\n\t\twidth: \"180px\",\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"flex-start\",\r\n\t\talignItems: \"center\",\r\n\t\t\"span\": {\r\n\t\t\tfontSize: \"12px\",\r\n\t\t\tdisplay: \"block\",\r\n\t\t\tpaddingRight: \"8px\",\r\n\t\t},\r\n\t\t[mq[1]]: {\r\n\t\t\twidth: \"140px\",\r\n\t\t},\r\n\t\t[mq[2]]: {\r\n\t\t\twidth: \"180px\",\r\n\t\t},\r\n\t\t[mq[3]]: {\r\n\t\t\twidth: \"120px\",\r\n\t\t},\r\n\t};\r\n\r\n};\r\n\r\nexport const selectionBoxStyle = (inactiveStateImg, activeStateImg, context) => {\r\n\treturn {\r\n\t\tdisplay: \"none\",\r\n\t\t\" + label\": {\r\n\t\t\tdisplay: \"block\",\r\n\t\t\tcursor: \"pointer\",\r\n\t\t\tmask: `url(${inactiveStateImg}) center center no-repeat`,\r\n\t\t\tbackgroundColor: `${context.theme.secondaryTextColor}`,\r\n\t\t\tuserSelect: \"none\",\r\n\t\t\tpadding: \"8px\",\r\n\t\t},\r\n\t\t\"&:checked + label\": {\r\n\t\t\tmask: `url(${activeStateImg}) center center no-repeat`,\r\n\t\t\tbackgroundColor: `${context.theme.secondaryTextColor}`,\r\n\t\t\tpadding: \"8px\",\r\n\t\t},\r\n\t};\r\n};","export default __webpack_public_path__ + \"static/media/group-member-unselect.2beae61f.svg\";","export default __webpack_public_path__ + \"static/media/group-member-select.2447daf5.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport { CometChatAvatar, CometChatUserPresence } from \"../../Shared\";\r\n\r\nimport { modalRowStyle, modalColumnStyle, avatarStyle, nameStyle, selectionColumnStyle, selectionBoxStyle } from \"./style\";\r\n\r\nimport inactiveIcon from \"./resources/group-member-unselect.svg\";\r\nimport activeIcon from \"./resources/group-member-select.svg\";\r\n\r\nclass CometChatTransferOwnershipMemberListItem extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisSelected: false,\r\n\t\t};\r\n\t}\r\n\r\n\thandleCheck = e => {\r\n\t\t\r\n\t\tthis.setState(this.toggleSelectedState);\r\n\t\tthis.props.checked(this.props.member);\r\n\t};\r\n\r\n\ttoggleSelectedState = state => {\r\n\t\treturn {\r\n\t\t\tisSelected: !state.isSelected,\r\n\t\t};\r\n\t};\r\n\r\n\ttoggleTooltip = (event, flag) => {\r\n\t\tconst elem = event.currentTarget;\r\n\t\tconst nameContainer = elem.lastChild;\r\n\r\n\t\tconst scrollWidth = nameContainer.scrollWidth;\r\n\t\tconst clientWidth = nameContainer.clientWidth;\r\n\r\n\t\tif (scrollWidth <= clientWidth) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (flag) {\r\n\t\t\tnameContainer.setAttribute(\"title\", nameContainer.textContent);\r\n\t\t} else {\r\n\t\t\tnameContainer.removeAttribute(\"title\");\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div css={modalRowStyle(this.props, this.context)}>\r\n\t\t\t\t<div css={modalColumnStyle(this.context)} className=\"memberinfo\" onMouseEnter={event => this.toggleTooltip(event, true)} onMouseLeave={event => this.toggleTooltip(event, false)}>\r\n\t\t\t\t\t<div css={avatarStyle()} className=\"avatar\">\r\n\t\t\t\t\t\t<CometChatAvatar user={this.props.member} />\r\n\t\t\t\t\t\t<CometChatUserPresence status={this.props.member.status} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div css={nameStyle()} className=\"name\">\r\n\t\t\t\t\t\t{this.props.member.name}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div css={selectionColumnStyle(this.context)} className=\"selection\">\r\n\t\t\t\t\t<span>{this.context.roles[this.props.member.scope]}</span>\r\n\t\t\t\t\t<input css={selectionBoxStyle(inactiveIcon, activeIcon, this.context)} type=\"radio\" name=\"transferOwnership\" checked={this.state.checked} id={this.props.member.uid + \"sel\"} onChange={this.handleCheck} />\r\n\t\t\t\t\t<label htmlFor={this.props.member.uid + \"sel\"}>&nbsp;</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport { CometChatTransferOwnershipMemberListItem };","export const chatWrapperStyle = (props, state) => {\r\n\r\n\tlet borderStyle = {};\r\n\tif (props._parent.trim().length === 0) {\r\n\t\tif (state.viewdetailscreen || state.threadmessageview) {\r\n\t\t\tborderStyle = {\r\n\t\t\t\tborderLeft: `1px solid ${props.theme.borderColor.primary}`,\r\n\t\t\t\tborderBottom: `1px solid ${props.theme.borderColor.primary}`,\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tborderStyle = {\r\n\t\t\t\tborderLeft: `1px solid ${props.theme.borderColor.primary}`,\r\n\t\t\t\tborderRight: `1px solid ${props.theme.borderColor.primary}`,\r\n\t\t\t\tborderBottom: `1px solid ${props.theme.borderColor.primary}`,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tconst mq = [...props.theme.breakPoints];\r\n\r\n\tconst secondaryViewWidth = (state.threadmessageview || state.viewdetailscreen) ? {\r\n        width: \"calc(100% - 400px)\",\r\n        [`@media ${mq[1]}, ${mq[2]}`]: {\r\n            width: \"100%\",\r\n        },\r\n        [`@media ${mq[3]}, ${mq[4]}`]: {\r\n            width: \"0\",\r\n            display: \"none\",\r\n        },\r\n    } : {\r\n        width: \"100%\",\r\n    };\r\n\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\theight: \"100%\",\r\n\t\tboxSizing: \"border-box\",\r\n\t\tposition: \"relative\",\r\n\t\tfontFamily: `${props.theme.fontFamily}`,\r\n\t\t...borderStyle,\r\n\t\t...secondaryViewWidth,\r\n\t\t\"*\": {\r\n\t\t\tboxSizing: \"border-box\",\r\n\t\t\tfontFamily: `${props.theme.fontFamily}`,\r\n\t\t\t\"::-webkit-scrollbar\": {\r\n\t\t\t\twidth: \"8px\",\r\n\t\t\t\theight: \"4px\",\r\n\t\t\t},\r\n\t\t\t\"::-webkit-scrollbar-track\": {\r\n\t\t\t\tbackground: \"#ffffff00\",\r\n\t\t\t},\r\n\t\t\t\"::-webkit-scrollbar-thumb\": {\r\n\t\t\t\tbackground: \"#ccc\",\r\n\t\t\t\t\"&:hover\": {\r\n\t\t\t\t\tbackground: \"#aaa\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const chatSecondaryStyle = (props) => {\r\n\r\n    const borderStyle = (props._parent.trim().length === 0) ? {\r\n        borderRight: `1px solid ${props.theme.borderColor.primary}`,\r\n        borderBottom: `1px solid ${props.theme.borderColor.primary}`\r\n    } : {};\r\n\r\n    const mq = [...props.theme.breakPoints];\r\n\r\n    return {\r\n        float: \"right\",\r\n        borderLeft: `1px solid ${props.theme.borderColor.primary}`,\r\n        height: \"100%\",\r\n        width: \"400px\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        order: \"3\",\r\n        ...borderStyle,\r\n        [`@media ${mq[1]}, ${mq[2]}, ${mq[3]}, ${mq[4]}`]: {\r\n            position: \"absolute!important\",\r\n            right: \"0!important\",\r\n            top: \"0\",\r\n            bottom: \"0\",\r\n            width: \"100%!important\",\r\n            zIndex: \"2\",\r\n            backgroundColor: `${props.theme.backgroundColor.white}`,\r\n        }\r\n    }\r\n}\r\n\r\nexport const reactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        position: \"absolute\", \r\n        width: \"100%\", \r\n        height: \"100%\", \r\n        top: \"0\", \r\n        right: \"0\",\r\n        zIndex: \"2\",\r\n        display: \"flex\",\r\n        justifyContent: \"left\",\r\n        alignItems: \"center\"\r\n    }\r\n}\r\n\r\n\r\nexport const messagePaneTopStyle = () => {\r\n\r\n    return {\r\n        top: \"75px\",\r\n        position: \"absolute\",\r\n        width: \"auto\",\r\n        right: \"auto\",\r\n        left: \"50%\",\r\n        fontWeight: \"700\",\r\n        zIndex: \"200\",\r\n        transform: \"translateX(-50%)\",\r\n    }\r\n}\r\n\r\nexport const messagePaneBannerStyle = props => {\r\n\r\n\treturn {\r\n\t\tmarginBottom: \"0\",\r\n\t\tdisplay: \"block\",\r\n\t\tfontSize: \"13px\",\r\n\t\tflex: \"1\",\r\n\t\tbackground: `${props.theme.color.blue}`,\r\n\t\tborderRadius: \"6px\",\r\n\t\tzIndex: 200,\r\n\t};\r\n};\r\n\r\nexport const messagePaneUnreadBannerStyle = () => {\r\n\r\n    return {\r\n        height: \"28px\",\r\n        borderRadius: \"14px\",\r\n        display: \"flex\",\r\n        flex: \"1\",\r\n        alignItems: \"center\",\r\n    }\r\n}\r\n\r\nexport const messagePaneUnreadBannerMessageStyle = props => {\r\n\r\n\treturn {\r\n\t\tpadding: \"0 16px\",\r\n\t\tflex: \"1\",\r\n\t\ttextAlign: \"center\",\r\n\t\ttextShadow: \"0 1px rgba(0, 0, 0, .15)\",\r\n\t\twhiteSpace: \"nowrap\",\r\n\t\toverflow: \"hidden\",\r\n\t\ttextOverflow: \"ellipsis\",\r\n\t\tcolor: `${props.theme.color.white}`,\r\n\t};\r\n};\r\n\r\nexport const iconArrowDownStyle = () => {\r\n\r\n    return {\r\n        position: \"relative\",\r\n        display: \"inline-flex\",\r\n        height: \"20px\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        paddingRight: \"8px\",\r\n    }\r\n}\r\n\r\nexport const chatContainerStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\", \r\n        width: \"100%\", \r\n        height: \"100%\"\r\n    }\r\n}","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport {jsx} from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport {CometChat} from \"@cometchat-pro/chat\";\r\n\r\nimport {\r\n\tCometChatMessageHeader, \r\n\tCometChatMessageList, \r\n\tCometChatMessageComposer, \r\n\tCometChatLiveReactions, \r\n\tCometChatMessageThread, \r\n\tCometChatImageViewer,\r\n\tCometChatBlockedUser\r\n} from \"../\";\r\n\r\nimport {\r\n\tCometChatIncomingCall, \r\n\tCometChatOutgoingCall, \r\n\tCometChatOutgoingDirectCall, \r\n\tCometChatIncomingDirectCall\r\n} from \"../../Calls\";\r\n\r\nimport {CometChatUserDetails} from \"../../Users\";\r\nimport {CometChatGroupDetails} from \"../../Groups\";\r\nimport { CometChatToastNotification } from \"../../Shared\";\r\n\r\nimport {CometChatContextProvider, CometChatContext} from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport {checkMessageForExtensionsData} from \"../../../util/common\";\r\nimport {SoundManager} from \"../../../util/SoundManager\";\r\nimport { CometChatEvent } from \"../../../util/CometChatEvent\";\r\n\r\nimport {theme} from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n\tchatWrapperStyle, \r\n\tchatSecondaryStyle, \r\n\treactionsWrapperStyle, \r\n\tmessagePaneTopStyle, \r\n\tmessagePaneBannerStyle, \r\n\tmessagePaneUnreadBannerStyle, \r\n\tmessagePaneUnreadBannerMessageStyle, \r\n\ticonArrowDownStyle, \r\n\tchatContainerStyle\r\n} from \"./style\";\r\n\r\nclass CometChatMessages extends React.PureComponent {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\r\n\t\tsuper(props);\r\n\r\n\t\tCometChat.getLoggedinUser()\r\n\t\t\t.then(user => (this.loggedInUser = user))\r\n\t\t\t.catch(error => this.errorHandler(\"SOMETHING_WRONG\"));\r\n\r\n\t\tthis.state = {\r\n\t\t\tmessageList: [],\r\n\t\t\tscrollToBottom: true,\r\n\t\t\tmessageToBeEdited: \"\",\r\n\t\t\treplyPreview: null,\r\n\t\t\tliveReaction: false,\r\n\t\t\tmessageToReact: null,\r\n\t\t\tunreadMessages: [],\r\n\t\t\tviewdetailscreen: false,\r\n\t\t\tthreadmessageview: false,\r\n\t\t\tthreadmessagetype: null,\r\n\t\t\tthreadmessageitem: {},\r\n\t\t\tthreadmessageparent: {},\r\n\t\t\tviewOriginalImage: false,\r\n\t\t\tenableGroupActionMessages: false,\r\n\t\t\tenableCallActionMessages: false,\r\n\t\t\tenableSendingOneOnOneMessage: false,\r\n\t\t\tenableSendingGroupMessage: false,\r\n\t\t\tenableHideDeletedMessages: false,\r\n\t\t};\r\n\r\n\t\tthis.contextProviderRef = React.createRef();\r\n\t\tthis.composerRef = React.createRef();\r\n\t\tthis.messageListRef = React.createRef();\r\n\t\tthis.outgoingCallRef = React.createRef();\r\n\t\tthis.outgoingDirectCallRef = React.createRef();\r\n\t\tthis.toastRef = React.createRef();\r\n\r\n\t\tthis.reactionName = \"heart\";\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t\r\n\r\n\t\tthis.type = this.getContext().type;\r\n\t\tthis.item = this.getContext().item;\r\n\r\n\t\tthis.enableGroupActionMessages();\r\n\t\tthis.enableCallActionMessages();\r\n\t\tthis.enableSendingOneOnOneMessage();\r\n\t\tthis.enableSendingGroupMessage();\r\n\t\tthis.enableHideDeletedMessages();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\t\r\n\t\tif (Object.keys(this.item).length) {\r\n\t\t\tconst ifChatWindowChanged = () => {\r\n\t\t\t\tlet output = false;\r\n\r\n\t\t\t\tif (this.getContext().type === CometChat.ACTION_TYPE.TYPE_USER && (this.getContext().item.uid !== this.item.uid || this.getContext().item.blockedByMe !== this.item.blockedByMe)) {\r\n\t\t\t\t\toutput = true;\r\n\t\t\t\t} else if (this.getContext().type === CometChat.ACTION_TYPE.TYPE_GROUP && this.getContext().item.guid !== this.item.guid) {\r\n\t\t\t\t\toutput = true;\r\n\t\t\t\t} else if (this.type !== this.getContext().type) {\r\n\t\t\t\t\toutput = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn output;\r\n\t\t\t};\r\n\r\n\t\t\tif (ifChatWindowChanged() === true) {\r\n\t\t\t\tthis.setState({ messageList: [], scrollToBottom: true, messageToBeEdited: \"\", threadmessageview: false, viewdetailscreen: false, unreadMessages: [] });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.type = this.getContext().type;\r\n\t\tthis.item = this.getContext().type === CometChat.ACTION_TYPE.TYPE_USER || CometChat.ACTION_TYPE.TYPE_GROUP ? this.getContext().item : {};\r\n\r\n\t\tthis.enableGroupActionMessages();\r\n\t\tthis.enableCallActionMessages();\r\n\t\tthis.enableSendingOneOnOneMessage();\r\n\t\tthis.enableSendingGroupMessage();\r\n\t\tthis.enableHideDeletedMessages();\r\n\r\n\t\t/**\r\n\t\t * Custom message to be appended or updated for direct calling\r\n\t\t */\r\n\t\tif (Object.keys(this.props.widgetsettings).length) {\r\n\t\t\tif (\r\n\t\t\t\tObject.keys(this.getContext().directCallCustomMessage).length &&\r\n\t\t\t\tthis.getContext().directCallCustomMessageAction.trim().length &&\r\n\t\t\t\t(this.getContext().directCallCustomMessage !== this.directCallCustomMessage || this.getContext().directCallCustomMessageAction !== this.directCallCustomMessageAction)\r\n\t\t\t) {\r\n\t\t\t\tconst customMessage = this.getContext().directCallCustomMessage;\r\n\t\t\t\tconst messageAction = this.getContext().directCallCustomMessageAction.trim();\r\n\r\n\t\t\t\tswitch (messageAction) {\r\n\t\t\t\t\tcase enums.ACTIONS[\"MESSAGE_COMPOSED\"]:\r\n\t\t\t\t\t\tthis.appendMessage(customMessage);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase enums.ACTIONS[\"MESSAGE_SENT\"]:\r\n\t\t\t\t\tcase enums.ACTIONS[\"ERROR_IN_SENDING_MESSAGE\"]: {\r\n\t\t\t\t\t\tthis.messageSent(customMessage);\r\n\t\t\t\t\t\t//this.getContext().setLastMessage(customMessage[0]);\r\n\t\t\t\t\t\tCometChatEvent.triggerHandler(\"updateLastMessage\", { ...customMessage[0] });\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.getContext().setDirectCallCustomMessage({}, \"\");\r\n\t\t\t\t\t\t}, 1000);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.directCallCustomMessage = this.getContext().directCallCustomMessage;\r\n\t\t\tthis.directCallCustomMessageAction = this.getContext().directCallCustomMessageAction.trim();\r\n\t\t}\r\n\t}\r\n\r\n\tenableGroupActionMessages = () => {\r\n\t\tthis.getContext()\r\n\t\t\t.FeatureRestriction.isGroupActionMessagesEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableGroupActionMessages) {\r\n\t\t\t\t\tthis.setState({ enableGroupActionMessages: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableGroupActionMessages !== false) {\r\n\t\t\t\t\tthis.setState({ enableGroupActionMessages: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableCallActionMessages = () => {\r\n\t\tthis.getContext()\r\n\t\t\t.FeatureRestriction.isCallActionMessagesEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\t/**\r\n\t\t\t\t * Don't update state if the response has the same value\r\n\t\t\t\t */\r\n\t\t\t\tif (response !== this.state.enableCallActionMessages) {\r\n\t\t\t\t\tthis.setState({ enableCallActionMessages: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableCallActionMessages !== false) {\r\n\t\t\t\t\tthis.setState({ enableCallActionMessages: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableSendingOneOnOneMessage = () => {\r\n\t\tthis.getContext()\r\n\t\t\t.FeatureRestriction.isOneOnOneChatEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableSendingOneOnOneMessage) {\r\n\t\t\t\t\tthis.setState({ enableSendingOneOnOneMessage: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableSendingOneOnOneMessage !== false) {\r\n\t\t\t\t\tthis.setState({ enableSendingOneOnOneMessage: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableSendingGroupMessage = () => {\r\n\t\tthis.getContext()\r\n\t\t\t.FeatureRestriction.isGroupChatEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableSendingGroupMessage) {\r\n\t\t\t\t\tthis.setState({ enableSendingGroupMessage: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableSendingGroupMessage !== false) {\r\n\t\t\t\t\tthis.setState({ enableSendingGroupMessage: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableHideDeletedMessages = () => {\r\n\t\tthis.getContext()\r\n\t\t\t.FeatureRestriction.isHideDeletedMessagesEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableHideDeletedMessages) {\r\n\t\t\t\t\tthis.setState({ enableHideDeletedMessages: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableHideDeletedMessages !== false) {\r\n\t\t\t\t\tthis.setState({ enableHideDeletedMessages: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tgetContext = () => {\r\n\t\tif (this.props._parent.length) {\r\n\t\t\treturn this.context;\r\n\t\t} else {\r\n\t\t\treturn this.contextProviderRef.state;\r\n\t\t}\r\n\t};\r\n\r\n\tactionHandler = (action, messages, key, group, options) => {\r\n\r\n\t\tswitch (action) \r\n\t\t{\r\n\t\t\tcase enums.ACTIONS[\"CUSTOM_MESSAGE_RECEIVED\"]:\r\n\t\t\tcase enums.ACTIONS[\"MESSAGE_RECEIVED\"]:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst message = messages[0];\r\n\t\t\t\t\tif (message.parentMessageId) {\r\n\t\t\t\t\t\tthis.updateReplyCount(messages);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.smartReplyPreview(messages);\r\n\t\t\t\t\t\tthis.appendMessage(messages);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tSoundManager.play(enums.CONSTANTS.AUDIO[\"INCOMING_MESSAGE\"], this.getContext());\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"MESSAGE_READ\"]: {\r\n\t\t\t\tif (this.props?.actionGenerated) {\r\n\t\t\t\t\tthis.props?.actionGenerated(action, messages);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase enums.ACTIONS[\"MESSAGE_COMPOSED\"]: {\r\n\t\t\t\tthis.appendMessage(messages);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase enums.ACTIONS[\"MESSAGE_SENT\"]:\r\n\t\t\t\tthis.messageSent(messages);\r\n\t\t\t\tCometChatEvent.triggerHandler(\"updateLastMessage\", { ...messages[0] });\r\n\t\t\t\t//this.getContext().setLastMessage(messages[0]);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"ERROR_IN_SENDING_MESSAGE\"]:\r\n\t\t\t\tthis.messageSent(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"ON_MESSAGE_READ_DELIVERED\"]:\r\n\t\t\t\tthis.updateMessages(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"ON_MESSAGE_EDITED\"]: {\r\n\t\t\t\tthis.updateMessages(messages);\r\n\t\t\t\t//update the parent message of thread message\r\n\t\t\t\tthis.updateParentThreadedMessage(key, \"edit\");\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase enums.ACTIONS[\"ON_MESSAGE_DELETED\"]: {\r\n\t\t\t\tthis.removeMessages(messages);\r\n\t\t\t\t//remove the thread message\r\n\t\t\t\tthis.updateParentThreadedMessage(messages[0], \"delete\");\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase enums.ACTIONS[\"MESSAGES_FETCHED\"]:\r\n\t\t\t\tthis.prependMessages(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"MESSAGES_INITIAL_FETCH\"]:\r\n\t\t\t\tthis.prependMessagesAndScrollToBottom(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"REFRESHING_MESSAGES\"]:\r\n\t\t\t\tthis.refreshingMessages();\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"MESSAGES_REFRESHED\"]:\r\n\t\t\t\tthis.messageRefreshed(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"NEW_MESSAGES\"]:\r\n\t\t\t\tthis.newMessagesArrived(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"CLEAR_UNREAD_MESSAGES\"]:\r\n\t\t\t\tthis.jumpToMessages(true);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"DELETE_MESSAGE\"]:\r\n\t\t\t\tthis.deleteMessage(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"EDIT_MESSAGE\"]:\r\n\t\t\t\tthis.editMessage(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"MESSAGE_EDITED\"]:\r\n\t\t\t\tthis.messageEdited(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"CLEAR_EDIT_PREVIEW\"]:\r\n\t\t\t\tthis.clearEditPreview();\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_SCOPE_CHANGED:\r\n\t\t\tcase enums.GROUP_MEMBER_KICKED:\r\n\t\t\tcase enums.GROUP_MEMBER_BANNED:\r\n\t\t\tcase enums.GROUP_MEMBER_UNBANNED:\r\n\t\t\tcase enums.GROUP_MEMBER_ADDED:\r\n\t\t\tcase enums.GROUP_MEMBER_LEFT:\r\n\t\t\tcase enums.GROUP_MEMBER_JOINED:\r\n\t\t\t\tthis.groupUpdated(action, messages, group, options);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.INCOMING_CALL_RECEIVED:\r\n\t\t\tcase enums.INCOMING_CALL_CANCELLED:\r\n\t\t\tcase enums.OUTGOING_CALL_ACCEPTED:\r\n\t\t\tcase enums.OUTGOING_CALL_REJECTED:\r\n\t\t\t\tthis.appendCallMessage(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"VIEW_ORIGINAL_IMAGE\"]:\r\n\t\t\t\tthis.toggleOriginalImageView(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"INITIATE_AUDIO_CALL\"]:\r\n\t\t\t\tthis.audioCall();\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"INITIATE_VIDEO_CALL\"]:\r\n\t\t\t\tthis.videoCall();\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"VIEW_DETAIL\"]:\r\n\t\t\tcase enums.ACTIONS[\"CLOSE_GROUP_DETAIL\"]:\r\n\t\t\tcase enums.ACTIONS[\"CLOSE_USER_DETAIL\"]:\r\n\t\t\t\tthis.toggleDetailView();\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"TOGGLE_SIDEBAR\"]:\r\n\t\t\t\tthis.toggleDetailView();\r\n\t\t\t\tthis.props.actionGenerated(action);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"SEND_LIVE_REACTION\"]:\r\n\t\t\t\tthis.toggleReaction(true);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"STOP_LIVE_REACTION\"]:\r\n\t\t\t\tthis.toggleReaction(false);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.TRANSIENT_MESSAGE_RECEIVED:\r\n\t\t\t\tthis.liveReactionReceived(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"REACT_TO_MESSAGE\"]:\r\n\t\t\t\tthis.reactToMessage(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"OUTGOING_CALL_ACCEPTED\"]:\r\n\t\t\tcase enums.ACTIONS[\"USER_JOINED_CALL\"]:\r\n\t\t\tcase enums.ACTIONS[\"USER_LEFT_CALL\"]:\r\n\t\t\tcase enums.ACTIONS[\"OUTGOING_CALL_ENDED\"]:\r\n\t\t\tcase enums.ACTIONS[\"OUTGOING_CALL_REJECTED\"]:\r\n\t\t\tcase enums.ACTIONS[\"OUTGOING_CALL_CANCELLED\"]:\r\n\t\t\tcase enums.ACTIONS[\"INCOMING_CALL_ACCEPTED\"]:\r\n\t\t\tcase enums.ACTIONS[\"INCOMING_CALL_ENDED\"]:\r\n\t\t\tcase enums.ACTIONS[\"INCOMING_CALL_REJECTED\"]:\r\n\t\t\tcase enums.ACTIONS[\"DIRECT_CALL_ENDED\"]:\r\n\t\t\tcase enums.ACTIONS[\"DIRECT_CALL_ERROR\"]:\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"JOIN_DIRECT_CALL\"]: {\r\n\t\t\t\t//if used in a chat widget, trigger the event to the app component as directcall component is included outside of iframe\r\n\t\t\t\tif (Object.keys(this.props.widgetsettings).length) {\r\n\t\t\t\t\tthis.props.actionGenerated(action, messages);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst sessionID = this.getContext().type === CometChat.ACTION_TYPE.TYPE_GROUP ? this.getContext().item.guid : null;\r\n\t\t\t\t\tthis.outgoingDirectCallRef.joinCall(sessionID);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase enums.ACTIONS[\"VIEW_THREADED_MESSAGE\"]:\r\n\t\t\t\tthis.viewThreadedMessage(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"THREAD_MESSAGE_COMPOSED\"]:\r\n\t\t\t\tthis.threadMessageComposed(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"CLOSE_THREADED_MESSAGE\"]:\r\n\t\t\t\tthis.closeThreadedMessage();\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"ADD_GROUP_MEMBER_SUCCESS\"]:\r\n\t\t\t\tthis.appendMemberAddedMessage(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"UNBAN_GROUP_MEMBER_SUCCESS\"]:\r\n\t\t\t\tthis.appendMemberUnbannedMessage(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"SCOPECHANGE_GROUPMEMBER_SUCCESS\"]:\r\n\t\t\t\tthis.appendMemberScopeChangedMessage(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"KICK_GROUPMEMBER_SUCCESS\"]:\r\n\t\t\t\tthis.appendMemberKickedMessage(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"BAN_GROUPMEMBER_SUCCESS\"]:\r\n\t\t\t\tthis.appendMemberBannedMessage(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"ERROR\"]:\r\n\t\t\t\tthis.errorHandler(key);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"INFO\"]:\r\n\t\t\t\tthis.infoMessageHandler(key);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\terrorHandler = errorCode => {\r\n\t\tif (typeof this.toastRef.setError === \"function\") {\r\n\t\t\tthis.toastRef?.setError(errorCode);\r\n\t\t}\r\n\t};\r\n\r\n\tinfoMessageHandler = infoCode => {\r\n\t\tif (typeof this.toastRef.setInfo === \"function\") {\r\n\t\t\tthis.toastRef?.setInfo(infoCode);\r\n\t\t}\r\n\t};\r\n\r\n\tappendMemberAddedMessage = messages => {\r\n\t\t//if group action messages are disabled\r\n\t\tif (this.state.enableGroupActionMessages === false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst messageList = [];\r\n\t\tmessages.forEach(eachMember => {\r\n\t\t\tconst sentAt = (new Date() / 1000) | 0;\r\n\t\t\tconst messageObj = {\r\n\t\t\t\treceiver: { ...this.context.item },\r\n\t\t\t\treceiverId: this.context.item.guid,\r\n\t\t\t\treceiverType: CometChat.RECEIVER_TYPE.GROUP,\r\n\t\t\t\tsender: { ...this.loggedInUser },\r\n\t\t\t\tcategory: CometChat.CATEGORY_ACTION,\r\n\t\t\t\ttype: CometChat.ACTION_TYPE.TYPE_GROUP_MEMBER,\r\n\t\t\t\tsentAt: sentAt,\r\n\t\t\t\taction: CometChat.ACTION_TYPE.MEMBER_ADDED,\r\n\t\t\t\tactionBy: { ...this.loggedInUser },\r\n\t\t\t\tactionOn: { ...eachMember },\r\n\t\t\t\tactionFor: { ...this.context.item },\r\n\t\t\t};\r\n\r\n\t\t\tmessageList.push(messageObj);\r\n\t\t});\r\n\r\n\t\tthis.appendMessage(messageList);\r\n\t};\r\n\r\n\tappendMemberUnbannedMessage = messages => {\r\n\t\t//if group action messages are disabled\r\n\t\tif (this.state.enableGroupActionMessages === false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst messageList = [];\r\n\t\tmessages.forEach(eachMember => {\r\n\t\t\tconst sentAt = (new Date() / 1000) | 0;\r\n\t\t\tconst messageObj = {\r\n\t\t\t\treceiver: { ...this.context.item },\r\n\t\t\t\treceiverId: this.context.item.guid,\r\n\t\t\t\treceiverType: CometChat.RECEIVER_TYPE.GROUP,\r\n\t\t\t\tsender: { ...this.loggedInUser },\r\n\t\t\t\tcategory: CometChat.CATEGORY_ACTION,\r\n\t\t\t\ttype: CometChat.ACTION_TYPE.TYPE_GROUP_MEMBER,\r\n\t\t\t\tsentAt: sentAt,\r\n\t\t\t\taction: CometChat.ACTION_TYPE.MEMBER_UNBANNED,\r\n\t\t\t\tactionBy: { ...this.loggedInUser },\r\n\t\t\t\tactionOn: { ...eachMember },\r\n\t\t\t};\r\n\r\n\t\t\tmessageList.push(messageObj);\r\n\t\t});\r\n\r\n\t\tthis.appendMessage(messageList);\r\n\t};\r\n\r\n\tappendMemberScopeChangedMessage = messages => {\r\n\t\t//if group action messages are disabled\r\n\t\tif (this.state.enableGroupActionMessages === false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst messageList = [];\r\n\t\tmessages.forEach(eachMember => {\r\n\t\t\tconst newScope = Translator.translate(eachMember.scope, this.props.lang);\r\n\r\n\t\t\tconst sentAt = (new Date() / 1000) | 0;\r\n\t\t\tconst messageObj = {\r\n\t\t\t\treceiver: { ...this.context.item },\r\n\t\t\t\treceiverId: this.context.item.guid,\r\n\t\t\t\treceiverType: CometChat.RECEIVER_TYPE.GROUP,\r\n\t\t\t\tsender: { ...this.loggedInUser },\r\n\t\t\t\tcategory: CometChat.CATEGORY_ACTION,\r\n\t\t\t\ttype: CometChat.ACTION_TYPE.TYPE_GROUP_MEMBER,\r\n\t\t\t\tsentAt: sentAt,\r\n\t\t\t\taction: CometChat.ACTION_TYPE.MEMBER_SCOPE_CHANGED,\r\n\t\t\t\tactionBy: { ...this.loggedInUser },\r\n\t\t\t\tactionOn: { ...eachMember },\r\n\t\t\t\tnewScope: newScope,\r\n\t\t\t};\r\n\t\t\tmessageList.push(messageObj);\r\n\t\t});\r\n\r\n\t\tthis.appendMessage(messageList);\r\n\t};\r\n\r\n\tappendMemberKickedMessage = messages => {\r\n\t\t//if group action messages are disabled\r\n\t\tif (this.state.enableGroupActionMessages === false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst messageList = [];\r\n\t\tmessages.forEach(eachMember => {\r\n\t\t\tconst sentAt = (new Date() / 1000) | 0;\r\n\t\t\tconst messageObj = {\r\n\t\t\t\treceiver: { ...this.context.item },\r\n\t\t\t\treceiverId: this.context.item.guid,\r\n\t\t\t\treceiverType: CometChat.RECEIVER_TYPE.GROUP,\r\n\t\t\t\tsender: { ...this.loggedInUser },\r\n\t\t\t\tcategory: CometChat.CATEGORY_ACTION,\r\n\t\t\t\ttype: CometChat.ACTION_TYPE.TYPE_GROUP_MEMBER,\r\n\t\t\t\tsentAt: sentAt,\r\n\t\t\t\taction: CometChat.ACTION_TYPE.MEMBER_KICKED,\r\n\t\t\t\tactionBy: { ...this.loggedInUser },\r\n\t\t\t\tactionOn: { ...eachMember },\r\n\t\t\t\tactionFor: { ...this.context.item },\r\n\t\t\t};\r\n\t\t\tmessageList.push(messageObj);\r\n\t\t});\r\n\r\n\t\tthis.appendMessage(messageList);\r\n\t};\r\n\r\n\tappendMemberBannedMessage = messages => {\r\n\t\t//if group action messages are disabled\r\n\t\tif (this.state.enableGroupActionMessages === false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst messageList = [];\r\n\t\tmessages.forEach(eachMember => {\r\n\t\t\tconst sentAt = (new Date() / 1000) | 0;\r\n\t\t\tconst messageObj = {\r\n\t\t\t\treceiver: { ...this.context.item },\r\n\t\t\t\treceiverId: this.context.item.guid,\r\n\t\t\t\treceiverType: CometChat.RECEIVER_TYPE.GROUP,\r\n\t\t\t\tsender: { ...this.loggedInUser },\r\n\t\t\t\tcategory: CometChat.CATEGORY_ACTION,\r\n\t\t\t\ttype: CometChat.ACTION_TYPE.TYPE_GROUP_MEMBER,\r\n\t\t\t\tsentAt: sentAt,\r\n\t\t\t\taction: CometChat.ACTION_TYPE.MEMBER_BANNED,\r\n\t\t\t\tactionBy: { ...this.loggedInUser },\r\n\t\t\t\tactionOn: { ...eachMember },\r\n\t\t\t\tactionFor: { ...this.context.item },\r\n\t\t\t};\r\n\t\t\tmessageList.push(messageObj);\r\n\t\t});\r\n\r\n\t\tthis.appendMessage(messageList);\r\n\t};\r\n\r\n\ttoggleOriginalImageView = message => {\r\n\t\tthis.setState({ viewOriginalImage: message });\r\n\t};\r\n\r\n\ttoggleDetailView = () => {\r\n\t\tlet viewdetail = !this.state.viewdetailscreen;\r\n\t\tthis.setState({ viewdetailscreen: viewdetail, threadmessageview: false });\r\n\t};\r\n\r\n\tviewThreadedMessage = parentMessage => {\r\n\t\tconst message = { ...parentMessage };\r\n\t\tconst threaditem = { ...this.getContext().item };\r\n\t\tthis.setState({\r\n\t\t\tthreadmessageview: true,\r\n\t\t\tthreadmessageparent: message,\r\n\t\t\tthreadmessageitem: threaditem,\r\n\t\t\tthreadmessagetype: this.getContext().type,\r\n\t\t\tviewdetailscreen: false,\r\n\t\t});\r\n\t};\r\n\r\n\tthreadMessageComposed = messages => {\r\n\t\tif (this.getContext().type !== this.state.threadmessagetype) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif ((this.state.threadmessagetype === CometChat.ACTION_TYPE.TYPE_GROUP && this.getContext().item.guid !== this.state.threadmessageitem.guid) || (this.state.threadmessagetype === CometChat.ACTION_TYPE.TYPE_USER && this.getContext().item.uid !== this.state.threadmessageitem.uid)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.updateReplyCount(messages);\r\n\t};\r\n\r\n\tcloseThreadedMessage = () => {\r\n\t\tthis.setState({ threadmessageview: false, viewdetailscreen: false });\r\n\t};\r\n\r\n\t/*\r\n\tUpdating parent message of threaded conversation, when the message is edited or deleted\r\n\t*/\r\n\tupdateParentThreadedMessage = (message, action) => {\r\n\t\tif (this.state.threadmessageview === false || message.id !== this.state.threadmessageparent.id) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (action === \"delete\") {\r\n\t\t\tthis.setState({ threadmessageparent: { ...message }, threadmessageview: false });\r\n\t\t} else {\r\n\t\t\tthis.setState({ threadmessageparent: { ...message } });\r\n\t\t}\r\n\t};\r\n\r\n\tgetReceiverDetails = () => {\r\n\t\tlet receiverId;\r\n\t\tlet receiverType;\r\n\r\n\t\tif (this.getContext().type === CometChat.ACTION_TYPE.TYPE_USER) {\r\n\t\t\treceiverId = this.getContext().item.uid;\r\n\t\t\treceiverType = CometChat.RECEIVER_TYPE.USER;\r\n\t\t} else if (this.getContext().type === CometChat.ACTION_TYPE.TYPE_GROUP) {\r\n\t\t\treceiverId = this.getContext().item.guid;\r\n\t\t\treceiverType = CometChat.RECEIVER_TYPE.GROUP;\r\n\t\t}\r\n\r\n\t\treturn { receiverId: receiverId, receiverType: receiverType };\r\n\t};\r\n\r\n\taudioCall = () => {\r\n\t\tconst { receiverId, receiverType } = this.getReceiverDetails();\r\n\t\tconst call = new CometChat.Call(receiverId, CometChat.CALL_TYPE.AUDIO, receiverType);\r\n\t\tCometChat.initiateCall(call)\r\n\t\t\t.then(outgoingCall => {\r\n\t\t\t\t//when this component is part of chat widget trigger an event.. (outgoingcall component is used separately in chat widget)\r\n\t\t\t\tif (Object.keys(this.props.widgetsettings).length) {\r\n\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"START_AUDIO_CALL\"], outgoingCall);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.outgoingCallRef.startCall(outgoingCall);\r\n\t\t\t\t\tthis.appendCallMessage(outgoingCall);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => this.errorHandler(\"SOMETHING_WRONG\"));\r\n\t};\r\n\r\n\tvideoCall = () => {\r\n\t\t/*\r\n\t\tDirect calling for groups\r\n\t\t*/\r\n\t\tif (this.getContext().type === CometChat.RECEIVER_TYPE.GROUP) {\r\n\r\n\t\t\tconst sessionID = this.getContext().type === CometChat.ACTION_TYPE.TYPE_GROUP ? this.getContext().item.guid : null;\r\n\t\t\tif (Object.keys(this.props.widgetsettings).length) {\r\n\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"START_DIRECT_CALL\"], sessionID);\r\n\t\t\t} else {\r\n\t\t\t\tthis.outgoingDirectCallRef.startCall(sessionID);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\tDefault calling for one-on-one\r\n\t\t*/\r\n\t\tconst { receiverId, receiverType } = this.getReceiverDetails();\r\n\t\tconst call = new CometChat.Call(receiverId, CometChat.CALL_TYPE.VIDEO, receiverType);\r\n\t\tCometChat.initiateCall(call)\r\n\t\t\t.then(outgoingCall => {\r\n\t\t\t\t//when this component is part of chat widget trigger an event.. (outgoingcall component is used separately in chat widget)\r\n\t\t\t\tif (Object.keys(this.props.widgetsettings).length) {\r\n\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"START_VIDEO_CALL\"], outgoingCall);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.outgoingCallRef.startCall(outgoingCall);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => this.errorHandler(\"SOMETHING_WRONG\"));\r\n\t};\r\n\r\n\ttoggleReaction = flag => {\r\n\t\tthis.setState({ liveReaction: flag });\r\n\t};\r\n\r\n\tliveReactionReceived = reaction => {\r\n\r\n\t\tconst stopReaction = () => {\r\n\t\t\tthis.toggleReaction(false);\r\n\t\t}\r\n\r\n\t\tif (reaction.data.type === enums.CONSTANTS[\"METADATA_TYPE_LIVEREACTION\"]) {\r\n\r\n\t\t\tthis.reactionName = reaction.data.reaction;\r\n\t\t\tthis.toggleReaction(true);\r\n\r\n\t\t\tconst liveReactionInterval = enums.CONSTANTS[\"LIVE_REACTION_INTERVAL\"];\r\n\t\t\tsetTimeout(stopReaction, liveReactionInterval);\r\n\t\t}\r\n\t};\r\n\r\n\tdeleteMessage = message => {\r\n\t\tconst messageId = message.id;\r\n\t\tCometChat.deleteMessage(messageId)\r\n\t\t\t.then(deletedMessage => {\r\n\t\t\t\t//remove edit preview when message is deleted\r\n\t\t\t\tif (deletedMessage.id === this.state.messageToBeEdited.id) {\r\n\t\t\t\t\tthis.setState({ messageToBeEdited: \"\" });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst messageList = [...this.state.messageList];\r\n\t\t\t\tlet messageKey = messageList.findIndex(m => m.id === message.id);\r\n\r\n\t\t\t\tif (messageList.length - messageKey === 1 && !message.replyCount) {\r\n\t\t\t\t\tCometChatEvent.triggerHandler(\"updateLastMessage\", { ...deletedMessage });\r\n\t\t\t\t\t//this.getContext().setLastMessage(deletedMessage);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.removeMessages([deletedMessage]);\r\n\t\t\t\tthis.updateParentThreadedMessage(deletedMessage, \"delete\");\r\n\t\t\t})\r\n\t\t\t.catch(error => this.errorHandler(\"SOMETHING_WRONG\"));\r\n\t};\r\n\r\n\teditMessage = message => {\r\n\t\tthis.setState({ messageToBeEdited: message, replyPreview: null });\r\n\t};\r\n\r\n\tmessageEdited = message => {\r\n\t\tconst messageList = [...this.state.messageList];\r\n\t\tlet messageKey = messageList.findIndex(m => m.id === message.id);\r\n\t\tif (messageKey > -1) {\r\n\t\t\tconst messageObj = messageList[messageKey];\r\n\r\n\t\t\tconst newMessageObj = Object.assign({}, messageObj, message);\r\n\r\n\t\t\tmessageList.splice(messageKey, 1, newMessageObj);\r\n\t\t\tthis.updateMessages(messageList);\r\n\r\n\t\t\tthis.updateParentThreadedMessage(newMessageObj, \"edit\");\r\n\r\n\t\t\tif (messageList.length - messageKey === 1 && !message.replyCount) {\r\n\t\t\t\tCometChatEvent.triggerHandler(\"updateLastMessage\", { ...newMessageObj });\r\n\t\t\t\t//this.getContext().setLastMessage(newMessageObj);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tmessageSent = messages => {\r\n\t\tconst message = messages[0];\r\n\t\tconst messageList = [...this.state.messageList];\r\n\r\n\t\tlet messageKey = messageList.findIndex(m => m._id === message._id);\r\n\t\tif (messageKey > -1) {\r\n\t\t\tconst newMessageObj = { ...message };\r\n\r\n\t\t\tmessageList.splice(messageKey, 1, newMessageObj);\r\n\t\t\tmessageList.sort((a, b) => a.id - b.id);\r\n\t\t\tthis.setState({ messageList: messageList, scrollToBottom: true });\r\n\t\t}\r\n\t};\r\n\r\n\trefreshingMessages = () => {\r\n\t\tthis.setState({ messageList: [], messageToBeEdited: \"\", replyPreview: null, liveReaction: false, messageToReact: null });\r\n\t\tCometChatEvent.triggerHandler(enums.EVENTS[\"CLEAR_UNREAD_MESSAGES\"], {});\r\n\t};\r\n\r\n\tmessageRefreshed = messages => {\r\n\t\tconst messageList = [...messages];\r\n\t\tthis.setState({ messageList: messageList, scrollToBottom: true });\r\n\t};\r\n\r\n\tnewMessagesArrived = newMessage => {\r\n\t\tlet unreadMessages = [...this.state.unreadMessages];\r\n\t\tunreadMessages.push(newMessage[0]);\r\n\r\n\t\tthis.setState({ unreadMessages: unreadMessages });\r\n\r\n\t\tCometChatEvent.triggerHandler(enums.EVENTS[\"NEW_MESSAGES\"], { unreadMessages: unreadMessages });\r\n\t};\r\n\r\n\tmarkMessagesAsRead = scrollToBottom => {\r\n\t\tif (this.state.unreadMessages.length === 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet unreadMessages = [...this.state.unreadMessages];\r\n\t\tlet messageList = [...this.state.messageList];\r\n\r\n\t\tunreadMessages.forEach(unreadMessage => {\r\n\t\t\tif (unreadMessage.receiverType === CometChat.RECEIVER_TYPE.USER) {\r\n\t\t\t\tif (this.messageListRef) {\r\n\t\t\t\t\tmessageList.push(unreadMessage);\r\n\t\t\t\t\tthis.messageListRef.markMessageAsRead(unreadMessage, CometChat.ACTION_TYPE.TYPE_USER);\r\n\t\t\t\t}\r\n\t\t\t} else if (unreadMessage.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\t\t\tif (this.messageListRef) {\r\n\t\t\t\t\tmessageList.push(unreadMessage);\r\n\t\t\t\t\tthis.messageListRef.markMessageAsRead(unreadMessage, CometChat.ACTION_TYPE.TYPE_GROUP);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.setState({ messageList: messageList, scrollToBottom: scrollToBottom, unreadMessages: [] });\r\n\t};\r\n\r\n\tjumpToMessages = () => {\r\n\t\tif (this.state.unreadMessages.length === 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet unreadMessages = [...this.state.unreadMessages];\r\n\t\tlet messageList = [...this.state.messageList];\r\n\t\tmessageList = messageList.concat(unreadMessages);\r\n\r\n\t\tCometChatEvent.triggerHandler(enums.EVENTS[\"CLEAR_UNREAD_MESSAGES\"], {});\r\n\r\n\t\tif (messageList.length > enums.CONSTANTS[\"MAX_MESSAGE_COUNT\"]) {\r\n\t\t\tif (this.messageListRef) {\r\n\t\t\t\tthis.messageListRef.reInitializeMessageBuilder();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.markMessagesAsRead(true);\r\n\t\t}\r\n\t};\r\n\r\n\t//messages are deleted\r\n\tremoveMessages = messages => {\r\n\t\tconst deletedMessage = messages[0];\r\n\t\tconst messagelist = [...this.state.messageList];\r\n\r\n\t\tlet messageKey = messagelist.findIndex(message => message.id === deletedMessage.id);\r\n\t\tif (messageKey > -1) {\r\n\t\t\tif (this.state.enableHideDeletedMessages) {\r\n\t\t\t\tmessagelist.splice(messageKey, 1);\r\n\t\t\t} else {\r\n\t\t\t\tlet messageObj = { ...messagelist[messageKey] };\r\n\t\t\t\tlet newMessageObj = Object.assign({}, messageObj, deletedMessage);\r\n\r\n\t\t\t\tmessagelist.splice(messageKey, 1, newMessageObj);\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({ messageList: messagelist, scrollToBottom: false });\r\n\t\t}\r\n\t};\r\n\r\n\t//messages are fetched, scroll to bottom\r\n\tprependMessagesAndScrollToBottom = messages => {\r\n\t\tconst messageList = [...messages, ...this.state.messageList];\r\n\t\tthis.setState({ messageList: messageList, scrollToBottom: true });\r\n\t};\r\n\r\n\t//messages are fetched from backend\r\n\tprependMessages = messages => {\r\n\t\tconst messageList = [...messages, ...this.state.messageList];\r\n\t\tthis.setState({ messageList: messageList, scrollToBottom: false });\r\n\t};\r\n\r\n\t//message is received or composed & sent\r\n\tappendMessage = message => {\r\n\t\tlet messages = [...this.state.messageList, ...message];\r\n\t\tthis.setState({ messageList: messages, scrollToBottom: true });\r\n\t};\r\n\r\n\t//message status is updated\r\n\tupdateMessages = messages => {\r\n\t\tthis.setState({ messageList: messages, scrollToBottom: false });\r\n\t};\r\n\r\n\tgroupUpdated = (action, message, group, options) => {\r\n\t\t//if group action messages are disabled\r\n\t\tif (this.state.enableGroupActionMessages === true) {\r\n\t\t\tthis.appendMessage([message]);\r\n\t\t}\r\n\r\n\t\tthis.props.actionGenerated(action, message, group, options);\r\n\t};\r\n\r\n\tappendCallMessage = message => {\r\n\t\t//if call action messages are disabled\r\n\t\tif (this.state.enableCallActionMessages === false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.appendMessage([message]);\r\n\t};\r\n\r\n\tupdateReplyCount = messages => {\r\n\t\tconst receivedMessage = messages[0];\r\n\r\n\t\tlet messageList = [...this.state.messageList];\r\n\t\tlet messageKey = messageList.findIndex(m => m.id === receivedMessage.parentMessageId);\r\n\t\tif (messageKey > -1) {\r\n\t\t\tconst messageObj = messageList[messageKey];\r\n\t\t\tlet replyCount = messageObj.hasOwnProperty(\"replyCount\") ? messageObj.replyCount : 0;\r\n\t\t\treplyCount = replyCount + 1;\r\n\t\t\tconst newMessageObj = Object.assign({}, messageObj, { replyCount: replyCount });\r\n\r\n\t\t\tmessageList.splice(messageKey, 1, newMessageObj);\r\n\t\t\tthis.setState({ messageList: messageList, scrollToBottom: false });\r\n\t\t}\r\n\t};\r\n\r\n\tsmartReplyPreview = messages => {\r\n\t\tconst message = messages[0];\r\n\t\tif (message.sender.uid === this.loggedInUser.uid || message.category === CometChat.CATEGORY_CUSTOM) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * If smart-replies feature is enabled\r\n\t\t */\r\n\t\tthis.getContext()\r\n\t\t\t.FeatureRestriction.isSmartRepliesEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response === true) {\r\n\t\t\t\t\tconst smartReplyData = checkMessageForExtensionsData(message, \"smart-reply\");\r\n\t\t\t\t\tif (smartReplyData && smartReplyData.hasOwnProperty(\"error\") === false) {\r\n\t\t\t\t\t\tthis.setState({ replyPreview: message });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.setState({ replyPreview: null });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tclearEditPreview = () => {\r\n\t\tthis.setState({ messageToBeEdited: \"\" });\r\n\t};\r\n\r\n\treactToMessage = message => {\r\n\t\tthis.setState({ messageToReact: message });\r\n\r\n\t\tif (this.composerRef) {\r\n\t\t\tthis.composerRef.toggleEmojiPicker();\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\t/**\r\n\t\t * If used as standalone component\r\n\t\t */\r\n\t\tif (this.props._parent.trim().length === 0 && this.props.chatWithUser.trim().length === 0 && this.props.chatWithGroup.trim().length === 0) {\r\n\t\t\treturn (\r\n\t\t\t\t<CometChatContextProvider ref={el => (this.contextProviderRef = el)} _component={enums.CONSTANTS[\"MESSAGES_COMPONENT\"]} user={this.props.chatWithUser} group={this.props.chatWithGroup}>\r\n\t\t\t\t\t<div></div>\r\n\t\t\t\t</CometChatContextProvider>\r\n\t\t\t);\r\n\t\t} else if (this.props._parent.trim().length && Object.keys(this.getContext().item).length === 0) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tlet blockedUser = null;\r\n\t\tlet messageList = (\r\n\t\t\t<CometChatMessageList\r\n\t\t\t\tref={el => {\r\n\t\t\t\t\tthis.messageListRef = el;\r\n\t\t\t\t}}\r\n\t\t\t\tlang={this.props.lang}\r\n\t\t\t\tmessages={this.state.messageList}\r\n\t\t\t\tscrollToBottom={this.state.scrollToBottom}\r\n\t\t\t\tactionGenerated={this.actionHandler}\r\n\t\t\t/>\r\n\t\t);\r\n\t\tlet messageComposer = (\r\n\t\t\t<CometChatMessageComposer\r\n\t\t\t\tref={el => {\r\n\t\t\t\t\tthis.composerRef = el;\r\n\t\t\t\t}}\r\n\t\t\t\tmessageToBeEdited={this.state.messageToBeEdited}\r\n\t\t\t\treplyPreview={this.state.replyPreview}\r\n\t\t\t\treaction={this.reactionName}\r\n\t\t\t\tmessageToReact={this.state.messageToReact}\r\n\t\t\t\tactionGenerated={this.actionHandler} />\r\n\t\t);\r\n\r\n\t\tlet newMessageIndicator = null;\r\n\t\tif (this.state.unreadMessages.length) {\r\n\t\t\tconst unreadMessageCount = this.state.unreadMessages.length;\r\n\t\t\tconst messageText = unreadMessageCount > 1 ? `${unreadMessageCount} ${Translator.translate(\"NEW_MESSAGES\", this.props.lang)}` : `${unreadMessageCount} ${Translator.translate(\"NEW_MESSAGE\", this.props.lang)}`;\r\n\t\t\tnewMessageIndicator = (\r\n\t\t\t\t<div css={messagePaneTopStyle()} className=\"message_pane__top\">\r\n\t\t\t\t\t<div css={messagePaneBannerStyle(this.props)} className=\"message_pane__banner\">\r\n\t\t\t\t\t\t<div css={messagePaneUnreadBannerStyle()} className=\"message_pane__unread_banner__banner\" title={Translator.translate(\"JUMP\", this.props.lang)}>\r\n\t\t\t\t\t\t\t<button type=\"button\" css={messagePaneUnreadBannerMessageStyle(this.props)} className=\"message_pane__unread_banner__msg\" onClick={this.jumpToMessages}>\r\n\t\t\t\t\t\t\t\t<span css={iconArrowDownStyle()} className=\"icon--arrow-down\">\r\n\t\t\t\t\t\t\t\t\t&#x2193;{\" \"}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t{messageText}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t//if sending messages are disabled for chat wigdet in dashboard\r\n\t\tif ((this.getContext()?.type === CometChat.ACTION_TYPE.TYPE_USER && this.state.enableSendingOneOnOneMessage === false) || (this.getContext()?.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.state.enableSendingGroupMessage === false)) {\r\n\t\t\tmessageComposer = null;\r\n\t\t}\r\n\r\n\t\tif (this.getContext().type === CometChat.RECEIVER_TYPE.USER && Object.keys(this.getContext().item).length && this.getContext().item.blockedByMe) {\r\n\t\t\tmessageComposer = null;\r\n\t\t\tmessageList = null;\r\n\t\t\tblockedUser = <CometChatBlockedUser user={this.item} />;\r\n\t\t}\r\n\r\n\t\tlet liveReactionView = null;\r\n\t\tif (this.state.liveReaction) {\r\n\t\t\tliveReactionView = (\r\n\t\t\t\t<div css={reactionsWrapperStyle()}>\r\n\t\t\t\t\t<CometChatLiveReactions reaction={this.reactionName} theme={this.props.theme} lang={this.props.lang} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\tIf used as a standalone component\r\n\t\t*/\r\n\t\tlet incomingCallView = null;\r\n\t\tlet incomingDirectCallView = null;\r\n\t\tif (this.props._parent.trim().length === 0) {\r\n\t\t\tincomingCallView = <CometChatIncomingCall actionGenerated={this.actionHandler} />;\r\n\r\n\t\t\tincomingDirectCallView = <CometChatIncomingDirectCall actionGenerated={this.actionHandler} />;\r\n\t\t}\r\n\r\n\t\t//don't include it when opened in chat widget\r\n\t\tlet outgoingDirectCallView = null;\r\n\t\tlet outgoingCallView = null;\r\n\t\tif (Object.keys(this.props.widgetsettings).length === 0) {\r\n\t\t\toutgoingCallView = <CometChatOutgoingCall ref={el => (this.outgoingCallRef = el)} lang={this.props.lang} actionGenerated={this.actionHandler} />;\r\n\t\t\toutgoingDirectCallView = <CometChatOutgoingDirectCall ref={el => (this.outgoingDirectCallRef = el)} lang={this.props.lang} actionGenerated={this.actionHandler} />;\r\n\t\t}\r\n\r\n\t\tlet detailScreen = null;\r\n\t\tif (this.state.viewdetailscreen) {\r\n\t\t\tif (this.getContext().type === CometChat.ACTION_TYPE.TYPE_USER) {\r\n\t\t\t\tdetailScreen = (\r\n\t\t\t\t\t<div css={chatSecondaryStyle(this.props)} className=\"chat__secondary-view\">\r\n\t\t\t\t\t\t<CometChatUserDetails lang={this.props.lang} actionGenerated={this.actionHandler} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t} else if (this.getContext().type === CometChat.ACTION_TYPE.TYPE_GROUP) {\r\n\t\t\t\tdetailScreen = (\r\n\t\t\t\t\t<div css={chatSecondaryStyle(this.props)} className=\"chat__secondary-view\">\r\n\t\t\t\t\t\t<CometChatGroupDetails lang={this.props.lang} actionGenerated={this.actionHandler} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet threadMessageView = null;\r\n\t\tif (this.state.threadmessageview) {\r\n\t\t\tthreadMessageView = (\r\n\t\t\t\t<div css={chatSecondaryStyle(this.props)} className=\"chat__secondary-view\">\r\n\t\t\t\t\t<CometChatMessageThread activeTab={this.state.activeTab} threadItem={this.state.threadmessageitem} threadType={this.state.threadmessagetype} parentMessage={this.state.threadmessageparent} loggedInUser={this.loggedInUser} actionGenerated={this.actionHandler} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet originalImageView = null;\r\n\t\tif (this.state.viewOriginalImage) {\r\n\t\t\toriginalImageView = <CometChatImageViewer close={() => this.toggleOriginalImageView(false)} message={this.state.viewOriginalImage} />;\r\n\t\t}\r\n\r\n\t\tlet messageComponent = (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div css={chatWrapperStyle(this.props, this.state)} className=\"main__chat\" dir={Translator.getDirection(this.props.lang)}>\r\n\t\t\t\t\t<CometChatMessageHeader lang={this.props.lang} sidebar={this.props.sidebar} viewdetail={this.props.viewdetail === false ? false : true} actionGenerated={this.actionHandler} />\r\n\t\t\t\t\t{messageList}\r\n\t\t\t\t\t{liveReactionView}\r\n\t\t\t\t\t{messageComposer}\r\n\t\t\t\t\t{blockedUser}\r\n\t\t\t\t\t{newMessageIndicator}\r\n\t\t\t\t</div>\r\n\t\t\t\t<CometChatToastNotification ref={el => (this.toastRef = el)} lang={this.props.lang} />\r\n\t\t\t\t{originalImageView}\r\n\t\t\t\t{detailScreen}\r\n\t\t\t\t{threadMessageView}\r\n\t\t\t\t{incomingCallView}\r\n\t\t\t\t{outgoingCallView}\r\n\t\t\t\t{incomingDirectCallView}\r\n\t\t\t\t{outgoingDirectCallView}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\r\n\t\tlet messageWrapper = messageComponent;\r\n\t\t/*\r\n\t\tIf used as a standalone component\r\n\t\t**/\r\n\t\tif (this.props._parent.trim().length === 0) {\r\n\t\t\tmessageWrapper = (\r\n\t\t\t\t<CometChatContextProvider ref={el => (this.contextProviderRef = el)} user={this.props.chatWithUser} group={this.props.chatWithGroup} language={this.props.lang}>\r\n\t\t\t\t\t<div css={chatContainerStyle()}>{messageComponent}</div>\r\n\t\t\t\t</CometChatContextProvider>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn messageWrapper;\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatMessages.defaultProps = {\r\n\tlang: Translator.getDefaultLanguage(),\r\n\ttheme: theme,\r\n\t_parent: \"\",\r\n\twidgetsettings: {},\r\n\tchatWithUser: \"\",\r\n\tchatWithGroup: \"\",\r\n};\r\n\r\nCometChatMessages.propTypes = {\r\n\tlang: PropTypes.string,\r\n\ttheme: PropTypes.object,\r\n\t_parent: PropTypes.string,\r\n\twidgetsettings: PropTypes.object,\r\n\tchatWithUser: PropTypes.string,\r\n\tchatWithGroup: PropTypes.string,\r\n};\r\n\r\nexport {CometChatMessages};","export const wrapperStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\theight: \"100%\",\r\n\t\tboxSizing: \"border-box\",\r\n\t\tfontFamily: `${context.theme.fontFamily}`,\r\n\t\t\"*\": {\r\n\t\t\tboxSizing: \"border-box\",\r\n\t\t\tfontFamily: `${context.theme.fontFamily}`,\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const headerStyle = context => {\r\n\r\n\treturn {\r\n\t\tpadding: \"16px\",\r\n\t\twidth: \"100%\",\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.white}`,\r\n\t\tzIndex: \"1\",\r\n\t\tborderBottom: `1px solid ${context.theme.borderColor.primary}`,\r\n\t\theight: \" 69px\",\r\n\t\tdisplay: \"flex\",\r\n\t};\r\n};\r\n\r\nexport const headerWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"space-between\",\r\n        width: \"100%\",\r\n    }\r\n}\r\n\r\nexport const headerDetailStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        width: \"calc(100% - 40px)\",\r\n    }\r\n}\r\n\r\nexport const headerTitleStyle = () => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        fontSize: \"15px\",\r\n        fontWight: \"600\",\r\n        lineHeight: \"22px\",\r\n        width: \"100%\",\r\n    }\r\n}\r\n\r\nexport const headerNameStyle = () => {\r\n\r\n    return {\r\n        fontSize: \"13px\",\r\n        lineHeight: \"20px\",\r\n        width: \"100%\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n    }\r\n}\r\n\r\nexport const headerCloseStyle = (img, context) => {\r\n\r\n    return {\r\n        cursor: \"pointer\",\r\n        width: \"24px\",\r\n        height: \"24px\",\r\n        mask: `url(${img}) center center no-repeat`,\r\n        backgroundColor: `${context.theme.primaryColor}`\r\n    }\r\n}\r\n\r\nexport const messageContainerStyle = (event) => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        height: \"100%\",\r\n        overflowX: \"hidden\",\r\n        overflowY: \"auto\",\r\n        transition: \"background .3s ease-out .1s\",\r\n        width: \"100%\",\r\n        zIndex: \"100\",\r\n        minHeight: \"calc(100% - 68px)\",\r\n        order: \"2\",\r\n        \".chat__list\": {\r\n            minHeight: \"250px\",\r\n            \".list__wrapper\": {\r\n                \"::-webkit-scrollbar\": {\r\n                    display: \"none\"\r\n                },\r\n                scrollbarWidth: \"none\"\r\n            }\r\n        },\r\n    }\r\n}\r\n\r\nexport const parentMessageStyle = (message) => {\r\n\r\n    const alignment = (message.messageFrom === \"sender\") ? {\r\n        justifyContent: \"flex-end\",\r\n    } : {\r\n        justifyContent: \"flex-start\",\r\n    };\r\n\r\n    return {\r\n        padding: \"14px 16px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        ...alignment,\r\n        \".sender__message__container, .receiver__message__container\": {\r\n            maxWidth: \"100%\",\r\n            \"&:hover\": {\r\n                \".message__actions\": {\r\n                    display: \"none\"\r\n                }\r\n            }\r\n        },\r\n        \".replycount\": {\r\n            display: \"none\"\r\n        }\r\n    }\r\n}\r\n\r\nexport const messageSeparatorStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tposition: \"relative\",\r\n\t\tmargin: \"7px 16px\",\r\n\t\theight: \"15px\",\r\n\t\thr: {\r\n\t\t\tflex: \"1\",\r\n\t\t\tmargin: \"1px 0 0 0\",\r\n\t\t\tborderTop: `1px solid ${context.theme.borderColor.primary}`,\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const messageReplyStyle = () => {\r\n\r\n    return {\r\n        marginRight: \"12px\",\r\n        fontSize: \"12px\",\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/close.6d1416b0.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { \r\n\tCometChatMessageList, CometChatMessageComposer,\r\n\tCometChatSenderTextMessageBubble, CometChatReceiverTextMessageBubble,\r\n\tCometChatSenderImageMessageBubble, CometChatReceiverImageMessageBubble,\r\n\tCometChatSenderFileMessageBubble, CometChatReceiverFileMessageBubble,\r\n\tCometChatSenderAudioMessageBubble, CometChatReceiverAudioMessageBubble,\r\n\tCometChatSenderVideoMessageBubble, CometChatReceiverVideoMessageBubble,\r\n\tCometChatSenderDirectCallBubble, CometChatReceiverDirectCallBubble,\r\n\tCometChatImageViewer\r\n} from \"../\";\r\n\r\nimport {\r\n\tCometChatSenderPollMessageBubble, CometChatReceiverPollMessageBubble,\r\n\tCometChatSenderStickerBubble, CometChatReceiverStickerMessageBubble,\r\n\tCometChatSenderDocumentBubble, CometChatReceiverDocumentBubble,\r\n\tCometChatSenderWhiteboardBubble, CometChatReceiverWhiteboardBubble,\r\n} from \"../Extensions\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport { checkMessageForExtensionsData } from \"../../../util/common\";\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport { CometChatEvent } from \"../../../util/CometChatEvent\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n\twrapperStyle,\r\n\theaderStyle,\r\n\theaderWrapperStyle,\r\n\theaderDetailStyle,\r\n\theaderTitleStyle,\r\n\theaderNameStyle,\r\n\theaderCloseStyle,\r\n\tmessageContainerStyle,\r\n\tparentMessageStyle,\r\n\tmessageSeparatorStyle,\r\n\tmessageReplyStyle,\r\n} from \"./style\";\r\n\r\nimport clearIcon from \"./resources/close.svg\";\r\n\r\nclass CometChatMessageThread extends React.PureComponent {\r\n\tloggedInUser = null;\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tmessageList: [],\r\n\t\t\tscrollToBottom: true,\r\n\t\t\treplyCount: 0,\r\n\t\t\treplyPreview: null,\r\n\t\t\tmessageToBeEdited: null,\r\n\t\t\tparentMessage: props.parentMessage,\r\n\t\t\tviewOriginalImage: false,\r\n\t\t\tenableSendingOneOnOneMessage: false,\r\n\t\t\tenableSendingGroupMessage: false,\r\n\t\t\tenableHideDeletedMessages: false,\r\n\t\t};\r\n\r\n\t\tthis.composerRef = React.createRef();\r\n\t\tthis.toastRef = React.createRef();\r\n\r\n\t\tthis.loggedInUser = this.props.loggedInUser;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tCometChat.getLoggedinUser()\r\n\t\t\t.then(user => (this.loggedInUser = user))\r\n\t\t\t.catch(error => this.errorHandler(\"SOMETHING_WRONG\"));\r\n\r\n\t\tthis.enableSendingOneOnOneMessage();\r\n\t\tthis.enableSendingGroupMessage();\r\n\t\tthis.enableHideDeletedMessages();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tthis.enableSendingOneOnOneMessage();\r\n\t\tthis.enableSendingGroupMessage();\r\n\t\tthis.enableHideDeletedMessages();\r\n\r\n\t\tif (prevProps.parentMessage !== this.props.parentMessage) {\r\n\t\t\tif (prevProps.parentMessage.id !== this.props.parentMessage.id) {\r\n\t\t\t\tthis.setState({ messageList: [], scrollToBottom: true, parentMessage: this.props.parentMessage });\r\n\t\t\t} else if (prevProps.parentMessage.data !== this.props.parentMessage.data) {\r\n\t\t\t\tthis.setState({ parentMessage: this.props.parentMessage });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tenableSendingOneOnOneMessage = () => {\r\n\t\tthis.context.FeatureRestriction.isOneOnOneChatEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableSendingOneOnOneMessage) {\r\n\t\t\t\t\tthis.setState({ enableSendingOneOnOneMessage: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableSendingOneOnOneMessage !== false) {\r\n\t\t\t\t\tthis.setState({ enableSendingOneOnOneMessage: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableSendingGroupMessage = () => {\r\n\t\tthis.context.FeatureRestriction.isGroupChatEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableSendingGroupMessage) {\r\n\t\t\t\t\tthis.setState({ enableSendingGroupMessage: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableSendingGroupMessage !== false) {\r\n\t\t\t\t\tthis.setState({ enableSendingGroupMessage: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tenableHideDeletedMessages = () => {\r\n\t\tthis.context.FeatureRestriction.isHideDeletedMessagesEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableHideDeletedMessages) {\r\n\t\t\t\t\tthis.setState({ enableHideDeletedMessages: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableHideDeletedMessages !== false) {\r\n\t\t\t\t\tthis.setState({ enableHideDeletedMessages: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\terrorHandler = errorCode => {\r\n\t\tthis.toastRef.setError(errorCode);\r\n\t};\r\n\r\n\tparentMessageEdited = message => {\r\n\t\tconst parentMessage = { ...this.props.parentMessage };\r\n\r\n\t\tif (parentMessage.id === message.id) {\r\n\t\t\tconst newMessageObj = { ...message };\r\n\t\t\tthis.setState({ parentMessage: newMessageObj });\r\n\t\t}\r\n\t};\r\n\r\n\tactionHandler = (action, messages) => {\r\n\t\tswitch (action) {\r\n\t\t\tcase enums.ACTIONS[\"CUSTOM_MESSAGE_RECEIVED\"]:\r\n\t\t\tcase enums.ACTIONS[\"MESSAGE_RECEIVED\"]:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst message = messages[0];\r\n\t\t\t\t\tif (message.hasOwnProperty(\"parentMessageId\") && message.parentMessageId === this.state.parentMessage.id) {\r\n\t\t\t\t\t\tconst replyCount = this.state.parentMessage.hasOwnProperty(\"replyCount\") ? this.state.parentMessage.replyCount : 0;\r\n\t\t\t\t\t\tconst newReplyCount = replyCount + 1;\r\n\r\n\t\t\t\t\t\tlet messageObj = { ...this.state.parentMessage };\r\n\t\t\t\t\t\tlet newMessageObj = Object.assign({}, messageObj, { replyCount: newReplyCount });\r\n\t\t\t\t\t\tthis.setState({ parentMessage: newMessageObj });\r\n\r\n\t\t\t\t\t\tthis.smartReplyPreview(messages);\r\n\t\t\t\t\t\tthis.appendMessage(messages);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"MESSAGE_COMPOSED\"]:\r\n\t\t\t\t{\r\n\t\t\t\t\tconst replyCount = this.state.parentMessage.hasOwnProperty(\"replyCount\") ? this.state.parentMessage.replyCount : 0;\r\n\t\t\t\t\tconst newReplyCount = replyCount + 1;\r\n\r\n\t\t\t\t\tlet messageObj = { ...this.state.parentMessage };\r\n\t\t\t\t\tlet newMessageObj = Object.assign({}, messageObj, { replyCount: newReplyCount });\r\n\t\t\t\t\tthis.setState({ parentMessage: newMessageObj });\r\n\r\n\t\t\t\t\tthis.appendMessage(messages);\r\n\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"THREAD_MESSAGE_COMPOSED\"], messages);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"MESSAGE_SENT\"]:\r\n\t\t\tcase enums.ACTIONS[\"ERROR_IN_SENDING_MESSAGE\"]:\r\n\t\t\t\tthis.messageSent(messages);\r\n\t\t\t\tthis.props.actionGenerated(action, messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"ON_MESSAGE_READ_DELIVERED\"]:\r\n\t\t\t\tthis.updateMessages(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"ON_MESSAGE_EDITED\"]:\r\n\t\t\t\tthis.updateMessages(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"messageFetched\":\r\n\t\t\t\tthis.prependMessages(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"MESSAGES_INITIAL_FETCH\"]:\r\n\t\t\t\tthis.prependMessagesAndScrollToBottom(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"ON_MESSAGE_DELETED\"]:\r\n\t\t\t\tthis.removeMessages(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"EDIT_MESSAGE\"]:\r\n\t\t\t\tthis.editMessage(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"MESSAGE_EDITED\"]:\r\n\t\t\t\tthis.messageEdited(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"CLEAR_EDIT_PREVIEW\"]:\r\n\t\t\t\tthis.clearEditPreview();\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"DELETE_MESSAGE\"]:\r\n\t\t\t\tthis.deleteMessage(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"REACT_TO_MESSAGE\"]:\r\n\t\t\t\tthis.reactToMessage(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"VIEW_ORIGINAL_IMAGE\"]:\r\n\t\t\t\tthis.toggleOriginalImageView(messages);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\ttoggleOriginalImageView = message => {\r\n\t\tthis.setState({ viewOriginalImage: message });\r\n\t};\r\n\r\n\tmessageSent = messages => {\r\n\t\tconst message = messages[0];\r\n\t\tconst messageList = [...this.state.messageList];\r\n\t\tlet messageKey = messageList.findIndex(m => m._id === message._id);\r\n\t\tif (messageKey > -1) {\r\n\t\t\tconst newMessageObj = { ...message };\r\n\r\n\t\t\tmessageList.splice(messageKey, 1, newMessageObj);\r\n\t\t\tthis.updateMessages(messageList);\r\n\t\t}\r\n\t};\r\n\r\n\teditMessage = message => {\r\n\t\tthis.setState({ messageToBeEdited: message });\r\n\t};\r\n\r\n\tmessageEdited = message => {\r\n\t\tconst messageList = [...this.state.messageList];\r\n\t\tlet messageKey = messageList.findIndex(m => m.id === message.id);\r\n\t\tif (messageKey > -1) {\r\n\t\t\tconst messageObj = messageList[messageKey];\r\n\r\n\t\t\tconst newMessageObj = { ...messageObj, ...message };\r\n\r\n\t\t\tmessageList.splice(messageKey, 1, newMessageObj);\r\n\t\t\tthis.updateMessages(messageList);\r\n\r\n\t\t\tif (messageList.length - messageKey === 1) {\r\n\t\t\t\t//this.context.setLastMessage(newMessageObj);\r\n\t\t\t\tCometChatEvent.triggerHandler(\"updateLastMessage\", { ...newMessageObj });\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tclearEditPreview = () => {\r\n\t\tthis.setState({ messageToBeEdited: \"\" });\r\n\t};\r\n\r\n\tdeleteMessage = message => {\r\n\t\tconst messageId = message.id;\r\n\t\tCometChat.deleteMessage(messageId)\r\n\t\t\t.then(deletedMessage => {\r\n\t\t\t\tthis.removeMessages([deletedMessage]);\r\n\r\n\t\t\t\tconst messageList = [...this.state.messageList];\r\n\t\t\t\tlet messageKey = messageList.findIndex(m => m.id === message.id);\r\n\r\n\t\t\t\tif (messageList.length - messageKey === 1 && !message.replyCount) {\r\n\t\t\t\t\t//this.context.setLastMessage(deletedMessage);\r\n\t\t\t\t\tCometChatEvent.triggerHandler(\"updateLastMessage\", { ...deletedMessage });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => this.errorHandler(\"SOMETHING_WRONG\"));\r\n\t};\r\n\r\n\tsmartReplyPreview = messages => {\r\n\t\tconst message = messages[0];\r\n\r\n\t\tconst smartReplyData = checkMessageForExtensionsData(message, \"smart-reply\");\r\n\t\tif (smartReplyData && smartReplyData.hasOwnProperty(\"error\") === false) {\r\n\t\t\tthis.setState({ replyPreview: message });\r\n\t\t} else {\r\n\t\t\tthis.setState({ replyPreview: null });\r\n\t\t}\r\n\t};\r\n\r\n\t//message is received or composed & sent\r\n\tappendMessage = message => {\r\n\t\tlet messages = [...this.state.messageList];\r\n\t\tmessages = messages.concat(message);\r\n\t\tthis.setState({ messageList: messages, scrollToBottom: true });\r\n\t};\r\n\r\n\t//message status is updated\r\n\tupdateMessages = messages => {\r\n\t\tthis.setState({ messageList: messages });\r\n\t};\r\n\r\n\t//messages are fetched from backend\r\n\tprependMessages = messages => {\r\n\t\tconst messageList = [...messages, ...this.state.messageList];\r\n\t\tthis.setState({ messageList: messageList, scrollToBottom: false });\r\n\t};\r\n\r\n\t//messages are fetched, scroll to bottom\r\n\tprependMessagesAndScrollToBottom = messages => {\r\n\t\tconst messageList = [...messages, ...this.state.messageList];\r\n\t\tthis.setState({ messageList: messageList, scrollToBottom: true });\r\n\t};\r\n\r\n\t//messages are deleted\r\n\tremoveMessages = messages => {\r\n\t\tconst deletedMessage = messages[0];\r\n\t\tconst messagelist = [...this.state.messageList];\r\n\r\n\t\tlet messageKey = messagelist.findIndex(message => message.id === deletedMessage.id);\r\n\t\tif (messageKey > -1) {\r\n\t\t\t\r\n\t\t\tif (this.state.enableHideDeletedMessages) {\r\n\t\t\t\tmessagelist.splice(messageKey, 1);\r\n\t\t\t} else {\r\n\t\t\t\tlet messageObj = { ...messagelist[messageKey] };\r\n\t\t\t\tlet newMessageObj = Object.assign({}, messageObj, deletedMessage);\r\n\t\t\t\tmessagelist.splice(messageKey, 1, newMessageObj);\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({ messageList: messagelist, scrollToBottom: false });\r\n\t\t}\r\n\t};\r\n\r\n\tgetSenderMessageComponent = message => {\r\n\t\tlet component;\r\n\r\n\t\tswitch (message.type) {\r\n\t\t\tcase CometChat.MESSAGE_TYPE.TEXT:\r\n\t\t\t\tcomponent = <CometChatSenderTextMessageBubble key={message.id} message={message} actionGenerated={this.actionHandler} />;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.MESSAGE_TYPE.IMAGE:\r\n\t\t\t\tcomponent = <CometChatSenderImageMessageBubble key={message.id} message={message} actionGenerated={this.actionHandler} />;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.MESSAGE_TYPE.FILE:\r\n\t\t\t\tcomponent = <CometChatSenderFileMessageBubble key={message.id} message={message} actionGenerated={this.actionHandler} />;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.MESSAGE_TYPE.VIDEO:\r\n\t\t\t\tcomponent = <CometChatSenderVideoMessageBubble key={message.id} message={message} actionGenerated={this.actionHandler} />;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.MESSAGE_TYPE.AUDIO:\r\n\t\t\t\tcomponent = <CometChatSenderAudioMessageBubble key={message.id} message={message} actionGenerated={this.actionHandler} />;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn component;\r\n\t};\r\n\r\n\tgetReceiverMessageComponent = message => {\r\n\t\tlet component;\r\n\r\n\t\tswitch (message.type) {\r\n\t\t\tcase \"message\":\r\n\t\t\tcase CometChat.MESSAGE_TYPE.TEXT:\r\n\t\t\t\tcomponent = <CometChatReceiverTextMessageBubble key={message.id} message={message} actionGenerated={this.actionHandler} />;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.MESSAGE_TYPE.IMAGE:\r\n\t\t\t\tcomponent = <CometChatReceiverImageMessageBubble key={message.id} message={message} actionGenerated={this.actionHandler} />;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.MESSAGE_TYPE.FILE:\r\n\t\t\t\tcomponent = <CometChatReceiverFileMessageBubble key={message.id} message={message} actionGenerated={this.actionHandler} />;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.MESSAGE_TYPE.AUDIO:\r\n\t\t\t\tcomponent = <CometChatReceiverAudioMessageBubble key={message.id} message={message} actionGenerated={this.actionHandler} />;\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.MESSAGE_TYPE.VIDEO:\r\n\t\t\t\tcomponent = <CometChatReceiverVideoMessageBubble key={message.id} message={message} actionGenerated={this.actionHandler} />;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn component;\r\n\t};\r\n\r\n\tgetSenderCustomMessageComponent = message => {\r\n\t\tlet component;\r\n\r\n\t\tswitch (message.type) {\r\n\t\t\tcase enums.CUSTOM_TYPE_POLL:\r\n\t\t\t\tcomponent = <CometChatSenderPollMessageBubble key={message.id} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CUSTOM_TYPE_STICKER:\r\n\t\t\t\tcomponent = <CometChatSenderStickerBubble key={message.id} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CUSTOM_TYPE_DOCUMENT:\r\n\t\t\t\tcomponent = <CometChatSenderDocumentBubble key={message.id} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CUSTOM_TYPE_WHITEBOARD:\r\n\t\t\t\tcomponent = <CometChatSenderWhiteboardBubble key={message.id} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CUSTOM_TYPE_MEETING:\r\n\t\t\t\tcomponent = <CometChatSenderDirectCallBubble key={message.id} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn component;\r\n\t};\r\n\r\n\tgetReceiverCustomMessageComponent = message => {\r\n\t\tlet component;\r\n\t\tswitch (message.type) {\r\n\t\t\tcase enums.CUSTOM_TYPE_POLL:\r\n\t\t\t\tcomponent = <CometChatReceiverPollMessageBubble key={message.id} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CUSTOM_TYPE_STICKER:\r\n\t\t\t\tcomponent = <CometChatReceiverStickerMessageBubble key={message.id} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CUSTOM_TYPE_DOCUMENT:\r\n\t\t\t\tcomponent = <CometChatReceiverDocumentBubble key={message.id} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CUSTOM_TYPE_WHITEBOARD:\r\n\t\t\t\tcomponent = <CometChatReceiverWhiteboardBubble key={message.id} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.CUSTOM_TYPE_MEETING:\r\n\t\t\t\tcomponent = <CometChatReceiverDirectCallBubble key={message.id} message={message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn component;\r\n\t};\r\n\r\n\tgetParentMessageComponent = message => {\r\n\t\tlet component = null;\r\n\r\n\t\tswitch (message.category) {\r\n\t\t\tcase CometChat.CATEGORY_MESSAGE:\r\n\t\t\t\tif (this.loggedInUser.uid === message.sender.uid) {\r\n\t\t\t\t\tcomponent = this.getSenderMessageComponent(message);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcomponent = this.getReceiverMessageComponent(message);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase CometChat.CATEGORY_CUSTOM:\r\n\t\t\t\tif (this.loggedInUser.uid === message.sender.uid) {\r\n\t\t\t\t\tcomponent = this.getSenderCustomMessageComponent(message);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcomponent = this.getReceiverCustomMessageComponent(message);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn component;\r\n\t};\r\n\r\n\treactToMessage = message => {\r\n\t\tthis.setState({ messageToReact: message });\r\n\r\n\t\tif (this.composerRef) {\r\n\t\t\tthis.composerRef.toggleEmojiPicker();\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet parentMessage = this.getParentMessageComponent(this.state.parentMessage);\r\n\r\n\t\tlet seperator = (\r\n\t\t\t<div css={messageSeparatorStyle(this.props)}>\r\n\t\t\t\t<hr />\r\n\t\t\t</div>\r\n\t\t);\r\n\t\tif (this.state.parentMessage.hasOwnProperty(\"replyCount\")) {\r\n\t\t\tconst replyCount = this.state.parentMessage.replyCount;\r\n\t\t\tconst replyText = replyCount === 1 ? `${replyCount} ${Translator.translate(\"REPLY\", this.context.language)}` : `${replyCount} ${Translator.translate(\"REPLIES\", this.context.language)}`;\r\n\r\n\t\t\tseperator = (\r\n\t\t\t\t<div css={messageSeparatorStyle(this.context)} className=\"message__separator\">\r\n\t\t\t\t\t<span css={messageReplyStyle()} className=\"message__replies\">\r\n\t\t\t\t\t\t{replyText}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet originalImageView = null;\r\n\t\tif (this.state.viewOriginalImage) {\r\n\t\t\toriginalImageView = <CometChatImageViewer open={true} close={() => this.toggleOriginalImageView(false)} message={this.state.viewOriginalImage} lang={this.context.language} />;\r\n\t\t}\r\n\r\n\t\tlet messageComposer = (\r\n\t\t\t<CometChatMessageComposer\r\n\t\t\t\tref={el => {\r\n\t\t\t\t\tthis.composerRef = el;\r\n\t\t\t\t}}\r\n\t\t\t\tparentMessageId={this.props.parentMessage.id}\r\n\t\t\t\tmessageToBeEdited={this.state.messageToBeEdited}\r\n\t\t\t\treplyPreview={this.state.replyPreview}\r\n\t\t\t\tmessageToReact={this.state.messageToReact}\r\n\t\t\t\tactionGenerated={this.actionHandler}\r\n\t\t\t/>\r\n\t\t);\r\n\r\n\t\t//if send messages feature is disabled\r\n\t\tif ((this.context.type === CometChat.ACTION_TYPE.TYPE_USER && this.state.enableSendingOneOnOneMessage === false) || (this.context.type === CometChat.ACTION_TYPE.TYPE_GROUP && this.state.enableSendingGroupMessage === false)) {\r\n\t\t\tmessageComposer = null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div css={wrapperStyle(this.context)} className=\"thread__chat\">\r\n\t\t\t\t\t<div css={headerStyle(this.context)} className=\"chat__header\">\r\n\t\t\t\t\t\t<div css={headerWrapperStyle()} className=\"header__wrapper\">\r\n\t\t\t\t\t\t\t<div css={headerDetailStyle()} className=\"header__details\">\r\n\t\t\t\t\t\t\t\t<h6 css={headerTitleStyle()} className=\"header__title\">\r\n\t\t\t\t\t\t\t\t\t{Translator.translate(\"THREAD\", this.context.language)}\r\n\t\t\t\t\t\t\t\t</h6>\r\n\t\t\t\t\t\t\t\t<span css={headerNameStyle()} className=\"header__username\">\r\n\t\t\t\t\t\t\t\t\t{this.props.threadItem.name}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div css={headerCloseStyle(clearIcon, this.context)} className=\"header__close\" onClick={() => this.props.actionGenerated(enums.ACTIONS[\"CLOSE_THREADED_MESSAGE\"])}></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div css={messageContainerStyle()} className=\"chat__message__container\">\r\n\t\t\t\t\t\t<div css={parentMessageStyle(this.props.parentMessage)} className=\"parent__message\">\r\n\t\t\t\t\t\t\t{parentMessage}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{seperator}\r\n\t\t\t\t\t\t<CometChatMessageList messages={this.state.messageList} item={this.props.threadItem} type={this.props.threadType} scrollToBottom={this.state.scrollToBottom} parentMessageId={this.props.parentMessage.id} actionGenerated={this.actionHandler} />\r\n\t\t\t\t\t\t{messageComposer}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{originalImageView}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatMessageThread.defaultProps = {\r\n\ttheme: theme\r\n};\r\n\r\nCometChatMessageThread.propTypes = {\r\n\ttheme: PropTypes.object\r\n}\r\n\r\nexport { CometChatMessageThread };\r\n","export const msgTimestampStyle = (context, props, loggedInUser) => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        fontSize: \"11px\",\r\n        fontWeight: \"500\",\r\n        lineHeight: \"12px\",\r\n        textTransform: \"uppercase\",\r\n        color: `${context.theme.color.search}`,\r\n    }\r\n}\r\n\r\nexport const iconStyle = (img, color) => {\r\n\r\n    return {\r\n        mask: `url(${img}) center center no-repeat`,\r\n        backgroundColor: `${color}`,\r\n        display: \"inline-block\",\r\n        width: \"24px\",\r\n        height: \"24px\"\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/message-read.3891befe.svg\";","export default __webpack_public_path__ + \"static/media/message-delivered.6c5754d9.svg\";","export default __webpack_public_path__ + \"static/media/message-sent.25ee38ec.svg\";","export default __webpack_public_path__ + \"static/media/wait.5509523b.svg\";","export default __webpack_public_path__ + \"static/media/warning-small.75b6c5e1.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { getMessageSentTime } from \"../../../util/common\";\r\nimport { CometChatContext } from \"../../../util/CometChatContext\"\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport { msgTimestampStyle, iconStyle } from \"./style\";\r\n\r\nimport blueDoubleTick from \"./resources/message-read.svg\";\r\nimport greyDoubleTick from \"./resources/message-delivered.svg\";\r\nimport greyTick from \"./resources/message-sent.svg\";\r\nimport sendingTick from \"./resources/wait.svg\";\r\nimport errorTick from \"./resources/warning-small.svg\";\r\n\r\nclass CometChatReadReceipt extends React.PureComponent {\r\n\tstatic contextType = CometChatContext;\r\n\tloggedInUser;\r\n\r\n\tconstructor(props, context) {\r\n\t\tsuper(props, context);\r\n\t\tthis._isMounted = false;\r\n\t\tthis.state = {\r\n\t\t\treceipts: false,\r\n\t\t};\r\n\r\n\t\tthis.context.getLoggedinUser().then(user => {\r\n\t\t\tthis.loggedInUser = { ...user };\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis._isMounted = true;\r\n\t\tthis.toggleReadReceipts();\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tthis.toggleReadReceipts();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis._isMounted = false;\r\n\t}\r\n\r\n\ttoggleReadReceipts = () => {\r\n\t\t/**\r\n\t\t * if delivery receipts feature is disabled\r\n\t\t */\r\n\t\tthis.context.FeatureRestriction.isDeliveryReceiptsEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.receipts && this._isMounted) {\r\n\t\t\t\t\tthis.setState({ receipts: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.receipts !== false) {\r\n\t\t\t\t\tthis.setState({ receipts: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\t\r\n\t\tlet ticks,\r\n\t\t\treceiptText = null,\r\n\t\t\tdateField = null,\r\n\t\t\tcolor = null;\r\n\t\t\r\n\t\tif (this.props.message?.sender?.uid === this.loggedInUser?.uid) {\r\n\r\n\t\t\tif (this.props.message.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\t\t\tif (this.props.message.hasOwnProperty(\"error\")) {\r\n\t\t\t\t\tticks = errorTick;\r\n\t\t\t\t\treceiptText = \"ERROR\";\r\n\t\t\t\t\tdateField = this.props.message._composedAt;\r\n\t\t\t\t\tcolor = this.context.theme.color.red;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tticks = sendingTick;\r\n\t\t\t\t\treceiptText = \"SENDING\";\r\n\t\t\t\t\tdateField = this.props.message._composedAt;\r\n\t\t\t\t\tcolor = this.context.theme.secondaryTextColor;\r\n\t\t\t\t\tif (this.props.message.hasOwnProperty(\"sentAt\")) {\r\n\t\t\t\t\t\tticks = greyTick;\r\n\t\t\t\t\t\treceiptText = \"SENT\";\r\n\t\t\t\t\t\tdateField = this.props.message.sentAt;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this.props.message.hasOwnProperty(\"error\")) {\r\n\t\t\t\t\tticks = errorTick;\r\n\t\t\t\t\treceiptText = \"ERROR\";\r\n\t\t\t\t\tdateField = this.props.message._composedAt;\r\n\t\t\t\t\tcolor = this.context.theme.color.red;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tticks = sendingTick;\r\n\t\t\t\t\treceiptText = \"SENDING\";\r\n\t\t\t\t\tdateField = this.props.message._composedAt;\r\n\t\t\t\t\tcolor = this.context.theme.secondaryTextColor;\r\n\r\n\t\t\t\t\tif (this.props.message.hasOwnProperty(\"readAt\")) {\r\n\r\n\t\t\t\t\t\tticks = blueDoubleTick;\r\n\t\t\t\t\t\treceiptText = \"SEEN\";\r\n\t\t\t\t\t\tcolor = this.context.theme.primaryColor;\r\n\t\t\t\t\t\tdateField = this.props.message.readAt;\r\n\r\n\t\t\t\t\t} else if (this.props.message.hasOwnProperty(\"deliveredAt\")) {\r\n\r\n\t\t\t\t\t\tticks = greyDoubleTick;\r\n\t\t\t\t\t\treceiptText = \"DELIVERED\";\r\n\t\t\t\t\t\tdateField = this.props.message.deliveredAt;\r\n\r\n\t\t\t\t\t} else if (this.props.message.hasOwnProperty(\"sentAt\")) {\r\n\r\n\t\t\t\t\t\tticks = greyTick;\r\n\t\t\t\t\t\treceiptText = \"SENT\";\r\n\t\t\t\t\t\tdateField = this.props.message.sentAt;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tdateField = this.props.message.sentAt;\r\n\t\t}\r\n\r\n\t\t//if delivery receipts are disabled\r\n\t\tif (this.state.receipts === false) {\r\n\t\t\tticks = null;\r\n\t\t}\r\n\r\n\t\tconst receipt = ticks ? <i css={iconStyle(ticks, color)} title={Translator.translate(receiptText, this.context.language)}></i> : null;\r\n\r\n\t\tconst timestamp = getMessageSentTime(dateField, this.context.language);\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<span css={msgTimestampStyle(this.context, this.props, this.loggedInUser)} className=\"message__timestamp\">\r\n\t\t\t\t\t{timestamp}\r\n\t\t\t\t</span>\r\n\t\t\t\t{receipt}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatReadReceipt.defaultProps = {\r\n\ttheme: theme,\r\n};\r\n\r\nCometChatReadReceipt.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatReadReceipt };\r\n","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"65%\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageThumbnailStyle = () => {\r\n\r\n    return {\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        margin: \"10px 5px\",\r\n        float: \"left\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageDetailStyle = () => {\r\n\r\n    return {\r\n        flex: \"1 1\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    }\r\n}\r\n\r\nexport const nameWrapperStyle = (avatar) => {\r\n\r\n    const paddingValue = (avatar) ? {\r\n        padding: \"3px 5px\",\r\n    } : {};\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        ...paddingValue\r\n    }\r\n}\r\n\r\nexport const nameStyle = context => {\r\n\r\n\treturn {\r\n\t\tfontSize: \"11px\",\r\n\t\tcolor: `${context.theme.color.search}`,\r\n\t};\r\n};\r\n\r\nexport const messageAudioContainerStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageAudioWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"inline-block\",\r\n        borderRadius: \"12px\",\r\n        alignSelf: \"flex-start\",\r\n        \" > audio\": {\r\n            maxWidth: \"250px\",\r\n            display: \"inherit\",\r\n            outline: \"none\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        padding: \"4px 8px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"flex-start\",\r\n        height: \"25px\"\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-start\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-start\",\r\n        minHeight: \"36px\",\r\n    }\r\n}\r\n","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../\";\r\nimport { CometChatMessageReactions } from \"../Extensions\";\r\nimport { CometChatAvatar } from \"../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport { checkMessageForExtensionsData } from \"../../../util/common\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport {\r\n\tmessageContainerStyle,\r\n\tmessageWrapperStyle,\r\n\tmessageThumbnailStyle,\r\n\tmessageDetailStyle,\r\n\tnameWrapperStyle,\r\n\tnameStyle,\r\n\tmessageAudioContainerStyle,\r\n\tmessageAudioWrapperStyle,\r\n\tmessageInfoWrapperStyle,\r\n\tmessageReactionsWrapperStyle\r\n} from \"./style\";\r\n\r\nclass CometChatReceiverAudioMessageBubble extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisHovering: false,\r\n\t\t};\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n\t\t|| this.state.isHovering !== nextState.isHovering) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet avatar = null,\r\n\t\t\tname = null;\r\n\t\tif (this.props.message.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\t\tavatar = (\r\n\t\t\t\t<div css={messageThumbnailStyle()} className=\"message__thumbnail\">\r\n\t\t\t\t\t<CometChatAvatar user={this.props.message.sender} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tname = (\r\n\t\t\t\t<div css={nameWrapperStyle(avatar)} className=\"message__name__wrapper\">\r\n\t\t\t\t\t<span css={nameStyle(this.context)} className=\"message__name\">\r\n\t\t\t\t\t\t{this.props.message.sender.name}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"receiver__message__container message__audio\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t{avatar}\r\n\t\t\t\t\t<div css={messageDetailStyle()} className=\"message__details\">\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t{toolTipView}\r\n\t\t\t\t\t\t<div css={messageAudioContainerStyle()} className=\"message__audio__container\">\r\n\t\t\t\t\t\t\t<div css={messageAudioWrapperStyle()} className=\"message__audio__wrapper\">\r\n\t\t\t\t\t\t\t\t<audio controls>\r\n\t\t\t\t\t\t\t\t\t<source src={this.props.message.data.attachments[0].url} />\r\n\t\t\t\t\t\t\t\t</audio>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatReceiverAudioMessageBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatReceiverAudioMessageBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatReceiverAudioMessageBubble };\r\n","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"305px\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageThumbnailStyle = () => {\r\n\r\n    return {\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        margin: \"10px 5px\",\r\n        float: \"left\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageDetailStyle = () => {\r\n\r\n    return {\r\n        flex: \"1 1\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    }\r\n}\r\n\r\nexport const nameWrapperStyle = (avatar) => {\r\n\r\n    const paddingValue = (avatar) ? {\r\n        padding: \"3px 5px\",\r\n    } : {};\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        ...paddingValue\r\n    }\r\n}\r\n\r\nexport const nameStyle = context => {\r\n\r\n\treturn {\r\n\t\tfontSize: \"11px\",\r\n\t\tcolor: `${context.theme.color.search}`,\r\n\t};\r\n};\r\n\r\nexport const messageTxtContainerStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n        \"img\": {\r\n            width: \"35px\"\r\n        }\r\n    }\r\n}\r\n\r\nexport const messageTxtWrapperStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tborderRadius: \"12px\",\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.secondary}`,\r\n\t\tpadding: \"16px\",\r\n\t\talignSelf: \"flex-start\",\r\n\t\twidth: \"100%\",\r\n\t\tminHeight: \"106px\",\r\n\t};\r\n};\r\n\r\nexport const messageTxtTitleStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t\tcolor: `${context.theme.color.primary}`,\r\n\t};\r\n};\r\n\r\nexport const messageTxtStyle = () => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        whiteSpace: \"pre-wrap\",\r\n        wordWrap: \"break-word\",\r\n        textAlign: \"left\",\r\n        width: \"calc(100% - 30px)\",\r\n        fontSize: \"14px\",\r\n        marginLeft: \"8px\"\r\n    }\r\n}\r\n\r\nexport const messageBtnStyle = context => {\r\n\r\n\treturn {\r\n\t\tlistStyleType: \"none\",\r\n\t\tpadding: \"0\",\r\n\t\tmargin: \"16px 0 0 0\",\r\n\t\tli: {\r\n\t\t\tbackgroundColor: `${context.theme.backgroundColor.white}`,\r\n\t\t\tborderRadius: \"8px\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\tcursor: \"pointer\",\r\n\t\t\tposition: \"relative\",\r\n\t\t\tmargin: \"0\",\r\n\t\t\tpadding: \"8px\",\r\n\t\t\t\"> p\": {\r\n\t\t\t\tbackground: \"0 0\",\r\n\t\t\t\ttextAlign: \"center\",\r\n\t\t\t\tcolor: `${context.theme.primaryColor}`,\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\tdisplay: \"inline-block\",\r\n\t\t\t\tfontSize: \"14px\",\r\n\t\t\t\tfontWeight: \"600\",\r\n\t\t\t\tmargin: \"0\",\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n};\r\n\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        padding: \"4px 8px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"flex-start\",\r\n        height: \"25px\"\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-start\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-start\",\r\n        minHeight: \"36px\",\r\n    }\r\n}\r\n\r\nexport const iconStyle = (img, context) => {\r\n\treturn {\r\n\t\twidth: \"30px\",\r\n\t\theight: \"24px\",\r\n\t\tdisplay: \"inline-block\",\r\n\t\tmask: `url(${img}) center center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.primaryColor}`,\r\n\t};\r\n};\r\n","export default __webpack_public_path__ + \"static/media/video-call.a438154e.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../\";\r\nimport { CometChatMessageReactions } from \"../Extensions\";\r\nimport { CometChatAvatar } from \"../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport { checkMessageForExtensionsData } from \"../../../util/common\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n\tmessageContainerStyle,\r\n\tmessageWrapperStyle,\r\n\tmessageThumbnailStyle,\r\n\tmessageDetailStyle,\r\n\tnameWrapperStyle,\r\n\tnameStyle,\r\n\tmessageTxtContainerStyle,\r\n\tmessageTxtWrapperStyle,\r\n\tmessageTxtTitleStyle,\r\n\tmessageTxtStyle,\r\n\tmessageBtnStyle,\r\n\tmessageInfoWrapperStyle,\r\n\tmessageReactionsWrapperStyle,\r\n\ticonStyle,\r\n} from \"./style\";\r\n\r\nimport callIcon from \"./resources/video-call.svg\";\r\n\r\nclass CometChatReceiverDirectCallBubble extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisHovering: false,\r\n\t\t};\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n        || this.state.isHovering !== nextState.isHovering) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet avatar = null,\r\n\t\t\tname = null;\r\n\t\tif (this.props.message.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\t\tavatar = (\r\n\t\t\t\t<div css={messageThumbnailStyle} className=\"message__thumbnail\">\r\n\t\t\t\t\t<CometChatAvatar user={this.props.message.sender} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tname = (\r\n\t\t\t\t<div css={nameWrapperStyle(avatar)} className=\"message__name__wrapper\">\r\n\t\t\t\t\t<span css={nameStyle(this.context)} className=\"message__name\">\r\n\t\t\t\t\t\t{this.props.message.sender.name}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\tconst messageTitle = `${this.props.message.sender.name} ${Translator.translate(\"INITIATED_GROUP_CALL\", this.context.language)}`;\r\n\r\n\t\tlet callMessage = null;\r\n\t\tconst joinCallMessage = Translator.translate(\"YOU_ALREADY_ONGOING_CALL\", this.context.language);\r\n\r\n\t\tif (this.context.checkIfDirectCallIsOngoing() === enums.CONSTANTS.CALLS[\"ONGOING_CALL_SAME_GROUP\"]) {\r\n\t\t\t//ongoing call in same group\r\n\t\t\tcallMessage = (\r\n\t\t\t\t<li className=\"directcall__row\" title={joinCallMessage}>\r\n\t\t\t\t\t<p className=\"directcall__text\">{Translator.translate(\"JOIN\", this.context.language)}</p>\r\n\t\t\t\t</li>\r\n\t\t\t);\r\n\t\t} else if (this.context.checkIfDirectCallIsOngoing() === enums.CONSTANTS.CALLS[\"ONGOING_CALL_DIFF_GROUP\"]) {\r\n\t\t\t//ongoing call in different group\r\n\r\n\t\t\tcallMessage = (\r\n\t\t\t\t<li className=\"directcall__row\" title={joinCallMessage}>\r\n\t\t\t\t\t<p className=\"directcall__text\">{Translator.translate(\"JOIN\", this.context.language)}</p>\r\n\t\t\t\t</li>\r\n\t\t\t);\r\n\t\t} else if (this.context.checkIfCallIsOngoing()) {\r\n\t\t\t//ongoing call\r\n\r\n\t\t\tcallMessage = (\r\n\t\t\t\t<li className=\"directcall__row\" title={joinCallMessage}>\r\n\t\t\t\t\t<p className=\"directcall__text\">{Translator.translate(\"JOIN\", this.context.language)}</p>\r\n\t\t\t\t</li>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tcallMessage = (\r\n\t\t\t\t<li className=\"directcall__row\" onClick={() => this.props.actionGenerated(enums.ACTIONS[\"JOIN_DIRECT_CALL\"], this.props.message)}>\r\n\t\t\t\t\t<p className=\"directcall__text\">{Translator.translate(\"JOIN\", this.context.language)}</p>\r\n\t\t\t\t</li>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"receiver__message__container message__directcall\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t{avatar}\r\n\t\t\t\t\t<div css={messageDetailStyle()} className=\"message__details\">\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t{toolTipView}\r\n\t\t\t\t\t\t<div css={messageTxtContainerStyle()} className=\"message__directcall__container\">\r\n\t\t\t\t\t\t\t<div css={messageTxtWrapperStyle(this.context)} className=\"message__directcall__wrapper\">\r\n\t\t\t\t\t\t\t\t<div css={messageTxtTitleStyle(this.context)} className=\"message__directcall__title\">\r\n\t\t\t\t\t\t\t\t\t<i css={iconStyle(callIcon, this.context)} title={Translator.translate(\"VIDEO_CALL\", this.context.language)}></i>\r\n\t\t\t\t\t\t\t\t\t<p css={messageTxtStyle()} className=\"directcall__title\">\r\n\t\t\t\t\t\t\t\t\t\t{messageTitle}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<ul css={messageBtnStyle(this.context)} className=\"directcall__button\">\r\n\t\t\t\t\t\t\t\t\t{callMessage}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatReceiverDirectCallBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatReceiverDirectCallBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatReceiverDirectCallBubble };\r\n","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"65%\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageThumbnailStyle = () => {\r\n\r\n    return {\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        margin: \"10px 5px\",\r\n        float: \"left\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageDetailStyle = () => {\r\n\r\n    return {\r\n        flex: \"1 1\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    }\r\n}\r\n\r\nexport const nameWrapperStyle = (avatar) => {\r\n\r\n    const paddingValue = (avatar) ? {\r\n        padding: \"3px 5px\",\r\n    } : {};\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        ...paddingValue\r\n    }\r\n}\r\n\r\nexport const nameStyle = context => {\r\n\r\n\treturn {\r\n\t\tfontSize: \"11px\",\r\n\t\tcolor: `${context.theme.color.search}`,\r\n\t};\r\n};\r\n\r\nexport const messageFileContainerStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageFileWrapperStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"inline-block\",\r\n\t\tborderRadius: \"12px\",\r\n\t\tcolor: `${context.theme.color.secondary}`,\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.secondary}`,\r\n\t\tpadding: \"8px 16px\",\r\n\t\talignSelf: \"flex-start\",\r\n\t\twidth: \"auto\",\r\n\t\t\"> a\": {\r\n\t\t\tbackground: \"0 0\",\r\n\t\t\ttextDecoration: \"none\",\r\n\t\t\tbackgroundColor: \"transparent\",\r\n\t\t\tcolor: `${context.theme.color.primary}`,\r\n\t\t\twidth: \"auto\",\r\n\t\t\tfontSize: \"14px\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t\t\"&:visited, &:active, &:hover\": {\r\n\t\t\t\tcolor: `${context.theme.color.primary}`,\r\n\t\t\t\ttextDecoration: \"none\",\r\n\t\t\t},\r\n\t\t\tlabel: {\r\n\t\t\t\tcursor: \"pointer\",\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        padding: \"4px 8px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"flex-start\",\r\n        height: \"25px\"\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-start\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-start\",\r\n        minHeight: \"36px\",\r\n    }\r\n}\r\n\r\nexport const iconStyle = (img, context) => {\r\n\treturn {\r\n\t\twidth: \"24px\",\r\n\t\theight: \"24px\",\r\n\t\tdisplay: \"inline-block\",\r\n\t\tmask: `url(${img}) center center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.secondaryTextColor}`,\r\n\t\tmarginRight: \"8px\",\r\n\t};\r\n};\r\n","export default __webpack_public_path__ + \"static/media/file-upload.842b59e4.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../\";\r\nimport { CometChatMessageReactions } from \"../Extensions\";\r\nimport { CometChatAvatar } from \"../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport { checkMessageForExtensionsData } from \"../../../util/common\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport { \r\n\tmessageContainerStyle,\r\n\tmessageWrapperStyle,\r\n\tmessageThumbnailStyle,\r\n\tmessageDetailStyle,\r\n\tnameWrapperStyle,\r\n\tnameStyle,\r\n\tmessageFileContainerStyle,\r\n\tmessageFileWrapperStyle,\r\n\tmessageInfoWrapperStyle,\r\n\tmessageReactionsWrapperStyle,\r\n\ticonStyle\r\n} from \"./style\";\r\n\r\nimport fileIcon from \"./resources/file-upload.svg\";\r\n\r\nclass CometChatReceiverFileMessageBubble extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisHovering: false,\r\n\t\t};\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n\t\t|| this.state.isHovering !== nextState.isHovering) {\r\n\t\t\t\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet avatar = null,\r\n\t\t\tname = null;\r\n\t\tif (this.props.message.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\t\tavatar = (\r\n\t\t\t\t<div css={messageThumbnailStyle()} className=\"message__thumbnail\">\r\n\t\t\t\t\t<CometChatAvatar user={this.props.message.sender} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tname = (\r\n\t\t\t\t<div css={nameWrapperStyle(avatar)} className=\"message__name__wrapper\">\r\n\t\t\t\t\t<span css={nameStyle(this.context)} className=\"message__name\">\r\n\t\t\t\t\t\t{this.props.message.sender.name}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"receiver__message__container message__file\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t{avatar}\r\n\t\t\t\t\t<div css={messageDetailStyle()} className=\"message__details\">\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t{toolTipView}\r\n\t\t\t\t\t\t<div css={messageFileContainerStyle()} className=\"message__file__container\">\r\n\t\t\t\t\t\t\t<div css={messageFileWrapperStyle(this.context)} className=\"message__file__wrapper\">\r\n\t\t\t\t\t\t\t\t<a href={this.props.message.data.attachments[0].url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n\t\t\t\t\t\t\t\t\t<i css={iconStyle(fileIcon, this.context)}></i>\r\n\t\t\t\t\t\t\t\t\t<label>{this.props.message.data.attachments[0].name}</label>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatReceiverFileMessageBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatReceiverFileMessageBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatReceiverFileMessageBubble };\r\n","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"65%\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageThumbnailStyle = () => {\r\n\r\n    return {\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        margin: \"10px 5px\",\r\n        float: \"left\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageDetailStyle = () => {\r\n\r\n    return {\r\n        flex: \"1 1\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    }\r\n}\r\n\r\nexport const nameWrapperStyle = (avatar) => {\r\n\r\n    const paddingValue = (avatar) ? {\r\n        padding: \"3px 5px\",\r\n    } : {};\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        ...paddingValue\r\n    }\r\n}\r\n\r\nexport const nameStyle = context => {\r\n\r\n\treturn {\r\n\t\tfontSize: \"11px\",\r\n\t\tcolor: `${context.theme.color.search}`,\r\n\t};\r\n};\r\n\r\nexport const messageImgContainerStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageImgWrapperStyle = context => {\r\n\r\n\tconst mq = [...context.theme.breakPoints];\r\n\r\n\treturn {\r\n\t\tdisplay: \"inline-block\",\r\n\t\talignSelf: \"flex-start\",\r\n\t\tmaxWidth: \"300px\",\r\n\t\theight: \"200px\",\r\n\t\tcursor: \"pointer\",\r\n\t\timg: {\r\n\t\t\tborderRadius: \"8px\",\r\n\t\t\theight: \"100%\",\r\n\t\t},\r\n\t\t[`@media ${mq[1]}, ${mq[2]}`]: {\r\n\t\t\tminWidth: \"50px\",\r\n\t\t\tmaxWidth: \"150px\",\r\n\t\t\theight: \"100px\",\r\n\t\t\tpadding: \"2px 2px\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        padding: \"4px 8px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"flex-start\",\r\n        height: \"25px\"\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-start\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-start\",\r\n        minHeight: \"36px\",\r\n    }\r\n}\r\n","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../\";\r\nimport { CometChatMessageReactions } from \"../Extensions\";\r\nimport { CometChatAvatar } from \"../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport { checkMessageForExtensionsData } from \"../../../util/common\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n\tmessageContainerStyle,\r\n\tmessageWrapperStyle,\r\n\tmessageThumbnailStyle,\r\n\tmessageDetailStyle,\r\n\tnameWrapperStyle,\r\n\tnameStyle,\r\n\tmessageImgContainerStyle,\r\n\tmessageImgWrapperStyle,\r\n\tmessageInfoWrapperStyle,\r\n\tmessageReactionsWrapperStyle\r\n} from \"./style\";\r\n\r\nimport srcIcon from \"./resources/1px.png\";\r\n\r\nclass CometChatReceiverImageMessageBubble extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props, context) {\r\n\r\n\t\tsuper(props, context);\r\n\t\tthis._isMounted = false;\r\n\t\tthis.imgRef = React.createRef();\r\n\r\n\t\tthis.state = {\r\n\t\t\timageUrl: srcIcon,\r\n\t\t\timageName: Translator.translate(\"LOADING\", this.context.language),\r\n\t\t\tisHovering: false,\r\n\t\t};\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n\t\t|| this.state.imageUrl !== nextState.imageUrl \r\n\t\t|| this.state.isHovering !== nextState.isHovering) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis._isMounted = true;\r\n\t\tthis.setImage();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\r\n\t\tconst previousMessageStr = JSON.stringify(prevProps.message);\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\r\n\t\tif (previousMessageStr !== currentMessageStr) {\r\n\t\t\tthis.setImage();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis._isMounted = false;\r\n\t}\r\n\r\n\tchooseImage = thumbnailGenerationObject => {\r\n\t\tconst smallUrl = thumbnailGenerationObject[\"url_small\"];\r\n\t\tconst mediumUrl = thumbnailGenerationObject[\"url_medium\"];\r\n\r\n\t\tconst mq = window.matchMedia(this.props.theme.breakPoints[0]);\r\n\r\n\t\tlet imageToDownload = mediumUrl;\r\n\t\tif (mq.matches) {\r\n\t\t\timageToDownload = smallUrl;\r\n\t\t}\r\n\r\n\t\treturn imageToDownload;\r\n\t};\r\n\r\n\tsetImage = () => {\r\n\r\n\t\tconst thumbnailGenerationData = checkMessageForExtensionsData(this.props.message, \"thumbnail-generation\");\r\n\t\t\r\n\t\tif (thumbnailGenerationData) {\r\n\r\n\t\t\tlet imageName = \"\";\r\n\t\t\tif (this.props.message.data.attachments \r\n\t\t\t&& typeof this.props.message.data.attachments === \"object\" \r\n\t\t\t&& this.props.message.data.attachments.length) {\r\n\r\n\t\t\t\timageName = this.props.message.data.attachments[0]?.name;\r\n\t\t\t}\r\n\r\n\t\t\tconst mq = window.matchMedia(this.props.theme.breakPoints[0]);\r\n\t\t\tmq.addListener(() => {\r\n\t\t\t\tconst imageToDownload = this.chooseImage(thumbnailGenerationData);\r\n\t\t\t\tlet img = new Image();\r\n\t\t\t\timg.src = imageToDownload;\r\n\t\t\t\timg.onload = () => {\r\n\t\t\t\t\tif (this._isMounted && this.state.imageUrl !== img.src) {\r\n\t\t\t\t\t\tthis.setState({ imageUrl: img.src, imageName: imageName });\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\t\tconst imageToDownload = this.chooseImage(thumbnailGenerationData);\r\n\t\t\tthis.downloadImage(imageToDownload)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\tlet img = new Image();\r\n\t\t\t\t\timg.src = imageToDownload;\r\n\t\t\t\t\timg.onload = () => {\r\n\t\t\t\t\t\tif (this._isMounted && this.state.imageUrl !== img.src) {\r\n\t\t\t\t\t\t\tthis.setState({ imageUrl: img.src, imageName: imageName });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => console.error(error));\r\n\t\t} else {\r\n\t\t\tthis.setMessageImageUrl();\r\n\t\t}\r\n\t};\r\n\r\n\tsetMessageImageUrl = () => {\r\n\r\n\t\tif (this.props.message.data.attachments \r\n\t\t&& typeof this.props.message.data.attachments === \"object\" \r\n\t\t&& this.props.message.data.attachments.length) {\r\n\r\n\t\t\tlet img = new Image();\r\n\t\t\timg.src = this.props.message.data.attachments[0].url;\r\n\t\t\tconst imageName = this.props.message.data.attachments[0]?.name;\r\n\t\t\timg.onload = () => {\r\n\t\t\t\tif (this._isMounted && this.state.imageUrl !== img.src) {\r\n\t\t\t\t\tthis.setState({ imageUrl: img.src, imageName: imageName });\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\t\r\n\t};\r\n\r\n\tdownloadImage(imgUrl) {\r\n\t\tconst promise = new Promise((resolve, reject) => {\r\n\t\t\tconst xhr = new XMLHttpRequest();\r\n\t\t\txhr.open(\"GET\", imgUrl, true);\r\n\t\t\txhr.responseType = \"blob\";\r\n\r\n\t\t\txhr.onload = () => {\r\n\t\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\t\tif (xhr.status === 200) {\r\n\t\t\t\t\t\tthis.timer = null;\r\n\t\t\t\t\t\tresolve(xhr.response);\r\n\t\t\t\t\t} else if (xhr.status === 403) {\r\n\t\t\t\t\t\tthis.timer = setTimeout(() => {\r\n\t\t\t\t\t\t\tthis.downloadImage(imgUrl)\r\n\t\t\t\t\t\t\t\t.then(response => resolve(response))\r\n\t\t\t\t\t\t\t\t.catch(error => reject(error));\r\n\t\t\t\t\t\t}, 800);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treject(xhr.statusText);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\txhr.onerror = event => reject(new Error(\"There was a network error.\", event));\r\n\t\t\txhr.ontimeout = event => reject(new Error(\"There was a timeout error.\", event));\r\n\t\t\txhr.send();\r\n\t\t});\r\n\r\n\t\treturn promise;\r\n\t}\r\n\r\n\topen = () => {\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"VIEW_ORIGINAL_IMAGE\"], this.props.message);\r\n\t};\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet avatar = null,\r\n\t\t\tname = null;\r\n\t\tif (this.props.message.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\t\tavatar = (\r\n\t\t\t\t<div css={messageThumbnailStyle()} className=\"message__thumbnail\">\r\n\t\t\t\t\t<CometChatAvatar user={this.props.message.sender} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tname = (\r\n\t\t\t\t<div css={nameWrapperStyle(avatar)} className=\"message__name__wrapper\">\r\n\t\t\t\t\t<span css={nameStyle(this.context)} className=\"message__name\">\r\n\t\t\t\t\t\t{this.props.message.sender.name}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"receiver__message__container message__image\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t{avatar}\r\n\t\t\t\t\t<div css={messageDetailStyle(name)} className=\"message__details\">\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t{toolTipView}\r\n\t\t\t\t\t\t<div css={messageImgContainerStyle()} className=\"message__image__container\">\r\n\t\t\t\t\t\t\t<div css={messageImgWrapperStyle(this.context)} onClick={this.open} className=\"message__image__wrapper\">\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc={this.state.imageUrl}\r\n\t\t\t\t\t\t\t\t\talt={this.state.imageName}\r\n\t\t\t\t\t\t\t\t\tref={el => {\r\n\t\t\t\t\t\t\t\t\t\tthis.imgRef = el;\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatReceiverImageMessageBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatReceiverImageMessageBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatReceiverImageMessageBubble };","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXx7OqhaJO7AAAAAXRSTlPM0jRW/QAAAApJREFUeJxjYgAAAAYAAzY3fKgAAAAASUVORK5CYII=\"","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"65%\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageThumbnailStyle = () => {\r\n\r\n    return {\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        margin: \"10px 5px\",\r\n        float: \"left\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageDetailStyle = () => {\r\n\r\n    return {\r\n        flex: \"1 1\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    }\r\n}\r\n\r\nexport const nameWrapperStyle = (avatar) => {\r\n\r\n    const paddingValue = (avatar) ? {\r\n        padding: \"3px 5px\",\r\n    } : {};\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        ...paddingValue\r\n    }\r\n}\r\n\r\nexport const nameStyle = context => {\r\n\r\n\treturn {\r\n\t\tfontSize: \"11px\",\r\n\t\tcolor: `${context.theme.color.search}`,\r\n\t};\r\n};\r\n\r\nexport const messageTxtContainerStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        display: \"flex\",\r\n        alignSelf: \"flex-start\",\r\n    }\r\n}\r\n\r\nexport const messageTxtWrapperStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"inline-block\",\r\n\t\tborderRadius: \"12px\",\r\n\t\tbackgroundColor: `${context.theme.backgroundColor.secondary}`,\r\n\t\tpadding: \"8px 16px\",\r\n\t\twidth: \"auto\",\r\n\t};\r\n};\r\n\r\nexport const messageTxtStyle = (parsedMessage, emojiMessage, showVariation, context) => {\r\n\r\n    let emojiAlignmentProp = {\r\n        \" > img\": {\r\n            width: \"24px\",\r\n            height: \"24px\",\r\n            display: \"inline-block\",\r\n            verticalAlign: \"top\",\r\n            zoom: \"1\",\r\n            margin: \"0 2px\"\r\n        }\r\n    };\r\n\r\n    let emojiProp = {};\r\n\r\n    if (parsedMessage.length === emojiMessage.length && emojiMessage.length === 1) {\r\n        emojiProp = {\r\n            \"> img\": {\r\n                width: \"48px\",\r\n                height: \"48px\",\r\n            }\r\n        };\r\n    } else if (parsedMessage.length === emojiMessage.length && emojiMessage.length === 2) {\r\n        emojiProp = {\r\n            \"> img\": {\r\n                width: \"36px\",\r\n                height: \"36px\",\r\n            }\r\n        };\r\n    } else if (parsedMessage.length === emojiMessage.length && emojiMessage.length > 2) {\r\n        emojiProp = {\r\n            \"> img\": {\r\n                width: \"24px\",\r\n                height: \"24px\",\r\n            }\r\n        };\r\n    }\r\n\r\n    if (showVariation === false) {\r\n        emojiProp = {\r\n            \"> img\": {\r\n                width: \"24px\",\r\n                height: \"24px\",\r\n            }\r\n        };\r\n    }\r\n\r\n    return {\r\n        margin: \"0\",\r\n        fontSize: \"15px\",\r\n        whiteSpace: \"pre-wrap\",\r\n        wordBreak: \"break-word\",\r\n        textAlign: \"left\",\r\n        width: \"auto\",\r\n        color: `${context.theme.color.primary}`,\r\n        lineHeight: \"20px\",\r\n        fontWeight: \"400\",\r\n        \" a\": {\r\n            color: \"#0432FF\",\r\n            \"&:hover\": {\r\n                color: \"#04009D\"\r\n            }\r\n        },\r\n        \" a[href^='mailto:']\": {\r\n            color: \"#F38C00\",\r\n            \"&:hover\": {\r\n                color: \"#F36800\"\r\n            }\r\n        },\r\n        \" a[href^='tel:']\": {\r\n            color: \"#3802DA\",\r\n            \"&:hover\": {\r\n                color: \"#2D038F\"\r\n            }\r\n        },\r\n        ...emojiAlignmentProp,\r\n        ...emojiProp\r\n    }\r\n}\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        padding: \"4px 8px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"flex-start\",\r\n        height: \"25px\"\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-start\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-start\",\r\n        minHeight: \"36px\",\r\n    }\r\n}\r\n","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport twemoji from \"twemoji\";\r\nimport ReactHtmlParser from \"react-html-parser\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt, CometChatLinkPreview} from \"../\";\r\nimport { CometChatMessageReactions } from \"../Extensions\";\r\nimport { CometChatAvatar } from \"../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport { linkify, checkMessageForExtensionsData } from \"../../../util/common\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport {\r\n\tmessageContainerStyle,\r\n\tmessageWrapperStyle,\r\n\tmessageThumbnailStyle,\r\n\tmessageDetailStyle,\r\n\tnameWrapperStyle,\r\n\tnameStyle,\r\n\tmessageTxtContainerStyle,\r\n\tmessageTxtWrapperStyle,\r\n\tmessageTxtStyle,\r\n\tmessageInfoWrapperStyle,\r\n\tmessageReactionsWrapperStyle\r\n} from \"./style\";\r\n\r\nclass CometChatReceiverTextMessageBubble extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\ttranslatedMessage: \"\",\r\n\t\t\tisHovering: false,\r\n\t\t\tenableLargerSizeEmojis: false,\r\n\t\t};\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\t\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n\t\t|| this.state.isHovering !== nextState.isHovering\r\n\t\t|| this.state.translatedMessage !== nextState.translatedMessage\r\n\t\t|| this.state.enableLargerSizeEmojis !== nextState.enableLargerSizeEmojis) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.enableLargerSizeEmojis();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tconst previousMessageStr = JSON.stringify(prevProps.message);\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\r\n\t\tif (previousMessageStr !== currentMessageStr) {\r\n\t\t\tthis.setState({ translatedMessage: \"\" });\r\n\t\t}\r\n\r\n\t\tthis.enableLargerSizeEmojis();\r\n\t}\r\n\r\n\tgetMessageText = () => {\r\n\t\tlet messageText = this.props.message.text;\r\n\r\n\t\t//xss extensions data\r\n\t\tconst xssData = checkMessageForExtensionsData(this.props.message, \"xss-filter\");\r\n\t\tif (xssData && xssData.hasOwnProperty(\"sanitized_text\") && xssData.hasOwnProperty(\"hasXSS\") && xssData.hasXSS === \"yes\") {\r\n\t\t\tmessageText = xssData.sanitized_text;\r\n\t\t}\r\n\r\n\t\t//datamasking extensions data\r\n\t\tconst maskedData = checkMessageForExtensionsData(this.props.message, \"data-masking\");\r\n\t\tif (maskedData && maskedData.hasOwnProperty(\"data\") && maskedData.data.hasOwnProperty(\"sensitive_data\") && maskedData.data.hasOwnProperty(\"message_masked\") && maskedData.data.sensitive_data === \"yes\") {\r\n\t\t\tmessageText = maskedData.data.message_masked;\r\n\t\t}\r\n\r\n\t\t//profanity extensions data\r\n\t\tconst profaneData = checkMessageForExtensionsData(this.props.message, \"profanity-filter\");\r\n\t\tif (profaneData && profaneData.hasOwnProperty(\"profanity\") && profaneData.hasOwnProperty(\"message_clean\") && profaneData.profanity === \"yes\") {\r\n\t\t\tmessageText = profaneData.message_clean;\r\n\t\t}\r\n\r\n\t\tconst formattedText = linkify(messageText);\r\n\r\n\t\tconst emojiParsedMessage = twemoji.parse(formattedText, { folder: \"svg\", ext: \".svg\" });\r\n\t\tconst parsedMessage = ReactHtmlParser(emojiParsedMessage, { decodeEntities: false });\r\n\t\tconst emojiMessage = parsedMessage.filter(message => message instanceof Object && message.type === \"img\");\r\n\r\n\t\tlet showVariation = true;\r\n\t\t//if larger size emojis feature is disabled\r\n\t\tif (this.state.enableLargerSizeEmojis === false) {\r\n\t\t\tshowVariation = false;\r\n\t\t}\r\n\r\n\t\tmessageText = (\r\n\t\t\t<div css={messageTxtWrapperStyle(this.context)} className=\"message__txt__wrapper\">\r\n\t\t\t\t<p css={messageTxtStyle(parsedMessage, emojiMessage, showVariation, this.context)} className=\"message__txt\">\r\n\t\t\t\t\t{parsedMessage}\r\n\t\t\t\t\t{this.state.translatedMessage}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\treturn messageText;\r\n\t};\r\n\r\n\ttranslateMessage = message => {\r\n\t\tconst messageId = message.id;\r\n\t\tconst messageText = message.text;\r\n\r\n\t\tconst browserLanguageCode = Translator.getBrowserLanguage().toLowerCase();\r\n\t\tlet translateToLanguage = browserLanguageCode;\r\n\t\tif (browserLanguageCode.indexOf(\"-\") !== -1) {\r\n\t\t\tconst browserLanguageArray = browserLanguageCode.split(\"-\");\r\n\t\t\ttranslateToLanguage = browserLanguageArray[0];\r\n\t\t}\r\n\r\n\t\tlet translatedMessage = \"\";\r\n\t\tCometChat.callExtension(\"message-translation\", \"POST\", \"v2/translate\", {\r\n\t\t\tmsgId: messageId,\r\n\t\t\ttext: messageText,\r\n\t\t\tlanguages: [translateToLanguage],\r\n\t\t})\r\n\t\t\t.then(result => {\r\n\t\t\t\tif (result && result.hasOwnProperty(\"language_original\") && result[\"language_original\"] !== translateToLanguage) {\r\n\t\t\t\t\tif (result.hasOwnProperty(\"translations\") && result.translations.length) {\r\n\t\t\t\t\t\tconst messageTranslation = result.translations[0];\r\n\t\t\t\t\t\tif (messageTranslation.hasOwnProperty(\"message_translated\")) {\r\n\t\t\t\t\t\t\ttranslatedMessage = `\\n(${messageTranslation[\"message_translated\"]})`;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"INFO\"], [], \"SAME_LANGUAGE_MESSAGE\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setState({ translatedMessage: translatedMessage });\r\n\t\t\t})\r\n\t\t\t.catch(error => this.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\"));\r\n\t};\r\n\r\n\tenableLargerSizeEmojis = () => {\r\n\t\tthis.context.FeatureRestriction.isLargerSizeEmojisEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableLargerSizeEmojis) {\r\n\t\t\t\t\tthis.setState({ enableLargerSizeEmojis: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableLargerSizeEmojis !== false) {\r\n\t\t\t\t\tthis.setState({ enableLargerSizeEmojis: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\tactionHandler = (action, message) => {\r\n\t\tswitch (action) {\r\n\t\t\tcase enums.ACTIONS[\"REACT_TO_MESSAGE\"]:\r\n\t\t\t\tthis.props.actionGenerated(action, message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"VIEW_THREADED_MESSAGE\"]:\r\n\t\t\t\tthis.props.actionGenerated(action, message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"DELETE_MESSAGE\"]:\r\n\t\t\t\tthis.props.actionGenerated(action, message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"EDIT_MESSAGE\"]:\r\n\t\t\t\tthis.props.actionGenerated(action, message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"TRANSLATE_MESSAGE\"]:\r\n\t\t\t\tthis.translateMessage(message);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\tlet avatar = null,\r\n\t\t\tname = null;\r\n\t\tif (this.props.message.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\t\tavatar = (\r\n\t\t\t\t<div css={messageThumbnailStyle()} className=\"message__thumbnail\">\r\n\t\t\t\t\t<CometChatAvatar user={this.props.message.sender} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tname = (\r\n\t\t\t\t<div css={nameWrapperStyle(avatar)} className=\"message__name__wrapper\">\r\n\t\t\t\t\t<span css={nameStyle(this.context)} className=\"message__name\">\r\n\t\t\t\t\t\t{this.props.message.sender.name}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet messageText = this.getMessageText();\r\n\t\t//linkpreview extensions data\r\n\t\tconst linkPreviewData = checkMessageForExtensionsData(this.props.message, \"link-preview\");\r\n\t\tif (linkPreviewData && linkPreviewData.hasOwnProperty(\"links\") && linkPreviewData[\"links\"].length) {\r\n\t\t\tmessageText = <CometChatLinkPreview message={this.props.message} messageText={messageText} />;\r\n\t\t}\r\n\r\n\t\t//messagereactions extensions data\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.actionHandler} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"receiver__message__container message__text\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t{avatar}\r\n\t\t\t\t\t<div css={messageDetailStyle()} className=\"message__details\">\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t{toolTipView}\r\n\t\t\t\t\t\t<div css={messageTxtContainerStyle()} className=\"message__text__container\">\r\n\t\t\t\t\t\t\t{messageText}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatReceiverTextMessageBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatReceiverTextMessageBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatReceiverTextMessageBubble };\r\n","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"65%\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageThumbnailStyle = () => {\r\n\r\n    return {\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        margin: \"10px 5px\",\r\n        float: \"left\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageDetailStyle = () => {\r\n\r\n    return {\r\n        flex: \"1 1\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    }\r\n}\r\n\r\nexport const nameWrapperStyle = (avatar) => {\r\n\r\n    const paddingValue = (avatar) ? {\r\n        padding: \"3px 5px\",\r\n    } : {};\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        ...paddingValue\r\n    }\r\n}\r\n\r\nexport const nameStyle = context => {\r\n\r\n\treturn {\r\n\t\tfontSize: \"11px\",\r\n\t\tcolor: `${context.theme.color.search}`,\r\n\t};\r\n};\r\n\r\nexport const messageVideoContainerStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-start\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageVideoWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"inline-block\",\r\n        alignSelf: \"flex-start\",\r\n        '> video': {\r\n            maxWidth: \"250px\",\r\n            borderRadius: \"12px\",\r\n            display: \"inherit\",\r\n            outline: \"none\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-start\",\r\n        padding: \"4px 8px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"flex-start\",\r\n        height: \"25px\"\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-start\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-start\",\r\n        minHeight: \"36px\",\r\n    }\r\n}\r\n","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../\";\r\nimport { CometChatMessageReactions } from \"../Extensions\";\r\nimport { CometChatAvatar } from \"../../Shared\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport { checkMessageForExtensionsData } from \"../../../util/common\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport {\r\n\tmessageContainerStyle,\r\n\tmessageWrapperStyle,\r\n\tmessageThumbnailStyle,\r\n\tmessageDetailStyle,\r\n\tnameWrapperStyle,\r\n\tnameStyle,\r\n\tmessageVideoContainerStyle,\r\n\tmessageVideoWrapperStyle,\r\n\tmessageInfoWrapperStyle,\r\n\tmessageReactionsWrapperStyle\r\n} from \"./style\";\r\n\r\nclass CometChatReceiverVideoMessageBubble extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisHovering: false,\r\n\t\t};\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n\t\t|| this.state.isHovering !== nextState.isHovering) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet avatar = null,\r\n\t\t\tname = null;\r\n\t\tif (this.props.message.receiverType === CometChat.RECEIVER_TYPE.GROUP) {\r\n\t\t\tavatar = (\r\n\t\t\t\t<div css={messageThumbnailStyle()} className=\"message__thumbnail\">\r\n\t\t\t\t\t<CometChatAvatar user={this.props.message.sender} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tname = (\r\n\t\t\t\t<div css={nameWrapperStyle(avatar)} className=\"message__name__wrapper\">\r\n\t\t\t\t\t<span css={nameStyle(this.context)} className=\"message__name\">\r\n\t\t\t\t\t\t{this.props.message.sender.name}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"receiver__message__container message__video\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t{avatar}\r\n\t\t\t\t\t<div css={messageDetailStyle(name)} className=\"message__details\">\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t{toolTipView}\r\n\t\t\t\t\t\t<div css={messageVideoContainerStyle()} className=\"message__video__container\">\r\n\t\t\t\t\t\t\t<div css={messageVideoWrapperStyle()} className=\"message__video__wrapper\">\r\n\t\t\t\t\t\t\t\t<video controls>\r\n\t\t\t\t\t\t\t\t\t<source src={this.props.message.data.attachments[0].url} />\r\n\t\t\t\t\t\t\t\t</video>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatReceiverVideoMessageBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatReceiverVideoMessageBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatReceiverVideoMessageBubble };\r\n","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"65%\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageAudioWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"inline-block\",\r\n        borderRadius: \"12px\",\r\n        alignSelf: \"flex-end\",\r\n        ' > audio': {\r\n            maxWidth: \"250px\",\r\n            display: \"inherit\",\r\n            outline: \"none\",        \r\n        }\r\n    }\r\n}\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n        justifyContent: \"flex-end\",\r\n        alignItems: \"center\",\r\n        height: \"25px\"\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-end\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-end\",\r\n        minHeight: \"36px\",\r\n    }\r\n}\r\n","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\"\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../\";\r\nimport { CometChatMessageReactions } from \"../Extensions\";\r\n\r\nimport { checkMessageForExtensionsData, getMessageFileMetadata } from \"../../../util/common\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport {\r\n\tmessageContainerStyle,\r\n\tmessageWrapperStyle,\r\n\tmessageAudioWrapperStyle,\r\n\tmessageInfoWrapperStyle,\r\n\tmessageReactionsWrapperStyle\r\n} from \"./style\";\r\n\r\nclass CometChatSenderAudioMessageBubble extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisHovering: false,\r\n\t\t\tfileData: {},\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\tconst fileData = this.getFileData();\r\n\t\tthis.setState({ fileData: fileData });\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n\t\t|| this.state.isHovering !== nextState.isHovering \r\n\t\t|| this.state.fileData !== nextState.fileData) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\r\n\t\tconst previousMessageStr = JSON.stringify(prevProps.message);\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\r\n\t\tif (previousMessageStr !== currentMessageStr) {\r\n\t\t\tconst fileData = this.getFileData();\r\n\r\n\t\t\tconst previousfileData = JSON.stringify(this.state.fileData);\r\n\t\t\tconst currentfileData = JSON.stringify(fileData);\r\n\r\n\t\t\tif (previousfileData !== currentfileData) {\r\n\t\t\t\tthis.setState({ fileData: fileData });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetFileData = () => {\r\n\r\n\t\tconst metadataKey = enums.CONSTANTS[\"FILE_METADATA\"];\r\n\t\tconst fileMetadata = getMessageFileMetadata(this.props.message, metadataKey);\r\n\t\t\r\n\t\tif (fileMetadata instanceof Blob) {\r\n\t\t\treturn { fileName: fileMetadata[\"name\"] };\r\n\t\t} else if (this.props.message.data.hasOwnProperty(\"attachments\") && this.props.message.data.attachments.length) {\r\n\t\t\tconst fileName = this.props.message.data.attachments[0]?.name;\r\n\t\t\tconst fileUrl = this.props.message.data.attachments[0]?.url;\r\n\r\n\t\t\treturn { fileName, fileUrl: fileUrl };\r\n\t\t}\r\n\t};\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\trender() {\r\n\t\tif (!Object.keys(this.state.fileData).length) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"sender__message__container message__audio\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t{toolTipView}\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t<div css={messageAudioWrapperStyle()} className=\"message__audio__wrapper\">\r\n\t\t\t\t\t\t<audio controls src={this.state.fileData?.fileUrl}></audio>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatSenderAudioMessageBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatSenderAudioMessageBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatSenderAudioMessageBubble };\r\n","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"305px\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageTxtWrapperStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"inline-block\",\r\n\t\tborderRadius: \"12px\",\r\n\t\tbackgroundColor: `${context.theme.primaryColor}`,\r\n\t\tcolor: `${context.theme.color.white}`,\r\n\t\tpadding: \"16px\",\r\n\t\talignSelf: \"flex-end\",\r\n\t\twidth: \"auto\",\r\n\t\tminHeight: \"106px\",\r\n\t};\r\n};\r\n\r\nexport const messageTxtContainerStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        \"img\": {\r\n            width: \"35px\"\r\n        }\r\n    }\r\n}\r\n\r\nexport const messageTxtStyle = () => {\r\n\r\n    return {\r\n\t\t\tmargin: \"0\",\r\n\t\t\twhiteSpace: \"pre-wrap\",\r\n\t\t\twordBreak: \"break-word\",\r\n\t\t\ttextAlign: \"left\",\r\n\t\t\twidth: \"calc(100% - 30px)\",\r\n\t\t\tfontSize: \"14px\",\r\n\t\t\tmarginLeft: \"8px\",\r\n\t\t};\r\n}\r\n\r\nexport const messageBtnStyle = context => {\r\n\r\n\treturn {\r\n\t\tlistStyleType: \"none\",\r\n\t\tpadding: \"0\",\r\n\t\tmargin: \"16px 0 0 0\",\r\n\t\twidth: \"100%\",\r\n\t\tli: {\r\n\t\t\tbackgroundColor: `${context.theme.backgroundColor.white}`,\r\n\t\t\tborderRadius: \"8px\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\tposition: \"relative\",\r\n\t\t\tmargin: \"0\",\r\n\t\t\tpadding: \"8px\",\r\n\t\t\tcursor: \"pointer\",\r\n\t\t\t\"> p\": {\r\n\t\t\t\tbackground: \"0 0\",\r\n\t\t\t\ttextAlign: \"center\",\r\n\t\t\t\tcolor: `${context.theme.primaryColor}`,\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\tfontWeight: \"600\",\r\n\t\t\t\tdisplay: \"inline-block\",\r\n\t\t\t\tfontSize: \"14px\",\r\n\t\t\t\tmargin: \"0\",\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n        justifyContent: \"flex-end\",\r\n        alignItems: \"center\",\r\n\theight: \"25px\"\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-end\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-end\",\r\n\t\tminHeight: \"36px\",\r\n    }\r\n}\r\n\r\nexport const iconStyle = (img, context) => {\r\n\treturn {\r\n\t\twidth: \"30px\",\r\n\t\theight: \"24px\",\r\n\t\tdisplay: \"inline-block\",\r\n\t\tmask: `url(${img}) center center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.color.white}`,\r\n\t};\r\n};\r\n","export default __webpack_public_path__ + \"static/media/video-call.a438154e.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../\";\r\nimport { CometChatMessageReactions } from \"../Extensions\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport { checkMessageForExtensionsData } from \"../../../util/common\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n    messageContainerStyle,\r\n    messageWrapperStyle,\r\n    messageTxtWrapperStyle,\r\n    messageTxtContainerStyle,\r\n    messageTxtStyle,\r\n    messageBtnStyle,\r\n    messageInfoWrapperStyle,\r\n    messageReactionsWrapperStyle,\r\n    iconStyle\r\n} from \"./style\";\r\n\r\nimport callIcon from \"./resources/video-call.svg\";\r\n\r\nclass CometChatSenderDirectCallBubble extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisHovering: false,\r\n\t\t};\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n        || this.state.isHovering !== nextState.isHovering) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\tlet callMessage = null;\r\n\t\tconst joinCallMessage = Translator.translate(\"YOU_ALREADY_ONGOING_CALL\", this.context.language);\r\n\r\n\t\tif (this.context.checkIfDirectCallIsOngoing() === enums.CONSTANTS.CALLS[\"ONGOING_CALL_SAME_GROUP\"]) {\r\n\t\t\t//ongoing call in same group\r\n\t\t\tcallMessage = (\r\n\t\t\t\t<li className=\"directcall__row\" title={joinCallMessage}>\r\n\t\t\t\t\t<p className=\"directcall__text\">{Translator.translate(\"JOIN\", this.context.language)}</p>\r\n\t\t\t\t</li>\r\n\t\t\t);\r\n\t\t} else if (this.context.checkIfDirectCallIsOngoing() === enums.CONSTANTS.CALLS[\"ONGOING_CALL_DIFF_GROUP\"]) {\r\n\t\t\t//ongoing call in different group\r\n\r\n\t\t\tcallMessage = (\r\n\t\t\t\t<li className=\"directcall__row\" title={joinCallMessage}>\r\n\t\t\t\t\t<p className=\"directcall__text\">{Translator.translate(\"JOIN\", this.context.language)}</p>\r\n\t\t\t\t</li>\r\n\t\t\t);\r\n\t\t} else if (this.context.checkIfCallIsOngoing()) {\r\n\t\t\t//ongoing call\r\n\r\n\t\t\tcallMessage = (\r\n\t\t\t\t<li className=\"directcall__row\" title={joinCallMessage}>\r\n\t\t\t\t\t<p className=\"directcall__text\">{Translator.translate(\"JOIN\", this.context.language)}</p>\r\n\t\t\t\t</li>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tcallMessage = (\r\n\t\t\t\t<li className=\"directcall__row\" onClick={() => this.props.actionGenerated(enums.ACTIONS[\"JOIN_DIRECT_CALL\"], this.props.message)}>\r\n\t\t\t\t\t<p className=\"directcall__text\">{Translator.translate(\"JOIN\", this.context.language)}</p>\r\n\t\t\t\t</li>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst messageTitle = Translator.translate(\"YOU_INITIATED_GROUP_CALL\", this.context.language);\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"sender__message__container message__directcall\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t{toolTipView}\r\n\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t<div css={messageTxtWrapperStyle(this.context)} className=\"message__directcall__wrapper\">\r\n\t\t\t\t\t\t<div css={messageTxtContainerStyle()} className=\"message__directcall__container\">\r\n\t\t\t\t\t\t\t<i css={iconStyle(callIcon, this.context)} alt={Translator.translate(\"VIDEO_CALL\", this.context.language)}></i>\r\n\t\t\t\t\t\t\t<p css={messageTxtStyle()} className=\"directcall__title\">\r\n\t\t\t\t\t\t\t\t{messageTitle}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ul css={messageBtnStyle(this.context)} className=\"directcall__button\">\r\n\t\t\t\t\t\t\t{callMessage}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatSenderDirectCallBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatSenderDirectCallBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatSenderDirectCallBubble };","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"65%\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageFileWrapper = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"inline-block\",\r\n\t\tborderRadius: \"12px\",\r\n\t\tbackgroundColor: `${context.theme.primaryColor}`,\r\n\t\tcolor: `${context.theme.color.white}`,\r\n\t\tpadding: \"8px 16px\",\r\n\t\talignSelf: \"flex-end\",\r\n\t\tmaxWidth: \"100%\",\r\n\t\t\".message__file\": {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tbackground: \"0 0\",\r\n\t\t\ttextDecoration: \"none\",\r\n\t\t\tcolor: `${context.theme.color.white}`,\r\n\t\t\tmaxWidth: \"100%\",\r\n\t\t\tfontSize: \"14px\",\r\n\t\t\t\"&:visited, &:active, &:hover\": {\r\n\t\t\t\tcolor: `${context.theme.color.white}`,\r\n\t\t\t\ttextDecoration: \"none\",\r\n\t\t\t},\r\n\t\t\t\"> p\": {\r\n\t\t\t\tmargin: \"0\",\r\n\t\t\t\twhiteSpace: \"pre-wrap\",\r\n\t\t\t\twordBreak: \"break-word\",\r\n\t\t\t\ttextAlign: \"left\",\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\tfontSize: \"14px\",\r\n\t\t\t\tmarginLeft: \"8px\",\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n        justifyContent: \"flex-end\",\r\n        alignItems: \"center\",\r\n\theight: \"25px\",\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-end\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-end\",\r\n\t\tminHeight: \"36px\",\r\n    }\r\n}\r\n\r\nexport const iconStyle = (img, context) => {\r\n\treturn {\r\n\t\twidth: \"24px\",\r\n\t\theight: \"24px\",\r\n\t\tdisplay: \"inline-block\",\r\n\t\tmask: `url(${img}) center center no-repeat`,\r\n\t\tbackgroundColor: `${context.theme.color.white}`,\r\n\t\tflexShrink: \"0\"\r\n\t};\r\n};\r\n","export default __webpack_public_path__ + \"static/media/file-upload.842b59e4.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../\";\r\nimport { CometChatMessageReactions } from \"../Extensions\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport { checkMessageForExtensionsData, getMessageFileMetadata } from \"../../../util/common\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport {\r\n\tmessageContainerStyle,\r\n\tmessageWrapperStyle,\r\n\tmessageFileWrapper,\r\n\tmessageInfoWrapperStyle,\r\n\tmessageReactionsWrapperStyle,\r\n\ticonStyle\r\n} from \"./style\";\r\n\r\n\r\nimport fileIcon from \"./resources/file-upload.svg\";\r\n\r\nclass CometChatSenderFileMessageBubble extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisHovering: false,\r\n\t\t\tfileData: {},\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tconst fileData = this.getFileData();\r\n\t\tthis.setState({ fileData: fileData });\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n\t\t|| this.state.isHovering !== nextState.isHovering \r\n\t\t|| this.state.fileData !== nextState.fileData) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\r\n\t\tconst previousMessageStr = JSON.stringify(prevProps.message);\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\r\n\t\tif (previousMessageStr !== currentMessageStr) {\r\n\r\n\t\t\tconst fileData = this.getFileData();\r\n\t\t\t\r\n\t\t\tconst previousfileData = JSON.stringify(this.state.fileData);\r\n\t\t\tconst currentfileData = JSON.stringify(fileData);\r\n\t\t\t\r\n\t\t\tif (previousfileData !== currentfileData) {\r\n\t\t\t\tthis.setState({ fileData: fileData });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\tgetFileData = () => {\r\n\t\t\r\n\t\tconst metadataKey = enums.CONSTANTS[\"FILE_METADATA\"];\r\n\t\tconst fileMetadata = getMessageFileMetadata(this.props.message, metadataKey);\r\n\r\n\t\tif (fileMetadata instanceof Blob) {\r\n\t\t\t\r\n\t\t\treturn { fileName: fileMetadata[\"name\"] };\r\n\r\n\t\t} else if (this.props.message.data.attachments \r\n\t\t&& typeof this.props.message.data.attachments === \"object\" \r\n\t\t&& this.props.message.data.attachments.length) {\r\n\r\n\t\t\tconst fileName = this.props.message.data.attachments[0]?.name;\r\n\t\t\tconst fileUrl = this.props.message.data.attachments[0]?.url;\r\n\r\n\t\t\treturn { fileName, fileUrl: fileUrl };\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tif (!Object.keys(this.state.fileData).length) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\tlet fileMessage = null;\r\n\t\tif (this.state.fileData.hasOwnProperty(\"fileUrl\")) {\r\n\t\t\tfileMessage = (\r\n\t\t\t\t<a href={this.state.fileData?.fileUrl} target=\"_blank\" rel=\"noopener noreferrer\" className=\"message__file\">\r\n\t\t\t\t\t<i css={iconStyle(fileIcon, this.context)}></i>\r\n\t\t\t\t\t<p>{this.state.fileData?.fileName}</p>\r\n\t\t\t\t</a>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tfileMessage = (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<i css={iconStyle(fileIcon, this.context)}></i>\r\n\t\t\t\t\t<p>{this.state.fileData?.fileName}</p>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"sender__message__container message__file\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t{toolTipView}\r\n\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t<div css={messageFileWrapper(this.context)} className=\"message__file__wrapper\">\r\n\t\t\t\t\t\t<div className=\"message__file\">{fileMessage}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatSenderFileMessageBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatSenderFileMessageBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatSenderFileMessageBubble };","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"65%\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageImgWrapper = context => {\r\n\r\n\tconst mq = [...context.theme.breakPoints];\r\n\r\n\treturn {\r\n\t\tdisplay: \"inline-block\",\r\n\t\talignSelf: \"flex-end\",\r\n\t\tmaxWidth: \"300px\",\r\n\t\theight: \"200px\",\r\n\t\tcursor: \"pointer\",\r\n\t\tflexShrink: \"0\",\r\n\t\timg: {\r\n\t\t\tborderRadius: \"8px\",\r\n\t\t\theight: \"100%\",\r\n\t\t},\r\n\t\t[`@media ${mq[1]}, ${mq[2]}`]: {\r\n\t\t\tminWidth: \"50px\",\r\n\t\t\tmaxWidth: \"150px\",\r\n\t\t\theight: \"100px\",\r\n\t\t\tpadding: \"2px 2px\",\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n        justifyContent: \"flex-end\",\r\n        alignItems: \"center\",\r\n        height: \"25px\",\r\n        padding: \"4px 8px\",\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-end\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-end\",\r\n        minHeight: \"36px\",\r\n    }\r\n}\r\n","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../\";\r\nimport { CometChatMessageReactions } from \"../Extensions\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport { checkMessageForExtensionsData, getMessageFileMetadata } from \"../../../util/common\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n\tmessageContainerStyle,\r\n\tmessageWrapperStyle,\r\n\tmessageImgWrapper,\r\n\tmessageInfoWrapperStyle,\r\n\tmessageReactionsWrapperStyle\r\n} from \"./style\";\r\n\r\nimport srcIcon from \"./resources/1px.png\";\r\n\r\nclass CometChatSenderImageMessageBubble extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\ttimer = null;\r\n\r\n\tconstructor(props, context) {\r\n\r\n\t\tsuper(props, context);\r\n\t\tthis._isMounted = false;\r\n\t\tthis.imgRef = React.createRef();\r\n\r\n\t\tthis.state = {\r\n\t\t\timageUrl: srcIcon,\r\n\t\t\timageName: Translator.translate(\"LOADING\", context.language),\r\n\t\t\tisHovering: false,\r\n\t\t};\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n\t\t|| this.state.imageUrl !== nextState.imageUrl \r\n\t\t|| this.state.isHovering !== nextState.isHovering) {\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tthis._isMounted = true;\r\n\t\tthis.setImage();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\r\n\t\tconst previousMessageStr = JSON.stringify(prevProps.message);\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\r\n\t\tif (previousMessageStr !== currentMessageStr) {\r\n\t\t\tthis.setImage();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis._isMounted = false;\r\n\t}\r\n\r\n\tchooseImage = thumbnailGenerationObject => {\r\n\t\tconst smallUrl = thumbnailGenerationObject[\"url_small\"];\r\n\t\tconst mediumUrl = thumbnailGenerationObject[\"url_medium\"];\r\n\r\n\t\tconst mq = window.matchMedia(this.props.theme.breakPoints[0]);\r\n\r\n\t\tlet imageToDownload = mediumUrl;\r\n\t\tif (mq.matches) {\r\n\t\t\timageToDownload = smallUrl;\r\n\t\t}\r\n\r\n\t\treturn imageToDownload;\r\n\t};\r\n\r\n\tsetImage = () => {\r\n\r\n\t\tconst thumbnailGenerationData = checkMessageForExtensionsData(this.props.message, \"thumbnail-generation\");\r\n\t\tif (thumbnailGenerationData) {\r\n\r\n\t\t\tlet imageName = \"\";\r\n\t\t\tif (this.props.message.data.attachments \r\n\t\t\t&& typeof this.props.message.data.attachments === \"object\" \r\n\t\t\t&& this.props.message.data.attachments.length) {\r\n\t\t\t\timageName = this.props.message.data.attachments[0]?.name;\r\n\t\t\t}\r\n\r\n\t\t\tconst mq = window.matchMedia(this.props.theme.breakPoints[0]);\r\n\t\t\tmq.addListener(() => {\r\n\r\n\t\t\t\tconst imageToDownload = this.chooseImage(thumbnailGenerationData);\r\n\t\t\t\tlet img = new Image();\r\n\t\t\t\timg.src = imageToDownload;\r\n\t\t\t\timg.onload = () => {\r\n\t\t\t\t\tif (this._isMounted && this.state.imageUrl !== img.src) {\r\n\t\t\t\t\t\tthis.setState({ imageUrl: img.src, imageName: imageName });\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\t\tconst imageToDownload = this.chooseImage(thumbnailGenerationData);\r\n\t\t\tthis.downloadImage(imageToDownload)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\tlet img = new Image();\r\n\t\t\t\t\timg.src = imageToDownload;\r\n\t\t\t\t\timg.onload = () => {\r\n\t\t\t\t\t\tif (this._isMounted && this.state.imageUrl !== img.src) {\r\n\t\t\t\t\t\t\tthis.setState({ imageUrl: img.src, imageName: imageName });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => console.error(error));\r\n\t\t} else {\r\n\t\t\tthis.setMessageImageUrl();\r\n\t\t}\r\n\t};\r\n\r\n\tsetMessageImageUrl = () => {\r\n\r\n\t\tconst metadataKey = enums.CONSTANTS[\"FILE_METADATA\"];\r\n\t\tconst fileMetadata = getMessageFileMetadata(this.props.message, metadataKey);\r\n\t\t\r\n\t\tlet img = new Image();\r\n\t\tlet imageName;\r\n\t\tif (fileMetadata instanceof Blob) {\r\n\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.onload = function() {\r\n\t\t\t\timg.src = reader.result;\r\n\t\t\t};\r\n\t\t\timageName = fileMetadata[\"name\"];\r\n\t\t\treader.readAsDataURL(fileMetadata);\r\n\r\n\t\t} else if (this.props.message.data.attachments \r\n\t\t\t&& typeof this.props.message.data.attachments === \"object\" \r\n\t\t\t&& this.props.message.data.attachments.length) {\r\n\r\n\t\t\tconst fileUrl = this.props.message.data.attachments[0]?.url;\r\n\t\t\timageName = this.props.message.data.attachments[0]?.name;\r\n\t\t\timg.src = fileUrl;\r\n\t\t}\r\n\r\n\t\timg.onload = () => {\r\n\t\t\t//only if there is a change in the image path, update state\r\n\t\t\tif (this._isMounted && this.state.imageUrl !== img.src) {\r\n\t\t\t\tthis.setState({ imageUrl: img.src, imageName: imageName });\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tdownloadImage(imgUrl) {\r\n\t\tconst promise = new Promise((resolve, reject) => {\r\n\t\t\tconst xhr = new XMLHttpRequest();\r\n\t\t\txhr.open(\"GET\", imgUrl, true);\r\n\t\t\txhr.responseType = \"blob\";\r\n\r\n\t\t\txhr.onload = () => {\r\n\t\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\t\tif (xhr.status === 200) {\r\n\t\t\t\t\t\tthis.timer = null;\r\n\t\t\t\t\t\tresolve(imgUrl);\r\n\t\t\t\t\t} else if (xhr.status === 403) {\r\n\t\t\t\t\t\tthis.timer = setTimeout(() => {\r\n\t\t\t\t\t\t\tthis.downloadImage(imgUrl)\r\n\t\t\t\t\t\t\t\t.then(response => resolve(imgUrl))\r\n\t\t\t\t\t\t\t\t.catch(error => reject(error));\r\n\t\t\t\t\t\t}, 800);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treject(xhr.statusText);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\txhr.onerror = event => reject(new Error(\"There was a network error.\", event));\r\n\t\t\txhr.ontimeout = event => reject(new Error(\"There was a timeout error.\", event));\r\n\t\t\txhr.send();\r\n\t\t});\r\n\r\n\t\treturn promise;\r\n\t}\r\n\r\n\topen = () => {\r\n\t\tthis.props.actionGenerated(enums.ACTIONS[\"VIEW_ORIGINAL_IMAGE\"], this.props.message);\r\n\t};\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\trender() {\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"sender__message__container message__image\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t{toolTipView}\r\n\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t<div css={messageImgWrapper(this.context)} onClick={this.open} className=\"message__img__wrapper\">\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tsrc={this.state.imageUrl}\r\n\t\t\t\t\t\t\talt={this.state.imageName}\r\n\t\t\t\t\t\t\tref={el => {\r\n\t\t\t\t\t\t\t\tthis.imgRef = el;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatSenderImageMessageBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatSenderImageMessageBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatSenderImageMessageBubble };\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXx7OqhaJO7AAAAAXRSTlPM0jRW/QAAAApJREFUeJxjYgAAAAYAAzY3fKgAAAAASUVORK5CYII=\"","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"65%\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n        flex: \"1 1\"\r\n    }\r\n}\r\n\r\nexport const messageTxtWrapperStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"inline-block\",\r\n\t\tborderRadius: \"12px\",\r\n\t\tbackgroundColor: `${context.theme.primaryColor}`,\r\n\t\tcolor: `${context.theme.color.white}`,\r\n\t\tpadding: \"8px 16px\",\r\n\t\twidth: \"auto\",\r\n\t};\r\n};\r\n\r\nexport const messageTxtStyle = (props, parsedMessage, emojiMessage, showVariation) => {\r\n\r\n    let emojiAlignmentProp = {\r\n        \" > img\": {\r\n            width: \"24px\",\r\n            height: \"24px\",\r\n            display: \"inline-block\",\r\n            verticalAlign: \"top\",\r\n            zoom: \"1\",\r\n            margin: \"0 2px\"\r\n        }\r\n    };\r\n\r\n    let emojiProp = {};\r\n    let heightProp = {};\r\n\r\n    if (parsedMessage.length === emojiMessage.length && emojiMessage.length === 1) {\r\n        emojiProp = {\r\n           \"> img\": {\r\n                width: \"48px\",\r\n                height: \"48px\",\r\n           }\r\n        };\r\n        heightProp = {\r\n            height: \"48px\",\r\n        };\r\n    } else if (parsedMessage.length === emojiMessage.length && emojiMessage.length === 2) {\r\n        emojiProp = {\r\n            \"> img\": {\r\n                width: \"36px\",\r\n                height: \"36px\",\r\n            }\r\n        };\r\n        heightProp = {\r\n            height: \"36px\",\r\n        };\r\n    } else if (parsedMessage.length === emojiMessage.length && emojiMessage.length > 2) {\r\n        emojiProp = {\r\n            \"> img\": {\r\n                width: \"24px\",\r\n                height: \"24px\",\r\n            }\r\n        };\r\n    }\r\n\r\n    if (showVariation === false) {\r\n        emojiProp = {\r\n            \"> img\": {\r\n                width: \"24px\",\r\n                height: \"24px\",\r\n            }\r\n        };\r\n    }\r\n\r\n    return {\r\n        margin: \"0\",\r\n        fontSize: \"14px\",\r\n        whiteSpace: \"pre-wrap\",\r\n        wordBreak: \"break-word\",\r\n        textAlign: \"left\",\r\n        width: \"auto\",\r\n        ...heightProp,\r\n        \" a\": {\r\n            color: \"#0432FF\",\r\n            \"&:hover\": {\r\n                color: \"#04009D\"\r\n            }\r\n        },\r\n        \" a[href^='mailto:']\": {\r\n            color: \"#F38C00\",\r\n            \"&:hover\": {\r\n                color: \"#F36800\"\r\n            }\r\n        },\r\n        \" a[href^='tel:']\": {\r\n            color: \"#3802DA\",\r\n            \"&:hover\": {\r\n                color: \"#2D038F\"\r\n            }\r\n        },\r\n        ...emojiAlignmentProp,\r\n        ...emojiProp\r\n    }\r\n}\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n        justifyContent: \"flex-end\",\r\n        alignItems: \"center\",\r\n        height: \"25px\",\r\n        padding: \"4px 8px\",\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-end\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-end\",\r\n        minHeight: \"36px\"\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport twemoji from \"twemoji\";\r\nimport ReactHtmlParser from \"react-html-parser\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt, CometChatLinkPreview } from \"../\";\r\nimport { CometChatMessageReactions } from \"../Extensions\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport { linkify, checkMessageForExtensionsData } from \"../../../util/common\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport {\r\n\tmessageContainerStyle,\r\n\tmessageWrapperStyle,\r\n\tmessageTxtWrapperStyle,\r\n\tmessageTxtStyle,\r\n\tmessageInfoWrapperStyle,\r\n\tmessageReactionsWrapperStyle,\r\n} from \"./style\";\r\n\r\nclass CometChatSenderTextMessageBubble extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.messageTextRef = React.createRef();\r\n\r\n\t\tthis.state = {\r\n\t\t\ttranslatedMessage: \"\",\r\n\t\t\tisHovering: false,\r\n\t\t\tenableLargerSizeEmojis: false,\r\n\t\t};\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\t\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\t\t\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n\t\t|| this.state.isHovering !== nextState.isHovering\r\n\t\t|| this.state.translatedMessage !== nextState.translatedMessage\r\n\t\t|| this.state.enableLargerSizeEmojis !== nextState.enableLargerSizeEmojis) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tthis.enableLargerSizeEmojis();\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\t\r\n\t\tif (prevProps.message !== this.props.message) {\r\n\r\n\t\t\tthis.setState({ translatedMessage: \"\" });\r\n\t\t}\r\n\r\n\t\tthis.enableLargerSizeEmojis();\r\n\t}\r\n\r\n\tgetMessageText = () => {\r\n\t\tlet messageText = this.props.message.text;\r\n\r\n\t\t//xss extensions data\r\n\t\tconst xssData = checkMessageForExtensionsData(this.props.message, \"xss-filter\");\r\n\t\tif (xssData && xssData.hasOwnProperty(\"sanitized_text\") && xssData.hasOwnProperty(\"hasXSS\") && xssData.hasXSS === \"yes\") {\r\n\t\t\tmessageText = xssData.sanitized_text;\r\n\t\t}\r\n\r\n\t\t//datamasking extensions data\r\n\t\tconst maskedData = checkMessageForExtensionsData(this.props.message, \"data-masking\");\r\n\t\tif (maskedData && maskedData.hasOwnProperty(\"data\") && maskedData.data.hasOwnProperty(\"sensitive_data\") && maskedData.data.hasOwnProperty(\"message_masked\") && maskedData.data.sensitive_data === \"yes\") {\r\n\t\t\tmessageText = maskedData.data.message_masked;\r\n\t\t}\r\n\r\n\t\t//profanity extensions data\r\n\t\tconst profaneData = checkMessageForExtensionsData(this.props.message, \"profanity-filter\");\r\n\t\tif (profaneData && profaneData.hasOwnProperty(\"profanity\") && profaneData.hasOwnProperty(\"message_clean\") && profaneData.profanity === \"yes\") {\r\n\t\t\tmessageText = profaneData.message_clean;\r\n\t\t}\r\n\r\n\t\tconst formattedText = linkify(messageText);\r\n\r\n\t\tconst emojiParsedMessage = twemoji.parse(formattedText, { folder: \"svg\", ext: \".svg\" });\r\n\t\tconst parsedMessage = ReactHtmlParser(emojiParsedMessage, { decodeEntities: false });\r\n\t\tconst emojiMessage = parsedMessage.filter(message => message instanceof Object && message.type === \"img\");\r\n\r\n\t\tlet showVariation = true;\r\n\t\t//if larger size emojis feature is disabled\r\n\t\tif (this.state.enableLargerSizeEmojis === false) {\r\n\t\t\tshowVariation = false;\r\n\t\t}\r\n\r\n\t\tmessageText = (\r\n\t\t\t<div css={messageTxtWrapperStyle(this.context)} className=\"message__txt__wrapper\">\r\n\t\t\t\t<p css={messageTxtStyle(this.props, parsedMessage, emojiMessage, showVariation)} className=\"message__txt\">\r\n\t\t\t\t\t{parsedMessage}\r\n\t\t\t\t\t{this.state.translatedMessage}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\treturn messageText;\r\n\t};\r\n\r\n\ttranslateMessage = message => {\r\n\t\tconst messageId = message.id;\r\n\t\tconst messageText = message.text;\r\n\r\n\t\tconst browserLanguageCode = Translator.getBrowserLanguage().toLowerCase();\r\n\t\tlet translateToLanguage = browserLanguageCode;\r\n\t\tif (browserLanguageCode.indexOf(\"-\") !== -1) {\r\n\t\t\tconst browserLanguageArray = browserLanguageCode.split(\"-\");\r\n\t\t\ttranslateToLanguage = browserLanguageArray[0];\r\n\t\t}\r\n\r\n\t\tlet translatedMessage = \"\";\r\n\t\tCometChat.callExtension(\"message-translation\", \"POST\", \"v2/translate\", {\r\n\t\t\tmsgId: messageId,\r\n\t\t\ttext: messageText,\r\n\t\t\tlanguages: [translateToLanguage],\r\n\t\t})\r\n\t\t\t.then(result => {\r\n\t\t\t\tif (result.hasOwnProperty(\"language_original\") && result[\"language_original\"] !== translateToLanguage) {\r\n\t\t\t\t\tif (result.hasOwnProperty(\"translations\") && result.translations.length) {\r\n\t\t\t\t\t\tconst messageTranslation = result.translations[0];\r\n\t\t\t\t\t\tif (messageTranslation.hasOwnProperty(\"message_translated\")) {\r\n\t\t\t\t\t\t\ttranslatedMessage = `\\n(${messageTranslation[\"message_translated\"]})`;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.props.actionGenerated(enums.ACTIONS[\"INFO\"], [], \"SAME_LANGUAGE_MESSAGE\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setState({ translatedMessage: translatedMessage });\r\n\t\t\t})\r\n\t\t\t.catch(error => this.props.actionGenerated(enums.ACTIONS[\"ERROR\"], [], \"SOMETHING_WRONG\"));\r\n\t};\r\n\r\n\tenableLargerSizeEmojis = () => {\r\n\t\tthis.context.FeatureRestriction.isLargerSizeEmojisEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== this.state.enableLargerSizeEmojis) {\r\n\t\t\t\t\tthis.setState({ enableLargerSizeEmojis: response });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (this.state.enableLargerSizeEmojis !== false) {\r\n\t\t\t\t\tthis.setState({ enableLargerSizeEmojis: false });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\tactionHandler = (action, message) => {\r\n\t\tswitch (action) {\r\n\t\t\tcase enums.ACTIONS[\"REACT_TO_MESSAGE\"]:\r\n\t\t\t\tthis.props.actionGenerated(action, message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"VIEW_THREADED_MESSAGE\"]:\r\n\t\t\t\tthis.props.actionGenerated(action, message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"DELETE_MESSAGE\"]:\r\n\t\t\t\tthis.props.actionGenerated(action, message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"EDIT_MESSAGE\"]:\r\n\t\t\t\tthis.props.actionGenerated(action, message);\r\n\t\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"TRANSLATE_MESSAGE\"]:\r\n\t\t\t\tthis.translateMessage(message);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\tlet messageText = this.getMessageText();\r\n\r\n\t\t//linkpreview extensions data\r\n\t\tconst linkPreviewData = checkMessageForExtensionsData(this.props.message, \"link-preview\");\r\n\t\tif (linkPreviewData && linkPreviewData.hasOwnProperty(\"links\") && linkPreviewData[\"links\"].length) {\r\n\t\t\tmessageText = <CometChatLinkPreview message={this.props.message} messageText={messageText} />;\r\n\t\t}\r\n\r\n\t\t//messagereactions extensions data\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.actionHandler} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"sender__message__container message__text\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t{toolTipView}\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\" ref={this.messageTextRef}>\r\n\t\t\t\t\t{messageText}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatSenderTextMessageBubble.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatSenderTextMessageBubble.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { CometChatSenderTextMessageBubble };","export const messageContainerStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        marginBottom: \"16px\",\r\n        paddingLeft: \"16px\",\r\n        paddingRight: \"16px\",\r\n        maxWidth: \"65%\",\r\n        clear: \"both\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const messageWrapperStyle = () => {\r\n\r\n    return {\r\n        width: \"auto\",\r\n        flex: \"1 1\",\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n    }\r\n}\r\n\r\nexport const messageVideoWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"inline-block\",\r\n        alignSelf: 'flex-end',\r\n        ' > video': {\r\n            maxWidth: \"250px\",\r\n            borderRadius: \"12px\",\r\n            display: \"inherit\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const messageInfoWrapperStyle = () => {\r\n\r\n    return {\r\n        alignSelf: \"flex-end\",\r\n        display: \"flex\",\r\n        justifyContent: \"flex-end\",\r\n        alignItems: \"center\",\r\n        height: \"25px\",\r\n        padding: \"4px 8px\",\r\n    }\r\n}\r\n\r\nexport const messageReactionsWrapperStyle = () => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        alignSelf: \"flex-end\",\r\n        width: \"100%\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"flex-end\",\r\n        minHeight: \"36px\",\r\n    }\r\n}\r\n","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { CometChatMessageActions, CometChatThreadedMessageReplyCount, CometChatReadReceipt } from \"../\";\r\nimport { CometChatMessageReactions } from \"../Extensions\";\r\n\r\nimport { checkMessageForExtensionsData, getMessageFileMetadata } from \"../../../util/common\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport {\r\n\tmessageContainerStyle,\r\n\tmessageWrapperStyle,\r\n\tmessageVideoWrapperStyle,\r\n\tmessageInfoWrapperStyle,\r\n\tmessageReactionsWrapperStyle\r\n} from \"./style\";\r\n\r\nclass CometChatSenderVideoMessageBubble extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisHovering: false,\r\n\t\t\tfileData: {},\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tconst fileData = this.getFileData();\r\n\t\tthis.setState({ fileData: fileData });\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\t\tconst nextMessageStr = JSON.stringify(nextProps.message);\r\n\r\n\t\tif (currentMessageStr !== nextMessageStr \r\n\t\t|| this.state.isHovering !== nextState.isHovering \r\n\t\t|| this.state.fileData !== nextState.fileData) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\r\n\t\tconst previousMessageStr = JSON.stringify(prevProps.message);\r\n\t\tconst currentMessageStr = JSON.stringify(this.props.message);\r\n\r\n\t\tif (previousMessageStr !== currentMessageStr) {\r\n\r\n\t\t\tconst fileData = this.getFileData();\r\n\r\n\t\t\tconst previousfileData = JSON.stringify(this.state.fileData);\r\n\t\t\tconst currentfileData = JSON.stringify(fileData);\r\n\t\t\t\r\n\t\t\tif (previousfileData !== currentfileData) {\r\n\t\t\t\tthis.setState({ fileData: fileData });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetFileData = () => {\r\n\r\n\t\tconst metadataKey = enums.CONSTANTS[\"FILE_METADATA\"];\r\n\t\tconst fileMetadata = getMessageFileMetadata(this.props.message, metadataKey);\r\n\t\t\r\n\t\tif (fileMetadata instanceof Blob) {\r\n\r\n\t\t\treturn { fileName: fileMetadata[\"name\"] };\r\n\r\n\t\t} else if (this.props.message.data.attachments \r\n\t\t\t&& typeof this.props.message.data.attachments === \"object\" \r\n\t\t\t&& this.props.message.data.attachments.length) {\r\n\r\n\t\t\tconst fileName = this.props.message.data.attachments[0]?.name;\r\n\t\t\tconst fileUrl = this.props.message.data.attachments[0]?.url;\r\n\r\n\t\t\treturn { fileName, fileUrl: fileUrl };\r\n\t\t}\r\n\t};\r\n\r\n\thandleMouseHover = () => {\r\n\t\tthis.setState(this.toggleHoverState);\r\n\t};\r\n\r\n\ttoggleHoverState = state => {\r\n\t\treturn {\r\n\t\t\tisHovering: !state.isHovering,\r\n\t\t};\r\n\t};\r\n\r\n\trender() {\r\n\t\tif (!Object.keys(this.state.fileData).length) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tlet messageReactions = null;\r\n\t\tconst reactionsData = checkMessageForExtensionsData(this.props.message, \"reactions\");\r\n\t\tif (reactionsData) {\r\n\t\t\tif (Object.keys(reactionsData).length) {\r\n\t\t\t\tmessageReactions = (\r\n\t\t\t\t\t<div css={messageReactionsWrapperStyle()} className=\"message__reaction__wrapper\">\r\n\t\t\t\t\t\t<CometChatMessageReactions message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet toolTipView = null;\r\n\t\tif (this.state.isHovering) {\r\n\t\t\ttoolTipView = <CometChatMessageActions message={this.props.message} actionGenerated={this.props.actionGenerated} />;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={messageContainerStyle()} className=\"sender__message__container message__video\" onMouseEnter={this.handleMouseHover} onMouseLeave={this.handleMouseHover}>\r\n\t\t\t\t{toolTipView}\r\n\r\n\t\t\t\t<div css={messageWrapperStyle()} className=\"message__wrapper\">\r\n\t\t\t\t\t<div css={messageVideoWrapperStyle()} className=\"message__video__wrapper\">\r\n\t\t\t\t\t\t<video controls src={this.state.fileData?.fileUrl}></video>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{messageReactions}\r\n\r\n\t\t\t\t<div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\r\n\t\t\t\t\t<CometChatThreadedMessageReplyCount message={this.props.message} actionGenerated={this.props.actionGenerated} />\r\n\t\t\t\t\t<CometChatReadReceipt message={this.props.message} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatSenderVideoMessageBubble.defaultProps = {\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatSenderVideoMessageBubble.propTypes = {\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\n\r\nexport { CometChatSenderVideoMessageBubble };","export const replyCountStyle = context => {\r\n\r\n\treturn {\r\n\t\tdisplay: \"inline-block\",\r\n\t\tfontSize: \"11px\",\r\n\t\tfontWeight: \"500\",\r\n\t\tlineHeight: \"12px\",\r\n\t\ttextTransform: \"lowercase\",\r\n\t\tpadding: \"0 10px\",\r\n\t\tcursor: \"pointer\",\r\n\t\tcolor: context.theme.color.blue,\r\n\t\t\"&:hover\": {\r\n\t\t\ttextDecoration: \"underline\",\r\n\t\t},\r\n\t};\r\n};","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport {jsx} from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport {CometChatContext} from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport {theme} from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {replyCountStyle} from \"./style\";\r\n\r\nconst CometChatThreadedMessageReplyCount = props => {\r\n\r\n\tconst context = React.useContext(CometChatContext);\r\n\tconst [reply, setReply] = React.useState(false);\r\n\r\n\tconst toggleReply = () => {\r\n\t\tcontext.FeatureRestriction.isThreadedMessagesEnabled()\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response !== reply) {\r\n\t\t\t\t\tsetReply(response);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (reply !== false) {\r\n\t\t\t\t\tsetReply(false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\tReact.useEffect(toggleReply);\r\n\r\n\tconst viewThread = () => {\r\n\t\tprops.actionGenerated(enums.ACTIONS[\"VIEW_THREADED_MESSAGE\"], props.message);\r\n\t}\r\n\r\n\tconst replyCount = props.message.replyCount;\r\n\tconst replyText = replyCount === 1 ? `${replyCount} ${Translator.translate(\"REPLY\", context.language)}` : `${replyCount} ${Translator.translate(\"REPLIES\", context.language)}`;\r\n\r\n\tlet replies = (\r\n\t\t<span css={replyCountStyle(context)} className=\"replycount\" onClick={viewThread}>\r\n\t\t\t{replyText}\r\n\t\t</span>\r\n\t);\r\n\r\n\tif (props.message.hasOwnProperty(\"replyCount\") === false) {\r\n\t\treplies = null;\r\n\t}\r\n\r\n\t//if threadedchats feature is disabled\r\n\tif (reply === false) {\r\n\t\treplies = null;\r\n\t}\r\n\r\n\treturn replies;\r\n};\r\n\r\n// Specifies the default values for props:\r\nCometChatThreadedMessageReplyCount.defaultProps = {\r\n\ttheme: theme,\r\n\tactionGenerated: () => {},\r\n};\r\n\r\nCometChatThreadedMessageReplyCount.propTypes = {\r\n\ttheme: PropTypes.object,\r\n\tactionGenerated: PropTypes.func.isRequired,\r\n\tmessage: PropTypes.object.isRequired,\r\n};\r\n\r\nexport {CometChatThreadedMessageReplyCount};\r\n","export const blockedMessageWrapperStyle = () => {\r\n    return {\r\n        padding: \"16px\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        backgroundColor: \"#fff\",\r\n        zIndex: \"1\",\r\n        order: \"3\",\r\n        position: \"relative\",\r\n        flex: \"none\",\r\n        minHeight: \"105px\",\r\n        width: \"100%\",\r\n        margin: \"auto\"\r\n    }\r\n}\r\n\r\nexport const blockedMessageContainerStyle = () => {\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\"\r\n    }\r\n}\r\n\r\nexport const blockedTitleStyle = () => {\r\n    return {\r\n        fontSize: \"20px\",\r\n        fontWeight: \"700\",\r\n        textAlign: \"center\"\r\n    }\r\n}\r\n\r\nexport const bockedSubTitleStyle = context => {\r\n\treturn {\r\n\t\tmargin: \"16px 0\",\r\n\t\ttextAlign: \"center\",\r\n\t\tcolor: context.theme.color.helpText,\r\n\t};\r\n};\r\n\r\nexport const unblockButtonStyle = context => {\r\n\r\n    const mq = [...context.theme.breakPoints];\r\n\r\n    const widthProp = {\r\n        width: \"15%\",\r\n        [`@media ${mq[1]}`]: {\r\n            width: \"70%\",\r\n        },\r\n        [`@media ${mq[2]}`]: {\r\n            width: \"50%\",\r\n        },\r\n        [`@media ${mq[3]}`]: {\r\n            width: \"30%\",\r\n        },\r\n        [`@media ${mq[4]}`]: {\r\n            width: \"20%\",\r\n        }\r\n    };\r\n\r\n\treturn {\r\n\t\t...widthProp,\r\n\t\tpadding: \"8px 16px\",\r\n\t\tmargin: \"0\",\r\n\t\tborderRadius: \"12px\",\r\n\t\tbackgroundColor: `${context.theme.primaryColor}!important`,\r\n\t\tcolor: `${context.theme.color.white}`,\r\n\t};\r\n};","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatContext } from \"../../../util/CometChatContext\";\r\nimport { CometChatEvent } from \"../../../util/CometChatEvent\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport { \r\n    blockedMessageWrapperStyle, \r\n    blockedMessageContainerStyle,\r\n    unblockButtonStyle,\r\n    blockedTitleStyle,\r\n    bockedSubTitleStyle\r\n} from \"./style\";\r\n\r\nconst CometChatBlockedUser = props => {\r\n    \r\n\tconst context = React.useContext(CometChatContext);\r\n\tconst chatWith = { ...context.item };\r\n\r\n\tconst unblockUser = () => {\r\n\r\n\t\tlet uid = chatWith.uid;\r\n\t\tCometChat.unblockUsers([uid])\r\n\t\t\t.then(response => {\r\n\t\t\t\tif (response && response.hasOwnProperty(uid) && response[uid].hasOwnProperty(\"success\") && response[uid][\"success\"] === true) {\r\n\r\n\t\t\t\t\tconst newType = CometChat.ACTION_TYPE.TYPE_USER;\r\n\t\t\t\t\tconst newItem = Object.assign({}, chatWith, { blockedByMe: false });\r\n\t\t\t\t\tcontext.setTypeAndItem(newType, newItem);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tCometChatEvent.triggerHandler(enums.ACTIONS[\"ERROR\"], \"SOMETHING_WRONG\");\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => CometChatEvent.triggerHandler(enums.ACTIONS[\"ERROR\"], \"SOMETHING_WRONG\"));\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div css={blockedMessageWrapperStyle()} className=\"\">\r\n\t\t\t<div css={blockedMessageContainerStyle()}>\r\n\t\t\t\t<div css={blockedTitleStyle()}>{Translator.translate(\"YOU_HAVE_BLOCKED\", props.lang) + \" \" + chatWith.name}</div>\r\n\t\t\t\t<div css={bockedSubTitleStyle(context)}>{Translator.translate(\"NOT_POSSIBLE_TO_SEND_MESSAGES\", props.lang)}</div>\r\n\t\t\t</div>\r\n\t\t\t<button type=\"button\" css={unblockButtonStyle(context)} onClick={unblockUser}>\r\n\t\t\t\t{Translator.translate(\"UNBLOCK\", props.lang)}\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n// Specifies the default values for props:\r\nCometChatBlockedUser.defaultProps = {\r\n\tlang: Translator.getDefaultLanguage(),\r\n};\r\n\r\nCometChatBlockedUser.propTypes = {\r\n\tlang: PropTypes.string,\r\n};\r\n\r\nexport { CometChatBlockedUser };","export const chatScreenStyle = (props) => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n        boxSizing: \"border-box\",\r\n        position: \"relative\",\r\n        fontFamily: `${props.theme.fontFamily}`,\r\n        border: `1px solid ${props.theme.borderColor.primary}`,\r\n        \"*\": {\r\n            boxSizing: \"border-box\",\r\n            fontFamily: `${props.theme.fontFamily}`,\r\n            \"::-webkit-scrollbar\": {\r\n                width: \"8px\",\r\n                height: \"4px\",\r\n            },\r\n            \"::-webkit-scrollbar-track\": {\r\n                background: \"#ffffff00\"\r\n            },\r\n            \"::-webkit-scrollbar-thumb\": {\r\n                background: \"#ccc\",\r\n                \"&:hover\": {\r\n                    background: \"#aaa\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const chatScreenSidebarStyle = (state, props) => {\r\n\r\n    const sidebarView = (state.sidebarview) ? {\r\n        left: \"0\",\r\n        boxShadow: \"rgba(0, 0, 0, .4) -30px 0 30px 30px\"\r\n    } : {};\r\n\r\n    const mq = [...props.theme.breakPoints];\r\n\r\n    return {\r\n        width: \"280px\",\r\n        borderRight: `1px solid ${props.theme.borderColor.primary}`,\r\n        height: \"100%\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        \"> .chats\": {\r\n            height: \"calc(100% - 5px)\",\r\n        },\r\n        [`@media ${mq[0]}`]: {\r\n            position: \"absolute!important\",\r\n            left: \"-100%\",\r\n            top: \"0\",\r\n            bottom: \"0\",\r\n            width: \"100%!important\",\r\n            zIndex: \"2\",\r\n            backgroundColor: `${props.theme.backgroundColor.white}`,\r\n            transition: \"all .3s ease-out\",\r\n            ...sidebarView\r\n        }\r\n    }\r\n}\r\n\r\nexport const chatScreenMainStyle = (state, props) => {\r\n\r\n    const mq = [...props.theme.breakPoints];\r\n\r\n    return {\r\n        width: \"calc(100% - 280px)\",\r\n        height: \"100%\",\r\n        order: \"2\",\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        [`@media ${mq[1]}, ${mq[2]}`]: {\r\n            width: \"100%\",\r\n        }\r\n    }\r\n}","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatConversationList } from \"../\";\r\nimport { CometChatMessages } from \"../../Messages\";\r\nimport { CometChatIncomingCall, CometChatIncomingDirectCall } from \"../../Calls\";\r\n\r\nimport { CometChatContextProvider } from \"../../../util/CometChatContext\";\r\nimport * as enums from \"../../../util/enums.js\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\nimport { theme } from \"../../../resources/theme\";\r\n\r\nimport {\r\n\tchatScreenStyle,\r\n\tchatScreenSidebarStyle,\r\n\tchatScreenMainStyle,\r\n} from \"./style\";\r\n\r\nclass CometChatConversationListWithMessages extends React.Component {\r\n\r\n\tloggedInUser = null;\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\ttab: \"conversations\",\r\n\t\t\tsidebarview: false,\r\n\t\t}\r\n\r\n\t\tthis.contextProviderRef = React.createRef();\r\n\t\tthis.chatListRef = React.createRef();\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\r\n\t\tif (this.props.chatWithUser.length === 0 && this.props.chatWithGroup.length === 0) {\r\n\t\t\tthis.toggleSideBar();\r\n\t\t}\r\n\t}\r\n\r\n\titemClicked = (item, type) => {\r\n\r\n\t\tthis.contextProviderRef.setTypeAndItem(type, item);\r\n\t\tthis.toggleSideBar()\r\n\t}\r\n\r\n\tactionHandler = (action, item, count, ...otherProps) => {\r\n\t\t\r\n\t\tswitch(action) {\r\n\r\n\t\t\tcase enums.ACTIONS[\"TOGGLE_SIDEBAR\"]:\r\n\t\t\t\tthis.toggleSideBar();\r\n\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_SCOPE_CHANGED:\r\n\t\t\tcase enums.GROUP_MEMBER_KICKED:\r\n\t\t\tcase enums.GROUP_MEMBER_BANNED:\r\n\t\t\t\tthis.groupUpdated(action, item, count, ...otherProps);\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleSideBar = () => {\r\n\r\n\t\tconst sidebarview = this.state.sidebarview;\r\n\t\tthis.setState({ sidebarview: !sidebarview });\r\n\t}\r\n\r\n/**\r\n If the logged in user is banned, kicked or scope changed, update the chat window accordingly\r\n */\r\n\tgroupUpdated = (key, message, group, options) => {\r\n\r\n\t\tswitch (key) {\r\n\t\t\tcase enums.GROUP_MEMBER_BANNED:\r\n\t\t\tcase enums.GROUP_MEMBER_KICKED: {\r\n\r\n\t\t\t\tif (this.contextProviderRef.type === CometChat.ACTION_TYPE.TYPE_GROUP\r\n\t\t\t\t&& this.contextProviderRef.item.guid === group.guid\r\n\t\t\t\t&& options.user.uid === this.loggedInUser.uid) {\r\n\r\n\t\t\t\t\tthis.contextProviderRef.setItem({});\r\n\t\t\t\t\tthis.contextProviderRef.setType(\"\");\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase enums.GROUP_MEMBER_SCOPE_CHANGED: {\r\n\r\n\t\t\t\tif (this.contextProviderRef.type === CometChat.ACTION_TYPE.TYPE_GROUP\r\n\t\t\t\t&& this.contextProviderRef.item.guid === group.guid\r\n\t\t\t\t&& options.user.uid === this.loggedInUser.uid) {\r\n\r\n\t\t\t\t\tconst newObject = Object.assign({}, this.contextProviderRef.item, { \"scope\": options[\"scope\"] })\r\n\t\t\t\t\tthis.contextProviderRef.setItem(newObject);\r\n\t\t\t\t\tthis.contextProviderRef.setType(CometChat.ACTION_TYPE.TYPE_GROUP);\r\n\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\tlet messageScreen = (\r\n\t\t\t<CometChatMessages\r\n\t\t\ttheme={this.props.theme}\r\n\t\t\tlang={this.props.lang}\r\n\t\t\t_parent=\"conversations\"\r\n\t\t\tactionGenerated={this.actionHandler} />\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<CometChatContextProvider ref={el => this.contextProviderRef = el} user={this.props.chatWithUser} group={this.props.chatWithGroup} language={this.props.lang}>\r\n\t\t\t\t<div css={chatScreenStyle(this.props)} className=\"cometchat cometchat--chats\" dir={Translator.getDirection(this.props.lang)}>\r\n\t\t\t\t\t<div css={chatScreenSidebarStyle(this.state, this.props)} className=\"chats__sidebar\">\r\n\t\t\t\t\t\t<CometChatConversationList\r\n\t\t\t\t\t\tref={el => this.chatListRef = el}\r\n\t\t\t\t\t\t_parent=\"clwm\"\r\n\t\t\t\t\t\ttheme={this.props.theme}\r\n\t\t\t\t\t\tlang={this.props.lang}\r\n\t\t\t\t\t\tonItemClick={this.itemClicked}\r\n\t\t\t\t\t\tactionGenerated={this.actionHandler} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div css={chatScreenMainStyle(this.state, this.props)} className=\"chats__main\">{messageScreen}</div>\r\n\t\t\t\t\t<CometChatIncomingCall theme={this.props.theme} lang={this.props.lang} actionGenerated={this.actionHandler} />\r\n\t\t\t\t\t<CometChatIncomingDirectCall theme={this.props.theme} lang={this.props.lang} actionGenerated={this.actionHandler} />\r\n\t\t\t\t</div>\r\n\t\t\t</CometChatContextProvider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatConversationListWithMessages.defaultProps = {\r\n\tlang: Translator.getDefaultLanguage(),\r\n\ttheme: theme,\r\n\tchatWithUser: \"\",\r\n\tchatWithGroup: \"\",\r\n};\r\n\r\nCometChatConversationListWithMessages.propTypes = {\r\n\tlang: PropTypes.string,\r\n\ttheme: PropTypes.object,\r\n\tchatWithUser: PropTypes.string,\r\n\tchatWithGroup: PropTypes.string,\r\n}\r\n\r\nexport { CometChatConversationListWithMessages };\r\n","export const userInfoScreenStyle = (props) =>{\r\n\r\n    return {\r\n        display: \"flex\",\r\n        flexDirection: \"column!important\",\r\n        height: \"calc(100% - 50px)\",\r\n        fontFamily: `${props.theme.fontFamily}`,\r\n        \"*\": {\r\n            boxSizing: \"border-box\",\r\n            fontFamily: `${props.theme.fontFamily}`,\r\n        }\r\n    }\r\n}\r\n\r\nexport const headerStyle = (props) => {\r\n\r\n    return {\r\n        padding: \"16px\",\r\n        position: \"relative\",\r\n        borderBottom: `1px solid ${props.theme.borderColor.primary}`,\r\n        height: \"70px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n    }\r\n}\r\n\r\nexport const headerTitleStyle = () => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        fontSize: \"22px\",\r\n        fontWeight: \"700\",\r\n        lineHeight: \"26px\",\r\n    }\r\n}\r\n\r\nexport const detailStyle = () => {\r\n\r\n    return {\r\n        padding: \"16px\",\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"left\",\r\n        alignItems: \"center\",\r\n    }\r\n}\r\n\r\nexport const thumbnailStyle = () => {\r\n\r\n    return {\r\n        display: \"inline-block\",\r\n        width: \"36px\",\r\n        height: \"36px\",\r\n        flexShrink: \"0\",\r\n    }\r\n}\r\n\r\nexport const userDetailStyle = () => {\r\n    \r\n    return {\r\n        width: \"calc(100% - 45px)\",\r\n        flexGrow: \"1\",\r\n        paddingLeft: \"16px\",\r\n        \"&[dir=rtl]\": {\r\n            paddingRight: \"16px\",\r\n            paddingLeft: \"0\",\r\n        }\r\n    }\r\n}\r\n\r\nexport const userNameStyle = () => {\r\n\r\n    return {\r\n        margin: \"0\",\r\n        fontSize: \"15px\",\r\n        fontWeight: \"600\",\r\n        display: \"block\",\r\n        maxWidth: \"100%\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n    }\r\n}\r\n\r\nexport const userStatusStyle = (props) => {\r\n\r\n    return {\r\n        fontSize: \"13px\",\r\n        margin: \"0\",\r\n        color: `${props.theme.color.blue}`,\r\n    }\r\n}\r\n\r\nexport const optionsStyle = () => {\r\n\r\n    return {\r\n        height: \"calc(100% - 145px)\",\r\n        overflowY: \"auto\",\r\n        padding: \"0 16px\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"left\",\r\n        alignItems: \"flex-start\",\r\n    }\r\n}\r\n\r\nexport const optionTitleStyle = (props) => {\r\n\r\n    return {\r\n        margin: \"5px 0\",\r\n        width: \"100%\",\r\n        fontSize: \"12px\",\r\n        color: `${props.theme.color.helpText}`,\r\n        textTransform: \"uppercase\",\r\n    }\r\n}\r\n\r\nexport const optionListStyle = () => {\r\n\r\n    return {\r\n        padding: \"10px 0\",\r\n        width: \"100%\",\r\n        fontSize: \"15px\"\r\n    }\r\n}\r\n\r\nexport const optionStyle = (img) => {\r\n\r\n    return {\r\n        width: \"100%\",\r\n        padding: \"16px 16px 16px 36px\",\r\n        fontWeight: 600,\r\n        background: `url(${img}) left center no-repeat`,\r\n    }\r\n}\r\n\r\nexport const optionNameStyle = () => {\r\n\r\n    return {\r\n        width: \"100%\",\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/notify.a922ff06.svg\";","export default __webpack_public_path__ + \"static/media/privacy.ec3bcbb7.svg\";","export default __webpack_public_path__ + \"static/media/chats.f1ac25e7.svg\";","export default __webpack_public_path__ + \"static/media/help.3b4b08e3.svg\";","export default __webpack_public_path__ + \"static/media/warning.98a4a2ed.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatAvatar, CometChatToastNotification } from \"../../Shared\";\r\n\r\nimport { theme } from \"../../../resources/theme\";\r\nimport Translator from \"../../../resources/localization/translator\";\r\n\r\nimport {\r\n\tuserInfoScreenStyle,\r\n\theaderStyle,\r\n\theaderTitleStyle,\r\n\tdetailStyle,\r\n\tthumbnailStyle,\r\n\tuserDetailStyle,\r\n\tuserNameStyle,\r\n\tuserStatusStyle,\r\n\toptionsStyle,\r\n\toptionTitleStyle,\r\n\toptionListStyle,\r\n\toptionStyle,\r\n\toptionNameStyle\r\n} from \"./style\";\r\n\r\nimport notificationIcon from \"./resources/notify.svg\";\r\nimport privacyIcon from \"./resources/privacy.svg\";\r\nimport chatIcon from \"./resources/chats.svg\";\r\nimport helpIcon from \"./resources/help.svg\";\r\nimport reportIcon from \"./resources/warning.svg\";\r\n\r\nclass CometChatUserProfile extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tloggedInUser: null\r\n\t\t}\r\n\r\n\t\tthis.toastRef = React.createRef();\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\tCometChat.getLoggedinUser().then(user => {\r\n\t\t\tthis.setState({ loggedInUser: user });\r\n\t\t}).catch(error => this.toastRef.setError(\"SOMETHING_WRONG\"));\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\tlet userProfile = null;\r\n\t\tif(this.state.loggedInUser) {\r\n\r\n\t\t\tlet avatar = <CometChatAvatar user={this.state.loggedInUser} />;\r\n\t\t\tuserProfile = (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<div css={headerStyle(this.props)} className=\"userinfo__header\">\r\n\t\t\t\t\t\t<h4 css={headerTitleStyle()} className=\"header__title\">\r\n\t\t\t\t\t\t\t{Translator.translate(\"MORE\", this.props.lang)}\r\n\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div css={detailStyle()} className=\"userinfo__detail\">\r\n\t\t\t\t\t\t<div css={thumbnailStyle()} className=\"detail__thumbnail\">\r\n\t\t\t\t\t\t\t{avatar}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div css={userDetailStyle()} className=\"detail__user\" dir={Translator.getDirection(this.props.lang)}>\r\n\t\t\t\t\t\t\t<div css={userNameStyle()} className=\"user__name\">\r\n\t\t\t\t\t\t\t\t{this.state.loggedInUser.name}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<p css={userStatusStyle(this.props)} className=\"user__status\">\r\n\t\t\t\t\t\t\t\t{Translator.translate(\"ONLINE\", this.props.lang)}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div css={optionsStyle()} className=\"userinfo__options\">\r\n\t\t\t\t\t\t<div css={optionTitleStyle(this.props)} className=\"options__title\">\r\n\t\t\t\t\t\t\t{Translator.translate(\"PREFERENCES\", this.props.lang)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div css={optionListStyle()} className=\"options_list\">\r\n\t\t\t\t\t\t\t<div css={optionStyle(notificationIcon)} className=\"option option-notification\">\r\n\t\t\t\t\t\t\t\t<div css={optionNameStyle()} className=\"option_name\">\r\n\t\t\t\t\t\t\t\t\t{Translator.translate(\"NOTIFICATIONS\", this.props.lang)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div css={optionStyle(privacyIcon)} className=\"option option-privacy\">\r\n\t\t\t\t\t\t\t\t<div css={optionNameStyle()} className=\"option_name\">\r\n\t\t\t\t\t\t\t\t\t{Translator.translate(\"PRIVACY_AND_SECURITY\", this.props.lang)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div css={optionStyle(chatIcon)} className=\"option option-chats\">\r\n\t\t\t\t\t\t\t\t<div css={optionNameStyle()} className=\"option_name\">\r\n\t\t\t\t\t\t\t\t\t{Translator.translate(\"CHATS\", this.props.lang)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div css={optionTitleStyle(this.props)} className=\"options__title\">\r\n\t\t\t\t\t\t\t{Translator.translate(\"OTHER\", this.props.lang)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div css={optionListStyle()} className=\"options_list\">\r\n\t\t\t\t\t\t\t<div css={optionStyle(helpIcon)} className=\"option option-help\">\r\n\t\t\t\t\t\t\t\t<div css={optionNameStyle()} className=\"option_name\">\r\n\t\t\t\t\t\t\t\t\t{Translator.translate(\"HELP\", this.props.lang)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div css={optionStyle(reportIcon)} className=\"option option-report\">\r\n\t\t\t\t\t\t\t\t<div css={optionNameStyle()} className=\"option_name\">\r\n\t\t\t\t\t\t\t\t\t{Translator.translate(\"REPORT_PROBLEM\", this.props.lang)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div css={userInfoScreenStyle(this.props)} className=\"userinfo\">\r\n\t\t\t\t{userProfile}\r\n\t\t\t\t<CometChatToastNotification ref={el => (this.toastRef = el)} lang={this.props.lang} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatUserProfile.defaultProps = {\r\n\tlang: Translator.getDefaultLanguage(),\r\n\ttheme: theme\r\n};\r\n\r\nCometChatUserProfile.propTypes = {\r\n\tlang: PropTypes.string,\r\n\ttheme: PropTypes.object\r\n}\r\n\r\nexport { CometChatUserProfile };\r\n","export const footerStyle = () => {\r\n\r\n    return {\r\n        width: \"100%\",\r\n        zIndex: \"1\",\r\n        height: \"64px\"\r\n    }\r\n}\r\n\r\nexport const navbarStyle = () => {\r\n\r\n    return {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"row\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tjustifyContent: \"space-around\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\theight: \"100%\",\r\n\t\t};\r\n}\r\n\r\nexport const itemStyle = props => {\r\n\treturn {\r\n\t\tpadding: \"8px\",\r\n\t\tcursor: \"pointer\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t\tfontSize: \"12px\",\r\n\t\tcolor: `${props.theme.color.helpText}`,\r\n\t};\r\n};\r\n\r\nexport const itemLinkStyle = (icon, isActive, context) => {\r\n\r\n    let activeStateBg = (isActive) ? { \r\n        backgroundColor: `${context.theme.primaryColor}`,\r\n    } : {\r\n        backgroundColor: `${context.theme.secondaryTextColor}`,\r\n    };\r\n\r\n    return {\r\n        height: \"24px\",\r\n        width: \"24px\",\r\n        display: \"inline-block\",\r\n        mask: `url(${icon}) no-repeat center center`,\r\n        ...activeStateBg\r\n    }\r\n}\r\n\r\nexport const itemLinkTextStyle = (isActive, context) => {\r\n\r\n    const colorProp = (isActive) ? {\r\n        color: `${context.theme.primaryColor}`\r\n    } : {\r\n        color: `${context.theme.secondaryTextColor}`,\r\n    };\r\n\r\n    return {\r\n        ...colorProp,\r\n        paddingTop: \"2px\"\r\n    }\r\n};","export default __webpack_public_path__ + \"static/media/chats.f1ac25e7.svg\";","export default __webpack_public_path__ + \"static/media/users.53d6b511.svg\";","export default __webpack_public_path__ + \"static/media/groups.5784ce15.svg\";","export default __webpack_public_path__ + \"static/media/more.89ca6ea0.svg\";","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { CometChatUserList } from \"../../Users\";\r\nimport { CometChatGroupList } from \"../../Groups\";\r\nimport { CometChatConversationList } from \"../../Chats\";\r\nimport { CometChatUserProfile } from \"../../UserProfile\";\r\n\r\nimport * as enums from \"../../../util/enums.js\";\r\nimport {CometChatContext} from \"../../../util/CometChatContext\";\r\n\r\nimport Translator from \"../../../resources/localization/translator\";\r\nimport { theme } from \"../../../resources/theme\";\r\nimport tabs from \"../../../resources/tabs.json\";\r\n\r\nimport {\r\n  footerStyle,\r\n  navbarStyle,\r\n  itemStyle,\r\n  itemLinkStyle,\r\n  itemLinkTextStyle\r\n} from \"./style\";\r\n\r\nimport chatGreyIcon from \"./resources/chats.svg\";\r\nimport contactGreyIcon from \"./resources/users.svg\";\r\nimport groupGreyIcon from \"./resources/groups.svg\";\r\nimport moreGreyIcon from \"./resources/more.svg\";\r\n\r\nexport class CometChatNavBar extends React.Component {\r\n\tstatic contextType = CometChatContext;\r\n\r\n\ttabListKeys = []; \r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tactiveTab: null,\r\n\t\t\ttabList: [],\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t\tlet tabList = this.context.UIKitSettings.tabs;\r\n\r\n\t\ttabList.forEach(tabName => {\r\n\t\t\tfor (const t in tabs) {\r\n\t\t\t\tif (tabName === tabs[t]) {\r\n\t\t\t\t\tthis.tabListKeys.push(t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n    \tthis.getFilteredTabs().then(filteredTabs => {\r\n\t\t\tthis.setState({tabList: filteredTabs, activeTab: filteredTabs[0]});\r\n\t\t});\r\n\r\n\t}\r\n\r\n\r\n\tgetFilteredTabs = () => {\r\n\r\n\t\treturn new Promise(resolve => {\r\n\r\n\t\t\tconst filteredTabs = [];\r\n\t\t\tconst promises = [this.enableChats(), this.enableUsers(), this.enableGroups(), this.enableSettings()];\r\n\t\t\tPromise.allSettled(promises).then(results => {\r\n\t\t\t\t\r\n\t\t\t\tthis.tabListKeys.forEach(eachTabKey => {\r\n\t\t\t\t\tresults.forEach(result => {\r\n\t\t\t\t\t\tconst tabKey = result.value[0];\r\n\t\t\t\t\t\tconst tabEnabled = result.value[1];\r\n\r\n\t\t\t\t\t\tif (eachTabKey === tabKey && tabEnabled === true) {\r\n\t\t\t\t\t\tfilteredTabs.push(eachTabKey);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tresolve(filteredTabs);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tenableChats = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tthis.context.FeatureRestriction.isRecentChatListEnabled()\r\n\t\t\t\t.then(response => resolve([\"SIDEBAR_CHATS\", response]))\r\n\t\t\t\t.catch(error => resolve([\"SIDEBAR_CHATS\", false]));\r\n\t\t});\r\n\t};\r\n\r\n\tenableUsers = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tthis.context.FeatureRestriction.isUserListEnabled()\r\n\t\t\t\t.then(response => resolve([\"SIDEBAR_USERS\", response]))\r\n\t\t\t\t.catch(error => resolve([\"SIDEBAR_USERS\", false]));\r\n\t\t});\r\n\t};\r\n\r\n\tenableGroups = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tthis.context.FeatureRestriction.isGroupListEnabled()\r\n\t\t\t\t.then(response => resolve([\"SIDEBAR_GROUPS\", response]))\r\n\t\t\t\t.catch(error => resolve([\"SIDEBAR_GROUPS\", false]));\r\n\t\t});\r\n\t};\r\n\r\n\tenableSettings = () => {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tthis.context.FeatureRestriction.isUserSettingsEnabled()\r\n\t\t\t\t.then(response => resolve([\"SIDEBAR_MOREINFO\", response]))\r\n\t\t\t\t.catch(error => resolve([\"SIDEBAR_MOREINFO\", false]));\r\n\t\t});\r\n\t};\r\n\r\n\ttabChanged = tab => {\r\n\r\n\t\tthis.setState({activeTab: tab});\r\n\t};\r\n\r\n\tgetActiveTab = () => {\r\n\t\tswitch (this.state.activeTab) {\r\n\t\t\tcase \"SIDEBAR_USERS\":\r\n\t\t\t\treturn <CometChatUserList theme={this.props.theme} lang={this.context.language} _parent=\"unified\" actionGenerated={this.props.actionGenerated} onItemClick={(item, type) => this.props.actionGenerated(enums.ACTIONS[\"ITEM_CLICKED\"], type, item)} />;\r\n\t\t\tcase \"SIDEBAR_CALLS\":\r\n\t\t\t\treturn null;\r\n\t\t\tcase \"SIDEBAR_CHATS\":\r\n\t\t\t\treturn <CometChatConversationList theme={this.props.theme} lang={this.context.language} _parent=\"unified\" actionGenerated={this.props.actionGenerated} onItemClick={(item, type) => this.props.actionGenerated(enums.ACTIONS[\"ITEM_CLICKED\"], type, item)} />;\r\n\t\t\tcase \"SIDEBAR_GROUPS\":\r\n\t\t\t\treturn <CometChatGroupList theme={this.props.theme} lang={this.context.language} _parent=\"unified\" actionGenerated={this.props.actionGenerated} onItemClick={(item, type) => this.props.actionGenerated(enums.ACTIONS[\"ITEM_CLICKED\"], type, item)} />;\r\n\t\t\tcase \"SIDEBAR_MOREINFO\":\r\n\t\t\t\treturn <CometChatUserProfile theme={this.props.theme} lang={this.context.language} onItemClick={(item, type) => this.props.actionGenerated(enums.ACTIONS[\"ITEM_CLICKED\"], type, item)} />;\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tgetTabList = () => {\r\n\r\n\t\tconst chatsTabActive = this.state.activeTab === \"SIDEBAR_CHATS\" ? true : false;\r\n\t\tconst userTabActive = this.state.activeTab === \"SIDEBAR_USERS\" ? true : false;\r\n\t\tconst groupsTabActive = this.state.activeTab === \"SIDEBAR_GROUPS\" ? true : false;\r\n\t\tconst moreTabActive = this.state.activeTab === \"SIDEBAR_MOREINFO\" ? true : false;\r\n\r\n\t\tconst tabList = [...this.state.tabList];\r\n\r\n\t\treturn tabList.map(tab => {\r\n\t\t\tswitch (tab) {\r\n\t\t\t\tcase \"SIDEBAR_CHATS\":\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={tab} css={itemStyle(this.props)} className=\"navbar__item\" onClick={() => this.tabChanged(\"SIDEBAR_CHATS\")}>\r\n\t\t\t\t\t\t\t<div css={itemLinkStyle(chatGreyIcon, chatsTabActive, this.context)} className=\"item__link item__link__chats\" title={Translator.translate(\"CHATS\", this.context.language)}></div>\r\n\t\t\t\t\t\t\t<div css={itemLinkTextStyle(chatsTabActive, this.context)} className=\"item__label\">{Translator.translate(\"CHATS\", this.context.language)}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\tcase \"SIDEBAR_USERS\":\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={tab} css={itemStyle(this.props)} className=\"navbar__item\" onClick={() => this.tabChanged(\"SIDEBAR_USERS\")}>\r\n\t\t\t\t\t\t\t<div css={itemLinkStyle(contactGreyIcon, userTabActive, this.context)} className=\"item__link item__link__contacts\" title={Translator.translate(\"USERS\", this.context.language)}></div>\r\n\t\t\t\t\t\t\t<div css={itemLinkTextStyle(userTabActive, this.context)} className=\"item__label\">{Translator.translate(\"USERS\", this.context.language)}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\tcase \"SIDEBAR_GROUPS\":\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={tab} css={itemStyle(this.props)} className=\"navbar__item\" onClick={() => this.tabChanged(\"SIDEBAR_GROUPS\")}>\r\n\t\t\t\t\t\t\t<div css={itemLinkStyle(groupGreyIcon, groupsTabActive, this.context)} className=\"item__link item__link__groups\" title={Translator.translate(\"GROUPS\", this.context.language)}></div>\r\n\t\t\t\t\t\t\t<div css={itemLinkTextStyle(groupsTabActive, this.context)} className=\"item__label\">{Translator.translate(\"GROUPS\", this.context.language)}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\tcase \"SIDEBAR_MOREINFO\":\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={tab} css={itemStyle(this.props)} className=\"navbar__item\" onClick={() => this.tabChanged(\"SIDEBAR_MOREINFO\")}>\r\n\t\t\t\t\t\t\t<div css={itemLinkStyle(moreGreyIcon, moreTabActive, this.context)} className=\"item__link item__link__info\" title={Translator.translate(\"MORE\", this.context.language)}></div>\r\n\t\t\t\t\t\t\t<div css={itemLinkTextStyle(moreTabActive, this.context)} className=\"item__label\">{Translator.translate(\"MORE\", this.context.language)}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t{this.getActiveTab()}\r\n\t\t\t\t<div css={footerStyle()} className=\"sidebar__footer\">\r\n\t\t\t\t\t<div css={navbarStyle()} className=\"footer__navbar\">\r\n\t\t\t\t\t\t{this.getTabList()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatNavBar.defaultProps = {\r\n\ttheme: theme\r\n};\r\n\r\nCometChatNavBar.propTypes = {\r\n\ttheme: PropTypes.object\r\n}","export const unifiedStyle = (props) => {\r\n\r\n    return {\r\n        display: \"flex\",\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n        boxSizing: \"border-box\",\r\n        fontFamily: `${props.theme.fontFamily}`,\r\n        border: `1px solid ${props.theme.borderColor.primary}`,\r\n        position: \"relative\",\r\n        \"*\": {\r\n            boxSizing: \"border-box\",\r\n            fontFamily: `${props.theme.fontFamily}`,\r\n            \"::-webkit-scrollbar\": {\r\n                width: \"8px\",\r\n                height: \"4px\",\r\n            },\r\n            \"::-webkit-scrollbar-track\": {\r\n                background: \"#ffffff00\"\r\n            },\r\n            \"::-webkit-scrollbar-thumb\": {\r\n                background: \"#ccc\",\r\n                \"&:hover\": {\r\n                    background: \"#aaa\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const unifiedSidebarStyle = (state, props) => {\r\n\r\n    const sidebarView = (state.sidebarview) ? {\r\n        left: \"0\",\r\n        boxShadow : \"rgba(0, 0, 0, .4) -30px 0 30px 30px\"\r\n    } : {};\r\n\r\n    const mq = [...props.theme.breakPoints];\r\n\r\n    return {\r\n\r\n        width: \"280px\",\r\n        borderRight: `1px solid ${props.theme.borderColor.primary}`,\r\n        height: \"100%\",\r\n        position: \"relative\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        \"> .contacts, .chats, .groups, .userinfo\": {\r\n            height: \"calc(100% - 64px)\",\r\n        },\r\n        [`@media ${mq[0]}`]: {\r\n            position: \"absolute!important\",\r\n            left: \"-100%\",\r\n            top: \"0\",\r\n            bottom: \"0\",\r\n            width: \"100%!important\",\r\n            zIndex: \"2\",\r\n            backgroundColor: `${props.theme.backgroundColor.white}`,\r\n            transition: \"all .3s ease-out\",\r\n            ...sidebarView\r\n        }\r\n    }\r\n}\r\n\r\nexport const unifiedMainStyle = (state, props) => {\r\n\r\n    const mq = [...props.theme.breakPoints];\r\n\r\n    return {\r\n        width: \"calc(100% - 280px)\",\r\n        height: \"100%\",\r\n        order: \"2\",\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        [`@media ${mq[1]}, ${mq[2]}`]: {\r\n            width: \"100%\",\r\n        }\r\n    }\r\n}\r\n","import React from \"react\";\r\n/** @jsxRuntime classic */\r\n/** @jsx jsx */\r\nimport { jsx } from \"@emotion/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { CometChat } from \"@cometchat-pro/chat\";\r\n\r\nimport { CometChatNavBar } from \"./CometChatNavBar\";\r\nimport { CometChatMessages } from \"../Messages\";\r\nimport { CometChatIncomingCall, CometChatIncomingDirectCall } from \"../Calls\";\r\n\r\nimport { CometChatContextProvider } from \"../../util/CometChatContext\";\r\nimport * as enums from \"../../util/enums.js\";\r\nimport { theme } from \"../../resources/theme\";\r\nimport Translator from \"../../resources/localization/translator\";\r\n\r\nimport {\r\n\tunifiedStyle,\r\n\tunifiedSidebarStyle,\r\n\tunifiedMainStyle,\r\n} from \"./style\";\r\n\r\nclass CometChatUI extends React.Component {\r\n\r\n\tloggedInUser = null;\r\n\r\n\tconstructor(props) {\r\n\t\t\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tsidebarview: false,\r\n\t\t}\r\n\r\n\t\tthis.navBarRef = React.createRef();\r\n\t\tthis.contextProviderRef = React.createRef();\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\r\n\t\tif (this.props.chatWithUser.length === 0 && this.props.chatWithGroup.length === 0) {\r\n\t\t\tthis.toggleSideBar();\r\n\t\t}\r\n\t}\r\n\r\n\tnavBarAction = (action, type, item) => {\r\n\t\t\r\n\t\tswitch(action) {\r\n\t\t\tcase enums.ACTIONS[\"ITEM_CLICKED\"]:\r\n\t\t\t\tthis.itemClicked(item, type);\r\n\t\t\tbreak;\r\n\t\t\tcase enums.ACTIONS[\"TOGGLE_SIDEBAR\"]:\r\n\t\t\t\tthis.toggleSideBar();\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t\r\n\titemClicked = (item, type) => {\r\n\t\t\r\n\t\tthis.contextProviderRef.setTypeAndItem(type, item);    \r\n\t\tthis.toggleSideBar()\r\n\t}\r\n\r\n\tactionHandler = (action, item, count, ...otherProps) => {\r\n\t\t\r\n\t\tswitch(action) {\r\n\t\t\tcase enums.ACTIONS[\"TOGGLE_SIDEBAR\"]:\r\n\t\t\t\tthis.toggleSideBar();\r\n\t\t\tbreak;\r\n\t\t\tcase enums.GROUP_MEMBER_SCOPE_CHANGED:\r\n\t\t\tcase enums.GROUP_MEMBER_KICKED:\r\n\t\t\tcase enums.GROUP_MEMBER_BANNED:\r\n\t\t\t\tthis.groupUpdated(action, item, count, ...otherProps);\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleSideBar = () => {\r\n\r\n\t\tconst sidebarview = this.state.sidebarview;\r\n\t\tthis.setState({ sidebarview: !sidebarview });\r\n\t}\r\n\r\n\t/**\r\n\t If the logged in user is banned, kicked or scope changed, update the chat window accordingly\r\n\t */\r\n\tgroupUpdated = (key, message, group, options) => {\r\n\t\t\r\n\t\tswitch(key) {\r\n\t\t\tcase enums.GROUP_MEMBER_BANNED:\r\n\t\t\tcase enums.GROUP_MEMBER_KICKED: {\r\n\t\t\t\t\r\n\t\t\t\tif (this.contextProviderRef.state.type === CometChat.ACTION_TYPE.TYPE_GROUP \r\n\t\t\t\t&& this.contextProviderRef.state.item.guid === group.guid\r\n\t\t\t\t&& options.user.uid === this.loggedInUser.uid) {\r\n\r\n\t\t\t\t\tthis.contextProviderRef.setItem({});\r\n\t\t\t\t\tthis.contextProviderRef.setType(\"\");\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase enums.GROUP_MEMBER_SCOPE_CHANGED: {\r\n\t\t\t\t\r\n\t\t\t\tif (this.contextProviderRef.state.type === CometChat.ACTION_TYPE.TYPE_GROUP\r\n\t\t\t\t&& this.contextProviderRef.state.item.guid === group.guid\r\n\t\t\t\t&& options.user.uid === this.loggedInUser.uid) {\r\n\r\n\t\t\t\t\tconst newObject = Object.assign({}, this.contextProviderRef.state.item, { \"scope\": options[\"scope\"] })\r\n\t\t\t\t\tthis.contextProviderRef.setItem(newObject);\r\n\t\t\t\t\tthis.contextProviderRef.setType(CometChat.ACTION_TYPE.TYPE_GROUP);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\t\r\n\t\tlet messageScreen = (\r\n\t\t\t\t<CometChatMessages \r\n\t\t\t\ttheme={this.props.theme}\r\n\t\t\t\tlang={this.props.lang}\r\n\t\t\t\t_parent=\"unified\"\r\n\t\t\t\tactionGenerated={this.actionHandler} />\r\n\t\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<CometChatContextProvider ref={el => this.contextProviderRef = el} user={this.props.chatWithUser} group={this.props.chatWithGroup} language={this.props.lang}>\r\n\t\t\t\t<div css={unifiedStyle(this.props)} className=\"cometchat cometchat--unified\" dir={Translator.getDirection(this.props.lang)}>\r\n\t\t\t\t\t<div css={unifiedSidebarStyle(this.state, this.props)} className=\"unified__sidebar\">\r\n\t\t\t\t\t\t<CometChatNavBar\r\n\t\t\t\t\t\t\tref={el => this.navBarRef = el}\r\n\t\t\t\t\t\t\ttheme={this.props.theme}\r\n\t\t\t\t\t\t\tactionGenerated={this.navBarAction} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div css={unifiedMainStyle(this.state, this.props)} className=\"unified__main\">\r\n\t\t\t\t\t\t{messageScreen}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<CometChatIncomingCall theme={this.props.theme} lang={this.props.lang} actionGenerated={this.actionHandler} />\r\n\t\t\t\t\t<CometChatIncomingDirectCall theme={this.props.theme} lang={this.props.lang} actionGenerated={this.actionHandler} />\r\n\t\t\t\t</div>\r\n\t\t\t</CometChatContextProvider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// Specifies the default values for props:\r\nCometChatUI.defaultProps = {\r\n\tlang: Translator.getDefaultLanguage(),\r\n\ttheme: theme,\r\n\tchatWithUser: \"\",\r\n\tchatWithGroup: \"\",\r\n};\r\n\r\nCometChatUI.propTypes = {\r\n\tlang: PropTypes.string,\r\n\ttheme: PropTypes.object,\r\n\tchatWithUser: PropTypes.string,\r\n\tchatWithGroup: PropTypes.string,\r\n}\r\n\r\nexport { CometChatUI };\r\n","\nimport { useState } from \"react\";\n\nimport \"./App.css\";\nimport Register from \"./Register\";\nimport Login from \"./Login\";\n import { CometChat } from \"@cometchat-pro/chat\";\nimport { CometChatUserList } from \"./cometchat-pro-react-ui-kit/CometChatWorkspace/src\";\nimport { CometChatUI } from \"./cometchat-pro-react-ui-kit/CometChatWorkspace/src\";\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [phone, setPhone] = useState(\"\");\n\n  // logout\n  const logout = () => {CometChat.logout().then(\n      () => {\n        //Logout completed successfully\n        console.log(\"Logout completed successfully\");\n        setUser(null);\n      },\n      (error) => {\n        //Logout failed with exception\n        console.log(\"Logout failed with exception:\", { error });\n      }\n    );};\n\n  // add friend\n  const addFriend = (e) => {\n    e.preventDefault();\n     const options = {\n      method: \"POST\",\n      headers: {\n        appId: \"appId\",\n        apiKey: \"apiKey\",\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n      body: JSON.stringify({ accepted: [phone] }),\n    };\n\n    fetch(`https://api-us.cometchat.io/v2.0/users/${user.uid}/friends`, options)\n      .then((response) => response.json())\n      .then((response) => {\n        console.log(response);\n        alert(\"Friend Added Successfully!\");\n      })\n      .catch((err) => {\n        console.error(err);\n        alert(\"Adding Friend Failed!\");\n      });\n  };\n\n  return (\n    <main>\n      <h1>Welcome to KareWise</h1>\n      {user ? (\n        <section id=\"chat_body\">\n          {/* logout button */}\n          <button onClick={() => logout()}>Logout</button>\n\n          {/* add friend form */}\n          <div>\n            <input\n              type=\"tel\"\n              required\n              name=\"phone\"\n              value={phone}\n              onChange={(e) => setPhone(e.target.value)}\n            />{\" \"}\n            <button onClick={(e) => addFriend(e)}>Add Friend</button>\n            \n          </div>\n\n          {/* chat body */}\n          <div style={{ width: \"95vw\", height: \"500px\" }}>\n            {/* chat will go here... */}\n            <CometChatUserList friendsOnly={true} />\n    \n              <CometChatUI chatWithUser=\"Somyakk\" />\n              \n          </div>\n        </section>\n      ) : (\n        <section id=\"auth_forms\">\n          {/* authentication forms */}\n          <Register setUser={setUser} />\n          <Login setUser={setUser} />\n           \n        </section>\n      )}\n    </main>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nconst appID = \"19860533bc0cf59b\";\nconst region = \"us\";\nconst appSetting = new CometChat.AppSettingsBuilder()\n  .subscribePresenceForAllUsers()\n  .setRegion(region)\n  .build();\nCometChat.init(appID, appSetting).then(\n  () => {\n    console.log(\"Initialization completed successfully\");\n    // You can now call login function.\n  },\n  (error) => {\n    console.log(\"Initialization failed with error:\", error);\n    // Check the reason for error and take appropriate action.\n  }\n);\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}